/*! For license information please see bundle~bundle~18ffb1da.1f08549e.js.LICENSE.txt */
(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[2],{0:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return h})),n.d(t,"l",(function(){return g})),n.d(t,"n",(function(){return p})),n.d(t,"m",(function(){return m})),n.d(t,"o",(function(){return w})),n.d(t,"r",(function(){return y})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return S})),n.d(t,"s",(function(){return v})),n.d(t,"t",(function(){return E})),n.d(t,"u",(function(){return A})),n.d(t,"v",(function(){return B})),n.d(t,"w",(function(){return O})),n.d(t,"x",(function(){return I})),n.d(t,"y",(function(){return M})),n.d(t,"z",(function(){return D})),n.d(t,"A",(function(){return L})),n.d(t,"B",(function(){return R})),n.d(t,"C",(function(){return j})),n.d(t,"D",(function(){return P})),n.d(t,"E",(function(){return T})),n.d(t,"F",(function(){return U})),n.d(t,"G",(function(){return F})),n.d(t,"H",(function(){return $})),n.d(t,"I",(function(){return N})),n.d(t,"J",(function(){return x})),n.d(t,"L",(function(){return C})),n.d(t,"K",(function(){return k})),n.d(t,"M",(function(){return H})),n.d(t,"N",(function(){return z})),n.d(t,"O",(function(){return q})),n.d(t,"P",(function(){return _})),n.d(t,"Q",(function(){return W})),n.d(t,"R",(function(){return J})),n.d(t,"T",(function(){return G})),n.d(t,"S",(function(){return V})),n.d(t,"ic",(function(){return K})),n.d(t,"U",(function(){return X})),n.d(t,"V",(function(){return Y})),n.d(t,"X",(function(){return Q})),n.d(t,"W",(function(){return Z})),n.d(t,"Y",(function(){return ee})),n.d(t,"Z",(function(){return te})),n.d(t,"ab",(function(){return ne})),n.d(t,"bb",(function(){return re})),n.d(t,"cb",(function(){return oe})),n.d(t,"db",(function(){return ie})),n.d(t,"eb",(function(){return se})),n.d(t,"fb",(function(){return ae})),n.d(t,"hb",(function(){return ue})),n.d(t,"lb",(function(){return ce})),n.d(t,"kb",(function(){return le})),n.d(t,"mb",(function(){return de})),n.d(t,"nb",(function(){return fe})),n.d(t,"pb",(function(){return he})),n.d(t,"ob",(function(){return ge})),n.d(t,"qb",(function(){return pe})),n.d(t,"rb",(function(){return me})),n.d(t,"sb",(function(){return we})),n.d(t,"tb",(function(){return ye})),n.d(t,"wb",(function(){return be})),n.d(t,"xb",(function(){return Se})),n.d(t,"yb",(function(){return ve})),n.d(t,"zb",(function(){return Ee})),n.d(t,"Ab",(function(){return Ae})),n.d(t,"Bb",(function(){return Be})),n.d(t,"Db",(function(){return Oe})),n.d(t,"Eb",(function(){return Ie})),n.d(t,"Fb",(function(){return Me})),n.d(t,"Cb",(function(){return De})),n.d(t,"ub",(function(){return Le})),n.d(t,"vb",(function(){return Re})),n.d(t,"Gb",(function(){return je})),n.d(t,"Mb",(function(){return Pe})),n.d(t,"Hb",(function(){return Te})),n.d(t,"Kb",(function(){return Ue})),n.d(t,"Ib",(function(){return Fe})),n.d(t,"Jb",(function(){return $e})),n.d(t,"Lb",(function(){return Ne})),n.d(t,"Nb",(function(){return xe})),n.d(t,"Ob",(function(){return Ce})),n.d(t,"Pb",(function(){return ke})),n.d(t,"Qb",(function(){return He})),n.d(t,"Rb",(function(){return ze})),n.d(t,"Sb",(function(){return qe})),n.d(t,"Tb",(function(){return _e})),n.d(t,"Ub",(function(){return We})),n.d(t,"Yb",(function(){return Je})),n.d(t,"Vb",(function(){return Ge})),n.d(t,"Wb",(function(){return Ve})),n.d(t,"Xb",(function(){return Ke})),n.d(t,"ac",(function(){return Xe})),n.d(t,"Zb",(function(){return Ye})),n.d(t,"bc",(function(){return Qe})),n.d(t,"cc",(function(){return Ze})),n.d(t,"dc",(function(){return et})),n.d(t,"ec",(function(){return tt})),n.d(t,"fc",(function(){return nt})),n.d(t,"gc",(function(){return rt})),n.d(t,"hc",(function(){return ot})),n.d(t,"jc",(function(){return it})),n.d(t,"kc",(function(){return st})),n.d(t,"mc",(function(){return at})),n.d(t,"pc",(function(){return ut})),n.d(t,"qc",(function(){return ct})),n.d(t,"nc",(function(){return lt})),n.d(t,"oc",(function(){return dt})),n.d(t,"lc",(function(){return ft})),n.d(t,"rc",(function(){return ht})),n.d(t,"tc",(function(){return gt})),n.d(t,"uc",(function(){return pt})),n.d(t,"vc",(function(){return mt})),n.d(t,"wc",(function(){return wt})),n.d(t,"xc",(function(){return yt})),n.d(t,"Cc",(function(){return bt})),n.d(t,"Ac",(function(){return St})),n.d(t,"Bc",(function(){return vt})),n.d(t,"zc",(function(){return Et})),n.d(t,"yc",(function(){return At})),n.d(t,"Ec",(function(){return Bt})),n.d(t,"Ic",(function(){return Ot})),n.d(t,"Oc",(function(){return It})),n.d(t,"Fc",(function(){return Mt})),n.d(t,"Hc",(function(){return Dt})),n.d(t,"Dc",(function(){return Lt})),n.d(t,"Kc",(function(){return Rt})),n.d(t,"Jc",(function(){return jt})),n.d(t,"Nc",(function(){return Pt})),n.d(t,"Gc",(function(){return Tt})),n.d(t,"Mc",(function(){return Ut})),n.d(t,"Pc",(function(){return Ft})),n.d(t,"Qc",(function(){return $t})),n.d(t,"Rc",(function(){return Nt})),n.d(t,"Sc",(function(){return xt})),n.d(t,"Tc",(function(){return Ct})),n.d(t,"Uc",(function(){return kt})),n.d(t,"Vc",(function(){return Ht})),n.d(t,"Wc",(function(){return zt})),n.d(t,"Xc",(function(){return qt})),n.d(t,"Lc",(function(){return _t})),n.d(t,"gb",(function(){return Wt})),n.d(t,"sc",(function(){return Jt})),n.d(t,"Yc",(function(){return Gt})),n.d(t,"ib",(function(){return Vt})),n.d(t,"jb",(function(){return Kt}));const r="Abs",o="Acos",i="Acosh",s="Add",a="AddN",u="All",c="Any",l="ArgMax",d="ArgMin",f="Asin",h="Asinh",g="Atan",p="Atanh",m="Atan2",w="AvgPool",y="AvgPoolGrad",b="AvgPool3D",S="AvgPool3DGrad",v="BatchMatMul",E="BatchToSpaceND",A="Bincount",B="BroadcastTo",O="Cast",I="Ceil",M="ClipByValue",D="Complex",L="ComplexAbs",R="Concat",j="Conv2D",P="Conv2DBackpropFilter",T="Conv2DBackpropInput",U="Conv3D",F="Conv3DBackpropFilterV2",$="Conv3DBackpropInputV2",N="Cos",x="Cosh",C="Cumsum",k="CropAndResize",H="DenseBincount",z="DepthToSpace",q="DepthwiseConv2dNative",_="DepthwiseConv2dNativeBackpropFilter",W="DepthwiseConv2dNativeBackpropInput",J="Dilation2D",G="Dilation2DBackpropInput",V="Dilation2DBackpropFilter",K="RealDiv",X="Elu",Y="EluGrad",Q="Erf",Z="Equal",ee="Exp",te="ExpandDims",ne="Expm1",re="FFT",oe="Fill",ie="FlipLeftRight",se="Floor",ae="FloorDiv",ue="FusedBatchNorm",ce="GatherV2",le="GatherNd",de="Greater",fe="GreaterEqual",he="Identity",ge="IFFT",pe="Imag",me="IsFinite",we="IsInf",ye="IsNan",be="LeakyRelu",Se="Less",ve="LessEqual",Ee="LinSpace",Ae="Log",Be="Log1p",Oe="LogicalAnd",Ie="LogicalNot",Me="LogicalOr",De="LogSoftmax",Le="LRN",Re="LRNGrad",je="Max",Pe="Maximum",Te="MaxPool",Ue="MaxPoolGrad",Fe="MaxPool3D",$e="MaxPool3DGrad",Ne="MaxPoolWithArgmax",xe="Mean",Ce="Min",ke="Minimum",He="MirrorPad",ze="Mod",qe="Multinomial",_e="Multiply",We="Neg",Je="NotEqual",Ge="NonMaxSuppressionV3",Ve="NonMaxSuppressionV4",Ke="NonMaxSuppressionV5",Xe="OnesLike",Ye="OneHot",Qe="Pack",Ze="PadV2",et="Pow",tt="Prelu",nt="Prod",rt="Range",ot="Real",it="Reciprocal",st="Relu",at="Reshape",ut="ResizeNearestNeighbor",ct="ResizeNearestNeighborGrad",lt="ResizeBilinear",dt="ResizeBilinearGrad",ft="Relu6",ht="Reverse",gt="Round",pt="Rsqrt",mt="ScatterNd",wt="Select",yt="Selu",bt="Slice",St="Sin",vt="Sinh",Et="Sign",At="Sigmoid",Bt="Softplus",Ot="Sqrt",It="Sum",Mt="SpaceToBatchND",Dt="SplitV",Lt="Softmax",Rt="SquaredDifference",jt="Square",Pt="Sub",Tt="SparseToDense",Ut="StridedSlice",Ft="Tan",$t="Tanh",Nt="Tile",xt="TopK",Ct="Transpose",kt="Unique",Ht="Unpack",zt="UnsortedSegmentSum",qt="ZerosLike",_t="Step",Wt="FromPixels",Jt="RotateWithOffset",Gt="_FusedMatMul",Vt="FusedConv2D",Kt="FusedDepthwiseConv2D"},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},200:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));n(143);var r=n(18),o=n(34),i=n(38);const s="tensorflowjs",a="models_store",u="model_info_store";function c(){if(!Object(r.b)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function l(e){const t=e.result;t.createObjectStore(a,{keyPath:"modelPath"}),t.createObjectStore(u,{keyPath:"modelPath"})}class d{constructor(e){if(this.indexedDB=c(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise(((e,n)=>{const r=this.indexedDB.open(s,1);r.onupgradeneeded=()=>l(r),r.onsuccess=()=>{const i=r.result;if(null==t){const t=i.transaction(a,"readonly"),r=t.objectStore(a).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(i.close(),n(r.error)),t.oncomplete=()=>i.close()}else{const r=Object(o.g)(t),s=i.transaction(u,"readwrite");let c=s.objectStore(u);const l=c.put({modelPath:this.modelPath,modelArtifactsInfo:r});let d;l.onsuccess=()=>{d=i.transaction(a,"readwrite");const o=d.objectStore(a).put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:r});o.onsuccess=()=>e({modelArtifactsInfo:r}),o.onerror=e=>{c=s.objectStore(u);const t=c.delete(this.modelPath);t.onsuccess=()=>(i.close(),n(o.error)),t.onerror=e=>(i.close(),n(o.error))}},l.onerror=e=>(i.close(),n(l.error)),s.oncomplete=()=>{null==d?i.close():d.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)}))}}d.URL_SCHEME="indexeddb://";const f=e=>{return Object(r.b)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(d.URL_SCHEME)?(t=e.slice(d.URL_SCHEME.length),new d(t)):null;var t};i.a.registerSaveRouter(f),i.a.registerLoadRouter(f);class h{constructor(){this.indexedDB=c()}async listModels(){return new Promise(((e,t)=>{const n=this.indexedDB.open(s,1);n.onupgradeneeded=()=>l(n),n.onsuccess=()=>{const r=n.result,o=r.transaction(u,"readonly"),i=o.objectStore(u).getAll();i.onsuccess=()=>{const t={};for(const e of i.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},i.onerror=e=>(r.close(),t(i.error)),o.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)}))}async removeModel(e){var t;return e=(t=e).startsWith(d.URL_SCHEME)?t.slice(d.URL_SCHEME.length):t,new Promise(((t,n)=>{const r=this.indexedDB.open(s,1);r.onupgradeneeded=()=>l(r),r.onsuccess=()=>{const o=r.result,i=o.transaction(u,"readwrite"),s=i.objectStore(u),c=s.get(e);let l;c.onsuccess=()=>{if(null==c.result)return o.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const r=s.delete(e),i=()=>{l=o.transaction(a,"readwrite");const r=l.objectStore(a).delete(e);r.onsuccess=()=>t(c.result.modelArtifactsInfo),r.onerror=e=>n(c.error)};r.onsuccess=i,r.onerror=e=>(i(),o.close(),n(c.error))}},c.onerror=e=>(o.close(),n(c.error)),i.oncomplete=()=>{null==l?o.close():l.oncomplete=()=>o.close()}},r.onerror=e=>n(r.error)}))}}},201:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return y}));n(143);var r=n(18),o=n(6),i=n(34),s=n(38);const a="/",u="tensorflowjs_models",c="info",l="model_topology",d="weight_specs",f="weight_data",h="model_metadata";function g(e){return{info:[u,e,c].join(a),topology:[u,e,l].join(a),weightSpecs:[u,e,d].join(a),weightData:[u,e,f].join(a),modelMetadata:[u,e,h].join(a)}}function p(e){const t=e.split(a);if(t.length<3)throw new Error(`Invalid key format: ${e}`);return t.slice(1,t.length-1).join(a)}class m{constructor(e){if(!Object(r.b)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=g(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Object(i.g)(e);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,Object(i.a)(e.weightData));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};return null!=e.signature&&(o.signature=e.signature),null!=e.userDefinedMetadata&&(o.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(o.modelInitializer=e.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:r}}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const e=JSON.parse(o);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=Object(i.b)(s),t}}m.URL_SCHEME="localstorage://";const w=e=>{return Object(r.b)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(m.URL_SCHEME)?(t=e.slice(m.URL_SCHEME.length),new m(t)):null;var t};s.a.registerSaveRouter(w),s.a.registerLoadRouter(w);class y{constructor(){Object(o.b)(Object(r.b)().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),Object(o.b)("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const e={},t=u+a,n=a+c;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);if(o.startsWith(t)&&o.endsWith(n)){e[p(o)]=JSON.parse(this.LS.getItem(o))}}return e}async removeModel(e){var t;const n=g(e=(t=e).startsWith(m.URL_SCHEME)?t.slice(m.URL_SCHEME.length):t);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),r}}},306:function(e,t,n){"use strict";n.r(t),n.d(t,"copyModel",(function(){return O.b})),n.d(t,"listModels",(function(){return O.c})),n.d(t,"moveModel",(function(){return O.d})),n.d(t,"removeModel",(function(){return O.e})),n.d(t,"browserFiles",(function(){return c})),n.d(t,"browserHTTPRequest",(function(){return S})),n.d(t,"concatenateArrayBuffers",(function(){return o.d})),n.d(t,"decodeWeights",(function(){return o.e})),n.d(t,"encodeWeights",(function(){return o.f})),n.d(t,"fromMemory",(function(){return A})),n.d(t,"getLoadHandlers",(function(){return i.b})),n.d(t,"getModelArtifactsInfoForJSON",(function(){return o.g})),n.d(t,"getSaveHandlers",(function(){return i.c})),n.d(t,"http",(function(){return b})),n.d(t,"isHTTPScheme",(function(){return w})),n.d(t,"loadWeights",(function(){return g})),n.d(t,"registerLoadRouter",(function(){return i.d})),n.d(t,"registerSaveRouter",(function(){return i.e})),n.d(t,"weightsLoaderFactory",(function(){return p})),n.d(t,"withSaveHandler",(function(){return B}));n(200),n(201),n(143);var r=n(18),o=n(34),i=n(38);function s(e){return new Promise((e=>setTimeout(e))).then(e)}class a{constructor(e){if(!Object(r.b)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(a.URL_SCHEME)&&(e=e.slice(a.URL_SCHEME.length)),null!=e&&0!==e.length||(e="model"),this.modelTopologyFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n};null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer);const i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(a.download=this.modelTopologyFileName,a.href=i,await s((()=>a.dispatchEvent(new MouseEvent("click")))),null!=e.weightData){const e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=t,await s((()=>e.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:Object(o.g)(e)}}}}a.URL_SCHEME="downloads://";class u{constructor(e){if(null==e||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.files=e}async load(){const e=this.files[0],t=this.files.slice(1);return new Promise(((n,r)=>{const i=new FileReader;i.onload=i=>{const s=JSON.parse(i.target.result),a=s.modelTopology;if(null==a)return void r(new Error(`modelTopology field is missing from file ${e.name}`));0===t.length&&n({modelTopology:a});const u=s.weightsManifest;if(null==u)return void r(new Error(`weightManifest field is missing from file ${e.name}`));let c;try{c=this.checkManifestAndWeightFiles(u,t)}catch(e){return void r(e)}const l=[],d=[],f=[];u.forEach((e=>{e.paths.forEach((e=>{d.push(e),f.push(null)})),l.push(...e.weights)})),u.forEach((e=>{e.paths.forEach((e=>{const t=new FileReader;t.onload=t=>{const r=t.target.result,i=d.indexOf(e);if(f[i]=r,-1===f.indexOf(null)){const e={modelTopology:a,weightSpecs:l,weightData:Object(o.d)(f),format:s.format,generatedBy:s.generatedBy,convertedBy:s.convertedBy};null!=s.signature&&(e.signature=s.signature),null!=s.userDefinedMetadata&&(e.userDefinedMetadata=s.userDefinedMetadata),null!=s.modelInitializer&&(e.modelInitializer=s.modelInitializer),n(e)}},t.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),t.readAsArrayBuffer(c[e])}))}))},i.onerror=t=>r(`Failed to read model topology and weights manifest JSON from file '${e.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),i.readAsText(e)}))}checkManifestAndWeightFiles(e,t){const n=[],r=t.map((e=>Object(o.c)(e.name))),i={};for(const s of e)s.paths.forEach((e=>{const s=Object(o.c)(e);if(-1!==n.indexOf(s))throw new Error(`Duplicate file basename found in weights manifest: '${s}'`);if(n.push(s),-1===r.indexOf(s))throw new Error(`Weight file with basename '${s}' is not provided.`);i[e]=t[r.indexOf(s)]}));if(n.length!==t.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${t.length}).`);return i}}function c(e){return new u(e)}i.a.registerSaveRouter((e=>Object(r.b)().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(a.URL_SCHEME)?function(e="model"){return new a(e)}(e.slice(a.URL_SCHEME.length)):null));var l=n(6);function d(e,t,n,r){!function(e){Object(l.b)(null!=e&&Array.isArray(e)&&e.length>0,(()=>"promises must be a none empty array"))}(e),function(e,t){Object(l.b)(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${e}`)),Object(l.b)(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${t}`)),Object(l.b)(t>=e,(()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`))}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(e.map((i=>(i.then((i=>{const s=n+ ++o/e.length*(r-n);return t(s),i})),i))))}var f=n(150);async function h(e,t){null==t&&(t={});const n=null==t.fetchFunc?Object(r.b)().platform.fetch:t.fetchFunc,o=e.map((e=>n(e,t.requestInit,{isBinary:!0}))),i=(null==t.onProgress?await Promise.all(o):await d(o,t.onProgress,0,.5)).map((e=>e.arrayBuffer()));return null==t.onProgress?await Promise.all(i):await d(i,t.onProgress,.5,1)}async function g(e,t="",n,r){return p((e=>h(e,{requestInit:r})))(e,t,n)}function p(e){return async(t,n="",r)=>{const i=t.map((()=>!1)),s={},a=null!=r?r.map((()=>!1)):[],u=[];if(t.forEach(((e,t)=>{let n=0;e.weights.forEach((e=>{const o="quantization"in e?e.quantization.dtype:e.dtype,c=f.a[o]*l.N(e.shape),d=()=>{i[t]=!0,null==s[t]&&(s[t]=[]),s[t].push({manifestEntry:e,groupOffset:n,sizeBytes:c})};null!=r?r.forEach(((t,n)=>{t===e.name&&(d(),a[n]=!0)})):d(),u.push(e.name),n+=c}))})),!a.every((e=>e))){const e=r.filter(((e,t)=>!a[t]));throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${u.join(", ")}.`)}const c=i.reduce(((e,t,n)=>(t&&e.push(n),e)),[]),d=[];c.forEach((e=>{t[e].paths.forEach((e=>{const t=n+(n.endsWith("/")?"":"/")+e;d.push(t)}))}));const h=await e(d),g={};let p=0;return c.forEach((e=>{const n=t[e].paths.length;let r=0;for(let e=0;e<n;e++)r+=h[p+e].byteLength;const i=new ArrayBuffer(r),a=new Uint8Array(i);let u=0;for(let e=0;e<n;e++){const t=new Uint8Array(h[p+e]);a.set(t,u),u+=t.byteLength}s[e].forEach((e=>{const t=i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),n=Object(o.e)(t,[e.manifestEntry]);for(const e in n)g[e]=n[e]})),p+=n})),g}}class m{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Object(l.b)("function"==typeof t.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=t.fetchFunc):this.fetch=Object(r.b)().platform.fetch,Object(l.b)(null!=e&&e.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(e)&&Object(l.b)(2===e.length,(()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`)),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n};null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin");const i=await this.fetch(this.path,t);if(i.ok)return{modelArtifactsInfo:Object(o.g)(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async load(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let t;try{t=await e.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}const n=t.modelTopology,r=t.weightsManifest,o=t.generatedBy,i=t.convertedBy,s=t.format,a=t.signature,u=t.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let c,l;if(null!=r){const e=await this.loadWeights(r);[c,l]=e}const d={modelTopology:n,weightSpecs:c,weightData:l,generatedBy:o,convertedBy:i,format:s};null!=a&&(d.signature=a),null!=u&&(d.userDefinedMetadata=u);const f=t.modelInitializer;return f&&(d.modelInitializer=f),d}async loadWeights(e){const t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){const t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}(t),i=this.weightPathPrefix||n,s=[];for(const t of e)s.push(...t.weights);const a=[],u=[];for(const t of e)for(const e of t.paths)null!=this.weightUrlConverter?u.push(this.weightUrlConverter(e)):a.push(i+e+r);this.weightUrlConverter&&a.push(...await Promise.all(u));const c=await h(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[s,Object(o.d)(c)]}}function w(e){return null!=e.match(m.URL_SCHEME_REGEX)}m.URL_SCHEME_REGEX=/^https?:\/\//;const y=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every((e=>w(e))):w(e),n)return b(e,t)}return null};function b(e,t){return new m(e,t)}function S(e,t){return b(e,t)}i.a.registerSaveRouter(y),i.a.registerLoadRouter(y);class v{constructor(e){this.modelArtifacts=e}async load(){return this.modelArtifacts}}class E{constructor(e){this.saveHandler=e}async save(e){return this.saveHandler(e)}}function A(e,t,n,r){if(1===arguments.length){return null!=e.modelTopology||null!=e.weightSpecs?new v(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new v({modelTopology:e}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new v({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r})}function B(e){return new E(e)}var O=n(85)},34:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return m}));var r=n(54),o=n(132),i=n(6),s=n(150);async function a(e,t){const n=[],r=[],o=Array.isArray(e)?e.map((e=>e.name)):Object.keys(e);for(let i=0;i<o.length;++i){const s=o[i],a=Array.isArray(e)?e[i].tensor:e[s];if("float32"!==a.dtype&&"int32"!==a.dtype&&"bool"!==a.dtype&&"string"!==a.dtype&&"complex64"!==a.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${a.dtype}`);const u={name:s,shape:a.shape,dtype:a.dtype};if("string"===a.dtype){const e=new Promise((async e=>{const t=await a.bytes(),n=t.reduce(((e,t)=>e+t.length),0)+4*t.length,r=new Uint8Array(n);let o=0;for(let e=0;e<t.length;e++){const n=t[e],i=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(i,o),o+=4,r.set(n,o),o+=n.length}e(r)}));r.push(e)}else r.push(a.data());null!=t&&(u.group=t),n.push(u)}return{data:c(await Promise.all(r)),specs:n}}function u(e,t){const n={};let a,u=0;for(const c of t){const t=c.name,l=c.dtype,d=c.shape,f=Object(i.N)(d);let h;if("quantization"in c){const n=c.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${c.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${c.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==l)throw new Error(`Weight ${c.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${l}.`)}const r=s.a[n.dtype],o=e.slice(u,u+f*r),i="uint8"===n.dtype?new Uint8Array(o):new Uint16Array(o);if("float32"===l)if("uint8"===n.dtype||"uint16"===n.dtype){h=new Float32Array(i.length);for(let e=0;e<i.length;e++){const t=i[e];h[e]=t*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===a&&(a=w()),h=a(i)}else{if("int32"!==l)throw new Error(`Unsupported dtype in weight '${t}': ${l}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);h=new Int32Array(i.length);for(let e=0;e<i.length;e++){const t=i[e];h[e]=Math.round(t*n.scale+n.min)}}u+=f*r}else if("string"===l){const t=Object(i.N)(c.shape);h=[];for(let n=0;n<t;n++){const t=new Uint32Array(e.slice(u,u+4))[0];u+=4;const n=new Uint8Array(e.slice(u,u+t));h.push(n),u+=t}}else{const i=s.a[l],a=e.slice(u,u+f*i);if("float32"===l)h=new Float32Array(a);else if("int32"===l)h=new Int32Array(a);else if("bool"===l)h=new Uint8Array(a);else{if("complex64"!==l)throw new Error(`Unsupported dtype in weight '${t}': ${l}`);{h=new Float32Array(a);const e=new Float32Array(h.length/2),i=new Float32Array(h.length/2);for(let t=0;t<e.length;t++)e[t]=h[2*t],i[t]=h[2*t+1];const s=Object(o.a)(e,d,"float32"),u=Object(o.a)(i,d,"float32");n[t]=Object(r.a)(s,u),s.dispose(),u.dispose()}}u+=f*i}"complex64"!==l&&(n[t]=Object(o.a)(h,d,l))}return n}function c(e){if(null===e)throw new Error(`Invalid input value: ${JSON.stringify(e)}`);let t=0;const n=[];e.forEach((e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${e.constructor.name}`)}));const r=new Uint8Array(t);let o=0;return n.forEach((e=>{r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}const l=void 0!==e&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function d(t){return l?e.byteLength(t):new Blob([t]).size}function f(t){if(l)return e.from(t).toString("base64");const n=new Uint8Array(t);let r="";for(let e=0,t=n.length;e<t;e++)r+=String.fromCharCode(n[e]);return btoa(r)}function h(t){if(l){const n=e.from(t,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(t),r=new Uint8Array(n.length);for(let e=0;e<n.length;++e)r.set([n.charCodeAt(e)],e);return r.buffer}function g(e){if(1===e.length)return e[0];let t=0;e.forEach((e=>{t+=e.byteLength}));const n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function p(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);const t=e.split("/");return t[t.length-1]}function m(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:d(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:d(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function w(){const e=function(){const e=e=>{let t=e<<13,n=0;for(;0==(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){const e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){const e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{const o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let o=0;o<r.length;o++){const s=r[o],a=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=a}return new Float32Array(o)}}}).call(this,n(451).Buffer)},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return a}));class r{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==r.instance&&(r.instance=new r),r.instance}static registerSaveRouter(e){r.getInstance().saveRouters.push(e)}static registerLoadRouter(e){r.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return r.getHandlers(e,"save")}static getLoadHandlers(e,t){return r.getHandlers(e,"load",t)}static getHandlers(e,t,n){const o=[];return("load"===t?r.getInstance().loadRouters:r.getInstance().saveRouters).forEach((t=>{const r=t(e,n);null!==r&&o.push(r)})),o}}const o=e=>r.registerSaveRouter(e),i=e=>r.registerLoadRouter(e),s=e=>r.getSaveHandlers(e),a=(e,t)=>r.getLoadHandlers(e,t)},65:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return d}));var r=n(18),o=n(149);const i=Object(o.a)("kernelRegistry",(()=>new Map)),s=Object(o.a)("gradRegistry",(()=>new Map));function a(e,t){const n=f(e,t);return i.get(n)}function u(e){return s.get(e)}function c(e){const t=i.entries(),n=[];for(;;){const{done:r,value:o}=t.next();if(r)break;const[i,s]=o,[a]=i.split("_");a===e&&n.push(s)}return n}function l(e){const{kernelName:t,backendName:n}=e,r=f(t,n);i.has(r)&&console.warn(`The kernel '${t}' for backend '${n}' is already registered`),i.set(r,e)}function d(e){const{kernelName:t}=e;s.has(t)&&Object(r.b)().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${t}'`),s.set(t,e)}function f(e,t){return`${t}_${e}`}},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return c}));var r=n(6),o=n(38);const i="://";class s{constructor(){this.managers={}}static getInstance(){return null==s.instance&&(s.instance=new s),s.instance}static registerManager(e,t){Object(r.b)(null!=e,(()=>"scheme must not be undefined or null.")),e.endsWith(i)&&(e=e.slice(0,e.indexOf(i))),Object(r.b)(e.length>0,(()=>"scheme must not be an empty string."));const n=s.getInstance();Object(r.b)(null==n.managers[e],(()=>`A model store manager is already registered for scheme '${e}'.`)),n.managers[e]=t}static getManager(e){const t=this.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(this.getInstance().managers)}}function a(e){if(-1===e.indexOf(i))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${s.getSchemes().join(",")}`);return{scheme:e.split(i)[0],path:e.split(i)[1]}}async function u(e,t,n=!1){Object(r.b)(e!==t,(()=>`Old path and new path are the same: '${e}'`));const i=o.a.getLoadHandlers(e);Object(r.b)(i.length>0,(()=>`Copying failed because no load handler is found for source URL ${e}.`)),Object(r.b)(i.length<2,(()=>`Copying failed because more than one (${i.length}) load handlers for source URL ${e}.`));const u=i[0],c=o.a.getSaveHandlers(t);Object(r.b)(c.length>0,(()=>`Copying failed because no save handler is found for destination URL ${t}.`)),Object(r.b)(c.length<2,(()=>`Copying failed because more than one (${i.length}) save handlers for destination URL ${t}.`));const l=c[0],d=a(e).scheme,f=a(e).path,h=d===a(e).scheme,g=await u.load();n&&h&&await s.getManager(d).removeModel(f);const p=await l.save(g);return n&&!h&&await s.getManager(d).removeModel(f),p.modelArtifactsInfo}async function c(){const e=s.getSchemes(),t={};for(const n of e){const e=await s.getManager(n).listModels();for(const r in e){t[n+i+r]=e[r]}}return t}async function l(e){const t=a(e);return s.getManager(t.scheme).removeModel(t.path)}async function d(e,t){return u(e,t,!1)}async function f(e,t){return u(e,t,!0)}}}]);
//# sourceMappingURL=bundle~bundle~18ffb1da.1f08549e.js.map