/*! For license information please see bundle~bundle~fb9c722d.0fb024a4.js.LICENSE.txt */
(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[13],{132:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return c}));var r=n(14),s=n(67);function i(t,e,n){const r=function(t,e,n){return function(t,e,n){let r=0,s=t.length,i=0,a=!1;for(;r<s;){i=r+(s-r>>>1);const o=n(e,t[i]);o>0?r=i+1:(s=i,a=!o)}return a?r:-r-1}(t,e,n||a)}(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function a(t,e){return t>e?1:t<e?-1:0}function o(t,e,n,r,s){return d(t,e,n,r,s,0).selectedIndices}function u(t,e,n,r,s,i){return d(t,e,n,r,s,0,!1,i,!0)}function c(t,e,n,r,s,i){return d(t,e,n,r,s,i,!0)}function d(t,e,n,a,o,u,c=!1,d=!1,p=!1){const g=[];for(let t=0;t<e.length;t++)e[t]>o&&g.push({score:e[t],boxIndex:t,suppressBeginIndex:0});g.sort(h);const m=u>0?-.5/u:0,b=[],y=[];for(;b.length<n&&g.length>0;){const e=g.pop(),{score:n,boxIndex:r,suppressBeginIndex:s}=e;if(n<o)break;let u=!1;for(let n=b.length-1;n>=s;--n){const s=l(t,r,b[n]);if(s>=a){u=!0;break}if(e.score=e.score*f(a,m,s),e.score<=o)break}e.suppressBeginIndex=b.length,u||(e.score===n?(b.push(r),y.push(e.score)):e.score>o&&i(g,e,h))}const k=b.length,I=n-k;d&&I>0&&(b.push(...new Array(I).fill(0)),y.push(...new Array(I).fill(0)));const v={selectedIndices:Object(s.a)(b,"int32")};return c&&(v.selectedScores=Object(s.a)(y,"float32")),p&&(v.validOutputs=Object(r.a)(k,"int32")),v}function l(t,e,n){const r=t.subarray(4*e,4*e+4),s=t.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),o=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),d=Math.min(s[1],s[3]),l=Math.max(s[0],s[2]),f=Math.max(s[1],s[3]),h=(o-i)*(u-a),p=(l-c)*(f-d);if(h<=0||p<=0)return 0;const g=Math.max(i,c),m=Math.max(a,d),b=Math.min(o,l),y=Math.min(u,f),k=Math.max(b-g,0)*Math.max(y-m,0);return k/(h+p-k)}function f(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function h(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}},142:function(t,e,n){"use strict";(function(t){var e=n(162),r=n(20);const s=Object(r.b)();s.registerFlag("DEBUG",(()=>!1),(t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),s.registerFlag("IS_BROWSER",(()=>e.a())),s.registerFlag("IS_NODE",(()=>void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node)),s.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),s.registerFlag("PROD",(()=>!1)),s.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>s.getBool("DEBUG"))),s.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),s.registerFlag("IS_TEST",(()=>!1))}).call(this,n(106))},162:function(t,e,n){"use strict";function r(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}n.d(e,"a",(function(){return r}))},20:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o}));const r="tfjsflags";class s{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags||(this.flags[t]=await this.evaluateFlag(t)),this.flags[t]}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(e instanceof Promise)throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;const t=function(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((t,...n)=>(function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("=")))),e}(this.global.location.search);if(r in t){t.tfjsflags.split(",").forEach((t=>{const[e,n]=t.split(":");this.urlFlags[e]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}(e,n)}))}}}function i(){return a}let a=null;function o(t){a=t}},302:function(t,e,n){"use strict";n.d(e,"Cb",(function(){return d.a})),n.d(e,"Jb",(function(){return l.a})),n.d(e,"Mb",(function(){return l.b})),n.d(e,"Nb",(function(){return l.c})),n.d(e,"Ob",(function(){return l.d})),n.d(e,"Pb",(function(){return l.e})),n.d(e,"Rb",(function(){return l.f})),n.d(e,"Zb",(function(){return l.i})),n.d(e,"cc",(function(){return l.j})),n.d(e,"dc",(function(){return l.k})),n.d(e,"gc",(function(){return l.l})),n.d(e,"hc",(function(){return l.m})),n.d(e,"jc",(function(){return l.n})),n.d(e,"kc",(function(){return l.o})),n.d(e,"lc",(function(){return l.p})),n.d(e,"mc",(function(){return l.q})),n.d(e,"nc",(function(){return l.r})),n.d(e,"pc",(function(){return l.s})),n.d(e,"Wb",(function(){return l.h})),n.d(e,"Qb",(function(){return f.a})),n.d(e,"Sb",(function(){return f.c})),n.d(e,"oc",(function(){return f.h})),n.d(e,"Yb",(function(){return f.e})),n.d(e,"fc",(function(){return f.g})),n.d(e,"Vb",(function(){return f.d})),n.d(e,"ac",(function(){return f.f})),n.d(e,"bc",(function(){return h.e})),n.d(e,"Tb",(function(){return p.b})),n.d(e,"Lb",(function(){return i})),n.d(e,"Xb",(function(){return s})),n.d(e,"qc",(function(){return c})),n.d(e,"Kb",(function(){return r})),n.d(e,"ic",(function(){return u})),n.d(e,"Ub",(function(){return a})),n.d(e,"ec",(function(){return o})),n.d(e,"I",(function(){return U})),n.d(e,"r",(function(){return q})),n.d(e,"a",(function(){return H.a})),n.d(e,"b",(function(){return H.d})),n.d(e,"c",(function(){return H.e})),n.d(e,"d",(function(){return H.f})),n.d(e,"e",(function(){return H.g})),n.d(e,"f",(function(){return H.h})),n.d(e,"g",(function(){return H.o})),n.d(e,"h",(function(){return H.s})),n.d(e,"i",(function(){return H.v})),n.d(e,"j",(function(){return H.w})),n.d(e,"k",(function(){return H.x})),n.d(e,"l",(function(){return H.z})),n.d(e,"m",(function(){return H.A})),n.d(e,"n",(function(){return H.C})),n.d(e,"o",(function(){return H.G})),n.d(e,"q",(function(){return H.J})),n.d(e,"p",(function(){return H.I})),n.d(e,"s",(function(){return H.K})),n.d(e,"t",(function(){return H.L})),n.d(e,"u",(function(){return H.U})),n.d(e,"v",(function(){return H.W})),n.d(e,"w",(function(){return H.Z})),n.d(e,"x",(function(){return H.ab})),n.d(e,"y",(function(){return H.bb})),n.d(e,"z",(function(){return H.cb})),n.d(e,"A",(function(){return H.eb})),n.d(e,"E",(function(){return H.ib})),n.d(e,"D",(function(){return H.hb})),n.d(e,"F",(function(){return H.jb})),n.d(e,"G",(function(){return H.kb})),n.d(e,"H",(function(){return H.mb})),n.d(e,"J",(function(){return H.tb})),n.d(e,"K",(function(){return H.ub})),n.d(e,"L",(function(){return H.wb})),n.d(e,"M",(function(){return H.zb})),n.d(e,"N",(function(){return H.Cb})),n.d(e,"P",(function(){return H.Ib})),n.d(e,"O",(function(){return H.Db})),n.d(e,"Q",(function(){return H.Jb})),n.d(e,"R",(function(){return H.Kb})),n.d(e,"S",(function(){return H.Lb})),n.d(e,"T",(function(){return H.Nb})),n.d(e,"X",(function(){return H.Sb})),n.d(e,"U",(function(){return H.Pb})),n.d(e,"V",(function(){return H.Qb})),n.d(e,"W",(function(){return H.Rb})),n.d(e,"Z",(function(){return H.Ub})),n.d(e,"Y",(function(){return H.Tb})),n.d(e,"ab",(function(){return H.Vb})),n.d(e,"bb",(function(){return H.Wb})),n.d(e,"cb",(function(){return H.Xb})),n.d(e,"db",(function(){return H.Yb})),n.d(e,"eb",(function(){return H.Zb})),n.d(e,"fb",(function(){return H.cc})),n.d(e,"hb",(function(){return H.ec})),n.d(e,"ib",(function(){return H.fc})),n.d(e,"gb",(function(){return H.dc})),n.d(e,"jb",(function(){return H.jc})),n.d(e,"lb",(function(){return H.lc})),n.d(e,"mb",(function(){return H.mc})),n.d(e,"nb",(function(){return H.nc})),n.d(e,"qb",(function(){return H.uc})),n.d(e,"pb",(function(){return H.sc})),n.d(e,"ob",(function(){return H.qc})),n.d(e,"tb",(function(){return H.Ac})),n.d(e,"zb",(function(){return H.Gc})),n.d(e,"sb",(function(){return H.zc})),n.d(e,"rb",(function(){return H.vc})),n.d(e,"vb",(function(){return H.Cc})),n.d(e,"ub",(function(){return H.Bc})),n.d(e,"yb",(function(){return H.Fc})),n.d(e,"xb",(function(){return H.Ec})),n.d(e,"Ab",(function(){return H.Hc})),n.d(e,"Bb",(function(){return H.Ic})),n.d(e,"Db",(function(){return H.Jc})),n.d(e,"Eb",(function(){return H.Kc})),n.d(e,"Fb",(function(){return H.Lc})),n.d(e,"Gb",(function(){return H.Mc})),n.d(e,"Hb",(function(){return H.Oc})),n.d(e,"wb",(function(){return H.Dc})),n.d(e,"kb",(function(){return H.kc})),n.d(e,"Ib",(function(){return H.Pc})),n.d(e,"B",(function(){return H.fb})),n.d(e,"C",(function(){return H.gb}));var r={};n.r(r),n.d(r,"axesAreInnerMostDims",(function(){return I.b})),n.d(r,"combineLocations",(function(){return I.c})),n.d(r,"computeOutAndReduceShapes",(function(){return I.d})),n.d(r,"expandShapeToKeepDim",(function(){return I.e})),n.d(r,"assertAxesAreInnerMostDims",(function(){return I.a})),n.d(r,"getAxesPermutation",(function(){return I.f})),n.d(r,"getUndoAxesPermutation",(function(){return I.h})),n.d(r,"getInnerMostAxes",(function(){return I.g})),n.d(r,"getBroadcastDims",(function(){return v.b})),n.d(r,"getReductionAxes",(function(){return v.c})),n.d(r,"assertAndGetBroadcastShape",(function(){return v.a})),n.d(r,"assertParamsConsistent",(function(){return w.a})),n.d(r,"computeOutShape",(function(){return w.b})),n.d(r,"computeDilation2DInfo",(function(){return D.d})),n.d(r,"computePool2DInfo",(function(){return D.e})),n.d(r,"computePool3DInfo",(function(){return D.f})),n.d(r,"computeConv2DInfo",(function(){return D.a})),n.d(r,"computeConv3DInfo",(function(){return D.b})),n.d(r,"computeDefaultPad",(function(){return D.c})),n.d(r,"tupleValuesAreOne",(function(){return D.i})),n.d(r,"eitherStridesOrDilationsAreOne",(function(){return D.h})),n.d(r,"convertConv2DDataFormat",(function(){return D.g})),n.d(r,"getFusedDyActivation",(function(){return F.c})),n.d(r,"getFusedBiasGradient",(function(){return F.b})),n.d(r,"applyActivation",(function(){return F.a})),n.d(r,"shouldFuse",(function(){return F.d})),n.d(r,"PARALLELIZE_THRESHOLD",(function(){return B.a})),n.d(r,"computeOptimalWindowSize",(function(){return B.b})),n.d(r,"slice_util",(function(){return u})),n.d(r,"upcastType",(function(){return S.a})),n.d(r,"getImageCenter",(function(){return x.a})),n.d(r,"getReshaped",(function(){return T.b})),n.d(r,"getPermuted",(function(){return T.a})),n.d(r,"getReshapedPermuted",(function(){return T.c})),n.d(r,"getSliceBeginCoords",(function(){return T.d})),n.d(r,"getSliceSize",(function(){return T.e})),n.d(r,"prepareAndValidate",(function(){return a.prepareAndValidate})),n.d(r,"validateUpdateShape",(function(){return o.validateUpdateShape})),n.d(r,"validateInput",(function(){return o.validateInput})),n.d(r,"calculateShapes",(function(){return o.calculateShapes})),n.d(r,"SELU_SCALEALPHA",(function(){return A.b})),n.d(r,"SELU_SCALE",(function(){return A.a})),n.d(r,"ERF_P",(function(){return E.f})),n.d(r,"ERF_A1",(function(){return E.a})),n.d(r,"ERF_A2",(function(){return E.b})),n.d(r,"ERF_A3",(function(){return E.c})),n.d(r,"ERF_A4",(function(){return E.d})),n.d(r,"ERF_A5",(function(){return E.e})),n.d(r,"warn",(function(){return M.b})),n.d(r,"log",(function(){return M.a})),n.d(r,"mergeRealAndImagArrays",(function(){return N})),n.d(r,"splitRealAndImagArrays",(function(){return O})),n.d(r,"complexWithEvenIndex",(function(){return P})),n.d(r,"complexWithOddIndex",(function(){return C})),n.d(r,"getComplexWithIndex",(function(){return R})),n.d(r,"assignToTypedArray",(function(){return j})),n.d(r,"exponents",(function(){return z})),n.d(r,"exponent",(function(){return L})),n.d(r,"prepareSplitSize",(function(){return V.a})),n.d(r,"segment_util",(function(){return $})),n.d(r,"castTensor",(function(){return _})),n.d(r,"reshapeTensor",(function(){return G})),n.d(r,"linspaceImpl",(function(){return K}));var s=n(301),i=n(271),a=n(161),o=n(144),u=n(49),c=n(0),d=n(6),l=n(13),f=n(29),h=n(65),p=n(20),g=n(5),m=n(10),b=n(14),y=n(67),k=n(52),I=n(18),v=n(11),w=n(145),D=n(16),F=n(40),B=n(170),S=n(85),x=n(272),T=n(273),A=n(147),E=n(274),M=n(275);function N(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function O(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function P(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let e=0;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}}function C(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let e=2;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}}function R(t,e){return{real:t[2*e],imag:t[2*e+1]}}function j(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function z(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function L(t,e,n){const r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}var V=n(164),$=n(171);function _(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();const e=Object(k.a)(t.shape),r=Object(m.a)(t,"float32"),s=n.complex(r,e);return e.dispose(),r.dispose(),s}if(!Object(c.hasEncodingLoss)(t.dtype,e))return g.a.makeTensorFromDataId(t.dataId,t.shape,e);if("complex64"===t.dtype){const r=n.real(t),s=Object(m.a)(r,e);return r.dispose(),s}if("int32"===e)return n.int(t);if("bool"===e){const e=Object(b.a)(0,t.dtype),r=n.notEqual(t,e);return e.dispose(),r}throw new Error(`Error in Cast: failed to cast ${t.dtype} to ${e}`)}function G(t,e){return g.a.makeTensorFromDataId(t.dataId,e,t.dtype)}function K(t,e,n){const r=(e-t)/(n-1),s=Object(c.makeZerosTypedArray)(n,"float32");s[0]=t;for(let t=1;t<s.length;t++)s[t]=s[t-1]+r;return Object(y.a)(s,"float32")}class q{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class U{time(t){return W("time")}read(t){return W("read")}readSync(t){return W("readSync")}numDataIds(){return W("numDataIds")}disposeData(t){return W("disposeData")}write(t,e,n){return W("write")}move(t,e,n,r){return W("move")}memory(){return W("memory")}floatPrecision(){return W("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}batchMatMul(t,e,n,r){return W("batchMatMul")}fusedBatchMatMul({a:t,b:e,transposeA:n,transposeB:r,bias:s,activation:i,preluActivationWeights:a}){return W("fusedBatchMatMul")}slice(t,e,n){return W("slice")}stridedSlice(t,e,n,r){return W("stridedSlice")}unstack(t,e){return W("unstack")}reverse(t,e){return W("reverse")}concat(t,e){return W("concat")}neg(t){return W("neg")}add(t,e){return W("add")}addN(t){return W("addN")}subtract(t,e){return W("subtract")}multiply(t,e){return W("multiply")}realDivide(t,e){return W("realDivide")}floorDiv(t,e){return W("floorDiv")}sum(t,e){return W("sum")}prod(t,e){return W("prod")}unsortedSegmentSum(t,e,n){return W("unsortedSegmentSum")}argMin(t,e){return W("argMin")}argMax(t,e){return W("argMax")}equal(t,e){return W("equal")}notEqual(t,e){return W("notEqual")}less(t,e){return W("less")}lessEqual(t,e){return W("lessEqual")}greater(t,e){return W("greater")}greaterEqual(t,e){return W("greaterEqual")}logicalNot(t){return W("logicalNot")}logicalAnd(t,e){return W("logicalAnd")}logicalOr(t,e){return W("logicalOr")}where(t){return W("where")}select(t,e,n){return W("select")}topk(t,e,n){return W("topk")}min(t,e){return W("min")}minimum(t,e){return W("minimum")}mod(t,e){return W("mod")}max(t,e){return W("max")}maximum(t,e){return W("maximum")}all(t,e){return W("all")}any(t,e){return W("any")}squaredDifference(t,e){return W("squaredDifference")}ceil(t){return W("ceil")}floor(t){return W("floor")}round(t){return W("round")}sign(t){return W("sign")}isNaN(t){return W("isNaN")}isInf(t){return W("isInf")}isFinite(t){return W("isFinite")}pow(t,e){return W("pow")}exp(t){return W("exp")}expm1(t){return W("expm1")}softmax(t,e){return W("softmax")}log(t){return W("log")}log1p(t){return W("log1p")}sqrt(t){return W("sqrt")}rsqrt(t){return W("rsqrt")}square(t){return W("square")}reciprocal(t){return W("reciprocal")}relu(t){return W("relu")}relu6(t){return W("relu6")}prelu(t,e){return W("prelu")}elu(t){return W("elu")}eluDer(t,e){return W("eluDer")}selu(t){return W("selu")}int(t){return W("int")}clip(t,e,n){return W("clip")}abs(t){return W("abs")}complexAbs(t){return W("complexAbs")}sigmoid(t){return W("sigmoid")}softplus(t){return W("softplus")}sin(t){return W("sin")}cos(t){return W("cos")}tan(t){return W("tan")}asin(t){return W("asin")}acos(t){return W("acos")}atan(t){return W("atan")}atan2(t,e){return W("atan2")}sinh(t){return W("sinh")}cosh(t){return W("cosh")}tanh(t){return W("tanh")}asinh(t){return W("asinh")}acosh(t){return W("acosh")}atanh(t){return W("atanh")}erf(t){return W("erf")}step(t,e){return W("step")}fusedConv2d({input:t,filter:e,convInfo:n,bias:r,activation:s,preluActivationWeights:i}){return W("fusedConv2d")}conv2d(t,e,n){return W("conv2d")}conv2dDerInput(t,e,n){return W("conv2dDerInput")}conv2dDerFilter(t,e,n){return W("conv2dDerFilter")}fusedDepthwiseConv2D({input:t,filter:e,convInfo:n,bias:r,activation:s,preluActivationWeights:i}){return W("fusedDepthwiseConv2D")}depthwiseConv2D(t,e,n){return W("depthwiseConv2D")}depthwiseConv2DDerInput(t,e,n){return W("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(t,e,n){return W("depthwiseConv2DDerFilter")}conv3d(t,e,n){return W("conv3d")}conv3dDerInput(t,e,n){return W("conv3dDerInput")}conv3dDerFilter(t,e,n){return W("conv3dDerFilter")}maxPool(t,e){return W("maxPool")}maxPoolBackprop(t,e,n,r){return W("maxPoolBackprop")}avgPool(t,e){return W("avgPool")}avgPoolBackprop(t,e,n){return W("avgPoolBackprop")}avgPool3d(t,e){return W("avgPool3d")}avgPool3dBackprop(t,e,n){return W("avgPool3dBackprop")}maxPool3d(t,e){return W("maxPool3d")}maxPool3dBackprop(t,e,n,r){return W("maxPool3dBackprop")}reshape(t,e){return W("reshape")}cast(t,e){return W("cast")}tile(t,e){return W("tile")}pad(t,e,n){return W("pad")}transpose(t,e){return W("transpose")}gather(t,e,n){return W("gather")}gatherND(t,e){return W("gatherND")}scatterND(t,e,n){return W("scatterND")}batchToSpaceND(t,e,n){return W("batchToSpaceND")}spaceToBatchND(t,e,n){return W("spaceToBatchND")}resizeBilinear(t,e,n,r){return W("resizeBilinear")}resizeBilinearBackprop(t,e,n){return W("resizeBilinearBackprop")}resizeNearestNeighbor(t,e,n,r){return W("resizeNearestNeighbor")}resizeNearestNeighborBackprop(t,e,n){return W("resizeNearestNeighborBackprop")}batchNorm(t,e,n,r,s,i){return W("batchNorm")}localResponseNormalization4D(t,e,n,r,s){return W("localResponseNormalization4D")}LRNGrad(t,e,n,r,s,i,a){return W("LRNGrad")}multinomial(t,e,n,r){return W("multinomial")}oneHot(t,e,n,r){return W("oneHot")}cumsum(t,e,n,r){return W("cumsum")}nonMaxSuppression(t,e,n,r,s){return W("nonMaxSuppression")}fft(t){return W("fft")}ifft(t){return W("ifft")}complex(t,e){return W("complex")}real(t){return W("real")}imag(t){return W("imag")}cropAndResize(t,e,n,r,s,i){return W("cropAndResize")}depthToSpace(t,e,n){return W("depthToSpace")}split(t,e,n){return W("split")}sparseToDense(t,e,n,r){return W("sparseToDense")}diag(t){return W("diag")}fill(t,e,n){return W("fill")}onesLike(t){return W("onesLike")}zerosLike(t){return W("zerosLike")}linspace(t,e,n){return W("linspace")}dispose(){return W("dispose")}}function W(t){throw new Error(`'${t}' not yet implemented or not found in the registry. Did you forget to import the kernel?`)}var H=n(2)},5:function(t,e,n){"use strict";n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return g}));var r=n(20),s=n(148),i=n(2),a=n(65),o=n(304),u=n(228),c=n(6),d=n(19),l=n(0);class f{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class h{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new f}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{const{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,n=1){return t in this.registryFactory?(console.warn(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;const{success:e,asyncInit:n}=this.initializeBackend(t);if(!(n?await e:e))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new o.a(this.backendInstance),!0}setupRegisteredKernels(){Object(a.c)(this.backendName).forEach((t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(t){Object(a.c)(t).forEach((e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])}))}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const n=e.factory();if(Promise.resolve(n)===n){const e=++this.pendingBackendInitId,r=n.then((n=>!(e<this.pendingBackendInitId)&&(this.registry[t]=n,this.pendingBackendInit=null,!0))).catch((n=>(e<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}return this.registry[t]=n,{success:!0,asyncInit:!1}}catch(e){return console.warn(`Initialization of backend ${t} failed`),console.warn(e.stack||e.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority))}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],{success:r,asyncInit:s}=this.initializeBackend(n);if(s||r)return{name:n,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const n=this.state.tensorInfo.get(e),r=n.backend,s=this.readSync(e);r.disposeData(e),n.backend=t,t.move(e,s,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=e(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(t,e,n){t();try{const t=n();return e(),t}catch(t){throw e(),t}}nextTensorId(){return h.nextTensorId++}nextVariableId(){return h.nextVariableId++}clone(t){const e=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[e],(t=>({x:()=>{const e="float32",n={x:t},r={dtype:e};return g.runKernelFunc((n=>n.cast(t,e)),n,null,i.v,r)}})),[],{}),e}runKernel(t,e,n,r,s){return this.runKernelFunc(null,e,null,t,n,r,s)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){const r=this.backend.numDataIds();let s=0;n.forEach((t=>{s+="complex64"===t.dtype?3:1}));const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-e-s-i;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${t}'`)}runKernelFunc(t,e,n,r,s,i,o){let u,c=[];const d=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");const l=this.state.numBytes,f=this.state.numTensors;let h;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);const p=Object(a.b)(r,this.backendName);let g,m;if(null!=p)h=()=>{const t=this.backend.numDataIds();g=p.kernelFunc({inputs:e,attrs:s,backend:this.backend});const n=Array.isArray(g)?g:[g];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,t,n);const a=n.map((({dataId:t,shape:e,dtype:n})=>this.makeTensorFromDataId(t,e,n)));if(d){let t=this.getTensorsForGradient(r,e,a);if(null==t){null==o&&(o=[]);const e=a.filter(((t,e)=>o[e]));t=(i||[]).slice().concat(e)}c=this.saveTensorsForBackwardMode(t)}return a};else{const e=t=>{d&&(c=t.map((t=>this.keep(this.clone(t)))))};h=()=>{const n=this.backend.numDataIds();g=this.tidy((()=>t(this.backend,e)));const s=Array.isArray(g)?g:[g];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(r,n,s),s}}return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(m=this.profiler.profileKernel(r,e,(()=>h())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(m),u=m.outputs):u=h()})),d&&this.addTapeNode(r,e,u,n,c,s),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-l,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-f,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(e).map((t=>null!=e[t]?e[t].shape:null)),outputShapes:u.map((t=>t.shape)),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(g)?u:u[0]}saveTensorsForBackwardMode(t){return t.map((t=>this.keep(this.clone(t))))}getTensorsForGradient(t,e,n){const r=Object(a.a)(t);if(null!=r){const t=r.inputsToSave||[],s=r.outputsToSave||[];let i;r.saveAllInputs?(l.assert(Array.isArray(e),(()=>"saveAllInputs is true, expected inputs to be an array.")),i=Object.keys(e).map((t=>e[t]))):i=t.map((t=>e[t]));const a=n.filter(((t,e)=>s[e]));return i.concat(a)}return null}makeTensor(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let s=t;"string"===n&&l.isString(t[0])&&(s=t.map((t=>l.encodeString(t))));const i=r.write(s,e,n),a=new c.a(e,n,i,this.nextTensorId());if(this.incRef(a,r),"string"===n){const t=this.state.tensorInfo.get(i),e=Object(l.bytesFromStringArray)(s);this.state.numBytes+=e-t.bytes,t.bytes=e}return a}makeTensorFromDataId(t,e,n,r){n=n||"float32";const s=new c.a(e,n,t,this.nextTensorId());return this.incRef(s,r),s}makeVariable(t,e=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));const s=new c.c(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[s.name])throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}incRef(t,e){const n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*l.bytesPerElement(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n,refCount:0}),this.state.numBytes+=n}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof c.c||this.track(t)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;this.state.numTensors--,"string"===t.dtype&&this.state.numStringTensors--;const e=this.state.tensorInfo.get(t.dataId);e.refCount<=1?("complex64"!==t.dtype&&(this.state.numBytes-=e.bytes),this.state.numDataBuffers--,e.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}disposeVariables(){for(const t in this.state.registeredVariables){const e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((t=>t.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const t of this.state.activeProfile.kernels)t.kernelTimeMs=await t.kernelTimeMs,t.extraInfo=await t.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,s,i){const o={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:s},u=Object(a.a)(t);null!=u&&(r=u.gradFunc),null!=r&&(o.gradient=t=>(t=t.map(((t,e)=>{if(null==t){const t=n[e],r=l.makeZerosTypedArray(t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t})),r(t.length>1?t:t[0],s,i))),this.state.activeTape.push(o)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=Object(d.a)(t),n=new Set(e.map((t=>t.id)));for(let t=0;t<this.state.activeScope.track.length;t++){const e=this.state.activeScope.track[t];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach((t=>{t.kept||t.scopeId!==r.id||this.track(t)}))}gradients(t,e,n,r=!1){if(l.assert(e.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const s=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",t)));l.assert(s instanceof c.a,(()=>"The result y returned by f() must be a tensor."));const i=Object(u.b)(this.state.activeTape,e,s);if(!r&&0===i.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const t={};t[s.id]=null==n?function(t){const e=Object(l.makeOnesTypedArray)(Object(l.sizeFromShape)(t),"float32");return g.makeTensor(e,t,"float32")}(s.shape):n,Object(u.a)(t,i,(t=>this.tidy(t)),m);const r=e.map((e=>t[e.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((t=>{for(const e of t.saved)e.dispose()})),this.state.activeTape=null),{value:s,grads:r}}))}customGrad(t){return l.assert(l.isFunction(t),(()=>"The f passed in customGrad(f) must be a function.")),(...e)=>{let n;l.assert(e.every((t=>t instanceof c.a)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};return e.forEach(((t,e)=>{r[e]=t})),this.runKernelFunc(((r,s)=>(n=t(...e,s),l.assert(n.value instanceof c.a,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),l.assert(l.isFunction(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value)),r,((t,r)=>{const s=n.gradFunc(t,r),i=Array.isArray(s)?s:[s];l.assert(i.length===e.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),l.assert(i.every((t=>t instanceof c.a)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const a={};return i.forEach(((t,e)=>{a[e]=()=>t})),a}))}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}async time(t){const e=Object(l.now)(),n=await this.backend.time(t);return n.wallMs=Object(l.now)()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new f;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function p(){const t=Object(s.b)();if(null==t._tfengine){const e=new r.a(t);t._tfengine=new h(e)}return Object(r.c)(t._tfengine.ENV),Object(c.f)((()=>t._tfengine)),t._tfengine}h.nextTensorId=0,h.nextVariableId=0;const g=p();function m(t,e){const n={a:t,b:e};return g.runKernelFunc(((n,r)=>{const s=n.add(t,e);return r([t,e]),s}),n,null,i.d)}},526:function(t,e,n){"use strict";var r=n(5),s=(n(142),n(527),n(531),n(81)),i=n(10),a=n(62),o=n(163),u=n(6);Object(r.b)();const c={buffer:s.a,cast:i.a,clone:a.a,print:o.a};Object(u.e)(c)}}]);
//# sourceMappingURL=bundle~bundle~fb9c722d.0fb024a4.js.map