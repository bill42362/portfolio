/*! For license information please see bundle~bundle~fb9c722d.eef1b94b.js.LICENSE.txt */
(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[10],{0:function(t,e,n){"use strict";n.d(e,"Jb",(function(){return d.a})),n.d(e,"Rb",(function(){return U.a})),n.d(e,"Ub",(function(){return U.b})),n.d(e,"Vb",(function(){return U.c})),n.d(e,"Wb",(function(){return U.d})),n.d(e,"Xb",(function(){return U.e})),n.d(e,"Yb",(function(){return U.f})),n.d(e,"ac",(function(){return U.g})),n.d(e,"dc",(function(){return U.h})),n.d(e,"jc",(function(){return U.k})),n.d(e,"mc",(function(){return U.l})),n.d(e,"nc",(function(){return U.m})),n.d(e,"qc",(function(){return U.n})),n.d(e,"rc",(function(){return U.o})),n.d(e,"tc",(function(){return U.q})),n.d(e,"uc",(function(){return U.r})),n.d(e,"vc",(function(){return U.t})),n.d(e,"wc",(function(){return U.u})),n.d(e,"xc",(function(){return U.v})),n.d(e,"yc",(function(){return U.w})),n.d(e,"Ac",(function(){return U.x})),n.d(e,"gc",(function(){return U.j})),n.d(e,"Zb",(function(){return _.a})),n.d(e,"bc",(function(){return _.c})),n.d(e,"zc",(function(){return _.h})),n.d(e,"ic",(function(){return _.e})),n.d(e,"pc",(function(){return _.g})),n.d(e,"fc",(function(){return _.d})),n.d(e,"kc",(function(){return _.f})),n.d(e,"lc",(function(){return z.d})),n.d(e,"cc",(function(){return f.b})),n.d(e,"Tb",(function(){return P})),n.d(e,"hc",(function(){return r})),n.d(e,"Bc",(function(){return $})),n.d(e,"Sb",(function(){return o})),n.d(e,"sc",(function(){return C})),n.d(e,"ec",(function(){return L})),n.d(e,"oc",(function(){return N})),n.d(e,"J",(function(){return kt.b})),n.d(e,"r",(function(){return kt.a})),n.d(e,"a",(function(){return vt.a})),n.d(e,"b",(function(){return vt.d})),n.d(e,"c",(function(){return vt.e})),n.d(e,"d",(function(){return vt.f})),n.d(e,"e",(function(){return vt.g})),n.d(e,"f",(function(){return vt.h})),n.d(e,"g",(function(){return vt.o})),n.d(e,"h",(function(){return vt.q})),n.d(e,"i",(function(){return vt.t})),n.d(e,"j",(function(){return vt.u})),n.d(e,"k",(function(){return vt.v})),n.d(e,"l",(function(){return vt.y})),n.d(e,"m",(function(){return vt.z})),n.d(e,"n",(function(){return vt.B})),n.d(e,"o",(function(){return vt.D})),n.d(e,"q",(function(){return vt.G})),n.d(e,"p",(function(){return vt.F})),n.d(e,"s",(function(){return vt.I})),n.d(e,"t",(function(){return vt.J})),n.d(e,"kb",(function(){return vt.Vb})),n.d(e,"u",(function(){return vt.P})),n.d(e,"v",(function(){return vt.R})),n.d(e,"w",(function(){return vt.S})),n.d(e,"x",(function(){return vt.V})),n.d(e,"y",(function(){return vt.W})),n.d(e,"z",(function(){return vt.X})),n.d(e,"A",(function(){return vt.Y})),n.d(e,"B",(function(){return vt.ab})),n.d(e,"F",(function(){return vt.eb})),n.d(e,"E",(function(){return vt.db})),n.d(e,"G",(function(){return vt.fb})),n.d(e,"H",(function(){return vt.gb})),n.d(e,"I",(function(){return vt.ib})),n.d(e,"K",(function(){return vt.mb})),n.d(e,"L",(function(){return vt.nb})),n.d(e,"M",(function(){return vt.ob})),n.d(e,"N",(function(){return vt.qb})),n.d(e,"O",(function(){return vt.sb})),n.d(e,"P",(function(){return vt.vb})),n.d(e,"R",(function(){return vt.zb})),n.d(e,"Q",(function(){return vt.wb})),n.d(e,"S",(function(){return vt.Ab})),n.d(e,"T",(function(){return vt.Bb})),n.d(e,"U",(function(){return vt.Cb})),n.d(e,"V",(function(){return vt.Db})),n.d(e,"W",(function(){return vt.Gb})),n.d(e,"X",(function(){return vt.Hb})),n.d(e,"bb",(function(){return vt.Lb})),n.d(e,"Y",(function(){return vt.Ib})),n.d(e,"Z",(function(){return vt.Jb})),n.d(e,"ab",(function(){return vt.Kb})),n.d(e,"db",(function(){return vt.Nb})),n.d(e,"cb",(function(){return vt.Mb})),n.d(e,"eb",(function(){return vt.Ob})),n.d(e,"fb",(function(){return vt.Pb})),n.d(e,"gb",(function(){return vt.Qb})),n.d(e,"hb",(function(){return vt.Rb})),n.d(e,"ib",(function(){return vt.Sb})),n.d(e,"jb",(function(){return vt.Tb})),n.d(e,"lb",(function(){return vt.Xb})),n.d(e,"nb",(function(){return vt.Zb})),n.d(e,"ob",(function(){return vt.ac})),n.d(e,"mb",(function(){return vt.Yb})),n.d(e,"pb",(function(){return vt.cc})),n.d(e,"rb",(function(){return vt.ec})),n.d(e,"sb",(function(){return vt.fc})),n.d(e,"tb",(function(){return vt.gc})),n.d(e,"ub",(function(){return vt.hc})),n.d(e,"xb",(function(){return vt.nc})),n.d(e,"wb",(function(){return vt.lc})),n.d(e,"vb",(function(){return vt.jc})),n.d(e,"Ab",(function(){return vt.xc})),n.d(e,"Gb",(function(){return vt.Gc})),n.d(e,"zb",(function(){return vt.wc})),n.d(e,"yb",(function(){return vt.oc})),n.d(e,"Cb",(function(){return vt.zc})),n.d(e,"Bb",(function(){return vt.yc})),n.d(e,"Eb",(function(){return vt.Bc})),n.d(e,"Fb",(function(){return vt.Fc})),n.d(e,"Hb",(function(){return vt.Hc})),n.d(e,"Ib",(function(){return vt.Ic})),n.d(e,"Kb",(function(){return vt.Jc})),n.d(e,"Lb",(function(){return vt.Kc})),n.d(e,"Mb",(function(){return vt.Lc})),n.d(e,"Nb",(function(){return vt.Mc})),n.d(e,"Ob",(function(){return vt.Oc})),n.d(e,"Pb",(function(){return vt.Pc})),n.d(e,"Db",(function(){return vt.Ac})),n.d(e,"qb",(function(){return vt.dc})),n.d(e,"Qb",(function(){return vt.Qc})),n.d(e,"C",(function(){return vt.bb})),n.d(e,"D",(function(){return vt.cb}));var r={};n.r(r),n.d(r,"copyModel",(function(){return j.b})),n.d(r,"listModels",(function(){return j.c})),n.d(r,"moveModel",(function(){return j.d})),n.d(r,"removeModel",(function(){return j.e})),n.d(r,"browserFiles",(function(){return y})),n.d(r,"browserHTTPRequest",(function(){return T})),n.d(r,"concatenateArrayBuffers",(function(){return h.d})),n.d(r,"decodeWeights",(function(){return h.e})),n.d(r,"encodeWeights",(function(){return h.f})),n.d(r,"fromMemory",(function(){return R})),n.d(r,"getLoadHandlers",(function(){return g.b})),n.d(r,"getModelArtifactsInfoForJSON",(function(){return h.g})),n.d(r,"getSaveHandlers",(function(){return g.c})),n.d(r,"http",(function(){return M})),n.d(r,"isHTTPScheme",(function(){return B})),n.d(r,"loadWeights",(function(){return I})),n.d(r,"registerLoadRouter",(function(){return g.d})),n.d(r,"registerSaveRouter",(function(){return g.e})),n.d(r,"weightsLoaderFactory",(function(){return E})),n.d(r,"withSaveHandler",(function(){return x}));var o={};n.r(o),n.d(o,"axesAreInnerMostDims",(function(){return H.b})),n.d(o,"combineLocations",(function(){return H.c})),n.d(o,"computeOutAndReduceShapes",(function(){return H.d})),n.d(o,"expandShapeToKeepDim",(function(){return H.e})),n.d(o,"assertAxesAreInnerMostDims",(function(){return H.a})),n.d(o,"getAxesPermutation",(function(){return H.f})),n.d(o,"getUndoAxesPermutation",(function(){return H.h})),n.d(o,"getInnerMostAxes",(function(){return H.g})),n.d(o,"getBroadcastDims",(function(){return W.b})),n.d(o,"getReductionAxes",(function(){return W.c})),n.d(o,"assertAndGetBroadcastShape",(function(){return W.a})),n.d(o,"assertParamsConsistent",(function(){return q.a})),n.d(o,"computeOutShape",(function(){return q.b})),n.d(o,"computeDilation2DInfo",(function(){return V.d})),n.d(o,"computePool2DInfo",(function(){return V.e})),n.d(o,"computePool3DInfo",(function(){return V.f})),n.d(o,"computeConv2DInfo",(function(){return V.a})),n.d(o,"computeConv3DInfo",(function(){return V.b})),n.d(o,"computeDefaultPad",(function(){return V.c})),n.d(o,"tupleValuesAreOne",(function(){return V.i})),n.d(o,"eitherStridesOrDilationsAreOne",(function(){return V.h})),n.d(o,"convertConv2DDataFormat",(function(){return V.g})),n.d(o,"getFusedDyActivation",(function(){return G.c})),n.d(o,"getFusedBiasGradient",(function(){return G.b})),n.d(o,"applyActivation",(function(){return G.a})),n.d(o,"shouldFuse",(function(){return G.d})),n.d(o,"PARALLELIZE_THRESHOLD",(function(){return J.a})),n.d(o,"computeOptimalWindowSize",(function(){return J.b})),n.d(o,"slice_util",(function(){return C})),n.d(o,"upcastType",(function(){return K.a})),n.d(o,"getImageCenter",(function(){return Z.a})),n.d(o,"getReshaped",(function(){return Y.b})),n.d(o,"getPermuted",(function(){return Y.a})),n.d(o,"getReshapedPermuted",(function(){return Y.c})),n.d(o,"getSliceBeginCoords",(function(){return Y.d})),n.d(o,"getSliceSize",(function(){return Y.e})),n.d(o,"prepareAndValidate",(function(){return L.prepareAndValidate})),n.d(o,"validateUpdateShape",(function(){return N.validateUpdateShape})),n.d(o,"validateInput",(function(){return N.validateInput})),n.d(o,"calculateShapes",(function(){return N.calculateShapes})),n.d(o,"SELU_SCALEALPHA",(function(){return Q.b})),n.d(o,"SELU_SCALE",(function(){return Q.a})),n.d(o,"ERF_P",(function(){return X.f})),n.d(o,"ERF_A1",(function(){return X.a})),n.d(o,"ERF_A2",(function(){return X.b})),n.d(o,"ERF_A3",(function(){return X.c})),n.d(o,"ERF_A4",(function(){return X.d})),n.d(o,"ERF_A5",(function(){return X.e})),n.d(o,"warn",(function(){return tt.b})),n.d(o,"log",(function(){return tt.a})),n.d(o,"mergeRealAndImagArrays",(function(){return et})),n.d(o,"splitRealAndImagArrays",(function(){return nt})),n.d(o,"complexWithEvenIndex",(function(){return rt})),n.d(o,"complexWithOddIndex",(function(){return ot})),n.d(o,"getComplexWithIndex",(function(){return it})),n.d(o,"assignToTypedArray",(function(){return st})),n.d(o,"exponents",(function(){return at})),n.d(o,"exponent",(function(){return ut})),n.d(o,"decodeEinsumEquation",(function(){return lt})),n.d(o,"getEinsumPermutation",(function(){return ft})),n.d(o,"checkEinsumDimSizes",(function(){return ht})),n.d(o,"getEinsumComputePath",(function(){return gt})),n.d(o,"isIdentityPermutation",(function(){return pt})),n.d(o,"prepareSplitSize",(function(){return bt.a})),n.d(o,"segment_util",(function(){return yt})),n.d(o,"fromUint8ToStringArray",(function(){return wt})),n.d(o,"fromStringArrayToUint8",(function(){return St}));var i=n(2),s=(n(103),n(432),n(436),n(55)),a=n(18),u=n(44),c=n(128),d=n(16);Object(i.b)();const l={buffer:s.a,cast:a.a,clone:u.a,print:c.a};Object(d.e)(l);n(155),n(156);var f=n(9),h=n(24),g=n(29);function p(t){return new Promise((t=>setTimeout(t))).then(t)}class m{constructor(t){if(!Object(f.b)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(m.URL_SCHEME)&&(t=t.slice(m.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}async save(t){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n};null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer);const o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),i=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor;if(i.download=this.modelTopologyFileName,i.href=o,await p((()=>i.dispatchEvent(new MouseEvent("click")))),null!=t.weightData){const t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=e,await p((()=>t.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:Object(h.g)(t)}}}}m.URL_SCHEME="downloads://";class b{constructor(t){if(null==t||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.files=t}async load(){const t=this.files[0],e=this.files.slice(1);return new Promise(((n,r)=>{const o=new FileReader;o.onload=o=>{const i=JSON.parse(o.target.result),s=i.modelTopology;if(null==s)return void r(new Error(`modelTopology field is missing from file ${t.name}`));0===e.length&&n({modelTopology:s});const a=i.weightsManifest;if(null==a)return void r(new Error(`weightManifest field is missing from file ${t.name}`));let u;try{u=this.checkManifestAndWeightFiles(a,e)}catch(t){return void r(t)}const c=[],d=[],l=[];a.forEach((t=>{t.paths.forEach((t=>{d.push(t),l.push(null)})),c.push(...t.weights)})),a.forEach((t=>{t.paths.forEach((t=>{const e=new FileReader;e.onload=e=>{const r=e.target.result,o=d.indexOf(t);if(l[o]=r,-1===l.indexOf(null)){const t={modelTopology:s,weightSpecs:c,weightData:Object(h.d)(l),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy};null!=i.signature&&(t.signature=i.signature),null!=i.userDefinedMetadata&&(t.userDefinedMetadata=i.userDefinedMetadata),null!=i.modelInitializer&&(t.modelInitializer=i.modelInitializer),n(t)}},e.onerror=e=>r(`Failed to weights data from file of path '${t}'.`),e.readAsArrayBuffer(u[t])}))}))},o.onerror=e=>r(`Failed to read model topology and weights manifest JSON from file '${t.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),o.readAsText(t)}))}checkManifestAndWeightFiles(t,e){const n=[],r=e.map((t=>Object(h.c)(t.name))),o={};for(const i of t)i.paths.forEach((t=>{const i=Object(h.c)(t);if(-1!==n.indexOf(i))throw new Error(`Duplicate file basename found in weights manifest: '${i}'`);if(n.push(i),-1===r.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);o[t]=e[r.indexOf(i)]}));if(n.length!==e.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${e.length}).`);return o}}function y(t){return new b(t)}g.a.registerSaveRouter((t=>Object(f.b)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(m.URL_SCHEME)?function(t="model"){return new m(t)}(t.slice(m.URL_SCHEME.length)):null));var w=n(5);function S(t,e,n,r){!function(t){Object(w.b)(null!=t&&Array.isArray(t)&&t.length>0,(()=>"promises must be a none empty array"))}(t),function(t,e){Object(w.b)(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${t}`)),Object(w.b)(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${e}`)),Object(w.b)(e>=t,(()=>`startFraction must be no more than endFraction, but got startFraction ${t} and endFraction ${e}`))}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(t.map((i=>(i.then((i=>{const s=n+ ++o/t.length*(r-n);return e(s),i})),i))))}var k=n(113);async function v(t,e){null==e&&(e={});const n=null==e.fetchFunc?Object(f.b)().platform.fetch:e.fetchFunc,r=t.map((t=>n(t,e.requestInit,{isBinary:!0}))),o=(null==e.onProgress?await Promise.all(r):await S(r,e.onProgress,0,.5)).map((t=>t.arrayBuffer()));return null==e.onProgress?await Promise.all(o):await S(o,e.onProgress,.5,1)}async function I(t,e="",n,r){return E((t=>v(t,{requestInit:r})))(t,e,n)}function E(t){return async(e,n="",r)=>{const o=e.map((()=>!1)),i={},s=null!=r?r.map((()=>!1)):[],a=[];if(e.forEach(((t,e)=>{let n=0;t.weights.forEach((t=>{const u="quantization"in t?t.quantization.dtype:t.dtype,c=k.a[u]*w.O(t.shape),d=()=>{o[e]=!0,null==i[e]&&(i[e]=[]),i[e].push({manifestEntry:t,groupOffset:n,sizeBytes:c})};null!=r?r.forEach(((e,n)=>{e===t.name&&(d(),s[n]=!0)})):d(),a.push(t.name),n+=c}))})),!s.every((t=>t))){const t=r.filter(((t,e)=>!s[e]));throw new Error(`Could not find weights in manifest with names: ${t.join(", ")}. \nManifest JSON has weights with names: ${a.join(", ")}.`)}const u=o.reduce(((t,e,n)=>(e&&t.push(n),t)),[]),c=[];u.forEach((t=>{e[t].paths.forEach((t=>{const e=n+(n.endsWith("/")?"":"/")+t;c.push(e)}))}));const d=await t(c),l={};let f=0;return u.forEach((t=>{const n=e[t].paths.length;let r=0;for(let t=0;t<n;t++)r+=d[f+t].byteLength;const o=new ArrayBuffer(r),s=new Uint8Array(o);let a=0;for(let t=0;t<n;t++){const e=new Uint8Array(d[f+t]);s.set(e,a),a+=e.byteLength}i[t].forEach((t=>{const e=o.slice(t.groupOffset,t.groupOffset+t.sizeBytes),n=Object(h.e)(e,[t.manifestEntry]);for(const t in n)l[t]=n[t]})),f+=n})),l}}class A{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,this.weightUrlConverter=e.weightUrlConverter,null!=e.fetchFunc?(Object(w.b)("function"==typeof e.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=e.fetchFunc):this.fetch=Object(f.b)().platform.fetch,Object(w.b)(null!=t&&t.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(t)&&Object(w.b)(2===t.length,(()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`)),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n};null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin");const o=await this.fetch(this.path,e);if(o.ok)return{modelArtifactsInfo:Object(h.g)(t),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let e;try{e=await t.json()}catch(t){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=e.modelTopology,r=e.weightsManifest,o=e.generatedBy,i=e.convertedBy,s=e.format,a=e.signature,u=e.userDefinedMetadata;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);let c,d;if(null!=r){const t=await this.loadWeights(r);[c,d]=t}const l={modelTopology:n,weightSpecs:c,weightData:d,generatedBy:o,convertedBy:i,format:s};null!=a&&(l.signature=a),null!=u&&(l.userDefinedMetadata=u);const f=e.modelInitializer;return f&&(l.modelInitializer=f),l}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),o=n>e?t.substring(n):"";return[r+"/",o]}(e),o=this.weightPathPrefix||n,i=[];for(const e of t)i.push(...e.weights);const s=[],a=[];for(const e of t)for(const t of e.paths)null!=this.weightUrlConverter?a.push(this.weightUrlConverter(t)):s.push(o+t+r);this.weightUrlConverter&&s.push(...await Promise.all(a));const u=await v(s,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[i,Object(h.d)(u)]}}function B(t){return null!=t.match(A.URL_SCHEME_REGEX)}A.URL_SCHEME_REGEX=/^https?:\/\//;const O=(t,e)=>{if("undefined"==typeof fetch&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every((t=>B(t))):B(t),n)return M(t,e)}return null};function M(t,e){return new A(t,e)}function T(t,e){return M(t,e)}g.a.registerSaveRouter(O),g.a.registerLoadRouter(O);class F{constructor(t){this.modelArtifacts=t}async load(){return this.modelArtifacts}}class D{constructor(t){this.saveHandler=t}async save(t){return this.saveHandler(t)}}function R(t,e,n,r){if(1===arguments.length){return null!=t.modelTopology||null!=t.weightSpecs?new F(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new F({modelTopology:t}))}return console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new F({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r})}function x(t){return new D(t)}var j=n(63),P=n(222),L=n(126),N=n(105),C=n(125),$=n(7),U=n(231),_=n(139),z=n(47),H=n(65),W=n(17),q=n(223),V=n(35),G=n(30),J=n(154),K=n(62),Z=n(224),Y=n(225),Q=n(226),X=n(227),tt=n(228);function et(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function nt(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function rt(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let e=0;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}}function ot(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let e=2;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}}function it(t,e){return{real:t[2*e],imag:t[2*e+1]}}function st(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function at(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let o=0;o<Math.ceil(t/2);o++){const i=(e?2:-2)*Math.PI*(o/t);n[o]=Math.cos(i),r[o]=Math.sin(i)}return{real:n,imag:r}}function ut(t,e,n){const r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}const ct="->",dt=/->/g;function lt(t,e){const n=((t=t.replace(/\s/g,"")).length-t.replace(dt,"").length)/ct.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');const[r,o]=t.split(ct);Object(w.b)(-1===r.indexOf("..."),(()=>'The ellipsis notation ("...") is not supported yet.'));const i=r.split(","),s=i.length;if(e!==s)throw new Error(`Expected ${s} input tensors, received ${e}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let t=0;t<o.length;++t){const e=o[t];if(!i.some((t=>-1!==t.indexOf(e))))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===a.indexOf(e)&&a.push(e)}for(let t=0;t<r.length;++t){const e=r[t];-1===a.indexOf(e)&&","!==e&&a.push(e)}const u=new Array(i.length);for(let t=0;t<s;++t){if(new Set(i[t].split("")).size!==i[t].length)throw new Error(`Found duplicate axes in input component ${i[t]}. Support for duplicate axes in input is not implemented yet.`);u[t]=[];for(let e=0;e<i[t].length;++e)u[t].push(a.indexOf(i[t][e]))}const c=a.length,d=[];for(let t=o.length;t<c;++t)d.push(t);return{allDims:a,summedDims:d,idDims:u}}function ft(t,e){let n=new Array(t);n.fill(-1);for(let t=0;t<e.length;++t)n[e[t]]=t;const r=[];for(let e=0;e<t;++e)-1===n[e]&&r.push(e);return n=n.filter((t=>-1!==t)),{permutationIndices:n,expandDims:r}}function ht(t,e,n){const r=new Array(t);for(let t=0;t<n.length;++t){const o=n[t].shape;for(let n=0;n<e[t].length;++n)void 0===r[e[t][n]]?r[e[t][n]]=o[n]:Object(w.b)(r[e[t][n]]===o[n],(()=>`Expected dimension ${r[e[t][n]]} at axis ${n} of input shaped ${JSON.stringify(o)}, but got dimension ${o[n]}`))}}function gt(t,e){const n=t,r=[];let o=0;0===t.length&&n.push(-1),o=t.length+1;for(let t=0;t<o;++t)r.push([]);const i=[];for(let t=0;t<n.length;++t){const o=mt(e,n[t]);for(const e of o)-1===i.indexOf(e)&&(r[t].push(e),i.push(e))}return{path:n,steps:r}}function pt(t){return t.every(((t,e)=>t===e))}function mt(t,e){const n=[];for(let r=0;r<t.length;++r)0!==t[r].length&&-1===t[r].indexOf(e)&&-1!==e||n.push(r);return n}var bt=n(229),yt=n(230);function wt(t){try{return t.map((t=>Object($.decodeString)(t)))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function St(t){return t.map((t=>Object($.encodeString)(t)))}var kt=n(106),vt=n(6)},103:function(t,e,n){"use strict";(function(t){n(2);var e=n(127),r=n(9);const o=Object(r.b)();o.registerFlag("DEBUG",(()=>!1),(t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),o.registerFlag("IS_BROWSER",(()=>e.a())),o.registerFlag("IS_NODE",(()=>"undefined"!=typeof t&&"undefined"!=typeof t.versions&&"undefined"!=typeof t.versions.node)),o.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),o.registerFlag("PROD",(()=>!1)),o.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>o.getBool("DEBUG"))),o.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),o.registerFlag("IS_TEST",(()=>!1)),o.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),o.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1))}).call(this,n(80))},106:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));class r{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}}class o{refCount(t){return i("refCount")}incRef(t){return i("incRef")}timerAvailable(){return!0}time(t){return i("time")}read(t){return i("read")}readSync(t){return i("readSync")}numDataIds(){return i("numDataIds")}disposeData(t,e){return i("disposeData")}write(t,e,n){return i("write")}move(t,e,n,r,o){return i("move")}memory(){return i("memory")}floatPrecision(){return i("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return i("dispose")}}function i(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}},113:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}},127:function(t,e,n){"use strict";function r(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}n.d(e,"a",(function(){return r}))},139:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return l})),n.d(e,"g",(function(){return f})),n.d(e,"d",(function(){return h})),n.d(e,"f",(function(){return g}));var r=n(2),o=n(9),i=n(16),s=n(11);function a(t){Object(o.b)().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function u(){return r.a}function c(t,e){return r.a.tidy(t,e)}function d(t){Object(s.a)(t).forEach((t=>t.dispose()))}function l(t){return r.a.keep(t)}function f(t){return r.a.setBackend(t)}function h(){return r.a.backendName}function g(t,e,n=1){return r.a.registerBackend(t,e,n)}Object(i.d)(a)},155:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return h}));n(103);var r=n(9),o=n(24),i=n(29);const s="tensorflowjs",a="models_store",u="model_info_store";function c(){if(!Object(r.b)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t="undefined"==typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function d(t){const e=t.result;e.createObjectStore(a,{keyPath:"modelPath"}),e.createObjectStore(u,{keyPath:"modelPath"})}class l{constructor(t){if(this.indexedDB=c(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise(((t,n)=>{const r=this.indexedDB.open(s,1);r.onupgradeneeded=()=>d(r),r.onsuccess=()=>{const i=r.result;if(null==e){const e=i.transaction(a,"readonly"),r=e.objectStore(a).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));t(r.result.modelArtifacts)},r.onerror=t=>(i.close(),n(r.error)),e.oncomplete=()=>i.close()}else{const r=Object(o.g)(e),s=i.transaction(u,"readwrite");let c=s.objectStore(u);const d=c.put({modelPath:this.modelPath,modelArtifactsInfo:r});let l;d.onsuccess=()=>{l=i.transaction(a,"readwrite");const o=l.objectStore(a).put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:r});o.onsuccess=()=>t({modelArtifactsInfo:r}),o.onerror=t=>{c=s.objectStore(u);const e=c.delete(this.modelPath);e.onsuccess=()=>(i.close(),n(o.error)),e.onerror=t=>(i.close(),n(o.error))}},d.onerror=t=>(i.close(),n(d.error)),s.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}}},r.onerror=t=>n(r.error)}))}}l.URL_SCHEME="indexeddb://";const f=t=>{return Object(r.b)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(l.URL_SCHEME)?(e=t.slice(l.URL_SCHEME.length),new l(e)):null;var e};i.a.registerSaveRouter(f),i.a.registerLoadRouter(f);class h{constructor(){this.indexedDB=c()}async listModels(){return new Promise(((t,e)=>{const n=this.indexedDB.open(s,1);n.onupgradeneeded=()=>d(n),n.onsuccess=()=>{const r=n.result,o=r.transaction(u,"readonly"),i=o.objectStore(u).getAll();i.onsuccess=()=>{const e={};for(const t of i.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},i.onerror=t=>(r.close(),e(i.error)),o.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)}))}async removeModel(t){var e;return t=(e=t).startsWith(l.URL_SCHEME)?e.slice(l.URL_SCHEME.length):e,new Promise(((e,n)=>{const r=this.indexedDB.open(s,1);r.onupgradeneeded=()=>d(r),r.onsuccess=()=>{const o=r.result,i=o.transaction(u,"readwrite"),s=i.objectStore(u),c=s.get(t);let d;c.onsuccess=()=>{if(null==c.result)return o.close(),n(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const r=s.delete(t),i=()=>{d=o.transaction(a,"readwrite");const r=d.objectStore(a).delete(t);r.onsuccess=()=>e(c.result.modelArtifactsInfo),r.onerror=t=>n(c.error)};r.onsuccess=i,r.onerror=t=>(i(),o.close(),n(c.error))}},c.onerror=t=>(o.close(),n(c.error)),i.oncomplete=()=>{null==d?o.close():d.oncomplete=()=>o.close()}},r.onerror=t=>n(r.error)}))}}},156:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return y}));n(103);var r=n(9),o=n(5),i=n(24),s=n(29);const a="/",u="tensorflowjs_models",c="info",d="model_topology",l="weight_specs",f="weight_data",h="model_metadata";function g(t){return{info:[u,t,c].join(a),topology:[u,t,d].join(a),weightSpecs:[u,t,l].join(a),weightData:[u,t,f].join(a),modelMetadata:[u,t,h].join(a)}}function p(t){const e=t.split(a);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(a)}class m{constructor(t){if(!Object(r.b)().getBool("IS_BROWSER")||"undefined"==typeof window||"undefined"==typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=g(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=Object(i.g)(t);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,Object(i.a)(t.weightData));const o={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};return null!=t.signature&&(o.signature=t.signature),null!=t.userDefinedMetadata&&(o.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(o.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:r}}catch(t){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=r;const o=this.LS.getItem(this.keys.modelMetadata);if(null!=o){const t=JSON.parse(o);e.format=t.format,e.generatedBy=t.generatedBy,e.convertedBy=t.convertedBy,null!=t.signature&&(e.signature=t.signature),null!=t.userDefinedMetadata&&(e.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(e.modelInitializer=t.modelInitializer)}const s=this.LS.getItem(this.keys.weightData);if(null==s)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=Object(i.b)(s),e}}m.URL_SCHEME="localstorage://";const b=t=>{return Object(r.b)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(m.URL_SCHEME)?(e=t.slice(m.URL_SCHEME.length),new m(e)):null;var e};s.a.registerSaveRouter(b),s.a.registerLoadRouter(b);class y{constructor(){Object(o.b)(Object(r.b)().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),Object(o.b)("undefined"==typeof window||"undefined"!=typeof window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const t={},e=u+a,n=a+c;for(let r=0;r<this.LS.length;++r){const o=this.LS.key(r);if(o.startsWith(e)&&o.endsWith(n)){t[p(o)]=JSON.parse(this.LS.getItem(o))}}return t}async removeModel(t){var e;const n=g(t=(e=t).startsWith(m.URL_SCHEME)?e.slice(m.URL_SCHEME.length):e);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),r}}},2:function(t,e,n){"use strict";n.d(e,"b",(function(){return b})),n.d(e,"a",(function(){return y}));var r=n(106),o=n(9),i=n(75),s=n(6),a=n(47),u=n(233),c=n(181),d=n(16),l=n(11),f=n(5),h=n(7);function g(t){return null!=t.kernelName}class p{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((t=>t.name))))}}}dispose(){for(const t in this.registeredVariables)this.registeredVariables[t].dispose()}}class m{constructor(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new p}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then((()=>{}));if(null!=this.backendInstance)return;const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){const{name:t,asyncInit:e}=this.initializeBackendsAndReturnBest();if(e)throw new Error(`The highest priority backend '${t}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(t)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(t){if(!(t in this.registry)){if(!(t in this.registryFactory))return null;{const{asyncInit:e}=this.initializeBackend(t);if(e)return null}}return this.registry[t]}findBackendFactory(t){return t in this.registryFactory?this.registryFactory[t].factory:null}registerBackend(t,e,n=1){return t in this.registryFactory?(console.warn(`${t} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[t]={factory:e,priority:n},!0)}async setBackend(t){if(null==this.registryFactory[t])throw new Error(`Backend name '${t}' not found in registry`);if(this.backendName=t,null==this.registry[t]){this.backendInstance=null;const{success:e,asyncInit:n}=this.initializeBackend(t);if(!(n?await e:e))return!1}return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new u.a(this.backendInstance),!0}setupRegisteredKernels(){Object(a.c)(this.backendName).forEach((t=>{null!=t.setupFunc&&t.setupFunc(this.backendInstance)}))}disposeRegisteredKernels(t){Object(a.c)(t).forEach((e=>{null!=e.disposeFunc&&e.disposeFunc(this.registry[t])}))}initializeBackend(t){const e=this.registryFactory[t];if(null==e)throw new Error(`Cannot initialize backend ${t}, no registration found.`);try{const n=e.factory();if(!n||n instanceof r.b||"function"!=typeof n.then)return this.registry[t]=n,{success:!0,asyncInit:!1};{const e=++this.pendingBackendInitId,r=n.then((n=>!(e<this.pendingBackendInitId)&&(this.registry[t]=n,this.pendingBackendInit=null,!0))).catch((n=>(e<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${t} failed`),console.warn(n.stack||n.message)),!1)));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(e){return console.warn(`Initialization of backend ${t} failed`),console.warn(e.stack||e.message),{success:!1,asyncInit:!1}}}removeBackend(t){if(!(t in this.registryFactory))throw new Error(`${t} backend not found in registry`);this.backendName===t&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(((t,e)=>this.registryFactory[e].priority-this.registryFactory[t].priority))}initializeBackendsAndReturnBest(){const t=this.getSortedBackends();for(let e=0;e<t.length;e++){const n=t[e],{success:r,asyncInit:o}=this.initializeBackend(n);if(o||r)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(t,e){const n=this.state.tensorInfo.get(e),r=n.backend,o=this.readSync(e),i=r.refCount(e);r.disposeData(e,!0),n.backend=t,t.move(e,o,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(t,e){let n,r=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=t}return this.scopedRun((()=>this.startScope(r)),(()=>this.endScope(n)),(()=>(n=e(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n)))}scopedRun(t,e,n){t();try{const t=n();return e(),t}catch(t){throw e(),t}}nextTensorId(){return m.nextTensorId++}nextVariableId(){return m.nextVariableId++}clone(t){const e=y.runKernel(s.ib,{x:t}),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[e],(t=>({x:()=>{const e={x:t},n={dtype:"float32"};return y.runKernel(s.t,e,n)}})),[],{}),e}runKernel(t,e,n){if(!(null!=Object(a.b)(t,this.backendName)))throw new Error(`Kernel '${t}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:t,inputs:e,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(t,e,n){const r=this.backend.numDataIds();let o=0;n.forEach((t=>{o+="complex64"===t.dtype?3:1}));const i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=r-e-o-i;if(s>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${s} data ids) after running '${t}'`)}runKernelFunc(t){let e,n=[];const r=this.isTapeOn(),o=this.state.numBytes,i=this.state.numTensors;let s,u;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;const c=g(t)?t.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(g(t)){const{kernelName:e,inputs:o,attrs:i}=t;null==this.backendName&&this.backend;const c=Object(a.b)(e,this.backendName);f.b(null!=c,(()=>`Cannot find registered kernel '${e}' for backend '${this.backendName}'`)),s=()=>{const t=this.backend.numDataIds();u=c.kernelFunc({inputs:o,attrs:i,backend:this.backend});const s=Array.isArray(u)?u:[u];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(e,t,s);const a=s.map((t=>{if(null!=t.rank)return t;const{dataId:e,shape:n,dtype:r}=t;return this.makeTensorFromDataId(e,n,r)}));if(r){const t=this.getTensorsForGradient(e,o,a);n=this.saveTensorsForBackwardMode(t)}return a}}else{const{forwardFunc:e}=t,o=t=>{r&&(n=t.map((t=>this.keep(this.clone(t)))))};s=()=>{const t=this.backend.numDataIds();u=this.tidy((()=>e(this.backend,o)));const n=Array.isArray(u)?u:[u];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,t,n),n}}const{inputs:d,attrs:l}=t,h=g(t)?null:t.backwardsFunc;let p;return this.scopedRun((()=>this.state.kernelDepth++),(()=>this.state.kernelDepth--),(()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(p=this.profiler.profileKernel(c,d,(()=>s())),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),e=p.outputs):e=s()})),r&&this.addTapeNode(c,d,e,h,n,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-i,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(d).map((t=>null!=d[t]?d[t].shape:null)),outputShapes:e.map((t=>t.shape)),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(u)?e:e[0]}saveTensorsForBackwardMode(t){return t.map((t=>this.keep(this.clone(t))))}getTensorsForGradient(t,e,n){const r=Object(a.a)(t);if(null!=r){const t=r.inputsToSave||[],o=r.outputsToSave||[];let i;r.saveAllInputs?(f.b(Array.isArray(e),(()=>"saveAllInputs is true, expected inputs to be an array.")),i=Object.keys(e).map((t=>e[t]))):i=t.map((t=>e[t]));const s=n.filter(((t,e)=>o[e]));return i.concat(s)}return[]}makeTensor(t,e,n,r){if(null==t)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let o=t;"string"===n&&f.z(t[0])&&(o=t.map((t=>h.encodeString(t))));const i=r.write(o,e,n),s=new d.a(e,n,i,this.nextTensorId());if(this.trackTensor(s,r),"string"===n){const t=this.state.tensorInfo.get(i),e=Object(f.f)(o);this.state.numBytes+=e-t.bytes,t.bytes=e}return s}makeTensorFromDataId(t,e,n,r){n=n||"float32";const o=new d.a(e,n,t,this.nextTensorId());return this.trackTensor(o,r),o}makeVariable(t,e=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==t.dtype&&(t=t.cast(r));const o=new d.c(t,e,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error(`Variable with name ${o.name} was already registered`);return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o}trackTensor(t,e){this.state.numTensors++,"string"===t.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==t.dtype&&"string"!==t.dtype&&(n=t.size*f.g(t.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(t.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(t.dataId,{backend:e||this.backend,dtype:t.dtype,shape:t.shape,bytes:n})),t instanceof d.c||this.track(t)}incRef(t,e){this.trackTensor(t,e),this.backend.incRef(t.dataId)}removeDataId(t,e){this.state.tensorInfo.has(t)&&this.state.tensorInfo.get(t).backend===e&&(this.state.tensorInfo.delete(t),this.state.numDataBuffers--)}disposeTensor(t){if(!this.state.tensorInfo.has(t.dataId))return;const e=this.state.tensorInfo.get(t.dataId);if(this.state.numTensors--,"string"===t.dtype&&(this.state.numStringTensors--,this.state.numBytes-=e.bytes),"complex64"!==t.dtype&&"string"!==t.dtype){const e=t.size*f.g(t.dtype);this.state.numBytes-=e}e.backend.disposeData(t.dataId)&&this.removeDataId(t.dataId,e.backend)}disposeVariables(){for(const t in this.state.registeredVariables){const e=this.state.registeredVariables[t];this.disposeVariable(e)}}disposeVariable(t){this.disposeTensor(t),null!=this.state.registeredVariables[t.name]&&delete this.state.registeredVariables[t.name]}memory(){const t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,null==t.reasons&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t}async profile(t){this.state.profiling=!0;const e=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map((t=>t.totalBytesSnapshot))),this.state.activeProfile.newBytes=this.state.numBytes-e,this.state.activeProfile.newTensors=this.state.numTensors-n;for(const t of this.state.activeProfile.kernels)t.kernelTimeMs=await t.kernelTimeMs,t.extraInfo=await t.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(t,e,n,r,o,i){const s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:e,outputs:n,saved:o},u=Object(a.a)(t);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=t=>(t=t.map(((t,e)=>{if(null==t){const t=n[e],r=f.F(t.size,t.dtype);return this.makeTensor(r,t.shape,t.dtype)}return t})),r(t.length>1?t:t[0],o,i))),this.state.activeTape.push(s)}keep(t){return t.kept=!0,t}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(t){const e={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(e.name=t),this.state.scopeStack.push(e),this.state.activeScope=e}endScope(t){const e=Object(l.a)(t),n=new Set(e.map((t=>t.id)));for(let t=0;t<this.state.activeScope.track.length;t++){const e=this.state.activeScope.track[t];e.kept||n.has(e.id)||e.dispose()}const r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],e.forEach((t=>{t.kept||t.scopeId!==r.id||this.track(t)}))}gradients(t,e,n,r=!1){if(f.b(e.length>0,(()=>"gradients() received an empty list of xs.")),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);const o=this.scopedRun((()=>this.startTape()),(()=>this.endTape()),(()=>this.tidy("forward",t)));f.b(o instanceof d.a,(()=>"The result y returned by f() must be a tensor."));const i=Object(c.b)(this.state.activeTape,e,o);if(!r&&0===i.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(()=>{const t={};t[o.id]=null==n?function(t){const e=Object(f.D)(Object(f.O)(t),"float32");return y.makeTensor(e,t,"float32")}(o.shape):n,Object(c.a)(t,i,(t=>this.tidy(t)),w);const r=e.map((e=>t[e.id]));return 0===this.state.gradientDepth&&(this.state.activeTape.forEach((t=>{for(const e of t.saved)e.dispose()})),this.state.activeTape=null),{value:o,grads:r}}))}customGrad(t){return f.b(f.u(t),(()=>"The f passed in customGrad(f) must be a function.")),(...e)=>{let n;f.b(e.every((t=>t instanceof d.a)),(()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors"));const r={};e.forEach(((t,e)=>{r[e]=t}));return this.runKernelFunc({forwardFunc:(r,o)=>(n=t(...e,o),f.b(n.value instanceof d.a,(()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor")),f.b(f.u(n.gradFunc),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function.")),n.value),backwardsFunc:(t,r)=>{const o=n.gradFunc(t,r),i=Array.isArray(o)?o:[o];f.b(i.length===e.length,(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...).")),f.b(i.every((t=>t instanceof d.a)),(()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."));const s={};return i.forEach(((t,e)=>{s[e]=()=>t})),s},inputs:r})}}readSync(t){return this.state.tensorInfo.get(t).backend.readSync(t)}read(t){return this.state.tensorInfo.get(t).backend.read(t)}async time(t){const e=Object(h.now)(),n=await this.backend.time(t);return n.wallMs=Object(h.now)()-e,n}track(t){return null!=this.state.activeScope&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new p;for(const t in this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}function b(){const t=Object(i.b)();if(null==t._tfengine){const e=new o.a(t);t._tfengine=new m(e)}return Object(o.c)(t._tfengine.ENV),Object(d.f)((()=>t._tfengine)),t._tfengine}m.nextTensorId=0,m.nextVariableId=0;const y=b();function w(t,e){const n={a:t,b:e};return y.runKernel(s.d,n)}},220:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return m}));var r=n(180);const o=n.n(r).a||r;function i(t){return o.fromString(t,!0,16)}const s=i("c3a5c85c97cb3127"),a=i("b492b66fbe98f273"),u=i("9ae16a3b2f90404f");function c(t){return t.xor(t.shru(47))}function d(t,e,n){const r=t.slice(e,e+n);return o.fromBytes(Array.from(r),!0,!0)}function l(t,e){return d(t,e,8)}function f(t,e){return d(t,e,4)}function h(t,e){return 0===e?t:t.shru(e).or(t.shl(64-e))}function g(t,e,n=i("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let o=e.xor(r).mul(n);return o=o.xor(o.shru(47)),o=o.mul(n),o}function p(t,e,n,r){return function(t,e,n,r,o,i){o=o.add(t),i=h(i.add(o).add(r),21);const s=o;return o=(o=o.add(e)).add(n),i=i.add(h(o,44)),[o.add(r),i.add(s)]}(l(t,e),l(t,e+8),l(t,e+16),l(t,e+24),n,r)}function m(t,e=t.length){const n=o.fromNumber(81,!0);if(e<=32)return e<=16?function(t,e=t.length){if(e>=8){const n=u.add(2*e),r=l(t,0).add(u),o=l(t,e-8);return g(h(o,37).mul(n).add(r),h(r,25).add(o).mul(n),n)}if(e>=4){const n=u.add(2*e);return g(f(t,0).shl(3).add(e),f(t,e-4),n)}if(e>0){const n=t[0]+(t[e>>1]<<8),r=e+(t[e-1]<<2);return c(u.mul(n).xor(s.mul(r))).mul(u)}return u}(t,e):function(t,e=t.length){const n=u.add(2*e),r=l(t,0).mul(a),o=l(t,8),i=l(t,e-8).mul(n),s=l(t,e-16).mul(u);return g(h(r.add(o),43).add(h(i,30)).add(s),r.add(h(o.add(u),18)).add(i),n)}(t,e);if(e<=64)return function(t,e=t.length){const n=u.add(2*e),r=l(t,0).mul(u),o=l(t,8),i=l(t,e-8).mul(n),s=l(t,e-16).mul(u),a=h(r.add(o),43).add(h(i,30)).add(s),c=g(a,r.add(h(o.add(u),18)).add(i),n),d=l(t,16).mul(n),f=l(t,24),p=a.add(l(t,e-32)).mul(n),m=c.add(l(t,e-24)).mul(n);return g(h(d.add(f),43).add(h(p,30)).add(m),d.add(h(f.add(r),18)).add(p),n)}(t,e);let r=n,i=n.mul(a).add(113),d=c(i.mul(u).add(113)).mul(u),m=[o.UZERO,o.UZERO],b=[o.UZERO,o.UZERO];r=r.mul(u).add(l(t,0));let y=0;const w=64*(e-1>>6),S=w+(e-1&63)-63;do{r=h(r.add(i).add(m[0]).add(l(t,y+8)),37).mul(a),i=h(i.add(m[1]).add(l(t,y+48)),42).mul(a),r=r.xor(b[1]),i=i.add(m[0]).add(l(t,y+40)),d=h(d.add(b[0]),33).mul(a),m=p(t,y,m[1].mul(a),r.add(b[0])),b=p(t,y+32,d.add(b[1]),i.add(l(t,y+16))),[d,r]=[r,d],y+=64}while(y!==w);const k=a.add(d.and(255).shl(1));return y=S,b[0]=b[0].add(e-1&63),m[0]=m[0].add(b[0]),b[0]=b[0].add(m[0]),r=h(r.add(i).add(m[0]).add(l(t,y+8)),37).mul(k),i=h(i.add(m[1]).add(l(t,y+48)),42).mul(k),r=r.xor(b[1].mul(9)),i=i.add(m[0].mul(9).add(l(t,y+40))),d=h(d.add(b[0]),33).mul(k),m=p(t,y,m[1].mul(k),r.add(b[0])),b=p(t,y+32,d.add(b[1]),i.add(l(t,y+16))),[d,r]=[r,d],g(g(m[0],b[0],k).add(c(i).mul(s)).add(d),g(m[1],b[1],k).add(r),k)}},24:function(t,e,n){"use strict";(function(t){n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return u})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return h})),n.d(e,"d",(function(){return g})),n.d(e,"c",(function(){return p})),n.d(e,"g",(function(){return m}));var r=n(42),o=n(68),i=n(5),s=n(113);async function a(t,e){const n=[],r=[],o=Array.isArray(t)?t.map((t=>t.name)):Object.keys(t);for(let i=0;i<o.length;++i){const s=o[i],a=Array.isArray(t)?t[i].tensor:t[s];if("float32"!==a.dtype&&"int32"!==a.dtype&&"bool"!==a.dtype&&"string"!==a.dtype&&"complex64"!==a.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${a.dtype}`);const u={name:s,shape:a.shape,dtype:a.dtype};if("string"===a.dtype){const t=new Promise((async t=>{const e=await a.bytes(),n=e.reduce(((t,e)=>t+e.length),0)+4*e.length,r=new Uint8Array(n);let o=0;for(let t=0;t<e.length;t++){const n=e[t],i=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(i,o),o+=4,r.set(n,o),o+=n.length}t(r)}));r.push(t)}else r.push(a.data());null!=e&&(u.group=e),n.push(u)}return{data:c(await Promise.all(r)),specs:n}}function u(t,e){const n={};let a,u=0;for(const c of e){const e=c.name,d=c.dtype,l=c.shape,f=Object(i.O)(l);let h;if("quantization"in c){const n=c.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${c.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${c.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==d)throw new Error(`Weight ${c.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${d}.`)}const r=s.a[n.dtype],o=t.slice(u,u+f*r),i="uint8"===n.dtype?new Uint8Array(o):new Uint16Array(o);if("float32"===d)if("uint8"===n.dtype||"uint16"===n.dtype){h=new Float32Array(i.length);for(let t=0;t<i.length;t++){const e=i[t];h[t]=e*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===a&&(a=b()),h=a(i)}else{if("int32"!==d)throw new Error(`Unsupported dtype in weight '${e}': ${d}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);h=new Int32Array(i.length);for(let t=0;t<i.length;t++){const e=i[t];h[t]=Math.round(e*n.scale+n.min)}}u+=f*r}else if("string"===d){const e=Object(i.O)(c.shape);h=[];for(let n=0;n<e;n++){const e=new Uint32Array(t.slice(u,u+4))[0];u+=4;const n=new Uint8Array(t.slice(u,u+e));h.push(n),u+=e}}else{const i=s.a[d],a=t.slice(u,u+f*i);if("float32"===d)h=new Float32Array(a);else if("int32"===d)h=new Int32Array(a);else if("bool"===d)h=new Uint8Array(a);else{if("complex64"!==d)throw new Error(`Unsupported dtype in weight '${e}': ${d}`);{h=new Float32Array(a);const t=new Float32Array(h.length/2),i=new Float32Array(h.length/2);for(let e=0;e<t.length;e++)t[e]=h[2*e],i[e]=h[2*e+1];const s=Object(o.a)(t,l,"float32"),u=Object(o.a)(i,l,"float32");n[e]=Object(r.a)(s,u),s.dispose(),u.dispose()}}u+=f*i}"complex64"!==d&&(n[e]=Object(o.a)(h,l,d))}return n}function c(t){if(null===t)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach((t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${t.constructor.name}`)}));const r=new Uint8Array(e);let o=0;return n.forEach((t=>{r.set(new Uint8Array(t.buffer),o),o+=t.byteLength})),r.buffer}const d="undefined"!=typeof t&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function l(e){return d?t.byteLength(e):new Blob([e]).size}function f(e){if(d)return t.from(e).toString("base64");const n=new Uint8Array(e);let r="";for(let t=0,e=n.length;t<e;t++)r+=String.fromCharCode(n[t]);return btoa(r)}function h(e){if(d){const n=t.from(e,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}const n=atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;++t)r.set([n.charCodeAt(t)],t);return r.buffer}function g(t){if(1===t.length)return t[0];let e=0;t.forEach((t=>{e+=t.byteLength}));const n=new Uint8Array(e);let r=0;return t.forEach((t=>{n.set(new Uint8Array(t),r),r+=t.byteLength})),n.buffer}function p(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const e=t.split("/");return e[e.length-1]}function m(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:l(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:l(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function b(){const t=function(){const t=t=>{let e=t<<13,n=0;for(;0==(8388608&e);)n-=8388608,e<<=1;return e&=-8388609,n+=947912704,e|n},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}(),e=function(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}(),n=function(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return r=>{const o=new ArrayBuffer(4*r.length),i=new Uint32Array(o);for(let o=0;o<r.length;o++){const s=r[o],a=t[n[s>>10]+(1023&s)]+e[s>>10];i[o]=a}return new Float32Array(o)}}}).call(this,n(280).Buffer)},28:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2);n(16),n(1),n(5);function o(t){return r.a.customGrad(t)}},29:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a}));class r{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==r.instance&&(r.instance=new r),r.instance}static registerSaveRouter(t){r.getInstance().saveRouters.push(t)}static registerLoadRouter(t){r.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return r.getHandlers(t,"save")}static getLoadHandlers(t,e){return r.getHandlers(t,"load",e)}static getHandlers(t,e,n){const o=[];return("load"===e?r.getInstance().loadRouters:r.getInstance().saveRouters).forEach((e=>{const r=e(t,n);null!==r&&o.push(r)})),o}}const o=t=>r.registerSaveRouter(t),i=t=>r.registerLoadRouter(t),s=t=>r.getSaveHandlers(t),a=(t,e)=>r.getLoadHandlers(t,e)},47:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c}));n(9);var r=n(75);const o=Object(r.a)("kernelRegistry",(()=>new Map)),i=Object(r.a)("gradRegistry",(()=>new Map));function s(t,e){const n=d(t,e);return o.get(n)}function a(t){return i.get(t)}function u(t){const e=o.entries(),n=[];for(;;){const{done:r,value:o}=e.next();if(r)break;const[i,s]=o,[a]=i.split("_");a===t&&n.push(s)}return n}function c(t){const{kernelName:e,backendName:n}=t,r=d(e,n);o.has(r)&&console.warn(`The kernel '${e}' for backend '${n}' is already registered`),o.set(r,t)}function d(t,e){return`${e}_${t}`}},6:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return a})),n.d(e,"f",(function(){return u})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return d})),n.d(e,"i",(function(){return l})),n.d(e,"j",(function(){return f})),n.d(e,"k",(function(){return h})),n.d(e,"l",(function(){return g})),n.d(e,"n",(function(){return p})),n.d(e,"m",(function(){return m})),n.d(e,"o",(function(){return b})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return w})),n.d(e,"r",(function(){return S})),n.d(e,"s",(function(){return k})),n.d(e,"t",(function(){return v})),n.d(e,"u",(function(){return I})),n.d(e,"v",(function(){return E})),n.d(e,"w",(function(){return A})),n.d(e,"x",(function(){return B})),n.d(e,"y",(function(){return O})),n.d(e,"z",(function(){return M})),n.d(e,"A",(function(){return T})),n.d(e,"B",(function(){return F})),n.d(e,"C",(function(){return D})),n.d(e,"D",(function(){return R})),n.d(e,"E",(function(){return x})),n.d(e,"G",(function(){return j})),n.d(e,"F",(function(){return P})),n.d(e,"H",(function(){return L})),n.d(e,"I",(function(){return N})),n.d(e,"J",(function(){return C})),n.d(e,"K",(function(){return $})),n.d(e,"L",(function(){return U})),n.d(e,"M",(function(){return _})),n.d(e,"Vb",(function(){return z})),n.d(e,"N",(function(){return H})),n.d(e,"O",(function(){return W})),n.d(e,"Q",(function(){return q})),n.d(e,"P",(function(){return V})),n.d(e,"R",(function(){return G})),n.d(e,"S",(function(){return J})),n.d(e,"T",(function(){return K})),n.d(e,"U",(function(){return Z})),n.d(e,"V",(function(){return Y})),n.d(e,"W",(function(){return Q})),n.d(e,"X",(function(){return X})),n.d(e,"Y",(function(){return tt})),n.d(e,"ab",(function(){return et})),n.d(e,"eb",(function(){return nt})),n.d(e,"db",(function(){return rt})),n.d(e,"fb",(function(){return ot})),n.d(e,"gb",(function(){return it})),n.d(e,"ib",(function(){return st})),n.d(e,"hb",(function(){return at})),n.d(e,"jb",(function(){return ut})),n.d(e,"kb",(function(){return ct})),n.d(e,"mb",(function(){return dt})),n.d(e,"nb",(function(){return lt})),n.d(e,"ob",(function(){return ft})),n.d(e,"pb",(function(){return ht})),n.d(e,"qb",(function(){return gt})),n.d(e,"rb",(function(){return pt})),n.d(e,"sb",(function(){return mt})),n.d(e,"tb",(function(){return bt})),n.d(e,"ub",(function(){return yt})),n.d(e,"lb",(function(){return wt})),n.d(e,"vb",(function(){return St})),n.d(e,"zb",(function(){return kt})),n.d(e,"wb",(function(){return vt})),n.d(e,"xb",(function(){return It})),n.d(e,"yb",(function(){return Et})),n.d(e,"Ab",(function(){return At})),n.d(e,"Bb",(function(){return Bt})),n.d(e,"Cb",(function(){return Ot})),n.d(e,"Db",(function(){return Mt})),n.d(e,"Eb",(function(){return Tt})),n.d(e,"Fb",(function(){return Ft})),n.d(e,"Gb",(function(){return Dt})),n.d(e,"Hb",(function(){return Rt})),n.d(e,"Lb",(function(){return xt})),n.d(e,"Ib",(function(){return jt})),n.d(e,"Jb",(function(){return Pt})),n.d(e,"Kb",(function(){return Lt})),n.d(e,"Nb",(function(){return Nt})),n.d(e,"Mb",(function(){return Ct})),n.d(e,"Ob",(function(){return $t})),n.d(e,"Pb",(function(){return Ut})),n.d(e,"Qb",(function(){return _t})),n.d(e,"Rb",(function(){return zt})),n.d(e,"Sb",(function(){return Ht})),n.d(e,"Tb",(function(){return Wt})),n.d(e,"Ub",(function(){return qt})),n.d(e,"Wb",(function(){return Vt})),n.d(e,"Xb",(function(){return Gt})),n.d(e,"Zb",(function(){return Jt})),n.d(e,"bc",(function(){return Kt})),n.d(e,"ac",(function(){return Zt})),n.d(e,"Yb",(function(){return Yt})),n.d(e,"cc",(function(){return Qt})),n.d(e,"ec",(function(){return Xt})),n.d(e,"fc",(function(){return te})),n.d(e,"gc",(function(){return ee})),n.d(e,"hc",(function(){return ne})),n.d(e,"ic",(function(){return re})),n.d(e,"nc",(function(){return oe})),n.d(e,"lc",(function(){return ie})),n.d(e,"mc",(function(){return se})),n.d(e,"kc",(function(){return ae})),n.d(e,"jc",(function(){return ue})),n.d(e,"pc",(function(){return ce})),n.d(e,"xc",(function(){return de})),n.d(e,"Gc",(function(){return le})),n.d(e,"qc",(function(){return fe})),n.d(e,"wc",(function(){return he})),n.d(e,"oc",(function(){return ge})),n.d(e,"rc",(function(){return pe})),n.d(e,"sc",(function(){return me})),n.d(e,"tc",(function(){return be})),n.d(e,"uc",(function(){return ye})),n.d(e,"vc",(function(){return we})),n.d(e,"zc",(function(){return Se})),n.d(e,"yc",(function(){return ke})),n.d(e,"Bc",(function(){return ve})),n.d(e,"Cc",(function(){return Ie})),n.d(e,"Dc",(function(){return Ee})),n.d(e,"Ec",(function(){return Ae})),n.d(e,"Fc",(function(){return Be})),n.d(e,"Hc",(function(){return Oe})),n.d(e,"Ic",(function(){return Me})),n.d(e,"Jc",(function(){return Te})),n.d(e,"Kc",(function(){return Fe})),n.d(e,"Lc",(function(){return De})),n.d(e,"Mc",(function(){return Re})),n.d(e,"Nc",(function(){return xe})),n.d(e,"Oc",(function(){return je})),n.d(e,"Pc",(function(){return Pe})),n.d(e,"Ac",(function(){return Le})),n.d(e,"Z",(function(){return Ne})),n.d(e,"dc",(function(){return Ce})),n.d(e,"Qc",(function(){return $e})),n.d(e,"bb",(function(){return Ue})),n.d(e,"cb",(function(){return _e}));const r="Abs",o="Acos",i="Acosh",s="Add",a="AddN",u="All",c="Any",d="ArgMax",l="ArgMin",f="Asin",h="Asinh",g="Atan",p="Atanh",m="Atan2",b="AvgPool",y="AvgPool3D",w="BatchMatMul",S="BatchToSpaceND",k="Bincount",v="Cast",I="Ceil",E="ClipByValue",A="Complex",B="ComplexAbs",O="Concat",M="Conv2D",T="Conv2DBackpropFilter",F="Conv2DBackpropInput",D="Conv3D",R="Cos",x="Cosh",j="Cumsum",P="CropAndResize",L="DenseBincount",N="DepthToSpace",C="DepthwiseConv2dNative",$="DepthwiseConv2dNativeBackpropFilter",U="DepthwiseConv2dNativeBackpropInput",_="Dilation2D",z="RealDiv",H="Einsum",W="Elu",q="Erf",V="Equal",G="Exp",J="ExpandDims",K="Expm1",Z="FFT",Y="Fill",Q="FlipLeftRight",X="Floor",tt="FloorDiv",et="FusedBatchNorm",nt="GatherV2",rt="GatherNd",ot="Greater",it="GreaterEqual",st="Identity",at="IFFT",ut="Imag",ct="IsNan",dt="LeakyRelu",lt="Less",ft="LessEqual",ht="LinSpace",gt="Log",pt="Log1p",mt="LogicalAnd",bt="LogicalNot",yt="LogicalOr",wt="LRN",St="Max",kt="Maximum",vt="MaxPool",It="MaxPool3D",Et="MaxPoolWithArgmax",At="Mean",Bt="Min",Ot="Minimum",Mt="MirrorPad",Tt="Mod",Ft="Multinomial",Dt="Multiply",Rt="Neg",xt="NotEqual",jt="NonMaxSuppressionV3",Pt="NonMaxSuppressionV4",Lt="NonMaxSuppressionV5",Nt="OnesLike",Ct="OneHot",$t="Pack",Ut="PadV2",_t="Pow",zt="Prelu",Ht="Prod",Wt="Range",qt="Real",Vt="Reciprocal",Gt="Relu",Jt="Reshape",Kt="ResizeNearestNeighbor",Zt="ResizeBilinear",Yt="Relu6",Qt="Reverse",Xt="Round",te="Rsqrt",ee="ScatterNd",ne="Select",re="Selu",oe="Slice",ie="Sin",se="Sinh",ae="Sign",ue="Sigmoid",ce="Softplus",de="Sqrt",le="Sum",fe="SpaceToBatchND",he="SplitV",ge="Softmax",pe="SparseFillEmptyRows",me="SparseReshape",be="SparseSegmentMean",ye="SparseSegmentSum",we="SparseToDense",Se="SquaredDifference",ke="Square",ve="StridedSlice",Ie="StringNGrams",Ee="StringSplit",Ae="StringToHashBucketFast",Be="Sub",Oe="Tan",Me="Tanh",Te="Tile",Fe="TopK",De="Transform",Re="Transpose",xe="Unique",je="Unpack",Pe="ZerosLike",Le="Step",Ne="FromPixels",Ce="RotateWithOffset",$e="_FusedMatMul",Ue="FusedConv2D",_e="FusedDepthwiseConv2D"},63:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return f})),n.d(e,"b",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"c",(function(){return c}));var r=n(5),o=n(29);const i="://";class s{constructor(){this.managers={}}static getInstance(){return null==s.instance&&(s.instance=new s),s.instance}static registerManager(t,e){Object(r.b)(null!=t,(()=>"scheme must not be undefined or null.")),t.endsWith(i)&&(t=t.slice(0,t.indexOf(i))),Object(r.b)(t.length>0,(()=>"scheme must not be an empty string."));const n=s.getInstance();Object(r.b)(null==n.managers[t],(()=>`A model store manager is already registered for scheme '${t}'.`)),n.managers[t]=e}static getManager(t){const e=this.getInstance().managers[t];if(null==e)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(this.getInstance().managers)}}function a(t){if(-1===t.indexOf(i))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${s.getSchemes().join(",")}`);return{scheme:t.split(i)[0],path:t.split(i)[1]}}async function u(t,e,n=!1){Object(r.b)(t!==e,(()=>`Old path and new path are the same: '${t}'`));const i=o.a.getLoadHandlers(t);Object(r.b)(i.length>0,(()=>`Copying failed because no load handler is found for source URL ${t}.`)),Object(r.b)(i.length<2,(()=>`Copying failed because more than one (${i.length}) load handlers for source URL ${t}.`));const u=i[0],c=o.a.getSaveHandlers(e);Object(r.b)(c.length>0,(()=>`Copying failed because no save handler is found for destination URL ${e}.`)),Object(r.b)(c.length<2,(()=>`Copying failed because more than one (${i.length}) save handlers for destination URL ${e}.`));const d=c[0],l=a(t).scheme,f=a(t).path,h=l===a(t).scheme,g=await u.load();n&&h&&await s.getManager(l).removeModel(f);const p=await d.save(g);return n&&!h&&await s.getManager(l).removeModel(f),p.modelArtifactsInfo}async function c(){const t=s.getSchemes(),e={};for(const n of t){const t=await s.getManager(n).listModels();for(const r in t){e[n+i+r]=t[r]}}return e}async function d(t){const e=a(t);return s.getManager(e.scheme).removeModel(e.path)}async function l(t,e){return u(t,e,!1)}async function f(t,e){return u(t,e,!0)}},75:function(t,e,n){"use strict";(function(t,r){let o;function i(){if(null==o){let e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof t)e=t;else if("undefined"!=typeof r)e=r;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}o=e}return o}function s(t,e){const n=function(){const t=i();return null==t._tfGlobals&&(t._tfGlobals=new Map),t._tfGlobals}();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}))}).call(this,n(99),n(80))},9:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c}));var r=n(5);const o="tfjsflags";class i{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=s,this.populateURLFlags()}setPlatform(t,e){null!=this.platform&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},null!=this.urlFlags[t]){const e=this.urlFlags[t];console.warn(`Setting feature override from URL ${t}: ${e}.`),this.set(t,e)}}async getAsync(t){return t in this.flags||(this.flags[t]=await this.evaluateFlag(t)),this.flags[t]}get(t){if(t in this.flags)return this.flags[t];const e=this.evaluateFlag(t);if(Object(r.x)(e))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(null==this.flagRegistry[t])throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,null!=this.flagRegistry[t].setHook&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(null==this.flagRegistry[t])throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if("undefined"==typeof this.global||"undefined"==typeof this.global.location||"undefined"==typeof this.global.location.search)return;const t=this.getQueryParams(this.global.location.search);if(o in t){t.tfjsflags.split(",").forEach((t=>{const[e,n]=t.split(":");this.urlFlags[e]=function(t,e){if("true"===(e=e.toLowerCase())||"false"===e)return"true"===e;if(""+ +e===e)return+e;throw new Error(`Could not parse value flag value ${e} for flag ${t}.`)}(e,n)}))}}}function s(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,((t,...n)=>(function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("=")))),e}function a(){return u}let u=null;function c(t){u=t}},94:function(t,e,n){"use strict";function r(t,e,n){const r=function(t,e,n){return function(t,e,n){let r=0,o=t.length,i=0,s=!1;for(;r<o;){i=r+(o-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(o=i,s=!a)}return s?r:-r-1}(t,e,n||o)}(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function o(t,e){return t>e?1:t<e?-1:0}function i(t,e,n,r,o){return u(t,e,n,r,o,0)}function s(t,e,n,r,o,i){return u(t,e,n,r,o,0,!1,i,!0)}function a(t,e,n,r,o,i){return u(t,e,n,r,o,i,!0)}function u(t,e,n,o,i,s,a=!1,u=!1,f=!1){const h=[];for(let t=0;t<e.length;t++)e[t]>i&&h.push({score:e[t],boxIndex:t,suppressBeginIndex:0});h.sort(l);const g=s>0?-.5/s:0,p=[],m=[];for(;p.length<n&&h.length>0;){const e=h.pop(),{score:n,boxIndex:s,suppressBeginIndex:a}=e;if(n<i)break;let u=!1;for(let n=p.length-1;n>=a;--n){const r=c(t,s,p[n]);if(r>=o){u=!0;break}if(e.score=e.score*d(o,g,r),e.score<=i)break}e.suppressBeginIndex=p.length,u||(e.score===n?(p.push(s),m.push(e.score)):e.score>i&&r(h,e,l))}const b=p.length,y=n-b;u&&y>0&&(p.push(...new Array(y).fill(0)),m.push(...new Array(y).fill(0)));const w={selectedIndices:p};return a&&(w.selectedScores=m),f&&(w.validOutputs=b),w}function c(t,e,n){const r=t.subarray(4*e,4*e+4),o=t.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),d=Math.min(o[1],o[3]),l=Math.max(o[0],o[2]),f=Math.max(o[1],o[3]),h=(a-i)*(u-s),g=(l-c)*(f-d);if(h<=0||g<=0)return 0;const p=Math.max(i,c),m=Math.max(s,d),b=Math.min(a,l),y=Math.min(u,f),w=Math.max(b-p,0)*Math.max(y-m,0);return w/(h+g-w)}function d(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function l(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return a}))}}]);
//# sourceMappingURL=bundle~bundle~fb9c722d.eef1b94b.js.map