!function(t){"use strict";var e=function(t){var e=[];for(var n in t)e.push(n);return e},n=new(function(){function t(){this._enabled={}}return t.prototype.enable=function(t){return t in this._enabled||(this._enabled[t]=!0,Api.setRecognizerFeatures(e(this._enabled))),this},t.prototype.disable=function(t){return t in this._enabled?(Api.setRecognizerFeatures(e(this._enabled)),delete this._enabled[t],this):this},t}()),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function r(t,e,n,i){var s,r=arguments.length,o=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var h=t.length-1;h>=0;h--)(s=t[h])&&(o=(r<3?s(o):r>3?s(e,n,o):s(e,n))||o);return r>3&&o&&Object.defineProperty(e,n,o),o}var o,h=function(){function t(){this.__listeners={}}return t.prototype.on=function(t,e){var n,i;return(null!==(n=(i=this.__listeners)[t])&&void 0!==n?n:i[t]=[]).push(e),this},t.prototype.off=function(t,e){var n,i,s,r=null!==(i=null===(n=this.__listeners[t])||void 0===n?void 0:n.indexOf(e))&&void 0!==i?i:-1;return-1!==r&&(null===(s=this.__listeners[t])||void 0===s||s.splice(r,1)),this},t.prototype.emit=function(t){var e;return null===(e=this.__listeners[t])||void 0===e||e.forEach((function(t){return t()})),this},t}(),u=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.emitFaceDetected=function(){return e.emit("face")},e.emitNoFaceDetected=function(){return e.emit("no-face")},e}return s(e,t),e}(h)),l=function(){function t(t,e,n){var i=this;this._strength=0,this._reload=function(){i._file&&Api.meshfxMsg("wlut",i._index,i._strength,i._file)},this._index=e,this._file=n,t._isEnabled&&this._reload(),t.on("enabled",this._reload)}return t.prototype.set=function(t){return this._file=t,Api.meshfxMsg("wlut",this._index,this._strength,this._file),this},t.prototype.strength=function(t){return this._strength=t,null!=this._file&&Api.meshfxMsg("wlut",this._index,100*this._strength,this._file),this},t}(),c=(o=0,function(){return o++}),a=function(t){function e(e){var n=t.call(this)||this;return n._id=c(),n._isEnabled=!1,n._file=e,n}return s(e,t),e.prototype.enable=function(){return this._isEnabled||(this._isEnabled=!0,Api.meshfxMsg("spawn",this._id,0,this._file),this.emit("enabled")),this},e.prototype.disable=function(){return this._isEnabled?(this._isEnabled=!1,Api.meshfxMsg("del",this._id),this.emit("disabled"),this):this},e}(h),p=function(){function t(t){this._strength=0,this._property=t}return t.prototype.strength=function(t){return this._strength=t,Api.meshfxMsg("beautyMorph",0,100*this._strength,this._property),this},t}(),f=function(){function t(t,e,n){var i=this;this._reload=function(){i._file&&Api.meshfxMsg("tex",i._mesh._id,i._index,i._file)},this._mesh=t,this._index=e,this._file=n,this._mesh._isEnabled&&this._reload(),this._mesh.on("enabled",this._reload)}return t.prototype.set=function(t){return this._file=t,this._mesh._isEnabled&&Api.meshfxMsg("tex",this._mesh._id,this._index,this._file),this},t}(),_={},y=function(){function t(t){return this.x=new d(this),this.y=new d(this),this.z=new d(this),this.w=new d(this),this._index=t,t in _||(_[t]=this),_[t]}return t.prototype.set=function(t){var e=t.split(" ").map(parseFloat),n=e[0],i=e[1],s=e[2],r=e[3];return this.x._value=n,this.y._value=i,this.z._value=s,this.w._value=r,Api.meshfxMsg("shaderVec4",0,this._index,this.toString()),this},t.prototype.toString=function(){return[this.x.toString(),this.y.toString(),this.z.toString(),this.w.toString()].join(" ")},t}(),d=function(){function t(t){this._parent=t}return t.prototype.get=function(){return this._value},t.prototype.set=function(t){return"function"==typeof t&&(t=t(this._value)),this._value=t,Api.meshfxMsg("shaderVec4",0,this._parent._index,this._parent.toString()),this},t.prototype.toString=function(){var t=this._value;return t||(t=Boolean(t)),"boolean"==typeof t&&(t=Number(t)),"number"==typeof t&&(t=String(t)),t},t}();function g(t,e,n){if(3===arguments.length){var i=t[e];if("function"!=typeof i)return;n.value=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return i.call(this,t)}}for(var s in t.prototype)g(t.prototype,s,Object.getOwnPropertyDescriptor(t.prototype,s))}var b=new(function(){function t(){this.morphs={face:new p("face"),eyes:new p("eyes"),nose:new p("nose")}}return t.prototype.face=function(t){return this.morphs.face.strength(t),this},t.prototype.eyes=function(t){return this.morphs.eyes.strength(2*t),this},t.prototype.nose=function(t){return this.morphs.nose.strength(t),this},t.prototype.clear=function(){return this.face(0).eyes(0).nose(0)},r([g],t.prototype,"face",null),r([g],t.prototype,"eyes",null),r([g],t.prototype,"nose",null),t}()),w=new(function(){function t(){}return t.prototype.enable=function(){return n.enable("eye_bags"),this},t.prototype.disable=function(){return n.disable("eye_bags"),this},t}()),m=new(function(){function t(){this._mesh=new a("triBG2.bsm2").on("enabled",(function(){return n.enable("background")})).on("disabled",(function(){return n.disable("background")})),this._texture=new f(this._mesh,0),this._rotation=new y(14).x.set(0),this._scaling=new y(15).x.set(1)}return t.prototype.set=function(t){return this._mesh.enable(),this._texture.set(t),this},t.prototype.rotate=function(t){return this._rotation.set((function(e){return e+t})),this},t.prototype.scale=function(t){return this._scaling.set((function(e){return e*t})),this},t.prototype.clear=function(){return this._mesh.disable(),this._rotation.set(0),this._scaling.set(1),this},r([g],t.prototype,"set",null),r([g],t.prototype,"rotate",null),r([g],t.prototype,"scale",null),t}()),x=new(function(){function t(){this._mesh=new a("tri_Blur.bsm2").on("enabled",(function(){return n.enable("background")})).on("disabled",(function(){return n.disable("background")}))}return t.prototype.enable=function(){return this._mesh.enable(),this},t.prototype.disable=function(){return this._mesh.disable(),this},t}()),v=new(function(){function t(){this._mesh=new a("tri_Bokeh.bsm2").on("enabled",(function(){return n.enable("background")})).on("disabled",(function(){return n.disable("background")}))}return t.prototype.enable=function(){return this._mesh.enable(),this},t.prototype.disable=function(){return this._mesh.disable(),this},t}()),B=function(t){var e=t.split(" "),n=e[0],i=void 0===n?0:n,s=e[1],r=void 0===s?0:s,o=e[2],h=void 0===o?0:o,u=e[3];return[i,r,h,void 0===u?1:u].join(" ")},E=B,A=B,k=new(function(){function t(){this._mesh=new a("skin.bsm2").on("enabled",(function(){return n.enable("skin_segmentation")})).on("disabled",(function(){return n.disable("skin_segmentation")})),this._color=new y(17)}return t.prototype.color=function(t){return this._mesh.enable(),this._color.set(E(t)),this},t.prototype.clear=function(){return this._color.set("0 0 0 0"),this._mesh.disable(),this},r([g],t.prototype,"color",null),t}()),F="MakeupNull.png",I=function(){var t=new a("!glfx_FACE").on("enabled",(function(){new y(1).z.set(1)})),e={soflight:new f(t,0,"soft.ktx"),makeup:new f(t,1,F),eyesflare:new f(t,2,"FLARE_38_512.png")},n={eyes:new l(t,1,"lut3d_eyes_verylow.png"),teeth:new l(t,2,"lut3d_teeth_highlighter5.png")};return{enable:t.enable.bind(t),textures:e,luts:n}}(),S=function(){function t(){this._texture=I.textures.makeup,this._isEnabled=new y(2).x,this._isTwoEyesMakeup=new y(3).x}return t.prototype.set=function(t,e){return void 0===e&&(e=!0),I.enable(),this._texture.set(t),this._isEnabled.set(!0),this._isTwoEyesMakeup.set(e),this},t.prototype.clear=function(){return this._isEnabled.set(!1),this},r([g],t.prototype,"set",null),t}(),M=function(){function t(){this._isEnabled=new y(2).y,this._strength=new y(0).y}return t.prototype.strength=function(t){return I.enable(),this._strength.set(t),this._isEnabled.set(0!==t),this},r([g],t.prototype,"strength",null),t}(),O=function(){function t(){this._strength=new y(1).x}return t.prototype.strength=function(t){return I.enable(),this._strength.set(t),this},r([g],t.prototype,"strength",null),t}(),j=function(){function t(){this._isEnabled=new y(2).z,this._strength=new y(0).z}return t.prototype.strength=function(t){return I.enable(),this._strength.set(t),this._isEnabled.set(0!==t),this},r([g],t.prototype,"strength",null),t}(),R=function(){function t(){this._lut=I.luts.eyes}return t.prototype.strength=function(t){return I.enable(),this._lut.strength(t),this},r([g],t.prototype,"strength",null),t}(),z=function(){function t(){this._lut=I.luts.teeth}return t.prototype.strength=function(t){return I.enable(),this._lut.strength(t),this},r([g],t.prototype,"strength",null),t}(),C=new S,L=new M,D=new O,G=new j,H=new R,P=new z,T=function(){var t=new a("make01.bsm2").on("enabled",(function(){return I.enable()})),e={blusher:new f(t,0,"blushes.png"),contouring:new f(t,1,"contour.png"),eyeliner:new f(t,2,"eyeliner.png"),eyeshadow:new f(t,3,"eyeshadow.png"),lashes:new f(t,4,"eyelashes.png"),brows:new f(t,5,"eyebrows.png"),highlighter:new f(t,6,"highlighter.png"),__reserved:new f(t,7,F)};return{enable:t.enable.bind(t),textures:e}}(),N=function(){function t(t,e){this._defaultTextureUrl=t._file,this._texture=t.set(F),this._color=e,T.enable()}return t.prototype.set=function(t){return this._texture.set(t),this},t.prototype.color=function(t){return this._texture._file===F&&this._texture.set(this._defaultTextureUrl),this._color.set(E(t)),this},t.prototype.clear=function(){return this._color.set("0 0 0 0"),this},r([g],t.prototype,"set",null),r([g],t.prototype,"color",null),t}(),U=function(t){function e(){return t.call(this,T.textures.contouring,new y(5).set("0 0 0 1"))||this}return s(e,t),e}(N),V=function(t){function e(){return t.call(this,T.textures.blusher,new y(4).set("0 0 0 1"))||this}return s(e,t),e}(N),W=function(t){function e(){return t.call(this,T.textures.eyeshadow,new y(7).set("0 0 0 1"))||this}return s(e,t),e}(N),q=function(t){function e(){return t.call(this,T.textures.eyeliner,new y(6).set("0 0 0 1"))||this}return s(e,t),e}(N),J=function(t){function e(){return t.call(this,T.textures.lashes,new y(8).set("0 0 0 1"))||this}return s(e,t),e}(N),K=function(t){function e(){return t.call(this,T.textures.brows,new y(10).set("0 0 0 1"))||this}return s(e,t),e}(N),Q=function(t){function e(){return t.call(this,T.textures.highlighter,new y(11).set("0 0 0 1"))||this}return s(e,t),e}(N),X=new U,Y=new V,Z=new W,$=new q,tt=new J,et=new K,nt=new Q,it=new(function(){function t(){this._mesh=new a("eyelash.bsm2"),this._mesh2=new a("cut_lashes.bsm2"),this._texture=new f(this._mesh,0,"eyelashes3d.png"),this._color=new y(9)}return t.prototype.color=function(t){return this._mesh.enable(),this._mesh2.enable(),this._color.set(E(t)),this},t.prototype.set=function(t){return this._mesh.enable(),this._mesh2.enable(),this._texture.set(t),this},t.prototype.clear=function(){return this._color.set("0 0 0 0"),this._mesh.disable(),this._mesh2.disable(),this},r([g],t.prototype,"color",null),r([g],t.prototype,"set",null),t}()),st=[19,20,21,22,23,24,25,26],rt=new(function(){function t(){this._mesh1=new a("triHair.bsm2"),this._mesh2=new a("quadHair.bsm2"),this._colors=[new y(st[0]),new y(st[1]),new y(st[2]),new y(st[3])],this._usedColorsCount=new y(27).x}return t.prototype.color=function(t){var e=this;return Array.isArray(t)||(t=[t]),n.enable("hair"),this._mesh1.enable(),this._mesh2.enable(),t.forEach((function(t,n){null!=t&&e._colors[n].set(E(t))})),this._usedColorsCount.set(t.length),this},t.prototype.clear=function(){return this._colors.forEach((function(t){return t.set("0 0 0 0")})),this._usedColorsCount.set(0),this._mesh1.disable(),this._mesh2.disable(),n.disable("hair"),this},r([g],t.prototype,"color",null),t}()),ot=[19,20,21,22,23,24,25,26],ht=new(function(){function t(){this._mesh=new a("tri_a.bsm2").on("enabled",(function(){return n.enable("hair")})).on("disabled",(function(){return n.disable("hair")})),this._color=new y(ot[0])}return t.prototype.color=function(t){return this._mesh.enable(),this._color.set(E(t)),this},t.prototype.clear=function(){return this._color.set("0 0 0 0"),this._mesh.disable(),this},r([g],t.prototype,"color",null),t}()),ut=[28,29,30,31,32],lt=new(function(){function t(){this._mesh=new a("triHS.bsm2").on("enabled",(function(){return n.enable("hair_strand")})).on("disabled",(function(){return n.disable("hair_strand")})),this._colors=[new y(ut[0]),new y(ut[1]),new y(ut[2]),new y(ut[3]),new y(ut[4])]}return t.prototype.color=function(t){var e=this;return Array.isArray(t)||(t=[t]),this._mesh.enable(),t.forEach((function(t,n){null!=t&&e._colors[n].set(A(t))})),this},t.prototype.clear=function(){return this._colors.forEach((function(t){return t.set("0 0 0 0")})),this._mesh.disable(),this},r([g],t.prototype,"color",null),t}()),ct=new(function(){function t(){this._mesh=new a("lips.bsm2").on("enabled",(function(){return n.enable("lips_segmentation")})).on("disabled",(function(){return n.disable("lips_segmentation")})),this._color=new y(33),this._dull=new y(34).x.set(0),this._brightness=new y(34).y.set(1)}return t.prototype.color=function(t){return this._mesh.enable(),this._color.set(E(t)),this},t.prototype.saturation=function(t){return this._dull.set(1-t),this},t.prototype.brightness=function(t){return this._brightness.set(t),this},t.prototype.clear=function(){return this._color.set("0 0 0 0"),this._dull.set(0),this._brightness.set(1),this._mesh.disable(),this},r([g],t.prototype,"color",null),r([g],t.prototype,"saturation",null),r([g],t.prototype,"brightness",null),t}()),at=new(function(){function t(){var t=this;this._mesh=new a("eyes.bsm2").on("enabled",(function(){n.enable("eyes_segmentation"),u.on("face",t._enable).on("no-face",t._disable)})).on("disabled",(function(){n.disable("eyes_segmentation"),u.off("face",t._enable).off("no-face",t._disable)})),this._isEnabled=new y(12).x,this._color=new y(18),this._enable=function(){return t._isEnabled.set(!0)},this._disable=function(){return t._isEnabled.set(!1)}}return t.prototype.color=function(t){return this._mesh.enable(),this._color.set(E(t)),this},t.prototype.clear=function(){return this._color.set("0 0 0 0"),this._mesh.disable(),this},r([g],t.prototype,"color",null),t}()),pt="1.5 1 0.5 1",ft="0 0 0",_t=new(function(){function t(){this._mesh=new a("shiny_lips.bsm2").on("enabled",(function(){return n.enable("lips_shine")})).on("disabled",(function(){return n.disable("lips_shine")})),this._color=new y(33),this._shine=new y(35).set(pt),this._glitter=new y(36).set(ft)}return t.prototype.color=function(t){return this._mesh.enable(),this._color.set(E(t)),this},t.prototype.saturation=function(t){return this._shine.x.set(t),this},t.prototype.brightness=function(t){return this._shine.w.set(t),this},t.prototype.shineIntensity=function(t){return this._shine.y.set(t),this},t.prototype.shineBlending=function(t){return Api.print("DeprecationWarning: Using `ShinyLips.shineBlending` will soon stop working. Use `ShinyLips.shineBleeding` instead"),this.shineBlending=this.shineBleeding,this.shineBleeding(t)},t.prototype.shineBleeding=function(t){return this._shine.z.set(t),this},t.prototype.glitterGrain=function(t){return this._glitter.z.set(t),this},t.prototype.glitterIntensity=function(t){return this._glitter.y.set(t),this},t.prototype.glitterBleeding=function(t){return this._glitter.x.set(t),this},t.prototype.clear=function(){return this._color.set("0 0 0 0"),this._shine.set(pt),this._glitter.set(ft),this._mesh.disable(),this},r([g],t.prototype,"color",null),r([g],t.prototype,"saturation",null),r([g],t.prototype,"brightness",null),r([g],t.prototype,"shineIntensity",null),r([g],t.prototype,"shineBleeding",null),r([g],t.prototype,"glitterGrain",null),r([g],t.prototype,"glitterIntensity",null),r([g],t.prototype,"glitterBleeding",null),t}()),yt=new(function(){function t(){this._mesh=new a("tri.bsm2"),this._lut=new l(this._mesh,0),new y(13).set("0 1")}return t.prototype.set=function(t){return this._mesh.enable(),this._lut.set(t).strength(1),this},t.prototype.strength=function(t){return this._lut.strength(t),this},t.prototype.clear=function(){return this._mesh.disable(),this},r([g],t.prototype,"set",null),r([g],t.prototype,"strength",null),t}()),dt=new(function(){function t(){}return t.prototype.color=function(t){return k.color(t),this},t.prototype.strength=function(t){return D.strength(t),this},t.prototype.clear=function(){return k.clear(),D.strength(0),this},t}()),gt=new(function(){function t(){this._lips=ct,this._color="0 0 0 0",this._saturation=1,this._brightness=1,this._features={get isActive(){return[this.shineIntensity,this.shineBleeding,this.glitterIntensity,this.glitterBleeding].some((function(t){return 0!=t}))},shineIntensity:this._lips===ct?0:1,shineBleeding:this._lips===ct?0:.5,glitterGrain:this._lips===ct?0:.4,glitterIntensity:this._lips===ct?0:1,glitterBleeding:this._lips===ct?0:1}}return t.prototype._useLips=function(t){return this._lips===t||(this._lips.clear(),this._lips=t,this._lips.color(this._color).saturation(this._saturation).brightness(this._brightness)),this._lips},t.prototype._setFeature=function(t,e){return this._features[t]=e,this._features.isActive?this._useLips(_t)[t](this._features[t]):this._useLips(ct),this},t.prototype.color=function(t){return this._color=t,this._lips.color(this._color),this},t.prototype.saturation=function(t){return this._saturation=t,this._lips.saturation(this._saturation),this},t.prototype.brightness=function(t){return this._brightness=t,this._lips.brightness(this._brightness),this},t.prototype.shineIntensity=function(t){return this._setFeature("shineIntensity",t)},t.prototype.shineBlending=function(t){return Api.print("DeprecationWarning: Using `Lips.shineBlending` will soon stop working. Use `Lips.shineBleeding` instead"),this.shineBlending=this.shineBleeding,this.shineBleeding(t)},t.prototype.shineBleeding=function(t){return this._setFeature("shineBleeding",t)},t.prototype.glitterGrain=function(t){return this._setFeature("glitterGrain",t)},t.prototype.glitterIntensity=function(t){return this._setFeature("glitterIntensity",t)},t.prototype.glitterBleeding=function(t){return this._setFeature("glitterBleeding",t)},t.prototype.matt=function(t){return this.color(t).saturation(1).shineIntensity(0).shineBleeding(0).glitterIntensity(0).glitterBleeding(0)},t.prototype.shiny=function(t){return this.color(t).saturation(1.5).shineIntensity(1).shineBleeding(.5).glitterIntensity(0).glitterBleeding(0)},t.prototype.glitter=function(t){return this.color(t).saturation(1).shineIntensity(.9).shineBleeding(.6).glitterGrain(.4).glitterIntensity(1).glitterBleeding(1)},t.prototype.clear=function(){return this._lips.clear(),this._color="0 0 0 0",this._saturation=1,this._brightness=1,this._features.shineIntensity=0,this._features.shineBleeding=0,this._features.glitterGrain=0,this._features.glitterIntensity=0,this._features.glitterBleeding=0,this},t}()),bt="0.35.0";configure({faceActions:[u.emitFaceDetected],noFaceActions:[u.emitNoFaceDetected],videoRecordStartActions:[],videoRecordFinishActions:[],videoRecordDiscardActions:[],init:function(){},restart:function(){Api.meshfxReset(),this.init()}});t.BackgroundBlur=x,t.BackgroundBokeh=v,t.BackgroundTexture=m,t.Blush=Y,t.Contour=X,t.EyeBagsRemoval=w,t.Eyebrows=et,t.Eyelashes=tt,t.Eyelashes3d=it,t.Eyeliner=$,t.Eyes=at,t.EyesColor=at,t.EyesFlare=G,t.EyesWhitening=H,t.Eyeshadow=Z,t.FaceMorph=b,t.Foundation=dt,t.Hair=ht,t.HairGradient=rt,t.HairStrand=lt,t.Highlighter=nt,t.Lips=gt,t.LutFilter=yt,t.Makeup=C,t.Skin=k,t.SkinSoftening=D,t.Softlight=L,t.TeethWhitening=P,t.VERSION=bt,t.printVersion=function(){return Api.print("Makeup effect v0.35.0")},t.test=function(){P.strength(1),b.eyes(1).nose(1).face(1),L.strength(1),ht.color("0.09411, 0.2509, 0.3764"),at.color("0.1098, 0.3450, 0.2078"),w.enable(),nt.color("0.75 0.74 0.74 0.4"),X.color("0.3 0.1 0.1 0.6"),dt.color("0.73 0.39 0.08 0.4").strength(.75),Y.color("0.7 0.1 0.2 0.5"),$.color("0 0 0"),Z.color("0.6 0.5 1 0.6"),it.color("0 0 0.2 1"),et.color("0.8 0.4 0.2 0.4"),gt.glitter("0.85 0.43 0.5 0.8")},Object.defineProperty(t,"__esModule",{value:!0});var wt=new Function("return this;")();for(var mt in t)wt[mt]=t[mt];for(var mt in t){var xt=t[mt];if(null!==xt&&"object"==typeof xt)for(var vt in Object.getPrototypeOf(xt)){var Bt=xt[vt];wt[mt+"."+vt]=Bt.bind(xt)}}}({});