{"version":3,"sources":["webpack:///./src/client/js/style/ResetButtonStyle.js","webpack:///./src/client/js/component/MediaStreamHandler.jsx","webpack:///./src/client/js/component/MediaStreamMonitor.jsx","webpack:///./src/client/js/resource/CardinalSpline.js","webpack:///./src/client/js/component/ToneCurveEditor.jsx","webpack:///./src/client/js/resource/WebGL.js","webpack:///./src/client/js/component/ToneCurve.jsx","webpack:///./src/client/js/component/Main.jsx","webpack:///./src/client/img/github-icon.svg","webpack:///./src/client/js/component/Footer.jsx","webpack:///./src/client/img/email-icon.svg","webpack:///./src/client/img/x-men-school.svg","webpack:///./src/client/js/component/App.jsx","webpack:///./src/client/js/index.js"],"names":["ResetButtonStyle","css","MediaStreamHandler","state","isStarted","shouldPreview","mediaStream","error","video","React","createRef","startRecording","props","onChange","onError","setState","navigator","mediaDevices","getUserMedia","facingMode","stream","value","target","stopRecording","getTracks","forEach","track","stop","renderDescription","id","JSON","stringify","message","renderBody","ref","playsInline","handleTogglePreview","_","prevState","this","current","srcObject","play","StyledMediaStreamHandler","Header","StopButton","onClick","StartButton","ToggleButton","isActived","disabled","PureComponent","propTypes","PropTypes","func","defaultProps","styled","div","Body","Footer","Button","button","attrs","style","backgroundColor","MediaStreamMonitor","StyledMediaStreamMonitor","object","mk1","tension","k0","k2","y","x","getPolynomial","p0","p1","p2","p3","t","h00","h10","h01","h11","getPaddedPoints","points","ptail0","length","ptail1","getPolynomials","sortedPoints","sort","a","b","padPoints","slice","map","point","index","startPoint","stopPoint","polynomial","getCurvePoint","polynomials","find","p","SIZE","ToneCurveEditor","useState","cursorPoint","setCursorPoint","setTension","redControlPoints","redCurvePoints","setRedCurvePoints","canvas","useRef","useEffect","Array","fill","getCurvePoints","red","green","blue","context","getContext","clearRect","originStrokeStyle","strokeStyle","originLineWidth","lineWidth","beginPath","i","moveTo","lineTo","stroke","drawAxis","size","axisPoint","drawCross","fillStyle","arc","Math","PI","StyledToneCurveEditor","Monitor","width","height","onMouseMove","e","clientX","offsetLeft","clientY","offsetTop","onMouseLeave","Controls","Label","type","min","max","step","label","createShader","source","shader","shaderSource","compileShader","createBuffer","attribute","buffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","array","STATIC_DRAW","numComponents","count","floor","FLOAT","normalize","offset","stride","createTexture","ctx","texture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","dockBuffer","location","vertexAttribPointer","positionAttribute","textCoordAttribute","defaultToneTextureData","ImageData","Uint8ClampedArray","flatMap","ToneCurve","canvasRef","pixelSource","shouldAnimate","setShouldAnimate","strength","setStrength","maxFps","setMaxFps","fps","setFps","animationFrame","lastFrameTimestamp","toneTextureData","webGlContext","vertexShader","fragmentShader","program","positionLocation","textCoordLocation","pixelLocation","strengthLocation","toneLocation","shouldUpdateStrength","shouldUpdateToneTexture","positionBuffer","textCoordBuffer","pixelTexture","toneTexture","clear","deleteBuffer","deleteTexture","disableVertexAttribArray","deleteShader","deleteProgram","clearGlCore","rect","getBoundingClientRect","glCore","vertexShaderSource","fragmentShaderSource","VERTEX_SHADER","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","console","getProgramInfoLog","getShaderInfoLog","getAttribLocation","getUniformLocation","enableVertexAttribArray","window","cancelAnimationFrame","requestAnimationFrame","animate","timestamp","minInterval","elapsed","sourceWidth","sourceHeight","nodeName","videoWidth","videoHeight","canvasWidth","canvasHeight","viewport","clearColor","COLOR_BUFFER_BIT","useProgram","uniform1f","uniform1i","texImage2D","RGBA","UNSIGNED_BYTE","drawArrays","TRIANGLES","nextFrame","ceil","StyledToneCurve","DrawButton","tonePoints","data","isRequired","StyledMain","ModuleWrapper","Main","setMediaStream","sourceVideo","toneCurveCanvas","document","createElement","setAttribute","pause","email","github","StyledFooter","Link","href","src","GithubIcon","alt","string","GlobalStyle","createGlobalStyle","styledNormalize","title","description","App","request","log","Helmet","defaultTitle","titleTemplate","charSet","name","content","property","StyledApp","XMenLogoSource","sheet","instance","ReactDOM","render","getElementById"],"mappings":"oQAWeA,G,+BAPiBC,cAAH,4D,smDCGtB,IAAMC,EAAb,a,kOAAA,U,MAAA,uJACEC,MAAQ,CACNC,WAAW,EACXC,eAAe,EACfC,YAAa,KACbC,OAAO,GALX,EAOEC,MAAQC,IAAMC,YAPhB,EASEC,eATF,2BASmB,kHACe,EAAKC,MAA3BC,EADO,EACPA,SAAUC,EADH,EACGA,QADH,SAGb,EAAKC,SAAS,CAAEX,WAAW,IAHd,SAIQY,UAAUC,aAAaC,aAAa,CACvDV,MAAO,CAAEW,WAAY,iBALV,cAIPC,EAJO,OAOb,EAAKL,SAAS,CAAET,YAAac,IAPhB,kBAQNP,EAAS,CAAEQ,MAAOD,KARZ,yCAUb,EAAKL,SAAS,CAAER,MAAK,KAAEH,WAAW,IAVrB,kBAWNU,EAAQ,CAAEP,MAAK,KAAEe,OAAQ,EAAF,MAXjB,0DATnB,EAwBEC,cAAgB,WAAM,IACZjB,EAAgB,EAAKH,MAArBG,YACAO,EAAa,EAAKD,MAAlBC,SACJP,IACaA,EAAYkB,YACpBC,SAAQ,SAAAC,GAAK,OAAIA,EAAMC,UAC9Bd,EAAS,CAAEQ,MAAO,OAClB,EAAKN,SAAS,CACZT,YAAa,KACbF,WAAW,EACXC,eAAe,MAlCvB,EAmDEuB,kBAAoB,WAAM,MACkB,EAAKzB,MAAvCC,EADgB,EAChBA,UAAWE,EADK,EACLA,YAAaC,EADR,EACQA,MAEhC,OAAIH,EACEE,EACF,2BAA2BA,EAAYuB,IAEhC,0BAIPtB,EACF,iBAAiBuB,KAAKC,UAAUxB,EAAMyB,UAGjC,QAlEX,EAqEEC,WAAa,WAAM,IACT5B,EAAkB,EAAKF,MAAvBE,cACR,OACE,kBAAC,EAAD,KACE,6BAAM,EAAKuB,qBACVvB,GAAiB,2BAAO6B,IAAK,EAAK1B,MAAO2B,aAAW,MA1E7D,EA+EEC,oBAAsB,WAAM,MACa,EAAKjC,MAApCG,EADkB,EAClBA,YAAaD,EADK,EACLA,cACrB,GAAKC,EAGL,OAAO,EAAKS,SAAS,CAAEV,eAAgBA,KApF3C,S,EAAA,G,EAAA,0CAuCqBgC,EAAGC,GAAW,MACQC,KAAKpC,MAApCG,EADuB,EACvBA,YAAaD,EADU,EACVA,cACjBA,GAAiBA,IAAkBiC,EAAUjC,gBAC/CkC,KAAK/B,MAAMgC,QAAQC,UAAYnC,EAC/BiC,KAAK/B,MAAMgC,QAAQE,UA3CzB,6CAgDIH,KAAKhB,kBAhDT,+BAuFW,MACgCgB,KAAKpC,MAApCG,EADD,EACCA,YAAaD,EADd,EACcA,cACrB,OACE,kBAACsC,EAAD,KACE,kBAACC,EAAD,2BACCL,KAAKN,aACN,kBAAC,EAAD,KACG3B,EACC,kBAACuC,EAAD,CAAYC,QAASP,KAAKhB,eAA1B,QAEA,kBAACwB,EAAD,CAAaD,QAASP,KAAK5B,gBAA3B,SAEF,kBAACqC,EAAD,CACEC,UAAW5C,EACX6C,UAAW5C,EACXwC,QAASP,KAAKH,qBAHhB,kB,2BAnGV,GAAwC3B,IAAM0C,eAgH9CjD,EAAmBkD,UAAY,CAC7BvC,SAAUwC,IAAUC,KACpBxC,QAASuC,IAAUC,MAGrBpD,EAAmBqD,aAAe,CAChC1C,SAAU,kBAAM,MAChBC,QAAS,kBAAM,OAGjB,IAAM6B,EAA2Ba,UAAOC,IAAV,+FAAGD,CAAH,iEAMxBZ,EAASY,UAAOC,IAAV,6EAAGD,CAAH,2CAKNE,EAAOF,UAAOC,IAAV,2EAAGD,CAAH,kGAUJG,EAASH,UAAOC,IAAV,6EAAGD,CAAH,2CAKNI,EAASJ,UAAOK,OAAV,6EAAGL,CAAH,yFACRxD,GAUE+C,EAAcS,kBAAOI,GAAV,kFAAGJ,CAAH,+BAIXX,EAAaW,kBAAOI,GAAV,iFAAGJ,CAAH,+BAIVR,EAAeQ,kBAAOI,GAAQE,OAAM,YACxC,MAAO,CACLC,MAAO,CACLC,gBAHuD,EAAhBf,UAGV,UAAY,eAH7B,mFAAGO,CAAH,MAQHtD,I,uyCC/KR,IAAM+D,EAAb,a,kOAAA,U,MAAA,uJACE9D,MAAQ,CACNE,eAAe,GAFnB,EAIEG,MAAQC,IAAMC,YAJhB,EAsBE0B,oBAAsB,WAAM,IAClB9B,EAAgB,EAAKM,MAArBN,YACAD,EAAkB,EAAKF,MAAvBE,cACR,GAAKC,EAGL,OAAO,EAAKS,SAAS,CAAEV,eAAgBA,KA5B3C,S,EAAA,G,EAAA,0CAMqBgC,EAAGC,GAAW,IACvBhC,EAAgBiC,KAAK3B,MAArBN,YACAD,EAAkBkC,KAAKpC,MAAvBE,cACHC,GAAeA,IAAgBgC,EAAUhC,aAC5CiC,KAAKxB,SAAS,CAAEV,eAAe,IAG/BC,GACAD,GACAA,IAAkBiC,EAAUjC,gBAE5BkC,KAAK/B,MAAMgC,QAAQC,UAAYnC,EAC/BiC,KAAK/B,MAAMgC,QAAQE,UAlBzB,+BA+BW,IACCpC,EAAgBiC,KAAK3B,MAArBN,YACAD,EAAkBkC,KAAKpC,MAAvBE,cACR,OACE,kBAAC6D,EAAD,KACE,kBAAC,EAAD,2BACA,kBAAC,EAAD,KAAO7D,GAAiB,2BAAO6B,IAAKK,KAAK/B,MAAO2B,aAAW,KAC3D,kBAAC,EAAD,KACE,kBAAC,EAAD,CACEc,UAAW5C,EACX6C,UAAW5C,EACXwC,QAASP,KAAKH,qBAHhB,e,2BAvCV,GAAwC3B,IAAM0C,eAoD9Cc,EAAmBb,UAAY,CAC7B9C,YAAa+C,IAAUc,QAGzBF,EAAmBV,aAAe,CAChCjD,YAAa,MAGf,IAAM4D,EAA2BV,UAAOC,IAAV,+FAAGD,CAAH,iEAMxBZ,EAASY,UAAOC,IAAV,6EAAGD,CAAH,2CAKNE,EAAOF,UAAOC,IAAV,2EAAGD,CAAH,kGAUJG,EAASH,UAAOC,IAAV,6EAAGD,CAAH,2CAKNI,EAASJ,UAAOK,OAAV,6EAAGL,CAAH,yFACRxD,GAUEgD,EAAeQ,kBAAOI,GAAQE,OAAM,YACxC,MAAO,CACLC,MAAO,CACLC,gBAHuD,EAAhBf,UAGV,UAAY,eAH7B,mFAAGO,CAAH,MAQHS,I,y7BC7Gf,IAKMG,EAAM,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAASC,EAAZ,EAAYA,GAAIC,EAAhB,EAAgBA,GAAhB,OACR,EAAIF,IAAYE,EAAGC,EAAIF,EAAGE,IAAOD,EAAGE,EAAIH,EAAGG,IAEzCC,EAAgB,SAAC,GAAgC,IAA9BL,EAA8B,EAA9BA,QAASM,EAAqB,EAArBA,GAAIC,EAAiB,EAAjBA,GAAIC,EAAa,EAAbA,GAAIC,EAAS,EAATA,GAC5C,OAAO,SAAAC,GAAC,OATE,SAAAA,GAAC,OAAK,EAAI,EAAIA,IAAM,EAAIA,IAAM,EAAIA,GAU1CC,CAAID,GAAKH,EAAGJ,EATJ,SAAAO,GAAC,OAAIA,GAAK,EAAIA,IAAM,EAAIA,GAUhCE,CAAIF,IAAMF,EAAGJ,EAAIG,EAAGH,GAAKL,EAAI,CAAEC,UAASC,GAAIK,EAAIJ,GAAIM,IAT5C,SAAAE,GAAC,OAAIA,EAAIA,GAAK,EAAI,EAAIA,GAU9BG,CAAIH,GAAKF,EAAGL,EATJ,SAAAO,GAAC,OAAIA,EAAIA,GAAKA,EAAI,GAU1BI,CAAIJ,IAAMF,EAAGJ,EAAIG,EAAGH,GAAKL,EAAI,CAAEC,UAASC,GAAIM,EAAIL,GAAIO,MAGlDM,EAAkB,SAAC,GAAe,IAAbC,EAAa,EAAbA,OACnBV,EAAKU,EAAO,GACZT,EAAKS,EAAO,GACZC,EAASD,EAAOA,EAAOE,OAAS,GAChCC,EAASH,EAAOA,EAAOE,OAAS,GACtC,OACE,CAAEd,EAAGE,EAAGF,GAAKG,EAAGH,EAAIE,EAAGF,GAAID,EAAGG,EAAGH,GAAKI,EAAGJ,EAAIG,EAAGH,KADlD,SAEKa,GAFL,CAGE,CACEZ,EAAGa,EAAOb,GAAKa,EAAOb,EAAIe,EAAOf,GACjCD,EAAGc,EAAOd,GAAKc,EAAOd,EAAIgB,EAAOhB,OAKjCiB,GAAiB,WAMZ,6DAAP,GAAO,IALTJ,cAKS,MALA,CACP,CAAEZ,EAAG,EAAGD,EAAG,GACX,CAAEC,EAAG,IAAKD,EAAG,MAGN,MADTH,eACS,MADC,GACD,EACHqB,EAAeL,EAAOM,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAEnB,EAAIoB,EAAEpB,KAC7CqB,EAAYV,EAAgB,CAAEC,OAAQK,IAC5C,OAAOA,EAAaK,MAAM,GAAI,GAAGC,KAAI,SAACC,EAAOC,GAC3C,MAAO,CACLC,WAAYF,EACZG,UAAWV,EAAaQ,EAAQ,GAChCX,OAAQG,EAAaQ,EAAQ,GAAGzB,EAAIwB,EAAMxB,EAC1C4B,WAAY3B,EAAc,CACxBL,UACAM,GAAImB,EAAUI,GACdtB,GAAIkB,EAAUI,EAAQ,GACtBrB,GAAIiB,EAAUI,EAAQ,GACtBpB,GAAIgB,EAAUI,EAAQ,UAMxBI,GAAgB,SAAC,GAAuB,IAArB7B,EAAqB,EAArBA,EACjB4B,EADsC,EAAlBE,YACKC,MAC7B,SAAAC,GAAC,OAAIA,EAAEN,WAAW1B,GAAKA,GAAKgC,EAAEL,UAAU3B,GAAKA,KAE/C,GAAIA,IAAM4B,EAAWF,WAAW1B,EAC9B,MAAO,CAAEA,IAAGD,EAAG6B,EAAWF,WAAW3B,GAEvC,IAAMO,GAAKN,EAAI4B,EAAWF,WAAW1B,GAAK4B,EAAWd,OACrD,MAAO,CAAEd,IAAGD,EAAG6B,EAAWA,WAAWtB,K,28BC5DvC,IAAM2B,GAAO,IAmCPC,GAAkB,SAAC,GAAiB,IAAf9F,EAAe,EAAfA,SAAe,KACF+F,qBADE,GACjCC,EADiC,KACpBC,EADoB,UAEVF,mBAAS,GAFC,GAEjCvC,EAFiC,KAExB0C,EAFwB,KAGjCC,EAHiC,GAGbJ,mBAAS,CAClC,CAAEnC,EAAG,EAAGD,EAAG,GACX,CAAEC,EAAG,IAAKD,EAAG,KAEb,CAAEC,EAAG,IAAKD,EAAG,OAPyB,WASIoC,mBAAS,IATb,GASjCK,EATiC,KASjBC,EATiB,KAUlCC,EAASC,mBAEfC,qBAAU,WACR,IAAMJ,EDeoB,WAMnB,6DAAP,GAAO,IALT5B,cAKS,MALA,CACP,CAAEZ,EAAG,EAAGD,EAAG,GACX,CAAEC,EAAG,IAAKD,EAAG,MAGN,MADTH,QAEMkC,EAAcd,GAAe,CAAEJ,SAAQhB,aADpC,MADC,GACD,IAGT,OAAO,IAAIiD,MAAM,KAAKC,KAAK,GAAGvB,KAAI,SAAC3D,EAAG6D,GACpC,OAAOI,GAAc,CAAE7B,EAAGyB,EAAOK,mBCzBViB,CAAe,CACpCnD,UACAgB,OAAQ2B,IAEVE,EAAkBD,GAClBpG,EAAS,CACP4G,IAAKR,EACLS,MAAOT,EACPU,KAAMV,MAEP,CAAC5C,EAAS2C,EAAkBnG,IAE/BwG,qBAAU,WACR,IAAMO,EAAUT,EAAO3E,QAAQqF,WAAW,MAC1CD,EAAQE,UAAU,EAAG,EAAGpB,GAAMA,IA5DjB,SAAAkB,GACf,IAAMG,EAAoBH,EAAQI,YAClCJ,EAAQI,YAAc,WACtB,IAAMC,EAAkBL,EAAQM,UAChCN,EAAQM,UAAY,GACpBN,EAAQO,YACR,IAAK,IAAIC,EAAI,GAAIA,EAAI1B,GAAM0B,GAAQ,GACjCR,EAAQS,OAAOD,EAAG,GAClBR,EAAQU,OAAOF,EAAG1B,IAClBkB,EAAQS,OAAO,EAAG3B,GAAO0B,GACzBR,EAAQU,OAAO5B,GAAMA,GAAO0B,GAE9BR,EAAQW,SACRX,EAAQI,YAAcD,EACtBH,EAAQM,UAAYD,EAgDlBO,CAASZ,GACTf,GA9Cc,SAACe,EAAS3B,GAAqB,IAAdwC,EAAc,uDAAP,GAClCR,EAAkBL,EAAQM,UAC1BH,EAAoBH,EAAQI,YAC5BU,EAAY,CAAEjE,EAAGwB,EAAMxB,EAAGD,EAAGkC,GAAOT,EAAMzB,GAChDoD,EAAQI,YAAc,UACtBJ,EAAQM,UAAY,GACpBN,EAAQO,YACRP,EAAQS,OAAOK,EAAUjE,EAAGiE,EAAUlE,EAAIiE,GAC1Cb,EAAQU,OAAOI,EAAUjE,EAAGiE,EAAUlE,EAAIiE,GAC1Cb,EAAQS,OAAOK,EAAUjE,EAAIgE,EAAMC,EAAUlE,GAC7CoD,EAAQU,OAAOI,EAAUjE,EAAIgE,EAAMC,EAAUlE,GAC7CoD,EAAQW,SACRX,EAAQI,YAAcD,EACtBH,EAAQM,UAAYD,EAiCHU,CAAUf,EAASf,GAElCe,EAAQI,YAAc,MACtBJ,EAAQO,YACRP,EAAQS,OAAO,EAAG3B,IAClBO,EAAexF,SAAQ,SAAAwE,GACrB2B,EAAQU,OAAOrC,EAAMxB,EAAGiC,GAAOT,EAAMzB,MAEvCoD,EAAQW,SAERX,EAAQgB,UAAY,MACpB5B,EAAiBvF,SAAQ,SAAAwE,GACvB2B,EAAQO,YACRP,EAAQiB,IAAI5C,EAAMxB,EAAGiC,GAAOT,EAAMzB,EAAG,EAAG,EAAG,EAAIsE,KAAKC,IACpDnB,EAAQL,YAET,CAACP,EAAkBC,EAAgBJ,IAQtC,OACE,kBAACmC,GAAD,KACE,kBAACC,GAAD,CACEC,MAAOxC,GACPyC,OAAQzC,GACRxE,IAAKiF,EACLiC,YAZoB,SAAAC,GACxB,IAAM5E,EAAI4E,EAAEC,QAAUD,EAAE/H,OAAOiI,WACzB/E,EAAIkC,GAAO2C,EAAEG,QAAUH,EAAE/H,OAAOmI,UACtC3C,EAAe,CAAErC,IAAGD,OAUhBkF,aAAc,kBAAM5C,OAEtB,kBAAC6C,GAAD,KACE,kBAACC,GAAD,KACE,0CAAgBvF,GAChB,2BACEwF,KAAK,QACLC,IAAI,IACJC,IAAI,IACJC,KAAK,OACL3I,MAAOgD,EACPxD,SAAU,SAAAwI,GAAC,OAAItC,EAAWsC,EAAE/H,OAAOD,cAQ/CsF,GAAgBvD,UAAY,CAC1BvC,SAAUwC,IAAUC,MAGtBqD,GAAgBpD,aAAe,CAC7B1C,SAAU,kBAAM,OAGlB,IAAMmI,GAAwBxF,UAAOC,IAAV,yFAAGD,CAAH,mBAIrByF,GAAUzF,UAAO2D,OAAV,2EAAG3D,CAAH,6BAIPmG,GAAWnG,UAAOC,IAAV,4EAAGD,CAAH,iCAKRoG,GAAQpG,UAAOyG,MAAV,yEAAGzG,CAAH,0DAUImD,MCxJTuD,I,OAAe,SAACtC,EAASiC,EAAMM,GACnC,IAAMC,EAASxC,EAAQsC,aAAaL,GAGpC,OAFAjC,EAAQyC,aAAaD,EAAQD,GAC7BvC,EAAQ0C,cAAcF,GACfA,IAuDIG,GAAe,SAAC,GAA2B,IAAzB3C,EAAyB,EAAzBA,QAAS4C,EAAgB,EAAhBA,UAChCC,EAAS7C,EAAQ2C,eAOvB,OANA3C,EAAQ8C,WAAW9C,EAAQ+C,aAAcF,GACzC7C,EAAQgD,WACNhD,EAAQ+C,aACR,IAAIE,aAAaL,EAAUM,OAC3BlD,EAAQmD,aAEH,CACLN,SACAO,cAAeR,EAAUQ,cACzBC,MAAOnC,KAAKoC,MAAMV,EAAUM,MAAMvF,OAASiF,EAAUQ,eACrDnB,KAAMjC,EAAQuD,MACdC,WAAW,EACXC,OAAQ,EAGRC,OAAQ,IAICC,GAAgB,SAAC,GAA2B,IAAzB3D,EAAyB,EAAzBA,QAAyB,IAAhB1B,aAAgB,MAAR,EAAQ,EACjDsF,EAAM5D,EACN6D,EAAUD,EAAID,gBAOpB,OANAC,EAAIE,cAAcF,EAAIG,SAAWzF,GACjCsF,EAAII,YAAYJ,EAAIK,WAAYJ,GAChCD,EAAIM,cAAcN,EAAIK,WAAYL,EAAIO,eAAgBP,EAAIQ,eAC1DR,EAAIM,cAAcN,EAAIK,WAAYL,EAAIS,eAAgBT,EAAIQ,eAC1DR,EAAIM,cAAcN,EAAIK,WAAYL,EAAIU,mBAAoBV,EAAIW,SAC9DX,EAAIM,cAAcN,EAAIK,WAAYL,EAAIY,mBAAoBZ,EAAIW,SACvDV,GAGIY,GAAa,SAAC,GAAkC,IAAhCzE,EAAgC,EAAhCA,QAAS0E,EAAuB,EAAvBA,SAAU7B,EAAa,EAAbA,OAC9C7C,EAAQ8C,WAAW9C,EAAQ+C,aAAcF,EAAOA,QAChD7C,EAAQ2E,oBACND,EACA7B,EAAOO,cACPP,EAAOZ,KACPY,EAAOW,UACPX,EAAOa,OACPb,EAAOY,S,28BCrFX,IAgCMmB,GAAoB,CACxB1B,MAAO,EAAE,GAAI,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,GAAI,EAAG,GAC/CE,cAAe,GAEXyB,GAAqB,CACzB3B,MAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACzCE,cAAe,GAEX0B,GAAyB,IAAIC,UACjC,IAAIC,kBACF,IAAItF,MAAM,KAAKC,KAAK,GAAGsF,SAAQ,SAACxK,EAAG6D,GAAJ,MAAc,CAACA,EAAOA,EAAOA,EAAO,SAErE,KAGI4G,GAAY,SAAC,GAA+B,IAA7BC,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,YAAkB,KACNpG,oBAAS,GADH,GACzCqG,EADyC,KAC1BC,EAD0B,UAEhBtG,mBAAS,IAFO,GAEzCuG,EAFyC,KAE/BC,EAF+B,UAGpBxG,mBAAS,IAHW,GAGzCyG,EAHyC,KAGjCC,EAHiC,UAI1B1G,mBAAS,GAJiB,GAIzC2G,EAJyC,KAIpCC,EAJoC,KAM1CC,EAAiBrG,mBACjBsG,EAAqBtG,iBAAO,GAC5BuG,EAAkBvG,iBAAOsF,IAEzBkB,EAAexG,mBACfyG,EAAezG,mBACf0G,EAAiB1G,mBACjB2G,EAAU3G,mBAEV4G,EAAmB5G,mBACnB6G,EAAoB7G,mBACpB8G,EAAgB9G,mBAChB+G,EAAmB/G,mBACnBgH,EAAehH,mBAEfiH,EAAuBjH,kBAAO,GAC9BkH,EAA0BlH,kBAAO,GAEjCmH,EAAiBnH,mBACjBoH,EAAkBpH,mBAClBqH,EAAerH,mBACfsH,EAActH,mBAEpBC,qBAAU,WACRgH,EAAqB7L,SAAU,IAC9B,CAAC2K,IAEJ9F,qBAAU,WACR,IAAMsH,EAAQ,WACZ,IAAM/G,EAAUgG,EAAapL,QAC7B,GAAKoF,EAwBL,OApBI2G,EAAe/L,QAAQiI,QACzB7C,EAAQgH,aAAaL,EAAe/L,QAAQiI,QAE1C+D,EAAgBhM,QAAQiI,QAC1B7C,EAAQgH,aAAaJ,EAAgBhM,QAAQiI,QAE3CgE,EAAajM,SACfoF,EAAQiH,cAAcJ,EAAajM,SAEjCkM,EAAYlM,SACdoF,EAAQiH,cAAcH,EAAYlM,SAGhCwL,EAAiBxL,SACnBoF,EAAQkH,yBAAyBd,EAAiBxL,SAEhDyL,EAAkBzL,SACpBoF,EAAQkH,yBAAyBb,EAAkBzL,SD1EhC,WAKhB,6DAAP,GAJFoF,EAIS,EAJTA,QACAiG,EAGS,EAHTA,aACAC,EAES,EAFTA,eACAC,EACS,EADTA,QAEKnG,IAGLiG,GAAgBjG,EAAQmH,aAAalB,GACrCC,GAAkBlG,EAAQmH,aAAajB,GACvCC,GAAWnG,EAAQoH,cAAcjB,ICkEtBkB,CAAY,CACjBrH,UACAiG,aAAcA,EAAarL,QAC3BsL,eAAgBA,EAAetL,QAC/BuL,QAASA,EAAQvL,WAIf2E,EAAS4F,EAAUvK,QACzB,IAAK2E,EACH,OAAOwH,EAET,IAAMO,EAAO/H,EAAOgI,wBACpBhI,EAAOgC,OAAS+F,EAAK/F,OACrBhC,EAAO+B,MAAQgG,EAAKhG,MACpB,IAAMtB,EAAUT,EAAOU,WAAW,UAClC+F,EAAapL,QAAUoF,EAEvB,IAAMwH,EDrImB,SAAC,GAIxB,IAHJxH,EAGI,EAHJA,QACAyH,EAEI,EAFJA,mBACAC,EACI,EADJA,qBAEA,GAAK1H,GAAYyH,GAAuBC,EAAxC,CAGA,IAAMzB,EAAe3D,GACnBtC,EACAA,EAAQ2H,cACRF,GAEIvB,EAAiB5D,GACrBtC,EACAA,EAAQ4H,gBACRF,GAEIvB,EAAUnG,EAAQ6H,gBAKxB,GAJA7H,EAAQ8H,aAAa3B,EAASF,GAC9BjG,EAAQ8H,aAAa3B,EAASD,GAC9BlG,EAAQ+H,YAAY5B,GACJnG,EAAQgI,oBAAoB7B,EAASnG,EAAQiI,aAE3D,MAAO,CAAEhC,eAAcC,iBAAgBC,WAGzC+B,QAAQvP,MAAM,eAAgBqH,EAAQmI,kBAAkBhC,IAExD+B,QAAQvP,MAAM,eAAgBqH,EAAQoI,iBAAiBnC,IAEvDiC,QAAQvP,MAAM,eAAgBqH,EAAQoI,iBAAiBlC,IACvDlG,EAAQmH,aAAalB,GACrBjG,EAAQmH,aAAajB,GACrBlG,EAAQoH,cAAcjB,ICmGL0B,CAAc,CAC3B7H,UACAyH,mBA/HqB,+JAgIrBC,qBAtHuB,gkBAwHzB,OAAKF,GAGLvB,EAAarL,QAAU4M,EAAOvB,aAC9BC,EAAetL,QAAU4M,EAAOtB,eAChCC,EAAQvL,QAAU4M,EAAOrB,QAEzBC,EAAiBxL,QAAUoF,EAAQqI,kBACjCb,EAAOrB,QACP,aAEFE,EAAkBzL,QAAUoF,EAAQqI,kBAClCb,EAAOrB,QACP,cAEFG,EAAc1L,QAAUoF,EAAQsI,mBAC9Bd,EAAOrB,QACP,WAEFI,EAAiB3L,QAAUoF,EAAQsI,mBACjCd,EAAOrB,QACP,aAEFK,EAAa5L,QAAUoF,EAAQsI,mBAAmBd,EAAOrB,QAAS,SAElEnG,EAAQuI,wBAAwBnC,EAAiBxL,SACjDoF,EAAQuI,wBAAwBlC,EAAkBzL,SAElD+L,EAAe/L,QAAU+H,GAAa,CACpC3C,UACA4C,UAAWgC,KAEbgC,EAAgBhM,QAAU+H,GAAa,CACrC3C,UACA4C,UAAWiC,KAEbgC,EAAajM,QAAU+I,GAAc,CAAE3D,UAAS1B,MAAO,IACvDwI,EAAYlM,QAAU+I,GAAc,CAAE3D,UAAS1B,MAAO,IAEtDmG,GAAW,CACTzE,UACA0E,SAAU0B,EAAiBxL,QAC3BiI,OAAQ8D,EAAe/L,UAEzB6J,GAAW,CACTzE,UACA0E,SAAU2B,EAAkBzL,QAC5BiI,OAAQ+D,EAAgBhM,UAGnBmM,GAjDEA,IAkDR,CAAC5B,IAEJ1F,qBAAU,WAgFR,GAAK4F,EAOL,OAFAmD,OAAOC,qBAAqB5C,EAAejL,SAC3CiL,EAAejL,QAAU4N,OAAOE,uBAnBhB,SAAVC,EAAUC,GACVvD,IACFQ,EAAejL,QAAU4N,OAAOE,sBAAsBC,IAExD,IAAME,EAAc,IAAOpD,EACrBqD,EAAUF,EAAY9C,EAAmBlL,QAC3CkO,GAAWD,IACb/C,EAAmBlL,QAAUgO,EAzEf,WAChB,IAAM5I,EAAUgG,EAAapL,QAC7B,GAAKoF,GAAYoF,GAAgBe,EAAQvL,QAAzC,CAIA,IAAImO,EAAc/I,EAAQT,OAAO+B,MAC7B0H,EAAehJ,EAAQT,OAAOgC,OAC9B,SAAW6D,EAAY6D,UACzBF,EAAc3D,EAAY8D,WAC1BF,EAAe5D,EAAY+D,aAClB,WAAa/D,EAAY6D,WAClCF,EAAc3D,EAAY9D,MAC1B0H,EAAe5D,EAAY7D,QAG7B,IAAM6H,EAAcpJ,EAAQT,OAAO+B,MAC7B+H,EAAerJ,EAAQT,OAAOgC,OAChC6H,IAAgBL,GAAeM,IAAiBL,IAClDhJ,EAAQT,OAAO+B,MAAQyH,EACvB/I,EAAQT,OAAOgC,OAASyH,EACxBhJ,EAAQsJ,SAAS,EAAG,EAAGP,EAAaC,IAItChJ,EAAQuJ,WAAW,EAAG,EAAG,EAAG,GAC5BvJ,EAAQ+G,MAAM/G,EAAQwJ,kBAGtBxJ,EAAQyJ,WAAWtD,EAAQvL,SAEvB6L,EAAqB7L,UACvBoF,EAAQ0J,UAAUnD,EAAiB3L,QAAS2K,GAC5CkB,EAAqB7L,SAAU,GAGjCoF,EAAQ2J,UAAUrD,EAAc1L,QAAS,GACzCoF,EAAQgE,YAAYhE,EAAQiE,WAAY4C,EAAajM,SACrDoF,EAAQ4J,WACN5J,EAAQiE,WACR,EACAjE,EAAQ6J,KACR7J,EAAQ6J,KACR7J,EAAQ8J,cACR1E,GAGEsB,EAAwB9L,UAC1B8L,EAAwB9L,SAAU,GAIpCoF,EAAQ2J,UAAUnD,EAAa5L,QAAS,GACxCoF,EAAQgE,YAAYhE,EAAQiE,WAAY6C,EAAYlM,SACpDoF,EAAQ4J,WACN5J,EAAQiE,WACR,EACAjE,EAAQ6J,KACR7J,EAAQ6J,KACR7J,EAAQ8J,cACR/D,EAAgBnL,SAGlBoF,EAAQ+J,WAAW/J,EAAQgK,UAAW,EAAGrD,EAAe/L,QAAQyI,QAW9D4G,GACArE,EAAO1E,KAAKgJ,KAAK,IAAOpB,QAWrB,kBAAMN,OAAOC,qBAAqB5C,EAAejL,UANtD4N,OAAOC,qBAAqB5C,EAAejL,WAO5C,CAACyK,EAAeI,EAAQF,EAAUH,IAoBrC,OACE,kBAAC+E,GAAD,KACE,kBAAC,GAAD,kBACA,kBAAC,GAAD,KACE,4BAAQ7P,IAAK6K,KAEf,kBAAC,GAAD,KACE,kBAACiF,GAAD,CACE/O,UAAWgK,EACX/J,UAAW8J,EACXlK,QAAS,kBAAMoK,GAAkBD,KAHnC,QAOA,sCAAYM,GACZ,kBAAC,GAAD,KACE,kBAAC,GAAD,KACE,0CAAgBF,GAChB,2BACExD,KAAK,QACLC,IAAI,IACJC,IAAI,KACJC,KAAK,IACL3I,MAAOgM,EACPxM,SAAU,SAAAwI,GAAC,OAAIiE,EAAUjE,EAAE/H,OAAOD,WAGtC,kBAAC,GAAD,KACE,2CAAiB8L,GACjB,2BACEtD,KAAK,QACLC,IAAI,IACJC,IAAI,IACJC,KAAK,OACL3I,MAAO8L,EACPtM,SAAU,SAAAwI,GAAC,OAAI+D,EAAY/D,EAAE/H,OAAOD,WAGxC,kBAAC,GAAD,CAAiBR,SAxDA,SAAAoR,GACvB,IAAMC,EAAO,IAAIvF,UACf,IAAIC,kBACF,IAAItF,MAAM,KACPC,KAAK,GACLsF,SAAQ,SAACxK,EAAG6D,GAAJ,MAAc,CACrB+L,EAAWxK,IAAIvB,GAAO1B,EACtByN,EAAWvK,MAAMxB,GAAO1B,EACxByN,EAAWtK,KAAKzB,GAAO1B,EACvB,SAGN,KAEFmJ,EAAgBnL,QAAU0P,EAC1B5D,EAAwB9L,SAAU,SAgDtCsK,GAAU1J,UAAY,CACpB4J,YAAa3J,IAAUc,OACvB4I,UAAW1J,IAAUc,OAAOgO,YAG9BrF,GAAUvJ,aAAe,CACvByJ,YAAa,MAGf,IAAM+E,GAAkBvO,UAAOC,IAAV,iFAAGD,CAAH,iEAMfZ,GAASY,UAAOC,IAAV,wEAAGD,CAAH,2CAKNE,GAAOF,UAAOC,IAAV,sEAAGD,CAAH,oFASJI,GAASJ,UAAOK,OAAV,wEAAGL,CAAH,yFACRxD,GAUE2D,GAASH,UAAOC,IAAV,wEAAGD,CAAH,0EAQNwO,GAAaxO,kBAAOI,IAAQE,OAAM,YACtC,MAAO,CACLC,MAAO,CACLC,gBAHqD,EAAhBf,UAGR,UAAY,eAH/B,4EAAGO,CAAH,MAQVmG,GAAWnG,UAAOC,IAAV,0EAAGD,CAAH,2CAORoG,GAAQpG,UAAOyG,MAAV,uEAAGzG,CAAH,iDASIsJ,M,28BChaf,IA2CMsF,GAAa5O,UAAOC,IAAV,uEAAGD,CAAH,qDAMV6O,GAAgB7O,UAAOC,IAAV,0EAAGD,CAAH,4BAMJ8O,GAvDF,WAAM,SACqB1L,qBADrB,GACVtG,EADU,KACGiS,EADH,KAEXC,EAAcpL,mBACdqL,EAAkBrL,mBAsBxB,OApBAC,qBAAU,WACR,IAAM7G,EAAQkS,SAASC,cAAc,SAIrC,OAFAnS,EAAMoS,aAAa,eAAe,GAClCJ,EAAYhQ,QAAUhC,EACf,WAEL,OADAA,EAAMiC,UAAY,KACXjC,EAAMqS,WAEd,IAEHxL,qBAAU,WACRmL,EAAYhQ,QAAQC,UAAYnC,EAC5BA,EACFkS,EAAYhQ,QAAQE,OAEpB8P,EAAYhQ,QAAQqQ,UAErB,CAACvS,IAGF,kBAAC8R,GAAD,KACE,kBAACC,GAAD,KACE,kBAAC,EAAD,CAAoBxR,SAAU,gBAAGQ,EAAH,EAAGA,MAAH,OAAekR,EAAelR,OAE9D,kBAACgR,GAAD,KACE,kBAAC,EAAD,CAAoB/R,YAAaA,KAEnC,kBAAC+R,GAAD,KACE,kBAAC,GAAD,CACErF,YAAawF,EAAYhQ,QACzBuK,UAAW0F,OC5CN,OAA0B,+B,qzCCQlC,IAAM9O,GAAb,a,mOAAA,U,MAAA,sE,EAAA,G,EAAA,gCACW,MACmBpB,KAAK3B,MAAvBkS,EADD,EACCA,MAAOC,EADR,EACQA,OACf,OACE,kBAACC,GAAD,KACE,kBAACC,GAAD,CAAMC,KAAMH,EAAQzR,OAAO,UACzB,yBAAK6R,IAAKC,GAAYC,IAAI,YAE5B,kBAACJ,GAAD,CAAMC,KAAI,iBAAYJ,GAASxR,OAAO,UACpC,yBAAK6R,ICjBA,6nBDiBgBE,IAAI,iB,6BATnC,GAA4B5S,IAAM0C,eAgBlCQ,GAAOP,UAAY,CACjB0P,MAAOzP,IAAUiQ,OACjBP,OAAQ1P,IAAUiQ,QAGpB3P,GAAOJ,aAAe,CACpBuP,MAAO,sBACPC,OAAQ,0CAGV,IAAMC,GAAexP,UAAOC,IAAV,2EAAGD,CAAH,sFAQZyP,GAAOzP,UAAOoC,EAAV,mEAAGpC,CAAH,iLAkBKG,ME5DA,OAA0B,gC,0gECgBzC,IAAM4P,GAAcC,4BAAH,KACbC,KA6BEC,GAAQ,YACRC,GAAc,mBAEdC,GAAM,SAAC,GAAgB,IAAdC,EAAc,EAAdA,QAGb,OADA/D,QAAQgE,IAAI,iBAAkBD,GAE5B,oCACE,kBAACE,EAAA,EAAD,CAAQC,aAAa,YAAYC,cAAc,kBAC7C,0BAAMC,QAAQ,UACd,0BAAMC,KAAK,WAAWC,QAAQ,wCAE9B,0BAAMD,KAAK,SAASC,QAAQ,SAC5B,0BAAMD,KAAK,cAAcC,QAAST,KAElC,0BACEU,SAAS,SACTD,QAAQ,2CAEV,0BAAMC,SAAS,UAAUD,QAAQ,YACjC,0BAAMC,SAAS,WAAWD,QAASV,KACnC,0BAAMW,SAAS,iBAAiBD,QAAST,KACzC,0BAAMU,SAAS,eAAeD,QAASV,KACvC,0BAAMW,SAAS,eAAeD,QAAQ,YACtC,0BAAMC,SAAS,eAAeD,QAAQ,qBAGxC,kBAACb,GAAD,MACA,kBAACe,GAAD,MACIlE,QAAU,yBAAK+C,IAAKoB,GAAgBb,MAAM,kBAC5C,kBAAC,GAAD,MACA,kBAAC,GAAD,SAMRE,GAAIxQ,UAAY,CACdyQ,QAASxQ,IAAUc,QAGrByP,GAAIrQ,aAAe,CACjBsQ,QAAS,MAGX,IAAMS,GAAY9Q,UAAOC,IAAV,qEAAGD,CAAH,0GAQTE,GAAO,SAAC,GAAwB,IAAtB8Q,EAAsB,EAAtBA,MAAU5T,EAAY,gBACpC,OAAI4T,EAAMC,SAEN,kBAAC,oBAAD,CAAmBD,MAAOA,EAAMC,UAC9B,kBAAC,GAAQ7T,IAIN,kBAAC,GAAQA,IAIpB8C,GAAKN,UAAL,SACKwQ,GAAIxQ,WADT,IAEEoR,MAAOnR,IAAUc,SAGnBT,GAAKH,aAAL,SACKqQ,GAAIrQ,cADT,IAEEiR,MAAO,KAGU9Q,UClHnBgR,IAASC,OAAO,kBAAC,GAAD,MAASjC,SAASkC,eAAe","file":"js/bundle~bundle~5b60049d.f1554d8b.js","sourcesContent":["// ResetButtonStyle.js\n'use strict';\nimport { css } from 'styled-components';\n\nexport const ResetButtonStyle = css`\n  border: none;\n  padding: 0px;\n  outline: none;\n  background: none;\n`;\n\nexport default ResetButtonStyle;\n","// MediaStreamHandler.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nexport class MediaStreamHandler extends React.PureComponent {\n  state = {\n    isStarted: false,\n    shouldPreview: false,\n    mediaStream: null,\n    error: false,\n  };\n  video = React.createRef();\n\n  startRecording = async () => {\n    const { onChange, onError } = this.props;\n    try {\n      this.setState({ isStarted: true });\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: { facingMode: 'environment' },\n      });\n      this.setState({ mediaStream: stream });\n      return onChange({ value: stream });\n    } catch (error) {\n      this.setState({ error, isStarted: false });\n      return onError({ error, target: this });\n    }\n  };\n\n  stopRecording = () => {\n    const { mediaStream } = this.state;\n    const { onChange } = this.props;\n    if (mediaStream) {\n      const tracks = mediaStream.getTracks();\n      tracks.forEach(track => track.stop());\n      onChange({ value: null });\n      this.setState({\n        mediaStream: null,\n        isStarted: false,\n        shouldPreview: false,\n      });\n    }\n  };\n\n  componentDidUpdate(_, prevState) {\n    const { mediaStream, shouldPreview } = this.state;\n    if (shouldPreview && shouldPreview !== prevState.shouldPreview) {\n      this.video.current.srcObject = mediaStream;\n      this.video.current.play();\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopRecording();\n  }\n\n  renderDescription = () => {\n    const { isStarted, mediaStream, error } = this.state;\n\n    if (isStarted) {\n      if (mediaStream) {\n        return `Media stream id: ${mediaStream.id}`;\n      } else {\n        return 'Loading mediaStream ...';\n      }\n    }\n\n    if (error) {\n      return `Error: ${JSON.stringify(error.message)}`;\n    }\n\n    return 'Idle';\n  };\n\n  renderBody = () => {\n    const { shouldPreview } = this.state;\n    return (\n      <Body>\n        <div>{this.renderDescription()}</div>\n        {shouldPreview && <video ref={this.video} playsInline />}\n      </Body>\n    );\n  };\n\n  handleTogglePreview = () => {\n    const { mediaStream, shouldPreview } = this.state;\n    if (!mediaStream) {\n      return;\n    }\n    return this.setState({ shouldPreview: !shouldPreview });\n  };\n\n  render() {\n    const { mediaStream, shouldPreview } = this.state;\n    return (\n      <StyledMediaStreamHandler>\n        <Header>MediaStreamHandler</Header>\n        {this.renderBody()}\n        <Footer>\n          {mediaStream ? (\n            <StopButton onClick={this.stopRecording}>Stop</StopButton>\n          ) : (\n            <StartButton onClick={this.startRecording}>Start</StartButton>\n          )}\n          <ToggleButton\n            isActived={shouldPreview}\n            disabled={!mediaStream}\n            onClick={this.handleTogglePreview}\n          >\n            Preview\n          </ToggleButton>\n        </Footer>\n      </StyledMediaStreamHandler>\n    );\n  }\n}\n\nMediaStreamHandler.propTypes = {\n  onChange: PropTypes.func,\n  onError: PropTypes.func,\n};\n\nMediaStreamHandler.defaultProps = {\n  onChange: () => null,\n  onError: () => null,\n};\n\nconst StyledMediaStreamHandler = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > video {\n    margin-top: 8px;\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst StartButton = styled(Button)`\n  background-color: #6ab04c;\n`;\n\nconst StopButton = styled(Button)`\n  background-color: #eb4d4b;\n`;\n\nconst ToggleButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nexport default MediaStreamHandler;\n","// MediaStreamMonitor.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nexport class MediaStreamMonitor extends React.PureComponent {\n  state = {\n    shouldPreview: false,\n  };\n  video = React.createRef();\n\n  componentDidUpdate(_, prevState) {\n    const { mediaStream } = this.props;\n    const { shouldPreview } = this.state;\n    if (!mediaStream && mediaStream !== prevState.mediaStream) {\n      this.setState({ shouldPreview: false });\n    }\n    if (\n      mediaStream &&\n      shouldPreview &&\n      shouldPreview !== prevState.shouldPreview\n    ) {\n      this.video.current.srcObject = mediaStream;\n      this.video.current.play();\n    }\n  }\n\n  handleTogglePreview = () => {\n    const { mediaStream } = this.props;\n    const { shouldPreview } = this.state;\n    if (!mediaStream) {\n      return;\n    }\n    return this.setState({ shouldPreview: !shouldPreview });\n  };\n\n  render() {\n    const { mediaStream } = this.props;\n    const { shouldPreview } = this.state;\n    return (\n      <StyledMediaStreamMonitor>\n        <Header>MediaStreamMonitor</Header>\n        <Body>{shouldPreview && <video ref={this.video} playsInline />}</Body>\n        <Footer>\n          <ToggleButton\n            isActived={shouldPreview}\n            disabled={!mediaStream}\n            onClick={this.handleTogglePreview}\n          >\n            Open\n          </ToggleButton>\n        </Footer>\n      </StyledMediaStreamMonitor>\n    );\n  }\n}\n\nMediaStreamMonitor.propTypes = {\n  mediaStream: PropTypes.object,\n};\n\nMediaStreamMonitor.defaultProps = {\n  mediaStream: null,\n};\n\nconst StyledMediaStreamMonitor = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > video {\n    margin-top: 8px;\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst ToggleButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nexport default MediaStreamMonitor;\n","// CardinalSpline.js\n// https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline\n\nconst h00 = t => (1 + 2 * t) * (1 - t) * (1 - t);\nconst h10 = t => t * (1 - t) * (1 - t);\nconst h01 = t => t * t * (3 - 2 * t);\nconst h11 = t => t * t * (t - 1);\n\nconst mk1 = ({ tension, k0, k2 }) =>\n  ((1 - tension) * (k2.y - k0.y)) / (k2.x - k0.x);\n\nconst getPolynomial = ({ tension, p0, p1, p2, p3 }) => {\n  return t =>\n    h00(t) * p1.y +\n    h10(t) * (p2.x - p1.x) * mk1({ tension, k0: p0, k2: p2 }) +\n    h01(t) * p2.y +\n    h11(t) * (p2.x - p1.x) * mk1({ tension, k0: p1, k2: p3 });\n};\n\nconst getPaddedPoints = ({ points }) => {\n  const p0 = points[0];\n  const p1 = points[1];\n  const ptail0 = points[points.length - 1];\n  const ptail1 = points[points.length - 2];\n  return [\n    { x: p0.x - (p1.x - p0.x), y: p0.y - (p1.y - p0.y) },\n    ...points,\n    {\n      x: ptail0.x + (ptail0.x - ptail1.x),\n      y: ptail0.y + (ptail0.y - ptail1.y),\n    },\n  ];\n};\n\nconst getPolynomials = ({\n  points = [\n    { x: 0, y: 0 },\n    { x: 255, y: 255 },\n  ],\n  tension = 0.5,\n} = {}) => {\n  const sortedPoints = points.sort((a, b) => a.x - b.x);\n  const padPoints = getPaddedPoints({ points: sortedPoints });\n  return sortedPoints.slice(0, -1).map((point, index) => {\n    return {\n      startPoint: point,\n      stopPoint: sortedPoints[index + 1],\n      length: sortedPoints[index + 1].x - point.x,\n      polynomial: getPolynomial({\n        tension,\n        p0: padPoints[index],\n        p1: padPoints[index + 1],\n        p2: padPoints[index + 2],\n        p3: padPoints[index + 3],\n      }),\n    };\n  });\n};\n\nconst getCurvePoint = ({ x, polynomials }) => {\n  const polynomial = polynomials.find(\n    p => p.startPoint.x <= x && p.stopPoint.x >= x\n  );\n  if (x === polynomial.startPoint.x) {\n    return { x, y: polynomial.startPoint.y };\n  }\n  const t = (x - polynomial.startPoint.x) / polynomial.length;\n  return { x, y: polynomial.polynomial(t) };\n};\n\nexport const getCurvePoints = ({\n  points = [\n    { x: 0, y: 0 },\n    { x: 255, y: 255 },\n  ],\n  tension = 0.5,\n} = {}) => {\n  const polynomials = getPolynomials({ points, tension });\n\n  return new Array(256).fill(0).map((_, index) => {\n    return getCurvePoint({ x: index, polynomials });\n  });\n};\n","// ToneCurveEditor.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport { getCurvePoints } from '../resource/CardinalSpline.js';\n\nconst SIZE = 256;\n\nconst drawAxis = context => {\n  const originStrokeStyle = context.strokeStyle;\n  context.strokeStyle = 'darkgray';\n  const originLineWidth = context.lineWidth;\n  context.lineWidth = 0.5;\n  context.beginPath();\n  for (let i = 50; i < SIZE; i = i + 50) {\n    context.moveTo(i, 0);\n    context.lineTo(i, SIZE);\n    context.moveTo(0, SIZE - i);\n    context.lineTo(SIZE, SIZE - i);\n  }\n  context.stroke();\n  context.strokeStyle = originStrokeStyle;\n  context.lineWidth = originLineWidth;\n};\n\nconst drawCross = (context, point, size = 10) => {\n  const originLineWidth = context.lineWidth;\n  const originStrokeStyle = context.strokeStyle;\n  const axisPoint = { x: point.x, y: SIZE - point.y };\n  context.strokeStyle = '#f6e58d';\n  context.lineWidth = 0.5;\n  context.beginPath();\n  context.moveTo(axisPoint.x, axisPoint.y - size);\n  context.lineTo(axisPoint.x, axisPoint.y + size);\n  context.moveTo(axisPoint.x - size, axisPoint.y);\n  context.lineTo(axisPoint.x + size, axisPoint.y);\n  context.stroke();\n  context.strokeStyle = originStrokeStyle;\n  context.lineWidth = originLineWidth;\n};\n\nconst ToneCurveEditor = ({ onChange }) => {\n  const [cursorPoint, setCursorPoint] = useState();\n  const [tension, setTension] = useState(0);\n  const [redControlPoints] = useState([\n    { x: 0, y: 0 },\n    { x: 120, y: 146 }, // default\n    // { x: 120, y: 186 },\n    { x: 255, y: 255 },\n  ]);\n  const [redCurvePoints, setRedCurvePoints] = useState([]);\n  const canvas = useRef();\n\n  useEffect(() => {\n    const redCurvePoints = getCurvePoints({\n      tension,\n      points: redControlPoints,\n    });\n    setRedCurvePoints(redCurvePoints);\n    onChange({\n      red: redCurvePoints,\n      green: redCurvePoints,\n      blue: redCurvePoints,\n    });\n  }, [tension, redControlPoints, onChange]);\n\n  useEffect(() => {\n    const context = canvas.current.getContext('2d');\n    context.clearRect(0, 0, SIZE, SIZE);\n\n    drawAxis(context);\n    cursorPoint && drawCross(context, cursorPoint);\n\n    context.strokeStyle = 'red';\n    context.beginPath();\n    context.moveTo(0, SIZE);\n    redCurvePoints.forEach(point => {\n      context.lineTo(point.x, SIZE - point.y);\n    });\n    context.stroke();\n\n    context.fillStyle = 'red';\n    redControlPoints.forEach(point => {\n      context.beginPath();\n      context.arc(point.x, SIZE - point.y, 2, 0, 2 * Math.PI);\n      context.fill();\n    });\n  }, [redControlPoints, redCurvePoints, cursorPoint]);\n\n  const handleOnMouseMove = e => {\n    const x = e.clientX - e.target.offsetLeft;\n    const y = SIZE - e.clientY + e.target.offsetTop;\n    setCursorPoint({ x, y });\n  };\n\n  return (\n    <StyledToneCurveEditor>\n      <Monitor\n        width={SIZE}\n        height={SIZE}\n        ref={canvas}\n        onMouseMove={handleOnMouseMove}\n        onMouseLeave={() => setCursorPoint()}\n      />\n      <Controls>\n        <Label>\n          <span>Tension: {tension}</span>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"1\"\n            step=\"0.01\"\n            value={tension}\n            onChange={e => setTension(e.target.value)}\n          />\n        </Label>\n      </Controls>\n    </StyledToneCurveEditor>\n  );\n};\n\nToneCurveEditor.propTypes = {\n  onChange: PropTypes.func,\n};\n\nToneCurveEditor.defaultProps = {\n  onChange: () => null,\n};\n\nconst StyledToneCurveEditor = styled.div`\n  display: flex;\n`;\n\nconst Monitor = styled.canvas`\n  background-color: black;\n`;\n\nconst Controls = styled.div`\n  margin-left: 8px;\n  width: 100%;\n`;\n\nconst Label = styled.label`\n  display: block;\n  span {\n    display: block;\n  }\n  input {\n    width: 100%;\n  }\n`;\n\nexport default ToneCurveEditor;\n","// WebGL.js\nconst createShader = (context, type, source) => {\n  const shader = context.createShader(type);\n  context.shaderSource(shader, source);\n  context.compileShader(shader);\n  return shader;\n};\n\nexport const createProgram = ({\n  context,\n  vertexShaderSource,\n  fragmentShaderSource,\n}) => {\n  if (!context || !vertexShaderSource || !fragmentShaderSource) {\n    return;\n  }\n  const vertexShader = createShader(\n    context,\n    context.VERTEX_SHADER,\n    vertexShaderSource\n  );\n  const fragmentShader = createShader(\n    context,\n    context.FRAGMENT_SHADER,\n    fragmentShaderSource\n  );\n  const program = context.createProgram();\n  context.attachShader(program, vertexShader);\n  context.attachShader(program, fragmentShader);\n  context.linkProgram(program);\n  const success = context.getProgramParameter(program, context.LINK_STATUS);\n  if (success) {\n    return { vertexShader, fragmentShader, program };\n  }\n  // eslint-disable-next-line no-console\n  console.error('Link failed:', context.getProgramInfoLog(program));\n  // eslint-disable-next-line no-console\n  console.error('vs info-log:', context.getShaderInfoLog(vertexShader));\n  // eslint-disable-next-line no-console\n  console.error('fs info-log:', context.getShaderInfoLog(fragmentShader));\n  context.deleteShader(vertexShader);\n  context.deleteShader(fragmentShader);\n  context.deleteProgram(program);\n  return;\n};\n\nexport const clearGlCore = ({\n  context,\n  vertexShader,\n  fragmentShader,\n  program,\n} = {}) => {\n  if (!context) {\n    return;\n  }\n  vertexShader && context.deleteShader(vertexShader);\n  fragmentShader && context.deleteShader(fragmentShader);\n  program && context.deleteProgram(program);\n};\n\nexport const createBuffer = ({ context, attribute }) => {\n  const buffer = context.createBuffer();\n  context.bindBuffer(context.ARRAY_BUFFER, buffer);\n  context.bufferData(\n    context.ARRAY_BUFFER,\n    new Float32Array(attribute.array),\n    context.STATIC_DRAW\n  );\n  return {\n    buffer,\n    numComponents: attribute.numComponents,\n    count: Math.floor(attribute.array.length / attribute.numComponents),\n    type: context.FLOAT,\n    normalize: false,\n    offset: 0,\n    // how many bytes to get from one set of values to the next\n    // 0 = use type and numComponents above\n    stride: 0,\n  };\n};\n\nexport const createTexture = ({ context, index = 0 }) => {\n  const ctx = context;\n  const texture = ctx.createTexture();\n  ctx.activeTexture(ctx.TEXTURE0 + index);\n  ctx.bindTexture(ctx.TEXTURE_2D, texture);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_WRAP_S, ctx.CLAMP_TO_EDGE);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_WRAP_T, ctx.CLAMP_TO_EDGE);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_MIN_FILTER, ctx.NEAREST);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_MAG_FILTER, ctx.NEAREST);\n  return texture;\n};\n\nexport const dockBuffer = ({ context, location, buffer }) => {\n  context.bindBuffer(context.ARRAY_BUFFER, buffer.buffer);\n  context.vertexAttribPointer(\n    location,\n    buffer.numComponents,\n    buffer.type,\n    buffer.normalize,\n    buffer.stride,\n    buffer.offset\n  );\n};\n","// ToneCurve.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ToneCurveEditor from '../component/ToneCurveEditor.jsx';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n`;\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform float uStrength;\nuniform sampler2D uSource;\nuniform sampler2D uTone;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 colorIndex = texture(uSource, vTextCoord);\n  float revStr = 1.0 - uStrength;\n  outColor = vec4(\n    uStrength * vec4(texture(uTone, vec2(colorIndex.r, 0))).r + revStr * colorIndex.r,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.g, 0))).g + revStr * colorIndex.g,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.b, 0))).b + revStr * colorIndex.b,\n    1.0\n  );\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\nconst defaultToneTextureData = new ImageData(\n  new Uint8ClampedArray(\n    new Array(256).fill(0).flatMap((_, index) => [index, index, index, 255])\n  ),\n  256\n);\n\nconst ToneCurve = ({ canvasRef, pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [strength, setStrength] = useState(0.5);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n  const toneTextureData = useRef(defaultToneTextureData);\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const pixelLocation = useRef();\n  const strengthLocation = useRef();\n  const toneLocation = useRef();\n\n  const shouldUpdateStrength = useRef(true);\n  const shouldUpdateToneTexture = useRef(true);\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n  const toneTexture = useRef();\n\n  useEffect(() => {\n    shouldUpdateStrength.current = true;\n  }, [strength]);\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n      if (toneTexture.current) {\n        context.deleteTexture(toneTexture.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n    strengthLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uStrength'\n    );\n    toneLocation.current = context.getUniformLocation(glCore.program, 'uTone');\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context, index: 0 });\n    toneTexture.current = createTexture({ context, index: 1 });\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n\n      if (shouldUpdateStrength.current) {\n        context.uniform1f(strengthLocation.current, strength);\n        shouldUpdateStrength.current = false;\n      }\n\n      context.uniform1i(pixelLocation.current, 0);\n      context.bindTexture(context.TEXTURE_2D, pixelTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n\n      if (shouldUpdateToneTexture.current) {\n        shouldUpdateToneTexture.current = false;\n      }\n      // TODO: figure out why must apply tone texture every frame\n      // TODO: figure out why must apply tone texture after pixelSource\n      context.uniform1i(toneLocation.current, 1);\n      context.bindTexture(context.TEXTURE_2D, toneTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        toneTextureData.current\n      );\n\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, strength, pixelSource]);\n\n  const handleToneChange = tonePoints => {\n    const data = new ImageData(\n      new Uint8ClampedArray(\n        new Array(256)\n          .fill(0)\n          .flatMap((_, index) => [\n            tonePoints.red[index].y,\n            tonePoints.green[index].y,\n            tonePoints.blue[index].y,\n            255,\n          ])\n      ),\n      256\n    );\n    toneTextureData.current = data;\n    shouldUpdateToneTexture.current = true;\n  };\n\n  return (\n    <StyledToneCurve>\n      <Header>ToneCurve</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n          <Label>\n            <span>Strength: {strength}</span>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.01\"\n              value={strength}\n              onChange={e => setStrength(e.target.value)}\n            />\n          </Label>\n          <ToneCurveEditor onChange={handleToneChange} />\n        </Controls>\n      </Footer>\n    </StyledToneCurve>\n  );\n};\n\nToneCurve.propTypes = {\n  pixelSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nToneCurve.defaultProps = {\n  pixelSource: null,\n};\n\nconst StyledToneCurve = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n  * + * {\n    margin-top: 4px;\n  }\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default ToneCurve;\n","// Main.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport MediaStreamHandler from '../component/MediaStreamHandler.jsx';\nimport MediaStreamMonitor from '../component/MediaStreamMonitor.jsx';\nimport ToneCurve from '../component/ToneCurve.jsx';\n\nconst Main = () => {\n  const [mediaStream, setMediaStream] = useState();\n  const sourceVideo = useRef();\n  const toneCurveCanvas = useRef();\n\n  useEffect(() => {\n    const video = document.createElement('video');\n    // required to tell iOS safari we don't want fullscreen\n    video.setAttribute('playsinline', true);\n    sourceVideo.current = video;\n    return () => {\n      video.srcObject = null;\n      return video.pause();\n    };\n  }, []);\n\n  useEffect(() => {\n    sourceVideo.current.srcObject = mediaStream;\n    if (mediaStream) {\n      sourceVideo.current.play();\n    } else {\n      sourceVideo.current.pause();\n    }\n  }, [mediaStream]);\n\n  return (\n    <StyledMain>\n      <ModuleWrapper>\n        <MediaStreamHandler onChange={({ value }) => setMediaStream(value)} />\n      </ModuleWrapper>\n      <ModuleWrapper>\n        <MediaStreamMonitor mediaStream={mediaStream} />\n      </ModuleWrapper>\n      <ModuleWrapper>\n        <ToneCurve\n          pixelSource={sourceVideo.current}\n          canvasRef={toneCurveCanvas}\n        />\n      </ModuleWrapper>\n    </StyledMain>\n  );\n};\n\nconst StyledMain = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 8px;\n`;\n\nconst ModuleWrapper = styled.div`\n  & + & {\n    margin-top: 8px;\n  }\n`;\n\nexport default Main;\n","export default __webpack_public_path__ + \"img/github-icon.e1201fcc.svg\";","// Footer.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport EmailIcon from '../../img/email-icon.svg';\nimport GithubIcon from '../../img/github-icon.svg';\n\nexport class Footer extends React.PureComponent {\n  render() {\n    const { email, github } = this.props;\n    return (\n      <StyledFooter>\n        <Link href={github} target=\"_blank\">\n          <img src={GithubIcon} alt=\"github\" />\n        </Link>\n        <Link href={`mailto:${email}`} target=\"_blank\">\n          <img src={EmailIcon} alt=\"email\" />\n        </Link>\n      </StyledFooter>\n    );\n  }\n}\n\nFooter.propTypes = {\n  email: PropTypes.string,\n  github: PropTypes.string,\n};\n\nFooter.defaultProps = {\n  email: 'bill42362@gmail.com',\n  github: 'https://github.com/bill42362/portfolio',\n};\n\nconst StyledFooter = styled.div`\n  flex: auto;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  padding: 20px;\n`;\n\nconst Link = styled.a`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  background-color: #576574;\n\n  & + & {\n    margin-left: 8px;\n  }\n  img {\n    width: 60%;\n    height: auto;\n  }\n`;\n\nexport default Footer;\n","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNNDY3LDYxSDQ1QzIwLjIxOCw2MSwwLDgxLjE5NiwwLDEwNnYzMDBjMCwyNC43MiwyMC4xMjgsNDUsNDUsNDVoNDIyYzI0LjcyLDAsNDUtMjAuMTI4LDQ1LTQ1VjEwNiBDNTEyLDgxLjI4LDQ5MS44NzIsNjEsNDY3LDYxeiBNNDYwLjc4Niw5MUwyNTYuOTU0LDI5NC44MzNMNTEuMzU5LDkxSDQ2MC43ODZ6IE0zMCwzOTkuNzg4VjExMi4wNjlsMTQ0LjQ3OSwxNDMuMjRMMzAsMzk5Ljc4OHogTTUxLjIxMyw0MjFsMTQ0LjU3LTE0NC41N2w1MC42NTcsNTAuMjIyYzUuODY0LDUuODE0LDE1LjMyNyw1Ljc5NSwyMS4xNjctMC4wNDZMMzE3LDI3Ny4yMTNMNDYwLjc4Nyw0MjFINTEuMjEzeiBNNDgyLDM5OS43ODcgTDMzOC4yMTMsMjU2TDQ4MiwxMTIuMjEyVjM5OS43ODd6Ii8+PC9zdmc+\"","export default __webpack_public_path__ + \"img/x-men-school.0928a818.svg\";","// App.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { hot } from 'react-hot-loader/root';\nimport styled, {\n  createGlobalStyle,\n  StyleSheetManager,\n} from 'styled-components';\nimport styledNormalize from 'styled-normalize';\nimport { Helmet } from 'react-helmet';\n\nimport Main from '../component/Main.jsx';\nimport Footer from '../component/Footer.jsx';\n\nimport XMenLogoSource from '../../img/x-men-school.svg';\n\nconst GlobalStyle = createGlobalStyle`\n  ${styledNormalize};\n  *, ::after, ::before { box-sizing: border-box; }\n  body {\n    background-color: #101010;\n    color: #efefef;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\",\n      Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n    font-weight: 400;\n    -webkit-tap-highlight-color: transparent;\n    overscroll-behavior-y: contain;\n  }\n  button {\n    background-color: rgba(0, 0, 0, 0);\n    cursor: pointer;\n    &:disabled {\n      cursor: not-allowed;\n    }\n  }\n  input::placeholder,\n  input::-webkit-input-placeholder,\n  input::-moz-placeholder {\n    line-height: normal !important;\n    vertical-align: middle;\n  }\n  a { color: inherit; text-decoration: none; }\n  a > * { opacity: inherit; }\n  a:hover { opacity: .7; }\n`;\n\nconst title = 'Portfolio';\nconst description = \"Bill's portfolio\";\n\nconst App = ({ request }) => {\n  // eslint-disable-next-line no-console\n  console.log('App() request:', request);\n  return (\n    <>\n      <Helmet defaultTitle=\"Portfolio\" titleTemplate=\"%s - Portfolio\">\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n\n        <meta name=\"author\" content=\"Bill\" />\n        <meta name=\"description\" content={description} />\n\n        <meta\n          property=\"og:url\"\n          content=\"https://github.com/bill42362/portfolio\"\n        />\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:title\" content={title} />\n        <meta property=\"og:description\" content={description} />\n        <meta property=\"og:site_name\" content={title} />\n        <meta property=\"twitter:card\" content=\"summary\" />\n        <meta property=\"twitter:site\" content=\"@bill_portfolio\" />\n        {/* <meta property=\"twitter:image\" content={twitterImageSource} /> */}\n      </Helmet>\n      <GlobalStyle />\n      <StyledApp>\n        {!window && <img src={XMenLogoSource} title=\"Xavier school\" />}\n        <Main />\n        <Footer />\n      </StyledApp>\n    </>\n  );\n};\n\nApp.propTypes = {\n  request: PropTypes.object,\n};\n\nApp.defaultProps = {\n  request: null,\n};\n\nconst StyledApp = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-height: 100vh;\n  background-color: #222f3e;\n`;\n\nconst Body = ({ sheet, ...props }) => {\n  if (sheet.instance) {\n    return (\n      <StyleSheetManager sheet={sheet.instance}>\n        <App {...props} />\n      </StyleSheetManager>\n    );\n  } else {\n    return <App {...props} />;\n  }\n};\n\nBody.propTypes = {\n  ...App.propTypes,\n  sheet: PropTypes.object,\n};\n\nBody.defaultProps = {\n  ...App.defaultProps,\n  sheet: {},\n};\n\nexport default hot(Body);\n","// index.js\n'use strict';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './component/App.jsx';\n\nReactDOM.render(<App />, document.getElementById('app-root'));\n"],"sourceRoot":""}