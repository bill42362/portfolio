(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[1],{171:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(116),i=r.n(a),u=(r(91),r(137),r(2)),c=r.n(u),l=r(1),s=r(117),f=r.n(s),d=r(121),m=(r(61),r(77),r(79),r(80),r(146),Object(l.css)(["border:none;padding:0px;outline:none;background:none;"]));function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r,n,o,a,i){try{var u=e[a](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){p(a,n,o,i,u,"next",e)}function u(e){p(a,n,o,i,u,"throw",e)}i(void 0)}))}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=E(e);if(t){var o=E(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return w(this,r)}}function w(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(i,e);var t,r,n,a=y(i);function i(){var e;g(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).state={isStarted:!1,shouldPreview:!1,mediaStream:null,error:!1},e.video=o.a.createRef(),e.startRecording=b(regeneratorRuntime.mark((function t(){var r,n,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.onChange,o=r.onError,t.prev=1,e.setState({isStarted:!0}),t.next=5,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});case 5:return a=t.sent,e.setState({mediaStream:a}),t.abrupt("return",n({value:a}));case 10:return t.prev=10,t.t0=t.catch(1),e.setState({error:t.t0,isStarted:!1}),t.abrupt("return",o({error:t.t0,target:S(e)}));case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.stopRecording=function(){var t=e.state.mediaStream,r=e.props.onChange;t&&(t.getTracks().forEach((function(e){return e.stop()})),r({value:null}),e.setState({mediaStream:null,isStarted:!1,shouldPreview:!1}))},e.renderDescription=function(){var t=e.state,r=t.isStarted,n=t.mediaStream,o=t.error;return r?n?"Media stream id: ".concat(n.id):"Loading mediaStream ...":o?"Error: ".concat(JSON.stringify(o.message)):"Idle"},e.renderBody=function(){var t=e.state.shouldPreview;return o.a.createElement(R,null,o.a.createElement("div",null,e.renderDescription()),t&&o.a.createElement("video",{ref:e.video,playsInline:!0}))},e.handleTogglePreview=function(){var t=e.state,r=t.mediaStream,n=t.shouldPreview;if(r)return e.setState({shouldPreview:!n})},e}return t=i,(r=[{key:"componentDidUpdate",value:function(e,t){var r=this.state,n=r.mediaStream,o=r.shouldPreview;o&&o!==t.shouldPreview&&(this.video.current.srcObject=n,this.video.current.play())}},{key:"componentWillUnmount",value:function(){this.stopRecording()}},{key:"render",value:function(){var e=this.state,t=e.mediaStream,r=e.shouldPreview;return o.a.createElement(T,null,o.a.createElement(A,null,"MediaStreamHandler"),this.renderBody(),o.a.createElement(j,null,t?o.a.createElement(B,{onClick:this.stopRecording},"Stop"):o.a.createElement(_,{onClick:this.startRecording},"Start"),o.a.createElement(I,{isActived:r,disabled:!t,onClick:this.handleTogglePreview},"Preview")))}}])&&v(t.prototype,r),n&&v(t,n),i}(o.a.PureComponent);C.propTypes={onChange:c.a.func,onError:c.a.func},C.defaultProps={onChange:function(){return null},onError:function(){return null}};var T=l.default.div.withConfig({displayName:"MediaStreamHandler__StyledMediaStreamHandler",componentId:"ah9iko-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),A=l.default.div.withConfig({displayName:"MediaStreamHandler__Header",componentId:"ah9iko-1"})(["background-color:#4834d4;padding:8px;"]),R=l.default.div.withConfig({displayName:"MediaStreamHandler__Body",componentId:"ah9iko-2"})(["position:relative;background-color:#686de0;padding:8px;& > video{margin-top:8px;width:100%;}"]),j=l.default.div.withConfig({displayName:"MediaStreamHandler__Footer",componentId:"ah9iko-3"})(["background-color:#4834d4;padding:8px;"]),O=l.default.button.withConfig({displayName:"MediaStreamHandler__Button",componentId:"ah9iko-4"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),_=Object(l.default)(O).withConfig({displayName:"MediaStreamHandler__StartButton",componentId:"ah9iko-5"})(["background-color:#6ab04c;"]),B=Object(l.default)(O).withConfig({displayName:"MediaStreamHandler__StopButton",componentId:"ah9iko-6"})(["background-color:#eb4d4b;"]),I=Object(l.default)(O).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"MediaStreamHandler__ToggleButton",componentId:"ah9iko-7"})([""]),P=C;function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=L(e);if(t){var o=L(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(i,e);var t,r,n,a=M(i);function i(){var e;N(this,i);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=a.call.apply(a,[this].concat(r))).state={shouldPreview:!1},e.video=o.a.createRef(),e.handleTogglePreview=function(){var t=e.props.mediaStream,r=e.state.shouldPreview;if(t)return e.setState({shouldPreview:!r})},e}return t=i,(r=[{key:"componentDidUpdate",value:function(e,t){var r=this.props.mediaStream,n=this.state.shouldPreview;r||r===t.mediaStream||this.setState({shouldPreview:!1}),r&&n&&n!==t.shouldPreview&&(this.video.current.srcObject=r,this.video.current.play())}},{key:"render",value:function(){var e=this.props.mediaStream,t=this.state.shouldPreview;return o.a.createElement(G,null,o.a.createElement(q,null,"MediaStreamMonitor"),o.a.createElement(H,null,t&&o.a.createElement("video",{ref:this.video,playsInline:!0})),o.a.createElement(X,null,o.a.createElement(Y,{isActived:t,disabled:!e,onClick:this.handleTogglePreview},"Open")))}}])&&k(t.prototype,r),n&&k(t,n),i}(o.a.PureComponent);V.propTypes={mediaStream:c.a.object},V.defaultProps={mediaStream:null};var G=l.default.div.withConfig({displayName:"MediaStreamMonitor__StyledMediaStreamMonitor",componentId:"t1x8k1-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),q=l.default.div.withConfig({displayName:"MediaStreamMonitor__Header",componentId:"t1x8k1-1"})(["background-color:#4834d4;padding:8px;"]),H=l.default.div.withConfig({displayName:"MediaStreamMonitor__Body",componentId:"t1x8k1-2"})(["position:relative;background-color:#686de0;padding:8px;& > video{margin-top:8px;width:100%;}"]),X=l.default.div.withConfig({displayName:"MediaStreamMonitor__Footer",componentId:"t1x8k1-3"})(["background-color:#4834d4;padding:8px;"]),z=l.default.button.withConfig({displayName:"MediaStreamMonitor__Button",componentId:"t1x8k1-4"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),Y=Object(l.default)(z).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"MediaStreamMonitor__ToggleButton",componentId:"t1x8k1-5"})([""]),K=V,W=(r(147),r(148),r(21),r(30),r(85),r(31),r(32),r(33),r(34),r(35),r(36),r(37),r(38),r(39),r(40),r(41),r(42),r(43),r(44),r(45),r(46),r(47),r(48),r(49),r(50),r(51),r(52),r(53),function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}),$=function(e){var t=e.context,r=e.vertexShaderSource,n=e.fragmentShaderSource;if(t&&r&&n){var o=W(t,t.VERTEX_SHADER,r),a=W(t,t.FRAGMENT_SHADER,n),i=t.createProgram();if(t.attachShader(i,o),t.attachShader(i,a),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS))return{vertexShader:o,fragmentShader:a,program:i};console.error("Link failed:",t.getProgramInfoLog(i)),console.error("vs info-log:",t.getShaderInfoLog(o)),console.error("fs info-log:",t.getShaderInfoLog(a)),t.deleteShader(o),t.deleteShader(a),t.deleteProgram(i)}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=e.vertexShader,n=e.fragmentShader,o=e.program;t&&(r&&t.deleteShader(r),n&&t.deleteShader(n),o&&t.deleteProgram(o))},Z=function(e){var t=e.context,r=e.attribute,n=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r.array),t.STATIC_DRAW),{buffer:n,numComponents:r.numComponents,count:Math.floor(r.array.length/r.numComponents),type:t.FLOAT,normalize:!1,offset:0,stride:0}},J=function(e){var t=e.context,r=e.index,n=void 0===r?0:r,o=t,a=o.createTexture();return o.activeTexture(o.TEXTURE0+n),o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.canvas.width,o.canvas.height,0,o.RGBA,o.UNSIGNED_BYTE,null),a},ee=function(e){var t=e.context,r=e.location,n=e.buffer;t.bindBuffer(t.ARRAY_BUFFER,n.buffer),t.vertexAttribPointer(r,n.numComponents,n.type,n.normalize,n.stride,n.offset)},te=(r(16),"#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nuniform int uIsFrameBuffer;\nout vec2 vTextCoord;\n\nvoid main() {\n  vec4 position = aPosition;\n  if (1 == uIsFrameBuffer) {\n    // frame buffer axis is opposite with canvas.\n    position.y = -aPosition.y;\n  }\n  gl_Position = position;\n  vTextCoord = aTextCoord;\n}\n"),re="#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  float gbColor = 2.0 * originColor.b * originColor.g;\n  outColor = vec4(gbColor, gbColor, gbColor, originColor.a);\n}\n",ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context;if(!t)throw new Error("need context arg");this.context=t,this.core=$({context:t,vertexShaderSource:te,fragmentShaderSource:re}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource")};ne.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,ee({context:this.context,location:this.location[t],buffer:r})},ne.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.targetFrameBuffer,o=this.context;o.useProgram(this.core.program),o.bindTexture(o.TEXTURE_2D,t),o.uniform1i(this.location.uSource,r),n?(o.bindFramebuffer(o.FRAMEBUFFER,n),o.uniform1i(this.location.uIsFrameBuffer,1)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this.location.uIsFrameBuffer,0)),o.drawArrays(o.TRIANGLES,0,this.buffer.aPosition.count)};var oe=ne,ae=(r(87),"#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform vec2 uResolution;\nuniform int uKernalRadius;\nuniform float uKernelData[65];\nuniform int uIsVertical;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec2 delta = 1.0 / uResolution;\n  vec4 outputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\n  for (int index = -uKernalRadius; index <= uKernalRadius; index++) {\n    vec2 step = vec2(index, 0.0);\n    if (1 == uIsVertical) {\n      step = vec2(0.0, index);\n    }\n    vec2 offset = vTextCoord + step * delta;\n    outputColor += uKernelData[index + uKernalRadius] * texture(uSource, offset);\n  }\n\n  outColor = outputColor;\n}\n"),ie=function(e,t){for(var r=Math.floor(Math.abs(e)),n=t*t,o=new Array(2*r+1),a=0,i=-r;i<=r;++i){var u=i+r;o[u]=Math.exp(-i*i/(2*n))/Math.sqrt(2*Math.PI*n),a+=o[u]}var c=o.map((function(e){return e/a}));return{data:new Float32Array(c),radius:r}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=e.radius,n=void 0===r?16:r,o=e.sigma,a=void 0===o?5:o;if(!t)throw new Error("need context arg");this.context=t,this.core=$({context:t,vertexShaderSource:te,fragmentShaderSource:ae}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.location.uResolution=t.getUniformLocation(this.core.program,"uResolution"),this.location.uKernalRadius=t.getUniformLocation(this.core.program,"uKernalRadius"),this.location.uKernelData=t.getUniformLocation(this.core.program,"uKernelData"),this.location.uIsVertical=t.getUniformLocation(this.core.program,"uIsVertical"),this.updateKernal({radius:n,sigma:a})};ue.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,ee({context:this.context,location:this.location[t],buffer:r})},ue.prototype.updateKernal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,r=e.sigma;if(t&&isNaN(t))throw new Error("invalid radius");if(t&&(32<t||0>t))throw new Error("radius must be [0, 32]");if(r&&isNaN(r))throw new Error("invalid sigma");if(r&&0>=r)throw new Error("sigma must be > 0");this._radius=t||this._radius,this._sigma=r||this._sigma,this._kernal=ie(this._radius,this._sigma);var n=this.context;n.useProgram(this.core.program),n.uniform1i(this.location.uKernalRadius,this._kernal.radius),n.uniform1fv(this.location.uKernelData,this._kernal.data)},ue.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.midFrameBuffer,o=e.midTexture,a=e.midTextureIndex,i=e.targetFrameBuffer,u=this.context;u.useProgram(this.core.program),u.uniform2f(this.location.uResolution,u.canvas.width,u.canvas.height),u.bindTexture(u.TEXTURE_2D,t),u.uniform1i(this.location.uSource,r),u.bindFramebuffer(u.FRAMEBUFFER,n),u.uniform1i(this.location.uIsFrameBuffer,1),u.uniform1i(this.location.uIsVertical,1),u.drawArrays(u.TRIANGLES,0,this.buffer.aPosition.count),u.bindTexture(u.TEXTURE_2D,o),u.uniform1i(this.location.uSource,a),i?u.bindFramebuffer(u.FRAMEBUFFER,i):(u.bindFramebuffer(u.FRAMEBUFFER,null),u.uniform1i(this.location.uIsFrameBuffer,0)),u.uniform1i(this.location.uIsVertical,0),u.drawArrays(u.TRIANGLES,0,this.buffer.aPosition.count)};var ce=ue,le="#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uBlurredSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 blurredColor = texture(uBlurredSource, vTextCoord);\n  outColor = originColor - blurredColor + vec4(0.5, 0.5, 0.5, 1.0);\n}\n",se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context;if(!t)throw new Error("need context arg");this.context=t,this.core=$({context:t,vertexShaderSource:te,fragmentShaderSource:le}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.location.uBlurredSource=t.getUniformLocation(this.core.program,"uBlurredSource")};se.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,ee({context:this.context,location:this.location[t],buffer:r})},se.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.blurredSourceTexture,o=e.blurredSourceTextureIndex,a=e.targetFrameBuffer,i=this.context;i.useProgram(this.core.program),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(this.location.uSource,r),i.bindTexture(i.TEXTURE_2D,n),i.uniform1i(this.location.uBlurredSource,o),a?(i.bindFramebuffer(i.FRAMEBUFFER,a),i.uniform1i(this.location.uIsFrameBuffer,1)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.uniform1i(this.location.uIsFrameBuffer,0)),i.drawArrays(i.TRIANGLES,0,this.buffer.aPosition.count)};var fe=se,de="#version 300 es\nprecision highp float;\n\nuniform int uCycles;\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n\n  float color = originColor.b;\n  for (int i = 0; i < uCycles; ++i) {\n    if (color < 0.5) {\n      color = color * color * 2.0;\n    } else {\n      color = 1.0 - (1.0 - color) * (1.0 - color) * 2.0;\n    }\n  }\n\n  float k = 255.0 / (164.0 - 75.0);\n  color = (color - 75.0 / 255.0) * k;\n\n  outColor = vec4(color, color, color, originColor.a);;\n}\n",me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=e.cycles,n=void 0===r?3:r;if(!t)throw new Error("need context arg");this.context=t,this.core=$({context:t,vertexShaderSource:te,fragmentShaderSource:de}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uCycles=t.getUniformLocation(this.core.program,"uCycles"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.updateCycles({cycles:n})};me.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,ee({context:this.context,location:this.location[t],buffer:r})},me.prototype.updateCycles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cycles;if(!t||isNaN(t))throw new Error("invalid cycles argument");this._cycles=Math.max(Math.floor(t),0)||this._cycles;var r=this.context;r.useProgram(this.core.program),r.uniform1i(this.location.uCycles,this._cycles)},me.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.targetFrameBuffer,o=this.context;o.useProgram(this.core.program),o.bindTexture(o.TEXTURE_2D,t),o.uniform1i(this.location.uSource,r),n?(o.bindFramebuffer(o.FRAMEBUFFER,n),o.uniform1i(this.location.uIsFrameBuffer,1)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this.location.uIsFrameBuffer,0)),o.drawArrays(o.TRIANGLES,0,this.buffer.aPosition.count)};var he=me;r(65),r(113),r(114),r(115),r(169),r(170);function pe(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return be(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ge=function(e){var t=e.tension,r=e.k0,n=e.k2;return(1-t)*(n.y-r.y)/(n.x-r.x)},ve=function(e){var t=e.tension,r=e.p0,n=e.p1,o=e.p2,a=e.p3;return function(e){return function(e){return(1+2*e)*(1-e)*(1-e)}(e)*n.y+function(e){return e*(1-e)*(1-e)}(e)*(o.x-n.x)*ge({tension:t,k0:r,k2:o})+function(e){return e*e*(3-2*e)}(e)*o.y+function(e){return e*e*(e-1)}(e)*(o.x-n.x)*ge({tension:t,k0:n,k2:a})}},xe=function(e){var t=e.points,r=t[0],n=t[1],o=t[t.length-1],a=t[t.length-2];return[{x:r.x-(n.x-r.x),y:r.y-(n.y-r.y)}].concat(pe(t),[{x:o.x+(o.x-a.x),y:o.y+(o.y-a.y)}])},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.points,r=void 0===t?[{x:0,y:0},{x:255,y:255}]:t,n=e.tension,o=void 0===n?.5:n,a=r.sort((function(e,t){return e.x-t.x})),i=xe({points:a});return a.slice(0,-1).map((function(e,t){return{startPoint:e,stopPoint:a[t+1],length:a[t+1].x-e.x,polynomial:ve({tension:o,p0:i[t],p1:i[t+1],p2:i[t+2],p3:i[t+3]})}}))},we=function(e){var t=e.x,r=e.polynomials.find((function(e){return e.startPoint.x<=t&&e.stopPoint.x>=t}));if(t===r.startPoint.x)return{x:t,y:r.startPoint.y};var n=(t-r.startPoint.x)/r.length;return{x:t,y:r.polynomial(n)}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.points,r=void 0===t?[{x:0,y:0},{x:255,y:255}]:t,n=e.tension,o=void 0===n?.5:n,a=ye({points:r,tension:o});return new Array(256).fill(0).map((function(e,t){return we({x:t,polynomials:a})}))},Ee="#version 300 es\nprecision highp float;\n\nuniform float uStrength;\nuniform sampler2D uSource;\nuniform sampler2D uTone;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 colorIndex = texture(uSource, vTextCoord);\n  float revStr = 1.0 - uStrength;\n  outColor = vec4(\n    uStrength * vec4(texture(uTone, vec2(colorIndex.r, 0))).r + revStr * colorIndex.r,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.g, 0))).g + revStr * colorIndex.g,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.b, 0))).b + revStr * colorIndex.b,\n    1.0\n  );\n}\n",Ce=[{x:0,y:0},{x:120,y:146},{x:255,y:255}],Te={red:Ce,green:Ce,blue:Ce},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=e.toneMapTexture,n=e.toneMapTextureIndex,o=e.strength,a=void 0===o?.5:o,i=e.controlPoints,u=void 0===i?Te:i,c=e.tension,l=void 0===c?.5:c;if(!t||!r||!n)throw new Error("not enough arguments");this.context=t,this.toneMapTexture=r,this.toneMapTextureIndex=n,this.core=$({context:t,vertexShaderSource:te,fragmentShaderSource:Ee}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uStrength=t.getUniformLocation(this.core.program,"uStrength"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.location.uTone=t.getUniformLocation(this.core.program,"uTone"),t.useProgram(this.core.program),t.uniform1i(this.location.uTone,this.toneMapTextureIndex),this.updateStrength({strength:a}),this.updateCurvePoints({controlPoints:u,tension:l})};Ae.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,ee({context:this.context,location:this.location[t],buffer:r})},Ae.prototype.updateStrength=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.strength;if(!t||isNaN(t))throw new Error("invalid strength argument");this._strength=Math.max(Math.min(t,1),0)||this._strength;var r=this.context;r.useProgram(this.core.program),r.uniform1f(this.location.uStrength,this._strength)},Ae.prototype.updateCurvePoints=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.controlPoints,n=t.tension;if(r&&(!r.red||!r.green||!r.blue))throw new Error("invalid controlPoints argument");if(n&&isNaN(n))throw new Error("invalid tension argument");(r&&r!==this._controlPoints||n&&n!==this._tension)&&(this._controlPoints=r||this._controlPoints,this._tension=n||this._tension,this._curvePoints={red:Se({points:this._controlPoints.red,tension:this._tension}),green:Se({points:this._controlPoints.green,tension:this._tension}),blue:Se({points:this._controlPoints.blue,tension:this._tension})},this._curveImageData=new ImageData(new Uint8ClampedArray(new Array(256).fill(0).flatMap((function(t,r){return[e._curvePoints.red[r].y,e._curvePoints.green[r].y,e._curvePoints.blue[r].y,255]}))),256))},Ae.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.targetFrameBuffer,o=this.context;o.useProgram(this.core.program),o.bindTexture(o.TEXTURE_2D,t),o.uniform1i(this.location.uSource,r),o.bindTexture(o.TEXTURE_2D,this.toneMapTexture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,this._curveImageData),n?(o.bindFramebuffer(o.FRAMEBUFFER,n),o.uniform1i(this.location.uIsFrameBuffer,1)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this.location.uIsFrameBuffer,0)),o.drawArrays(o.TRIANGLES,0,this.buffer.aPosition.count)};var Re=Ae,je="#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uMask;\nuniform sampler2D uBlendSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 maskColor = texture(uMask, vTextCoord);\n  vec4 blendColor = texture(uBlendSource, vTextCoord);\n  outColor = vec4(mix(originColor.rgb, blendColor.rgb, 1.0 - maskColor.b), 1.0);\n}\n",Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context;if(!t)throw new Error("need context arg");this.context=t,this.core=$({context:t,vertexShaderSource:te,fragmentShaderSource:je}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.location.uMask=t.getUniformLocation(this.core.program,"uMask"),this.location.uBlendSource=t.getUniformLocation(this.core.program,"uBlendSource")};Oe.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,ee({context:this.context,location:this.location[t],buffer:r})},Oe.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.maskTexture,o=e.maskTextureIndex,a=e.blendSourceTexture,i=e.blendSourceTextureIndex,u=e.targetFrameBuffer,c=this.context;c.useProgram(this.core.program),c.bindTexture(c.TEXTURE_2D,t),c.uniform1i(this.location.uSource,r),c.bindTexture(c.TEXTURE_2D,n),c.uniform1i(this.location.uMask,o),c.bindTexture(c.TEXTURE_2D,a),c.uniform1i(this.location.uBlendSource,i),u?(c.bindFramebuffer(c.FRAMEBUFFER,u),c.uniform1i(this.location.uIsFrameBuffer,1)):(c.bindFramebuffer(c.FRAMEBUFFER,null),c.uniform1i(this.location.uIsFrameBuffer,0)),c.drawArrays(c.TRIANGLES,0,this.buffer.aPosition.count)};var _e=Oe,Be="#version 300 es\nprecision highp float;\n\nuniform vec4 uColor;\nout vec4 outColor;\n\nvoid main() {\n  outColor = uColor;\n}\n";function Ie(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=e.color,n=void 0===r?[0,0,0,1]:r;if(!t)throw new Error("need context arg");this.context=t,this.core=$({context:t,vertexShaderSource:te,fragmentShaderSource:Be}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uColor=t.getUniformLocation(this.core.program,"uColor"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.updateColor({color:n})};Fe.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,ee({context:this.context,location:this.location[t],buffer:r})},Fe.prototype.updateColor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color;if(t&&(!Array.isArray(t)||4!==t.length))throw new Error("invalid color argument");this._color=t||this._color;var r=this.context;r.useProgram(this.core.program),r.uniform4f.apply(r,[this.location.uColor].concat(Ie(this._color)))},Fe.prototype.draw=function(e){var t=e.targetFrameBuffer,r=this.context;r.useProgram(this.core.program),t?(r.bindFramebuffer(r.FRAMEBUFFER,t),r.uniform1i(this.location.uIsFrameBuffer,1)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.uniform1i(this.location.uIsFrameBuffer,0)),r.drawArrays(r.TRIANGLES,0,this.buffer.aPosition.count)};var Ne=Fe,ke="#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(uSource, vTextCoord);\n}\n",De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context;if(!t)throw new Error("need context arg");this.context=t,this.core=$({context:t,vertexShaderSource:te,fragmentShaderSource:ke}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource")};De.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,ee({context:this.context,location:this.location[t],buffer:r})},De.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.targetFrameBuffer,o=this.context;o.useProgram(this.core.program),o.bindTexture(o.TEXTURE_2D,t),o.uniform1i(this.location.uSource,r),n?(o.bindFramebuffer(o.FRAMEBUFFER,n),o.uniform1i(this.location.uIsFrameBuffer,1)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this.location.uIsFrameBuffer,0)),o.drawArrays(o.TRIANGLES,0,this.buffer.aPosition.count)};var Me=De;function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ge=["source","greenBlueChannel","gaussianBlurMid","gaussianBlur","highPassFilter","hardLight","toneMap","toneCurve","maskBlender"],qe=["greenBlueChannel","gaussianBlurMid","gaussianBlur","highPassFilter","hardLight","toneCurve","maskBlender"],He=Ge.reduce((function(e,t,r){return Le(Le({},e),{},Ve({},t,r))}),{}),Xe=[0,0,0,0],ze={array:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1],numComponents:2},Ye={array:[0,1,1,1,1,0,0,1,1,0,0,0],numComponents:2},Ke=function(){var e=this,t=document.createElement("canvas");this.canvas=t,window.canvas=t;var r=t.getContext("webgl2");this.context=r,window.context=r,this.buffer={},this.buffer.aPosition=Z({context:r,attribute:ze}),this.buffer.aTextCoord=Z({context:r,attribute:Ye}),this.texture={},Ge.forEach((function(t){e.texture[t]=J({context:r,index:He[t]})})),this.frameBuffer={},qe.forEach((function(t){e.frameBuffer[t]=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,e.frameBuffer[t]),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture[t],0)})),this.greenBlueChannel=new oe({context:this.context}),this.greenBlueChannel.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.greenBlueChannel.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.gaussianBlur=new ce({context:this.context}),this.gaussianBlur.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.gaussianBlur.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.highPassFilter=new fe({context:this.context}),this.highPassFilter.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.highPassFilter.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.hardLight=new he({context:this.context}),this.hardLight.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.hardLight.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.toneCurve=new Re({context:this.context,toneMapTexture:this.texture.toneMap,toneMapTextureIndex:He.toneMap}),this.toneCurve.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.toneCurve.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.maskBlender=new _e({context:this.context}),this.maskBlender.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.maskBlender.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.fillColor=new Ne({context:this.context,color:Xe}),this.fillColor.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.fillColor.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.copyTexture=new Me({context:this.context}),this.copyTexture.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.copyTexture.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord})};Ke.prototype.draw=function(e){var t=e.pixelSource;if(t&&this.context){this.updateCanvasSize({pixelSource:t});var r=this.context;r.clearColor.apply(r,Xe),r.clear(r.COLOR_BUFFER_BIT),r.bindTexture(r.TEXTURE_2D,this.texture.source),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),this.greenBlueChannel.draw({sourceTexture:this.texture.source,sourceTextureIndex:He.source,targetFrameBuffer:this.frameBuffer.greenBlueChannel}),this.gaussianBlur.draw({sourceTexture:this.texture.greenBlueChannel,sourceTextureIndex:He.greenBlueChannel,midFrameBuffer:this.frameBuffer.gaussianBlurMid,midTexture:this.texture.gaussianBlurMid,midTextureIndex:He.gaussianBlurMid,targetFrameBuffer:this.frameBuffer.gaussianBlur}),this.highPassFilter.draw({sourceTexture:this.texture.greenBlueChannel,sourceTextureIndex:He.greenBlueChannel,blurredSourceTexture:this.texture.gaussianBlur,blurredSourceTextureIndex:He.gaussianBlur,targetFrameBuffer:this.frameBuffer.highPassFilter}),this.hardLight.draw({sourceTexture:this.texture.highPassFilter,sourceTextureIndex:He.highPassFilter,targetFrameBuffer:this.frameBuffer.hardLight}),this.toneCurve.draw({sourceTexture:this.texture.source,sourceTextureIndex:He.source,targetFrameBuffer:this.frameBuffer.toneCurve}),this.maskBlender.draw({sourceTexture:this.texture.source,sourceTextureIndex:He.source,maskTexture:this.texture.highPassFilter,maskTextureIndex:He.highPassFilter,blendSourceTexture:this.texture.toneCurve,blendSourceTextureIndex:He.toneCurve,targetFrameBuffer:this.frameBuffer.maskBlender}),this.copyTexture.draw({sourceTexture:this.texture.maskBlender,sourceTextureIndex:He.maskBlender})}},Ke.prototype.updateCanvasSize=function(e){var t=this,r=e.pixelSource;if(r&&this.context){var n=this.context,o=this.context.canvas.width,a=this.context.canvas.height;"VIDEO"===r.nodeName?(o=r.videoWidth,a=r.videoHeight):"CANVAS"===r.nodeName&&(o=r.width,a=r.height);var i=n.canvas.width,u=n.canvas.height;i===o&&u===a||(n.canvas.width=o,n.canvas.height=a,n.viewport(0,0,o,a),Object.keys(this.texture).forEach((function(e){var r=t.texture[e];n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,o,a,0,n.RGBA,n.UNSIGNED_BYTE,null)})))}};var We=Ke;function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ze=function(e){var t=e.pixelSource,r=$e(Object(n.useState)(!1),2),a=r[0],i=r[1],u=$e(Object(n.useState)(30),2),c=u[0],l=u[1],s=$e(Object(n.useState)(0),2),f=s[0],d=s[1],m=Object(n.useRef)(),h=Object(n.useRef)(0),p=Object(n.useRef)(),b=Object(n.useRef)();return Object(n.useEffect)((function(){p.current=new We}),[]),Object(n.useEffect)((function(){if(a)return window.cancelAnimationFrame(m.current),m.current=window.requestAnimationFrame((function e(r){a&&(m.current=window.requestAnimationFrame(e));var n=1e3/c,o=r-h.current;o>=n&&(h.current=r,function(){var e=b.current.getContext("2d");if(e){p.current.draw({pixelSource:t});var r=e.canvas.width,n=e.canvas.height;"VIDEO"==t.nodeName?(r=t.videoWidth,n=t.videoHeight):"CANVAS"===t.nodeName&&(r=t.width,n=t.height);var o=e.canvas.width,a=e.canvas.height;o===r&&a===n||(e.canvas.width=r,e.canvas.height=n),e.clearRect(0,0,r,n),e.drawImage(p.current.canvas,0,0)}}(),d(Math.ceil(1e3/o)))})),function(){return window.cancelAnimationFrame(m.current)};window.cancelAnimationFrame(m.current)}),[a,c,t]),o.a.createElement(Je,null,o.a.createElement(et,null,"BeautifyFilter"),o.a.createElement(tt,null,o.a.createElement("canvas",{ref:b})),o.a.createElement(nt,null,o.a.createElement(ot,{isActived:a,disabled:!t,onClick:function(){return i(!a)}},"Draw"),o.a.createElement("span",null,"FPS: ",f),o.a.createElement(at,null,o.a.createElement(it,null,o.a.createElement("span",null,"Max FPS: ",c),o.a.createElement("input",{type:"range",min:"1",max:"60",step:"1",value:c,onChange:function(e){return l(e.target.value)}})))))};Ze.propTypes={pixelSource:c.a.object},Ze.defaultProps={pixelSource:null};var Je=l.default.div.withConfig({displayName:"BeautifyFilter__StyledBeautifyFilter",componentId:"sc-1f1k33f-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),et=l.default.div.withConfig({displayName:"BeautifyFilter__Header",componentId:"sc-1f1k33f-1"})(["background-color:#4834d4;padding:8px;"]),tt=l.default.div.withConfig({displayName:"BeautifyFilter__Body",componentId:"sc-1f1k33f-2"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),rt=l.default.button.withConfig({displayName:"BeautifyFilter__Button",componentId:"sc-1f1k33f-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),nt=l.default.div.withConfig({displayName:"BeautifyFilter__Footer",componentId:"sc-1f1k33f-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),ot=Object(l.default)(rt).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"BeautifyFilter__DrawButton",componentId:"sc-1f1k33f-5"})([""]),at=l.default.div.withConfig({displayName:"BeautifyFilter__Controls",componentId:"sc-1f1k33f-6"})(["margin-top:8px;"]),it=l.default.label.withConfig({displayName:"BeautifyFilter__Label",componentId:"sc-1f1k33f-7"})(["display:flex;input{flex:1;margin-left:8px;}"]),ut=Ze;function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return lt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var st={array:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1],numComponents:2},ft={array:[0,1,1,1,1,0,0,1,1,0,0,0],numComponents:2},dt=function(e){var t=e.canvasRef,r=e.pixelSource,a=ct(Object(n.useState)(!1),2),i=a[0],u=a[1],c=ct(Object(n.useState)(0),2),l=c[0],s=c[1],f=ct(Object(n.useState)(30),2),d=f[0],m=f[1],h=ct(Object(n.useState)(0),2),p=h[0],b=h[1],g=Object(n.useRef)(),v=Object(n.useRef)(0),x=Object(n.useRef)(),y=Object(n.useRef)(),w=Object(n.useRef)(),S=Object(n.useRef)(),E=Object(n.useRef)(),C=Object(n.useRef)(),T=Object(n.useRef)(),A=Object(n.useRef)(!0),R=Object(n.useRef)(),j=Object(n.useRef)(),O=Object(n.useRef)(),_=Object(n.useRef)();return Object(n.useEffect)((function(){A.current=!0}),[l]),Object(n.useEffect)((function(){var e=function(){var e=x.current;if(e)return j.current.buffer&&e.deleteBuffer(j.current.buffer),O.current.buffer&&e.deleteBuffer(O.current.buffer),_.current&&e.deleteTexture(_.current),E.current&&e.disableVertexAttribArray(E.current),C.current&&e.disableVertexAttribArray(C.current),Q({context:e,vertexShader:y.current,fragmentShader:w.current,program:S.current})},r=t.current;if(!r)return e;var n=r.getBoundingClientRect();r.height=n.height,r.width=n.width;var o=r.getContext("webgl2");x.current=o;var a=$({context:o,vertexShaderSource:"#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n",fragmentShaderSource:"#version 300 es\nprecision highp float;\n\nuniform float uExposureValue;\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  outColor = vec4(originColor.rgb * pow(2.0, uExposureValue), originColor.a);;\n}\n"});return a?(y.current=a.vertexShader,w.current=a.fragmentShader,S.current=a.program,E.current=o.getAttribLocation(a.program,"aPosition"),C.current=o.getAttribLocation(a.program,"aTextCoord"),T.current=o.getUniformLocation(a.program,"uSource"),R.current=o.getUniformLocation(a.program,"uExposureValue"),o.enableVertexAttribArray(E.current),o.enableVertexAttribArray(C.current),j.current=Z({context:o,attribute:st}),O.current=Z({context:o,attribute:ft}),_.current=J({context:o}),ee({context:o,location:E.current,buffer:j.current}),ee({context:o,location:C.current,buffer:O.current}),e):e}),[t]),Object(n.useEffect)((function(){if(i)return window.cancelAnimationFrame(g.current),g.current=window.requestAnimationFrame((function e(t){i&&(g.current=window.requestAnimationFrame(e));var n=1e3/d,o=t-v.current;o>=n&&(v.current=t,function(){var e=x.current;if(e&&r&&S.current){var t=e.canvas.width,n=e.canvas.height;"VIDEO"==r.nodeName?(t=r.videoWidth,n=r.videoHeight):"CANVAS"===r.nodeName&&(t=r.width,n=r.height);var o=e.canvas.width,a=e.canvas.height;o===t&&a===n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,t,n)),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(S.current),A.current&&(e.uniform1f(R.current,l),A.current=!1),e.uniform1i(T.current,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.drawArrays(e.TRIANGLES,0,j.current.count)}}(),b(Math.ceil(1e3/o)))})),function(){return window.cancelAnimationFrame(g.current)};window.cancelAnimationFrame(g.current)}),[i,d,l,r]),o.a.createElement(mt,null,o.a.createElement(ht,null,"ExposureValue"),o.a.createElement(pt,null,o.a.createElement("canvas",{ref:t})),o.a.createElement(gt,null,o.a.createElement(vt,{isActived:i,disabled:!r,onClick:function(){return u(!i)}},"Draw"),o.a.createElement("span",null,"FPS: ",p),o.a.createElement(xt,null,o.a.createElement(yt,null,o.a.createElement("span",null,"Max FPS: ",d),o.a.createElement("input",{type:"range",min:"1",max:"60",step:"1",value:d,onChange:function(e){return m(e.target.value)}})),o.a.createElement(yt,null,o.a.createElement("span",null,"ExposureValue: ",l),o.a.createElement("input",{type:"range",min:"-5",max:"5",step:"0.1",value:l,onChange:function(e){return s(e.target.value)}})))))};dt.propTypes={pixelSource:c.a.object,canvasRef:c.a.object.isRequired},dt.defaultProps={pixelSource:null};var mt=l.default.div.withConfig({displayName:"ExposureValue__StyledExposureValue",componentId:"sc-1q2t01r-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),ht=l.default.div.withConfig({displayName:"ExposureValue__Header",componentId:"sc-1q2t01r-1"})(["background-color:#4834d4;padding:8px;"]),pt=l.default.div.withConfig({displayName:"ExposureValue__Body",componentId:"sc-1q2t01r-2"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),bt=l.default.button.withConfig({displayName:"ExposureValue__Button",componentId:"sc-1q2t01r-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),gt=l.default.div.withConfig({displayName:"ExposureValue__Footer",componentId:"sc-1q2t01r-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),vt=Object(l.default)(bt).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"ExposureValue__DrawButton",componentId:"sc-1q2t01r-5"})([""]),xt=l.default.div.withConfig({displayName:"ExposureValue__Controls",componentId:"sc-1q2t01r-6"})(["margin-top:8px;"]),yt=l.default.label.withConfig({displayName:"ExposureValue__Label",componentId:"sc-1q2t01r-7"})(["display:flex;input{flex:1;margin-left:8px;}"]),wt=dt;function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ct={array:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1],numComponents:2},Tt={array:[0,1,1,1,1,0,0,1,1,0,0,0],numComponents:2},At=function(e){var t=e.canvasRef,r=e.pixelSource,a=St(Object(n.useState)(!1),2),i=a[0],u=a[1],c=St(Object(n.useState)(30),2),l=c[0],s=c[1],f=St(Object(n.useState)(0),2),d=f[0],m=f[1],h=Object(n.useRef)(),p=Object(n.useRef)(0),b=Object(n.useRef)(),g=Object(n.useRef)(),v=Object(n.useRef)(),x=Object(n.useRef)(),y=Object(n.useRef)(),w=Object(n.useRef)(),S=Object(n.useRef)(),E=Object(n.useRef)(),C=Object(n.useRef)(),T=Object(n.useRef)();return Object(n.useEffect)((function(){var e=function(){var e=b.current;if(e)return E.current.buffer&&e.deleteBuffer(E.current.buffer),C.current.buffer&&e.deleteBuffer(C.current.buffer),T.current&&e.deleteTexture(T.current),y.current&&e.disableVertexAttribArray(y.current),w.current&&e.disableVertexAttribArray(w.current),Q({context:e,vertexShader:g.current,fragmentShader:v.current,program:x.current})},r=t.current;if(!r)return e;var n=r.getBoundingClientRect();r.height=n.height,r.width=n.width;var o=r.getContext("webgl2");b.current=o;var a=$({context:o,vertexShaderSource:"#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n",fragmentShaderSource:"#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  float gbColor = 2.0 * originColor.b * originColor.g;\n  outColor = vec4(gbColor, gbColor, gbColor, originColor.a);\n}\n"});return a?(g.current=a.vertexShader,v.current=a.fragmentShader,x.current=a.program,y.current=o.getAttribLocation(a.program,"aPosition"),w.current=o.getAttribLocation(a.program,"aTextCoord"),S.current=o.getUniformLocation(a.program,"uSource"),o.enableVertexAttribArray(y.current),o.enableVertexAttribArray(w.current),E.current=Z({context:o,attribute:Ct}),C.current=Z({context:o,attribute:Tt}),T.current=J({context:o}),ee({context:o,location:y.current,buffer:E.current}),ee({context:o,location:w.current,buffer:C.current}),e):e}),[t]),Object(n.useEffect)((function(){if(i)return window.cancelAnimationFrame(h.current),h.current=window.requestAnimationFrame((function e(t){i&&(h.current=window.requestAnimationFrame(e));var n=1e3/l,o=t-p.current;o>=n&&(p.current=t,function(){var e=b.current;if(e&&r&&x.current){var t=e.canvas.width,n=e.canvas.height;"VIDEO"==r.nodeName?(t=r.videoWidth,n=r.videoHeight):"CANVAS"===r.nodeName&&(t=r.width,n=r.height);var o=e.canvas.width,a=e.canvas.height;o===t&&a===n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,t,n)),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(x.current),e.uniform1i(S.current,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.drawArrays(e.TRIANGLES,0,E.current.count)}}(),m(Math.ceil(1e3/o)))})),function(){return window.cancelAnimationFrame(h.current)};window.cancelAnimationFrame(h.current)}),[i,l,r]),o.a.createElement(Rt,null,o.a.createElement(jt,null,"GreenBlueChannel"),o.a.createElement(Ot,null,o.a.createElement("canvas",{ref:t})),o.a.createElement(Bt,null,o.a.createElement(It,{isActived:i,disabled:!r,onClick:function(){return u(!i)}},"Draw"),o.a.createElement("span",null,"FPS: ",d),o.a.createElement(Pt,null,o.a.createElement(Ft,null,o.a.createElement("span",null,"Max FPS: ",l),o.a.createElement("input",{type:"range",min:"1",max:"60",step:"1",value:l,onChange:function(e){return s(e.target.value)}})))))};At.propTypes={pixelSource:c.a.object,canvasRef:c.a.object.isRequired},At.defaultProps={pixelSource:null};var Rt=l.default.div.withConfig({displayName:"GreenBlueChannel__StyledGreenBlueChannel",componentId:"c4s4cs-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),jt=l.default.div.withConfig({displayName:"GreenBlueChannel__Header",componentId:"c4s4cs-1"})(["background-color:#4834d4;padding:8px;"]),Ot=l.default.div.withConfig({displayName:"GreenBlueChannel__Body",componentId:"c4s4cs-2"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),_t=l.default.button.withConfig({displayName:"GreenBlueChannel__Button",componentId:"c4s4cs-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),Bt=l.default.div.withConfig({displayName:"GreenBlueChannel__Footer",componentId:"c4s4cs-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),It=Object(l.default)(_t).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"GreenBlueChannel__DrawButton",componentId:"c4s4cs-5"})([""]),Pt=l.default.div.withConfig({displayName:"GreenBlueChannel__Controls",componentId:"c4s4cs-6"})(["margin-top:8px;"]),Ft=l.default.label.withConfig({displayName:"GreenBlueChannel__Label",componentId:"c4s4cs-7"})(["display:flex;input{flex:1;margin-left:8px;}"]),Nt=At;function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Dt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Mt={array:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1],numComponents:2},Ut={array:[0,1,1,1,1,0,0,1,1,0,0,0],numComponents:2},Lt=function(e){var t=e.canvasRef,r=e.pixelSource,a=kt(Object(n.useState)(!1),2),i=a[0],u=a[1],c=kt(Object(n.useState)(30),2),l=c[0],s=c[1],f=kt(Object(n.useState)(16),2),d=f[0],m=f[1],h=kt(Object(n.useState)(5),2),p=h[0],b=h[1],g=kt(Object(n.useState)(0),2),v=g[0],x=g[1],y=Object(n.useRef)(),w=Object(n.useRef)(0),S=Object(n.useRef)(!1),E=Object(n.useRef)(),C=Object(n.useRef)(),T=Object(n.useRef)(),A=Object(n.useRef)(),R=Object(n.useRef)(),j=Object(n.useRef)(),O=Object(n.useRef)(),_=Object(n.useRef)(),B=Object(n.useRef)(),I=Object(n.useRef)(),P=Object(n.useRef)(),F=Object(n.useRef)(),N=Object(n.useRef)(),k=Object(n.useRef)(),D=Object(n.useRef)(),M=Object(n.useRef)(),U=Object(n.useRef)();return Object(n.useEffect)((function(){E.current=function(e,t){for(var r=Math.floor(Math.abs(e)),n=t*t,o=new Array(2*r+1),a=0,i=-r;i<=r;++i){var u=i+r;o[u]=Math.exp(-i*i/(2*n))/Math.sqrt(2*Math.PI*n),a+=o[u]}var c=o.map((function(e){return e/a}));return{data:new Float32Array(c),radius:r}}(d,p),S.current=!0}),[d,p]),Object(n.useEffect)((function(){var e=function(){var e=C.current;if(e)return N.current.buffer&&e.deleteBuffer(N.current.buffer),k.current.buffer&&e.deleteBuffer(k.current.buffer),D.current&&e.deleteTexture(D.current),U.current&&e.deleteFramebuffer(U.current),j.current&&e.disableVertexAttribArray(j.current),O.current&&e.disableVertexAttribArray(O.current),Q({context:e,vertexShader:T.current,fragmentShader:A.current,program:R.current})},r=t.current;if(!r)return e;var n=r.getBoundingClientRect();r.height=n.height,r.width=n.width;var o=r.getContext("webgl2");C.current=o;var a=$({context:o,vertexShaderSource:"#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nuniform int uIsVertical;\nout vec2 vTextCoord;\nflat out int vIsVertical;\n\nvoid main() {\n  vec4 position = aPosition;\n  if (1 == uIsVertical) {\n    // texture axis is opposite with canvas.\n    position = vec4(aPosition.x, -aPosition.y, aPosition.zw);\n  }\n  gl_Position = position;\n  vTextCoord = aTextCoord;\n  vIsVertical = uIsVertical;\n}\n",fragmentShaderSource:"#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform vec2 uResolution;\nuniform int uKernalRadius;\nuniform float uKernelData[65];\nin vec2 vTextCoord;\nflat in int vIsVertical;\n\nout vec4 outColor;\n\nvoid main() {\n  vec2 delta = 1.0 / uResolution;\n  vec4 outputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\n  for (int index = -uKernalRadius; index <= uKernalRadius; index++) {\n    vec2 step = vec2(index, 0.0);\n    if (1 == vIsVertical) {\n      step = vec2(0.0, index);\n    }\n    vec2 offset = vTextCoord + step * delta;\n    outputColor += uKernelData[index + uKernalRadius] * texture(uSource, offset);\n  }\n\n  outColor = outputColor;\n}\n"});return a?(T.current=a.vertexShader,A.current=a.fragmentShader,R.current=a.program,j.current=o.getAttribLocation(a.program,"aPosition"),O.current=o.getAttribLocation(a.program,"aTextCoord"),_.current=o.getUniformLocation(a.program,"uResolution"),I.current=o.getUniformLocation(a.program,"uIsVertical"),P.current=o.getUniformLocation(a.program,"uKernelData"),F.current=o.getUniformLocation(a.program,"uKernalRadius"),B.current=o.getUniformLocation(a.program,"uSource"),o.enableVertexAttribArray(j.current),o.enableVertexAttribArray(O.current),o.useProgram(R.current),o.uniform2f(_.current,o.canvas.width,o.canvas.height),o.uniform1i(I.current,0),o.uniform1fv(P.current,E.current.data),o.uniform1i(F.current,E.current.radius),N.current=Z({context:o,attribute:Mt}),k.current=Z({context:o,attribute:Ut}),D.current=J({context:o,index:0}),M.current=J({context:o,index:1}),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.canvas.width,o.canvas.height,0,o.RGBA,o.UNSIGNED_BYTE,null),ee({context:o,location:j.current,buffer:N.current}),ee({context:o,location:O.current,buffer:k.current}),U.current=o.createFramebuffer(),o.bindFramebuffer(o.FRAMEBUFFER,U.current),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,M.current,0),e):e}),[t]),Object(n.useEffect)((function(){if(i)return window.cancelAnimationFrame(y.current),y.current=window.requestAnimationFrame((function e(t){i&&(y.current=window.requestAnimationFrame(e));var n=1e3/l,o=t-w.current;o>=n&&(w.current=t,function(){var e=C.current;if(e&&r&&R.current){var t=e.canvas.width,n=e.canvas.height;"VIDEO"==r.nodeName?(t=r.videoWidth,n=r.videoHeight):"CANVAS"===r.nodeName&&(t=r.width,n=r.height),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(R.current);var o=e.canvas.width,a=e.canvas.height;o===t&&a===n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,t,n),e.uniform2f(_.current,t,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null)),S.current&&(e.uniform1fv(P.current,E.current.data),e.uniform1i(F.current,E.current.radius),S.current=!1),e.bindFramebuffer(e.FRAMEBUFFER,U.current),e.uniform1i(B.current,0),e.uniform1i(I.current,0),e.bindTexture(e.TEXTURE_2D,D.current),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.drawArrays(e.TRIANGLES,0,N.current.count),e.bindFramebuffer(e.FRAMEBUFFER,null),e.uniform1i(B.current,1),e.uniform1i(I.current,1),e.bindTexture(e.TEXTURE_2D,M.current),e.drawArrays(e.TRIANGLES,0,N.current.count)}}(),x(Math.ceil(1e3/o)))})),function(){return window.cancelAnimationFrame(y.current)};window.cancelAnimationFrame(y.current)}),[i,l,r]),o.a.createElement(Vt,null,o.a.createElement(Gt,null,"GaussianBlur"),o.a.createElement(qt,null,o.a.createElement("canvas",{ref:t})),o.a.createElement(Xt,null,o.a.createElement(zt,{isActived:i,disabled:!r,onClick:function(){return u(!i)}},"Draw"),o.a.createElement("span",null,"FPS: ",v),o.a.createElement(Yt,null,o.a.createElement(Kt,null,o.a.createElement("span",null,"Max FPS: ",l),o.a.createElement("input",{type:"range",min:"1",max:"60",step:"1",value:l,onChange:function(e){return s(e.target.value)}})),o.a.createElement(Kt,null,o.a.createElement("span",null,"Radius: ",d),o.a.createElement("input",{type:"range",min:"1",max:"32",step:"1",value:d,onChange:function(e){return m(e.target.value)}})),o.a.createElement(Kt,null,o.a.createElement("span",null,"Sigma: ",p),o.a.createElement("input",{type:"range",min:"0.1",max:"20",step:"0.1",value:p,onChange:function(e){return b(e.target.value)}})))))};Lt.propTypes={pixelSource:c.a.object,canvasRef:c.a.object.isRequired},Lt.defaultProps={pixelSource:null};var Vt=l.default.div.withConfig({displayName:"GaussianBlur__StyledGaussianBlur",componentId:"allujx-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),Gt=l.default.div.withConfig({displayName:"GaussianBlur__Header",componentId:"allujx-1"})(["background-color:#4834d4;padding:8px;"]),qt=l.default.div.withConfig({displayName:"GaussianBlur__Body",componentId:"allujx-2"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),Ht=l.default.button.withConfig({displayName:"GaussianBlur__Button",componentId:"allujx-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),Xt=l.default.div.withConfig({displayName:"GaussianBlur__Footer",componentId:"allujx-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),zt=Object(l.default)(Ht).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"GaussianBlur__DrawButton",componentId:"allujx-5"})([""]),Yt=l.default.div.withConfig({displayName:"GaussianBlur__Controls",componentId:"allujx-6"})(["margin-top:8px;"]),Kt=l.default.label.withConfig({displayName:"GaussianBlur__Label",componentId:"allujx-7"})(["display:flex;input{flex:1;margin-left:8px;}"]),Wt=Lt;function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zt={array:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1],numComponents:2},Jt={array:[0,1,1,1,1,0,0,1,1,0,0,0],numComponents:2},er=function(e){var t=e.canvasRef,r=e.pixelSource,a=e.blurredPixelSource,i=$t(Object(n.useState)(!1),2),u=i[0],c=i[1],l=$t(Object(n.useState)(30),2),s=l[0],f=l[1],d=$t(Object(n.useState)(0),2),m=d[0],h=d[1],p=Object(n.useRef)(),b=Object(n.useRef)(0),g=Object(n.useRef)(),v=Object(n.useRef)(),x=Object(n.useRef)(),y=Object(n.useRef)(),w=Object(n.useRef)(),S=Object(n.useRef)(),E=Object(n.useRef)(),C=Object(n.useRef)(),T=Object(n.useRef)(),A=Object(n.useRef)(),R=Object(n.useRef)(),j=Object(n.useRef)();return Object(n.useEffect)((function(){var e=function(){var e=g.current;if(e)return T.current.buffer&&e.deleteBuffer(T.current.buffer),A.current.buffer&&e.deleteBuffer(A.current.buffer),R.current&&e.deleteTexture(R.current),j.current&&e.deleteTexture(j.current),w.current&&e.disableVertexAttribArray(w.current),S.current&&e.disableVertexAttribArray(S.current),Q({context:e,vertexShader:v.current,fragmentShader:x.current,program:y.current})},r=t.current;if(!r)return e;var n=r.getBoundingClientRect();r.height=n.height,r.width=n.width;var o=r.getContext("webgl2");g.current=o;var a=$({context:o,vertexShaderSource:"#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n",fragmentShaderSource:"#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uBlurredSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 blurredColor = texture(uBlurredSource, vTextCoord);\n  outColor = originColor - blurredColor + vec4(0.5, 0.5, 0.5, 1.0);\n}\n"});return a?(v.current=a.vertexShader,x.current=a.fragmentShader,y.current=a.program,w.current=o.getAttribLocation(a.program,"aPosition"),S.current=o.getAttribLocation(a.program,"aTextCoord"),E.current=o.getUniformLocation(a.program,"uSource"),C.current=o.getUniformLocation(a.program,"uBlurredSource"),o.enableVertexAttribArray(w.current),o.enableVertexAttribArray(S.current),T.current=Z({context:o,attribute:Zt}),A.current=Z({context:o,attribute:Jt}),R.current=J({context:o,index:0}),j.current=J({context:o,index:1}),ee({context:o,location:w.current,buffer:T.current}),ee({context:o,location:S.current,buffer:A.current}),e):e}),[t]),Object(n.useEffect)((function(){if(u)return window.cancelAnimationFrame(p.current),p.current=window.requestAnimationFrame((function e(t){u&&(p.current=window.requestAnimationFrame(e));var n=1e3/s,o=t-b.current;o>=n&&(b.current=t,function(){var e=g.current;if(e&&r&&y.current){var t=e.canvas.width,n=e.canvas.height;"VIDEO"==r.nodeName?(t=r.videoWidth,n=r.videoHeight):"CANVAS"===r.nodeName&&(t=r.width,n=r.height);var o=e.canvas.width,i=e.canvas.height;o===t&&i===n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,t,n)),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(y.current),e.uniform1i(E.current,0),e.uniform1i(C.current,1),e.bindTexture(e.TEXTURE_2D,R.current),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.bindTexture(e.TEXTURE_2D,j.current),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.drawArrays(e.TRIANGLES,0,T.current.count)}}(),h(Math.ceil(1e3/o)))})),function(){return window.cancelAnimationFrame(p.current)};window.cancelAnimationFrame(p.current)}),[u,s,r,a]),o.a.createElement(tr,null,o.a.createElement(rr,null,"HighPassFilter"),o.a.createElement(nr,null,o.a.createElement("canvas",{ref:t})),o.a.createElement(ar,null,o.a.createElement(ir,{isActived:u,disabled:!r,onClick:function(){return c(!u)}},"Draw"),o.a.createElement("span",null,"FPS: ",m),o.a.createElement(ur,null,o.a.createElement(cr,null,o.a.createElement("span",null,"Max FPS: ",s),o.a.createElement("input",{type:"range",min:"1",max:"60",step:"1",value:s,onChange:function(e){return f(e.target.value)}})))))};er.propTypes={pixelSource:c.a.object,blurredPixelSource:c.a.object,canvasRef:c.a.object.isRequired},er.defaultProps={pixelSource:null,blurredPixelSource:null};var tr=l.default.div.withConfig({displayName:"HighPassFilter__StyledHighPassFilter",componentId:"sc-1y9u6ih-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),rr=l.default.div.withConfig({displayName:"HighPassFilter__Header",componentId:"sc-1y9u6ih-1"})(["background-color:#4834d4;padding:8px;"]),nr=l.default.div.withConfig({displayName:"HighPassFilter__Body",componentId:"sc-1y9u6ih-2"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),or=l.default.button.withConfig({displayName:"HighPassFilter__Button",componentId:"sc-1y9u6ih-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),ar=l.default.div.withConfig({displayName:"HighPassFilter__Footer",componentId:"sc-1y9u6ih-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),ir=Object(l.default)(or).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"HighPassFilter__DrawButton",componentId:"sc-1y9u6ih-5"})([""]),ur=l.default.div.withConfig({displayName:"HighPassFilter__Controls",componentId:"sc-1y9u6ih-6"})(["margin-top:8px;"]),cr=l.default.label.withConfig({displayName:"HighPassFilter__Label",componentId:"sc-1y9u6ih-7"})(["display:flex;input{flex:1;margin-left:8px;}"]),lr=er;function sr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dr={array:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1],numComponents:2},mr={array:[0,1,1,1,1,0,0,1,1,0,0,0],numComponents:2},hr=function(e){var t=e.canvasRef,r=e.pixelSource,a=sr(Object(n.useState)(!1),2),i=a[0],u=a[1],c=sr(Object(n.useState)(3),2),l=c[0],s=c[1],f=sr(Object(n.useState)(30),2),d=f[0],m=f[1],h=sr(Object(n.useState)(0),2),p=h[0],b=h[1],g=Object(n.useRef)(),v=Object(n.useRef)(0),x=Object(n.useRef)(),y=Object(n.useRef)(),w=Object(n.useRef)(),S=Object(n.useRef)(),E=Object(n.useRef)(),C=Object(n.useRef)(),T=Object(n.useRef)(),A=Object(n.useRef)(!0),R=Object(n.useRef)(),j=Object(n.useRef)(),O=Object(n.useRef)(),_=Object(n.useRef)();return Object(n.useEffect)((function(){A.current=!0}),[l]),Object(n.useEffect)((function(){var e=function(){var e=x.current;if(e)return j.current.buffer&&e.deleteBuffer(j.current.buffer),O.current.buffer&&e.deleteBuffer(O.current.buffer),_.current&&e.deleteTexture(_.current),E.current&&e.disableVertexAttribArray(E.current),C.current&&e.disableVertexAttribArray(C.current),Q({context:e,vertexShader:y.current,fragmentShader:w.current,program:S.current})},r=t.current;if(!r)return e;var n=r.getBoundingClientRect();r.height=n.height,r.width=n.width;var o=r.getContext("webgl2");x.current=o;var a=$({context:o,vertexShaderSource:"#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n",fragmentShaderSource:"#version 300 es\nprecision highp float;\n\nuniform int uCycles;\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n\n  float color = originColor.b;\n  for (int i = 0; i < uCycles; ++i) {\n    if (color < 0.5) {\n      color = color * color * 2.0;\n    } else {\n      color = 1.0 - (1.0 - color) * (1.0 - color) * 2.0;\n    }\n  }\n\n  float k = 255.0 / (164.0 - 75.0);\n  color = (color - 75.0 / 255.0) * k;\n\n  outColor = vec4(color, color, color, originColor.a);;\n}\n"});return a?(y.current=a.vertexShader,w.current=a.fragmentShader,S.current=a.program,E.current=o.getAttribLocation(a.program,"aPosition"),C.current=o.getAttribLocation(a.program,"aTextCoord"),T.current=o.getUniformLocation(a.program,"uSource"),R.current=o.getUniformLocation(a.program,"uCycles"),o.enableVertexAttribArray(E.current),o.enableVertexAttribArray(C.current),j.current=Z({context:o,attribute:dr}),O.current=Z({context:o,attribute:mr}),_.current=J({context:o}),ee({context:o,location:E.current,buffer:j.current}),ee({context:o,location:C.current,buffer:O.current}),e):e}),[t]),Object(n.useEffect)((function(){if(i)return window.cancelAnimationFrame(g.current),g.current=window.requestAnimationFrame((function e(t){i&&(g.current=window.requestAnimationFrame(e));var n=1e3/d,o=t-v.current;o>=n&&(v.current=t,function(){var e=x.current;if(e&&r&&S.current){var t=e.canvas.width,n=e.canvas.height;"VIDEO"==r.nodeName?(t=r.videoWidth,n=r.videoHeight):"CANVAS"===r.nodeName&&(t=r.width,n=r.height);var o=e.canvas.width,a=e.canvas.height;o===t&&a===n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,t,n)),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(S.current),A.current&&(e.uniform1i(R.current,l),A.current=!1),e.uniform1i(T.current,0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.drawArrays(e.TRIANGLES,0,j.current.count)}}(),b(Math.ceil(1e3/o)))})),function(){return window.cancelAnimationFrame(g.current)};window.cancelAnimationFrame(g.current)}),[i,d,l,r]),o.a.createElement(pr,null,o.a.createElement(br,null,"HardLight"),o.a.createElement(gr,null,o.a.createElement("canvas",{ref:t})),o.a.createElement(xr,null,o.a.createElement(yr,{isActived:i,disabled:!r,onClick:function(){return u(!i)}},"Draw"),o.a.createElement("span",null,"FPS: ",p),o.a.createElement(wr,null,o.a.createElement(Sr,null,o.a.createElement("span",null,"Max FPS: ",d),o.a.createElement("input",{type:"range",min:"1",max:"60",step:"1",value:d,onChange:function(e){return m(e.target.value)}})),o.a.createElement(Sr,null,o.a.createElement("span",null,"Cycles: ",l),o.a.createElement("input",{type:"range",min:"1",max:"8",step:"1",value:l,onChange:function(e){return s(e.target.value)}})))))};hr.propTypes={pixelSource:c.a.object,canvasRef:c.a.object.isRequired},hr.defaultProps={pixelSource:null};var pr=l.default.div.withConfig({displayName:"HardLight__StyledHardLight",componentId:"sc-17t8ehi-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),br=l.default.div.withConfig({displayName:"HardLight__Header",componentId:"sc-17t8ehi-1"})(["background-color:#4834d4;padding:8px;"]),gr=l.default.div.withConfig({displayName:"HardLight__Body",componentId:"sc-17t8ehi-2"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),vr=l.default.button.withConfig({displayName:"HardLight__Button",componentId:"sc-17t8ehi-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),xr=l.default.div.withConfig({displayName:"HardLight__Footer",componentId:"sc-17t8ehi-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),yr=Object(l.default)(vr).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"HardLight__DrawButton",componentId:"sc-17t8ehi-5"})([""]),wr=l.default.div.withConfig({displayName:"HardLight__Controls",componentId:"sc-17t8ehi-6"})(["margin-top:8px;"]),Sr=l.default.label.withConfig({displayName:"HardLight__Label",componentId:"sc-17t8ehi-7"})(["display:flex;input{flex:1;margin-left:8px;}"]),Er=hr;function Cr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ar=256,Rr=function(e){var t=e.onChange,r=Cr(Object(n.useState)(),2),a=r[0],i=r[1],u=Cr(Object(n.useState)(0),2),c=u[0],l=u[1],s=Cr(Object(n.useState)([{x:0,y:0},{x:120,y:146},{x:255,y:255}]),1)[0],f=Cr(Object(n.useState)([]),2),d=f[0],m=f[1],h=Object(n.useRef)();Object(n.useEffect)((function(){var e=Se({tension:c,points:s});m(e),t({red:e,green:e,blue:e})}),[c,s,t]),Object(n.useEffect)((function(){var e=h.current.getContext("2d");e.clearRect(0,0,Ar,Ar),function(e){var t=e.strokeStyle;e.strokeStyle="darkgray";var r=e.lineWidth;e.lineWidth=.5,e.beginPath();for(var n=50;n<Ar;n+=50)e.moveTo(n,0),e.lineTo(n,Ar),e.moveTo(0,Ar-n),e.lineTo(Ar,Ar-n);e.stroke(),e.strokeStyle=t,e.lineWidth=r}(e),a&&function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=e.lineWidth,o=e.strokeStyle,a={x:t.x,y:Ar-t.y};e.strokeStyle="#f6e58d",e.lineWidth=.5,e.beginPath(),e.moveTo(a.x,a.y-r),e.lineTo(a.x,a.y+r),e.moveTo(a.x-r,a.y),e.lineTo(a.x+r,a.y),e.stroke(),e.strokeStyle=o,e.lineWidth=n}(e,a),e.strokeStyle="red",e.beginPath(),e.moveTo(0,Ar),d.forEach((function(t){e.lineTo(t.x,Ar-t.y)})),e.stroke(),e.fillStyle="red",s.forEach((function(t){e.beginPath(),e.arc(t.x,Ar-t.y,2,0,2*Math.PI),e.fill()}))}),[s,d,a]);return o.a.createElement(jr,null,o.a.createElement(Or,{width:Ar,height:Ar,ref:h,onMouseMove:function(e){var t=e.clientX-e.target.offsetLeft,r=Ar-e.clientY+e.target.offsetTop;i({x:t,y:r})},onMouseLeave:function(){return i()}}),o.a.createElement(_r,null,o.a.createElement(Br,null,o.a.createElement("span",null,"Tension: ",c),o.a.createElement("input",{type:"range",min:"0",max:"1",step:"0.01",value:c,onChange:function(e){return l(e.target.value)}}))))};Rr.propTypes={onChange:c.a.func},Rr.defaultProps={onChange:function(){return null}};var jr=l.default.div.withConfig({displayName:"ToneCurveEditor__StyledToneCurveEditor",componentId:"q38yul-0"})(["display:flex;"]),Or=l.default.canvas.withConfig({displayName:"ToneCurveEditor__Monitor",componentId:"q38yul-1"})(["background-color:black;"]),_r=l.default.div.withConfig({displayName:"ToneCurveEditor__Controls",componentId:"q38yul-2"})(["margin-left:8px;width:100%;"]),Br=l.default.label.withConfig({displayName:"ToneCurveEditor__Label",componentId:"q38yul-3"})(["display:block;span{display:block;}input{width:100%;}"]),Ir=Rr;function Pr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nr={array:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1],numComponents:2},kr={array:[0,1,1,1,1,0,0,1,1,0,0,0],numComponents:2},Dr=new ImageData(new Uint8ClampedArray(new Array(256).fill(0).flatMap((function(e,t){return[t,t,t,255]}))),256),Mr=function(e){var t=e.canvasRef,r=e.pixelSource,a=Pr(Object(n.useState)(!1),2),i=a[0],u=a[1],c=Pr(Object(n.useState)(.5),2),l=c[0],s=c[1],f=Pr(Object(n.useState)(30),2),d=f[0],m=f[1],h=Pr(Object(n.useState)(0),2),p=h[0],b=h[1],g=Object(n.useRef)(),v=Object(n.useRef)(0),x=Object(n.useRef)(Dr),y=Object(n.useRef)(),w=Object(n.useRef)(),S=Object(n.useRef)(),E=Object(n.useRef)(),C=Object(n.useRef)(),T=Object(n.useRef)(),A=Object(n.useRef)(),R=Object(n.useRef)(),j=Object(n.useRef)(),O=Object(n.useRef)(!0),_=Object(n.useRef)(!0),B=Object(n.useRef)(),I=Object(n.useRef)(),P=Object(n.useRef)(),F=Object(n.useRef)();Object(n.useEffect)((function(){O.current=!0}),[l]),Object(n.useEffect)((function(){var e=function(){var e=y.current;if(e)return B.current.buffer&&e.deleteBuffer(B.current.buffer),I.current.buffer&&e.deleteBuffer(I.current.buffer),P.current&&e.deleteTexture(P.current),F.current&&e.deleteTexture(F.current),C.current&&e.disableVertexAttribArray(C.current),T.current&&e.disableVertexAttribArray(T.current),Q({context:e,vertexShader:w.current,fragmentShader:S.current,program:E.current})},r=t.current;if(!r)return e;var n=r.getBoundingClientRect();r.height=n.height,r.width=n.width;var o=r.getContext("webgl2");y.current=o;var a=$({context:o,vertexShaderSource:"#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n",fragmentShaderSource:"#version 300 es\nprecision highp float;\n\nuniform float uStrength;\nuniform sampler2D uSource;\nuniform sampler2D uTone;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 colorIndex = texture(uSource, vTextCoord);\n  float revStr = 1.0 - uStrength;\n  outColor = vec4(\n    uStrength * vec4(texture(uTone, vec2(colorIndex.r, 0))).r + revStr * colorIndex.r,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.g, 0))).g + revStr * colorIndex.g,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.b, 0))).b + revStr * colorIndex.b,\n    1.0\n  );\n}\n"});return a?(w.current=a.vertexShader,S.current=a.fragmentShader,E.current=a.program,C.current=o.getAttribLocation(a.program,"aPosition"),T.current=o.getAttribLocation(a.program,"aTextCoord"),A.current=o.getUniformLocation(a.program,"uSource"),R.current=o.getUniformLocation(a.program,"uStrength"),j.current=o.getUniformLocation(a.program,"uTone"),o.enableVertexAttribArray(C.current),o.enableVertexAttribArray(T.current),B.current=Z({context:o,attribute:Nr}),I.current=Z({context:o,attribute:kr}),P.current=J({context:o,index:0}),F.current=J({context:o,index:1}),ee({context:o,location:C.current,buffer:B.current}),ee({context:o,location:T.current,buffer:I.current}),e):e}),[t]),Object(n.useEffect)((function(){if(i)return window.cancelAnimationFrame(g.current),g.current=window.requestAnimationFrame((function e(t){i&&(g.current=window.requestAnimationFrame(e));var n=1e3/d,o=t-v.current;o>=n&&(v.current=t,function(){var e=y.current;if(e&&r&&E.current){var t=e.canvas.width,n=e.canvas.height;"VIDEO"==r.nodeName?(t=r.videoWidth,n=r.videoHeight):"CANVAS"===r.nodeName&&(t=r.width,n=r.height);var o=e.canvas.width,a=e.canvas.height;o===t&&a===n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,t,n)),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(E.current),O.current&&(e.uniform1f(R.current,l),O.current=!1),e.uniform1i(A.current,0),e.bindTexture(e.TEXTURE_2D,P.current),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),_.current&&(_.current=!1),e.uniform1i(j.current,1),e.bindTexture(e.TEXTURE_2D,F.current),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,x.current),e.drawArrays(e.TRIANGLES,0,B.current.count)}}(),b(Math.ceil(1e3/o)))})),function(){return window.cancelAnimationFrame(g.current)};window.cancelAnimationFrame(g.current)}),[i,d,l,r]);return o.a.createElement(Ur,null,o.a.createElement(Lr,null,"ToneCurve"),o.a.createElement(Vr,null,o.a.createElement("canvas",{ref:t})),o.a.createElement(qr,null,o.a.createElement(Hr,{isActived:i,disabled:!r,onClick:function(){return u(!i)}},"Draw"),o.a.createElement("span",null,"FPS: ",p),o.a.createElement(Xr,null,o.a.createElement(zr,null,o.a.createElement("span",null,"Max FPS: ",d),o.a.createElement("input",{type:"range",min:"1",max:"60",step:"1",value:d,onChange:function(e){return m(e.target.value)}})),o.a.createElement(zr,null,o.a.createElement("span",null,"Strength: ",l),o.a.createElement("input",{type:"range",min:"0",max:"1",step:"0.01",value:l,onChange:function(e){return s(e.target.value)}})),o.a.createElement(Ir,{onChange:function(e){var t=new ImageData(new Uint8ClampedArray(new Array(256).fill(0).flatMap((function(t,r){return[e.red[r].y,e.green[r].y,e.blue[r].y,255]}))),256);x.current=t,_.current=!0}}))))};Mr.propTypes={pixelSource:c.a.object,canvasRef:c.a.object.isRequired},Mr.defaultProps={pixelSource:null};var Ur=l.default.div.withConfig({displayName:"ToneCurve__StyledToneCurve",componentId:"sc-1qv9013-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),Lr=l.default.div.withConfig({displayName:"ToneCurve__Header",componentId:"sc-1qv9013-1"})(["background-color:#4834d4;padding:8px;"]),Vr=l.default.div.withConfig({displayName:"ToneCurve__Body",componentId:"sc-1qv9013-2"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),Gr=l.default.button.withConfig({displayName:"ToneCurve__Button",componentId:"sc-1qv9013-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),qr=l.default.div.withConfig({displayName:"ToneCurve__Footer",componentId:"sc-1qv9013-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),Hr=Object(l.default)(Gr).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"ToneCurve__DrawButton",componentId:"sc-1qv9013-5"})([""]),Xr=l.default.div.withConfig({displayName:"ToneCurve__Controls",componentId:"sc-1qv9013-6"})(["margin-top:8px;* + *{margin-top:4px;}"]),zr=l.default.label.withConfig({displayName:"ToneCurve__Label",componentId:"sc-1qv9013-7"})(["display:flex;input{flex:1;margin-left:8px;}"]),Yr=Mr;function Kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $r={array:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1],numComponents:2},Qr={array:[0,1,1,1,1,0,0,1,1,0,0,0],numComponents:2},Zr=function(e){var t=e.canvasRef,r=e.pixelSource,a=e.maskSource,i=e.blendSource,u=Kr(Object(n.useState)(!1),2),c=u[0],l=u[1],s=Kr(Object(n.useState)(30),2),f=s[0],d=s[1],m=Kr(Object(n.useState)(0),2),h=m[0],p=m[1],b=Object(n.useRef)(),g=Object(n.useRef)(0),v=Object(n.useRef)(),x=Object(n.useRef)(),y=Object(n.useRef)(),w=Object(n.useRef)(),S=Object(n.useRef)(),E=Object(n.useRef)(),C=Object(n.useRef)(),T=Object(n.useRef)(),A=Object(n.useRef)(),R=Object(n.useRef)(),j=Object(n.useRef)(),O=Object(n.useRef)(),_=Object(n.useRef)(),B=Object(n.useRef)();return Object(n.useEffect)((function(){var e=function(){var e=v.current;if(e)return R.current.buffer&&e.deleteBuffer(R.current.buffer),j.current.buffer&&e.deleteBuffer(j.current.buffer),O.current&&e.deleteTexture(O.current),_.current&&e.deleteTexture(_.current),B.current&&e.deleteTexture(B.current),S.current&&e.disableVertexAttribArray(S.current),E.current&&e.disableVertexAttribArray(E.current),Q({context:e,vertexShader:x.current,fragmentShader:y.current,program:w.current})},r=t.current;if(!r)return e;var n=r.getBoundingClientRect();r.height=n.height,r.width=n.width;var o=r.getContext("webgl2");v.current=o;var a=$({context:o,vertexShaderSource:"#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n",fragmentShaderSource:"#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uMask;\nuniform sampler2D uBlend;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 maskColor = texture(uMask, vTextCoord);\n  vec4 blendColor = texture(uBlend, vTextCoord);\n  outColor = vec4(mix(originColor.rgb, blendColor.rgb, 1.0 - maskColor.b), 1.0);\n}\n"});return a?(x.current=a.vertexShader,y.current=a.fragmentShader,w.current=a.program,S.current=o.getAttribLocation(a.program,"aPosition"),E.current=o.getAttribLocation(a.program,"aTextCoord"),C.current=o.getUniformLocation(a.program,"uSource"),T.current=o.getUniformLocation(a.program,"uMask"),A.current=o.getUniformLocation(a.program,"uBlend"),o.enableVertexAttribArray(S.current),o.enableVertexAttribArray(E.current),R.current=Z({context:o,attribute:$r}),j.current=Z({context:o,attribute:Qr}),O.current=J({context:o,index:0}),_.current=J({context:o,index:1}),B.current=J({context:o,index:2}),ee({context:o,location:S.current,buffer:R.current}),ee({context:o,location:E.current,buffer:j.current}),e):e}),[t]),Object(n.useEffect)((function(){if(c)return window.cancelAnimationFrame(b.current),b.current=window.requestAnimationFrame((function e(t){c&&(b.current=window.requestAnimationFrame(e));var n=1e3/f,o=t-g.current;o>=n&&(g.current=t,function(){var e=v.current;if(e&&r&&w.current){var t=e.canvas.width,n=e.canvas.height;"VIDEO"==r.nodeName?(t=r.videoWidth,n=r.videoHeight):"CANVAS"===r.nodeName&&(t=r.width,n=r.height);var o=e.canvas.width,u=e.canvas.height;o===t&&u===n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,t,n)),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(w.current),e.uniform1i(C.current,0),e.uniform1i(T.current,1),e.uniform1i(A.current,2),e.bindTexture(e.TEXTURE_2D,O.current),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.bindTexture(e.TEXTURE_2D,_.current),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a),e.bindTexture(e.TEXTURE_2D,B.current),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.drawArrays(e.TRIANGLES,0,R.current.count)}}(),p(Math.ceil(1e3/o)))})),function(){return window.cancelAnimationFrame(b.current)};window.cancelAnimationFrame(b.current)}),[c,f,r,a,i]),o.a.createElement(Jr,null,o.a.createElement(en,null,"MaskBlender"),o.a.createElement(tn,null,o.a.createElement("canvas",{ref:t})),o.a.createElement(nn,null,o.a.createElement(on,{isActived:c,disabled:!r,onClick:function(){return l(!c)}},"Draw"),o.a.createElement("span",null,"FPS: ",h),o.a.createElement(an,null,o.a.createElement(un,null,o.a.createElement("span",null,"Max FPS: ",f),o.a.createElement("input",{type:"range",min:"1",max:"60",step:"1",value:f,onChange:function(e){return d(e.target.value)}})))))};Zr.propTypes={pixelSource:c.a.object,maskSource:c.a.object,blendSource:c.a.object,canvasRef:c.a.object.isRequired},Zr.defaultProps={pixelSource:null,maskSource:null,blendSource:null};var Jr=l.default.div.withConfig({displayName:"MaskBlender__StyledMaskBlender",componentId:"sc-1h2qzjn-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),en=l.default.div.withConfig({displayName:"MaskBlender__Header",componentId:"sc-1h2qzjn-1"})(["background-color:#4834d4;padding:8px;"]),tn=l.default.div.withConfig({displayName:"MaskBlender__Body",componentId:"sc-1h2qzjn-2"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),rn=l.default.button.withConfig({displayName:"MaskBlender__Button",componentId:"sc-1h2qzjn-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],m),nn=l.default.div.withConfig({displayName:"MaskBlender__Footer",componentId:"sc-1h2qzjn-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),on=Object(l.default)(rn).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"MaskBlender__DrawButton",componentId:"sc-1h2qzjn-5"})([""]),an=l.default.div.withConfig({displayName:"MaskBlender__Controls",componentId:"sc-1h2qzjn-6"})(["margin-top:8px;"]),un=l.default.label.withConfig({displayName:"MaskBlender__Label",componentId:"sc-1h2qzjn-7"})(["display:flex;input{flex:1;margin-left:8px;}"]),cn=Zr;function ln(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fn=l.default.div.withConfig({displayName:"Main__StyledMain",componentId:"sc-1te9q8o-0"})(["padding:8px;"]),dn=l.default.div.withConfig({displayName:"Main__Modules",componentId:"sc-1te9q8o-1"})(["display:grid;gap:8px;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));margin-top:8px;"]),mn=l.default.div.withConfig({displayName:"Main__ModuleWrapper",componentId:"sc-1te9q8o-2"})([""]),hn=function(){var e=ln(Object(n.useState)(),2),t=e[0],r=e[1],a=Object(n.useRef)(),i=Object(n.useRef)(),u=Object(n.useRef)(),c=Object(n.useRef)(),l=Object(n.useRef)(),s=Object(n.useRef)(),f=Object(n.useRef)(),d=Object(n.useRef)();return Object(n.useEffect)((function(){var e=document.createElement("video");return e.setAttribute("playsinline",!0),a.current=e,function(){return e.srcObject=null,e.pause()}}),[]),Object(n.useEffect)((function(){a.current.srcObject=t,t?a.current.play():a.current.pause()}),[t]),o.a.createElement(fn,null,o.a.createElement(P,{onChange:function(e){var t=e.value;return r(t)}}),o.a.createElement(dn,null,o.a.createElement(mn,null,o.a.createElement(ut,{pixelSource:a.current})),o.a.createElement(mn,null,o.a.createElement(wt,{pixelSource:a.current,canvasRef:i})),o.a.createElement(mn,null,o.a.createElement(Nt,{pixelSource:i.current,canvasRef:u})),o.a.createElement(mn,null,o.a.createElement(Wt,{pixelSource:u.current,canvasRef:c})),o.a.createElement(mn,null,o.a.createElement(lr,{pixelSource:u.current,blurredPixelSource:c.current,canvasRef:l})),o.a.createElement(mn,null,o.a.createElement(Er,{pixelSource:l.current,canvasRef:s})),o.a.createElement(mn,null,o.a.createElement(Yr,{pixelSource:a.current,canvasRef:f})),o.a.createElement(mn,null,o.a.createElement(K,{mediaStream:t})),o.a.createElement(mn,null,o.a.createElement(cn,{pixelSource:a.current,maskSource:s.current,blendSource:f.current,canvasRef:d}))))},pn=r.p+"img/github-icon.e1201fcc.svg";function bn(e){return(bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Sn(e);if(t){var o=Sn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return wn(this,r)}}function wn(e,t){return!t||"object"!==bn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var En=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(i,e);var t,r,n,a=yn(i);function i(){return gn(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.email,r=e.github;return o.a.createElement(Cn,null,o.a.createElement(Tn,{href:r,target:"_blank"},o.a.createElement("img",{src:pn,alt:"github"})),o.a.createElement(Tn,{href:"mailto:".concat(t),target:"_blank"},o.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNNDY3LDYxSDQ1QzIwLjIxOCw2MSwwLDgxLjE5NiwwLDEwNnYzMDBjMCwyNC43MiwyMC4xMjgsNDUsNDUsNDVoNDIyYzI0LjcyLDAsNDUtMjAuMTI4LDQ1LTQ1VjEwNiBDNTEyLDgxLjI4LDQ5MS44NzIsNjEsNDY3LDYxeiBNNDYwLjc4Niw5MUwyNTYuOTU0LDI5NC44MzNMNTEuMzU5LDkxSDQ2MC43ODZ6IE0zMCwzOTkuNzg4VjExMi4wNjlsMTQ0LjQ3OSwxNDMuMjRMMzAsMzk5Ljc4OHogTTUxLjIxMyw0MjFsMTQ0LjU3LTE0NC41N2w1MC42NTcsNTAuMjIyYzUuODY0LDUuODE0LDE1LjMyNyw1Ljc5NSwyMS4xNjctMC4wNDZMMzE3LDI3Ny4yMTNMNDYwLjc4Nyw0MjFINTEuMjEzeiBNNDgyLDM5OS43ODcgTDMzOC4yMTMsMjU2TDQ4MiwxMTIuMjEyVjM5OS43ODd6Ii8+PC9zdmc+",alt:"email"})))}}])&&vn(t.prototype,r),n&&vn(t,n),i}(o.a.PureComponent);En.propTypes={email:c.a.string,github:c.a.string},En.defaultProps={email:"bill42362@gmail.com",github:"https://github.com/bill42362/portfolio"};var Cn=l.default.div.withConfig({displayName:"Footer__StyledFooter",componentId:"sc-1ygzj31-0"})(["flex:auto;display:flex;justify-content:center;align-items:flex-end;padding:20px;"]),Tn=l.default.a.withConfig({displayName:"Footer__Link",componentId:"sc-1ygzj31-1"})(["display:flex;justify-content:center;align-items:center;border-radius:50%;width:36px;height:36px;background-color:#576574;& + &{margin-left:8px;}img{width:60%;height:auto;}"]),An=En,Rn=r.p+"img/x-men-school.0928a818.svg";function jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function On(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(r),!0).forEach((function(t){_n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bn(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function In(){var e=function(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  ",';\n  *, ::after, ::before { box-sizing: border-box; }\n  body {\n    background-color: #101010;\n    color: #efefef;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue",\n      Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-weight: 400;\n    -webkit-tap-highlight-color: transparent;\n    overscroll-behavior-y: contain;\n  }\n  button {\n    background-color: rgba(0, 0, 0, 0);\n    cursor: pointer;\n    &:disabled {\n      cursor: not-allowed;\n    }\n  }\n  input::placeholder,\n  input::-webkit-input-placeholder,\n  input::-moz-placeholder {\n    line-height: normal !important;\n    vertical-align: middle;\n  }\n  a { color: inherit; text-decoration: none; }\n  a > * { opacity: inherit; }\n  a:hover { opacity: .7; }\n']);return In=function(){return e},e}var Pn=Object(l.createGlobalStyle)(In(),f.a),Fn="Portfolio",Nn="Bill's portfolio",kn=function(e){var t=e.request;return console.log("App() request:",t),o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{defaultTitle:"Portfolio",titleTemplate:"%s - Portfolio"},o.a.createElement("meta",{charSet:"utf-8"}),o.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),o.a.createElement("meta",{name:"author",content:"Bill"}),o.a.createElement("meta",{name:"description",content:Nn}),o.a.createElement("meta",{property:"og:url",content:"https://github.com/bill42362/portfolio"}),o.a.createElement("meta",{property:"og:type",content:"website"}),o.a.createElement("meta",{property:"og:title",content:Fn}),o.a.createElement("meta",{property:"og:description",content:Nn}),o.a.createElement("meta",{property:"og:site_name",content:Fn}),o.a.createElement("meta",{property:"twitter:card",content:"summary"}),o.a.createElement("meta",{property:"twitter:site",content:"@bill_portfolio"})),o.a.createElement(Pn,null),o.a.createElement(Dn,null,!window&&o.a.createElement("img",{src:Rn,title:"Xavier school"}),o.a.createElement(hn,null),o.a.createElement(An,null)))};kn.propTypes={request:c.a.object},kn.defaultProps={request:null};var Dn=l.default.div.withConfig({displayName:"App__StyledApp",componentId:"sc-1v2nrsx-0"})(["display:flex;flex-direction:column;justify-content:center;min-height:100vh;background-color:#222f3e;"]),Mn=function(e){var t=e.sheet,r=Bn(e,["sheet"]);return t.instance?o.a.createElement(l.StyleSheetManager,{sheet:t.instance},o.a.createElement(kn,r)):o.a.createElement(kn,r)};Mn.propTypes=On(On({},kn.propTypes),{},{sheet:c.a.object}),Mn.defaultProps=On(On({},kn.defaultProps),{},{sheet:{}});var Un=Mn;i.a.render(o.a.createElement(Un,null),document.getElementById("app-root"))}}]);
//# sourceMappingURL=bundle~bundle~5b60049d.111cc649.js.map