{"version":3,"sources":["webpack:///./src/client/js/style/ResetButtonStyle.js","webpack:///./src/client/js/component/MediaStreamHandler.jsx","webpack:///./src/client/js/component/MediaStreamMonitor.jsx","webpack:///./src/client/js/resource/WebGL.js","webpack:///./src/client/js/shaderSource/mirrorVertex.js","webpack:///./src/client/js/shaderSource/greenBlueChannelFragment.js","webpack:///./src/client/js/resource/GreenBlueChannel.js","webpack:///./src/client/js/shaderSource/gaussianBlurFragment.js","webpack:///./src/client/js/resource/GaussianBlurFilter.js","webpack:///./src/client/js/shaderSource/highPassFilterFragment.js","webpack:///./src/client/js/resource/HighPassFilter.js","webpack:///./src/client/js/shaderSource/hardLightFragment.js","webpack:///./src/client/js/resource/HardLight.js","webpack:///./src/client/js/resource/CardinalSpline.js","webpack:///./src/client/js/shaderSource/toneCurveFragment.js","webpack:///./src/client/js/resource/ToneCurve.js","webpack:///./src/client/js/shaderSource/maskBlenderFragment.js","webpack:///./src/client/js/resource/MaskBlender.js","webpack:///./src/client/js/shaderSource/fillColorFragment.js","webpack:///./src/client/js/resource/FillColor.js","webpack:///./src/client/js/shaderSource/mirrorFragment.js","webpack:///./src/client/js/resource/CopyTexture.js","webpack:///./src/client/js/resource/BeautifyFilter.js","webpack:///./src/client/js/component/BeautifyFilter.jsx","webpack:///./src/client/js/component/ExposureValue.jsx","webpack:///./src/client/js/component/GreenBlueChannel.jsx","webpack:///./src/client/js/component/GaussianBlur.jsx","webpack:///./src/client/js/component/HighPassFilter.jsx","webpack:///./src/client/js/component/HardLight.jsx","webpack:///./src/client/js/component/ToneCurveEditor.jsx","webpack:///./src/client/js/component/ToneCurve.jsx","webpack:///./src/client/js/component/MaskBlender.jsx","webpack:///./src/client/js/component/Main.jsx","webpack:///./src/client/img/github-icon.svg","webpack:///./src/client/js/component/Footer.jsx","webpack:///./src/client/img/email-icon.svg","webpack:///./src/client/img/x-men-school.svg","webpack:///./src/client/js/component/App.jsx","webpack:///./src/client/js/index.js"],"names":["ResetButtonStyle","css","MediaStreamHandler","state","isStarted","shouldPreview","mediaStream","error","video","React","createRef","startRecording","props","onChange","onError","setState","navigator","mediaDevices","getUserMedia","facingMode","stream","value","target","stopRecording","getTracks","forEach","track","stop","renderDescription","id","JSON","stringify","message","renderBody","ref","playsInline","handleTogglePreview","_","prevState","this","current","srcObject","play","StyledMediaStreamHandler","Header","StopButton","onClick","StartButton","ToggleButton","isActived","disabled","PureComponent","propTypes","PropTypes","func","defaultProps","styled","div","Body","Footer","Button","button","attrs","style","backgroundColor","MediaStreamMonitor","StyledMediaStreamMonitor","object","createShader","context","type","source","shader","shaderSource","compileShader","createProgram","vertexShaderSource","fragmentShaderSource","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","console","getProgramInfoLog","getShaderInfoLog","deleteShader","deleteProgram","clearGlCore","createBuffer","attribute","buffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","array","STATIC_DRAW","numComponents","count","Math","floor","length","FLOAT","normalize","offset","stride","createTexture","index","ctx","texture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","canvas","width","height","UNSIGNED_BYTE","dockBuffer","location","vertexAttribPointer","mirrorVertex","greenBlueChannelFragment","GreenBlueChannel","Error","core","mirrorVertexShaderSource","greenBlueChannelFragmentShaderSource","aPosition","getAttribLocation","aTextCoord","enableVertexAttribArray","uIsFrameBuffer","getUniformLocation","uSource","prototype","key","includes","draw","sourceTexture","sourceTextureIndex","targetFrameBuffer","useProgram","uniform1i","bindFramebuffer","FRAMEBUFFER","drawArrays","TRIANGLES","gaussianBlurFragment","getKernal","inputRadius","sigma","radius","abs","sigma2","data","Array","sum","x","exp","sqrt","PI","normalizedData","map","GaussianBlurFilter","gaussianBlurFragmentShaderSource","uResolution","uKernalRadius","uKernelData","uIsVertical","updateKernal","isNaN","_radius","_sigma","_kernal","uniform1fv","midFrameBuffer","midTexture","midTextureIndex","uniform2f","highPassFilterFragment","HighPassFilter","highPassFilterFragmentShaderSource","uBlurredSource","blurredSourceTexture","blurredSourceTextureIndex","hardLightFragment","HardLight","cycles","hardLightFragmentShaderSource","uCycles","updateCycles","_cycles","max","mk1","tension","k0","k2","y","getPolynomial","p0","p1","p2","p3","t","h00","h10","h01","h11","getPaddedPoints","points","ptail0","ptail1","getPolynomials","sortedPoints","sort","a","b","padPoints","slice","point","startPoint","stopPoint","polynomial","getCurvePoint","polynomials","find","p","getCurvePoints","fill","toneCurveFragment","defaultRedControlPoints","defaultControlPoints","red","green","blue","ToneCurve","toneMapTexture","toneMapTextureIndex","strength","controlPoints","toneCurveFragmentShaderSource","uStrength","uTone","updateStrength","updateCurvePoints","_strength","min","uniform1f","_controlPoints","_tension","_curvePoints","_curveImageData","ImageData","Uint8ClampedArray","flatMap","maskBlenderFragment","MaskBlender","maskBlenderFragmentShaderSource","uMask","uBlendSource","maskTexture","maskTextureIndex","blendSourceTexture","blendSourceTextureIndex","fillColorFragment","FillColor","color","fillColorFragmentShaderSource","uColor","updateColor","isArray","_color","uniform4f","mirrorFragment","CopyTexture","mirrorFragmentShaderSource","textureNames","frameBufferNames","textureIndex","reduce","textureName","clearColor","positionAttribute","textCoordAttribute","BeautifyFilter","document","createElement","window","getContext","name","frameBuffer","createFramebuffer","framebufferTexture2D","COLOR_ATTACHMENT0","greenBlueChannel","gaussianBlur","highPassFilter","hardLight","toneCurve","toneMap","maskBlender","fillColor","copyTexture","pixelSource","updateCanvasSize","clear","COLOR_BUFFER_BIT","gaussianBlurMid","sourceWidth","sourceHeight","nodeName","videoWidth","videoHeight","canvasWidth","canvasHeight","viewport","Object","keys","textureKey","useState","shouldAnimate","setShouldAnimate","maxFps","setMaxFps","fps","setFps","animationFrame","useRef","lastFrameTimestamp","filterCore","canvasRef","useEffect","BeautifyFilterCore","cancelAnimationFrame","requestAnimationFrame","animate","timestamp","minInterval","elapsed","clearRect","drawImage","nextFrame","ceil","StyledBeautifyFilter","DrawButton","Controls","Label","step","e","label","ExposureValue","exposureValue","setExposureValue","webGlContext","positionLocation","textCoordLocation","pixelLocation","shouldUpdateExposureValue","exposureValueLocation","positionBuffer","textCoordBuffer","pixelTexture","deleteBuffer","deleteTexture","disableVertexAttribArray","rect","getBoundingClientRect","glCore","StyledExposureValue","isRequired","StyledGreenBlueChannel","GaussianBlur","setRadius","setSigma","shouldUpdateKernalUniform","kernal","resolutionLocation","twoPassToggleLocation","kernalDataLocation","kernalRadiusLocation","twoPassTexture","twoPassFramebuffer","deleteFramebuffer","StyledGaussianBlur","blurredPixelSource","blurredPixelLocation","blurredPixelTexture","StyledHighPassFilter","setCycles","shouldUpdateCycles","cyclesLocation","StyledHardLight","SIZE","ToneCurveEditor","cursorPoint","setCursorPoint","setTension","redControlPoints","redCurvePoints","setRedCurvePoints","originStrokeStyle","strokeStyle","originLineWidth","lineWidth","beginPath","i","moveTo","lineTo","stroke","drawAxis","size","axisPoint","drawCross","fillStyle","arc","StyledToneCurveEditor","Monitor","onMouseMove","clientX","offsetLeft","clientY","offsetTop","onMouseLeave","defaultToneTextureData","setStrength","toneTextureData","strengthLocation","toneLocation","shouldUpdateStrength","shouldUpdateToneTexture","toneTexture","StyledToneCurve","tonePoints","maskSource","blendSource","maskLocation","blendLocation","blendTexture","StyledMaskBlender","StyledMain","Modules","ModuleWrapper","Main","setMediaStream","sourceVideo","exposureValueCanvas","greenBlueChannelCanvas","gaussianBlurCanvas","highPassFilterCanvas","hardLightCanvas","toneCurveCanvas","maskBlenderCanvas","setAttribute","pause","email","github","StyledFooter","Link","href","src","GithubIcon","alt","string","GlobalStyle","createGlobalStyle","styledNormalize","title","description","App","request","log","Helmet","defaultTitle","titleTemplate","charSet","content","property","StyledApp","XMenLogoSource","sheet","instance","ReactDOM","render","getElementById"],"mappings":"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","file":"js/bundle~bundle~5b60049d.d5ef3d01.js","sourcesContent":["// ResetButtonStyle.js\n'use strict';\nimport { css } from 'styled-components';\n\nexport const ResetButtonStyle = css`\n  border: none;\n  padding: 0px;\n  outline: none;\n  background: none;\n`;\n\nexport default ResetButtonStyle;\n","// MediaStreamHandler.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nexport class MediaStreamHandler extends React.PureComponent {\n  state = {\n    isStarted: false,\n    shouldPreview: false,\n    mediaStream: null,\n    error: false,\n  };\n  video = React.createRef();\n\n  startRecording = async () => {\n    const { onChange, onError } = this.props;\n    try {\n      this.setState({ isStarted: true });\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: { facingMode: 'environment' },\n      });\n      this.setState({ mediaStream: stream });\n      return onChange({ value: stream });\n    } catch (error) {\n      this.setState({ error, isStarted: false });\n      return onError({ error, target: this });\n    }\n  };\n\n  stopRecording = () => {\n    const { mediaStream } = this.state;\n    const { onChange } = this.props;\n    if (mediaStream) {\n      const tracks = mediaStream.getTracks();\n      tracks.forEach(track => track.stop());\n      onChange({ value: null });\n      this.setState({\n        mediaStream: null,\n        isStarted: false,\n        shouldPreview: false,\n      });\n    }\n  };\n\n  componentDidUpdate(_, prevState) {\n    const { mediaStream, shouldPreview } = this.state;\n    if (shouldPreview && shouldPreview !== prevState.shouldPreview) {\n      this.video.current.srcObject = mediaStream;\n      this.video.current.play();\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopRecording();\n  }\n\n  renderDescription = () => {\n    const { isStarted, mediaStream, error } = this.state;\n\n    if (isStarted) {\n      if (mediaStream) {\n        return `Media stream id: ${mediaStream.id}`;\n      } else {\n        return 'Loading mediaStream ...';\n      }\n    }\n\n    if (error) {\n      return `Error: ${JSON.stringify(error.message)}`;\n    }\n\n    return 'Idle';\n  };\n\n  renderBody = () => {\n    const { shouldPreview } = this.state;\n    return (\n      <Body>\n        <div>{this.renderDescription()}</div>\n        {shouldPreview && <video ref={this.video} playsInline />}\n      </Body>\n    );\n  };\n\n  handleTogglePreview = () => {\n    const { mediaStream, shouldPreview } = this.state;\n    if (!mediaStream) {\n      return;\n    }\n    return this.setState({ shouldPreview: !shouldPreview });\n  };\n\n  render() {\n    const { mediaStream, shouldPreview } = this.state;\n    return (\n      <StyledMediaStreamHandler>\n        <Header>MediaStreamHandler</Header>\n        {this.renderBody()}\n        <Footer>\n          {mediaStream ? (\n            <StopButton onClick={this.stopRecording}>Stop</StopButton>\n          ) : (\n            <StartButton onClick={this.startRecording}>Start</StartButton>\n          )}\n          <ToggleButton\n            isActived={shouldPreview}\n            disabled={!mediaStream}\n            onClick={this.handleTogglePreview}\n          >\n            Preview\n          </ToggleButton>\n        </Footer>\n      </StyledMediaStreamHandler>\n    );\n  }\n}\n\nMediaStreamHandler.propTypes = {\n  onChange: PropTypes.func,\n  onError: PropTypes.func,\n};\n\nMediaStreamHandler.defaultProps = {\n  onChange: () => null,\n  onError: () => null,\n};\n\nconst StyledMediaStreamHandler = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > video {\n    margin-top: 8px;\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst StartButton = styled(Button)`\n  background-color: #6ab04c;\n`;\n\nconst StopButton = styled(Button)`\n  background-color: #eb4d4b;\n`;\n\nconst ToggleButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nexport default MediaStreamHandler;\n","// MediaStreamMonitor.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nexport class MediaStreamMonitor extends React.PureComponent {\n  state = {\n    shouldPreview: false,\n  };\n  video = React.createRef();\n\n  componentDidUpdate(_, prevState) {\n    const { mediaStream } = this.props;\n    const { shouldPreview } = this.state;\n    if (!mediaStream && mediaStream !== prevState.mediaStream) {\n      this.setState({ shouldPreview: false });\n    }\n    if (\n      mediaStream &&\n      shouldPreview &&\n      shouldPreview !== prevState.shouldPreview\n    ) {\n      this.video.current.srcObject = mediaStream;\n      this.video.current.play();\n    }\n  }\n\n  handleTogglePreview = () => {\n    const { mediaStream } = this.props;\n    const { shouldPreview } = this.state;\n    if (!mediaStream) {\n      return;\n    }\n    return this.setState({ shouldPreview: !shouldPreview });\n  };\n\n  render() {\n    const { mediaStream } = this.props;\n    const { shouldPreview } = this.state;\n    return (\n      <StyledMediaStreamMonitor>\n        <Header>MediaStreamMonitor</Header>\n        <Body>{shouldPreview && <video ref={this.video} playsInline />}</Body>\n        <Footer>\n          <ToggleButton\n            isActived={shouldPreview}\n            disabled={!mediaStream}\n            onClick={this.handleTogglePreview}\n          >\n            Open\n          </ToggleButton>\n        </Footer>\n      </StyledMediaStreamMonitor>\n    );\n  }\n}\n\nMediaStreamMonitor.propTypes = {\n  mediaStream: PropTypes.object,\n};\n\nMediaStreamMonitor.defaultProps = {\n  mediaStream: null,\n};\n\nconst StyledMediaStreamMonitor = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > video {\n    margin-top: 8px;\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst ToggleButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nexport default MediaStreamMonitor;\n","// WebGL.js\nconst createShader = (context, type, source) => {\n  const shader = context.createShader(type);\n  context.shaderSource(shader, source);\n  context.compileShader(shader);\n  return shader;\n};\n\nexport const createProgram = ({\n  context,\n  vertexShaderSource,\n  fragmentShaderSource,\n}) => {\n  if (!context || !vertexShaderSource || !fragmentShaderSource) {\n    return;\n  }\n  const vertexShader = createShader(\n    context,\n    context.VERTEX_SHADER,\n    vertexShaderSource\n  );\n  const fragmentShader = createShader(\n    context,\n    context.FRAGMENT_SHADER,\n    fragmentShaderSource\n  );\n  const program = context.createProgram();\n  context.attachShader(program, vertexShader);\n  context.attachShader(program, fragmentShader);\n  context.linkProgram(program);\n  const success = context.getProgramParameter(program, context.LINK_STATUS);\n  if (success) {\n    return { vertexShader, fragmentShader, program };\n  }\n  // eslint-disable-next-line no-console\n  console.error('Link failed:', context.getProgramInfoLog(program));\n  // eslint-disable-next-line no-console\n  console.error('vs info-log:', context.getShaderInfoLog(vertexShader));\n  // eslint-disable-next-line no-console\n  console.error('fs info-log:', context.getShaderInfoLog(fragmentShader));\n  context.deleteShader(vertexShader);\n  context.deleteShader(fragmentShader);\n  context.deleteProgram(program);\n  return;\n};\n\nexport const clearGlCore = ({\n  context,\n  vertexShader,\n  fragmentShader,\n  program,\n} = {}) => {\n  if (!context) {\n    return;\n  }\n  vertexShader && context.deleteShader(vertexShader);\n  fragmentShader && context.deleteShader(fragmentShader);\n  program && context.deleteProgram(program);\n};\n\nexport const createBuffer = ({ context, attribute }) => {\n  const buffer = context.createBuffer();\n  context.bindBuffer(context.ARRAY_BUFFER, buffer);\n  context.bufferData(\n    context.ARRAY_BUFFER,\n    new Float32Array(attribute.array),\n    context.STATIC_DRAW\n  );\n  return {\n    buffer,\n    numComponents: attribute.numComponents,\n    count: Math.floor(attribute.array.length / attribute.numComponents),\n    type: context.FLOAT,\n    normalize: false,\n    offset: 0,\n    // how many bytes to get from one set of values to the next\n    // 0 = use type and numComponents above\n    stride: 0,\n  };\n};\n\nexport const createTexture = ({ context, index = 0 }) => {\n  const ctx = context;\n  const texture = ctx.createTexture();\n  ctx.activeTexture(ctx.TEXTURE0 + index);\n  ctx.bindTexture(ctx.TEXTURE_2D, texture);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_WRAP_S, ctx.CLAMP_TO_EDGE);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_WRAP_T, ctx.CLAMP_TO_EDGE);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_MIN_FILTER, ctx.NEAREST);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_MAG_FILTER, ctx.NEAREST);\n  // setup default texture data\n  ctx.texImage2D(\n    ctx.TEXTURE_2D,\n    0, // level\n    ctx.RGBA, // internal format\n    ctx.canvas.width,\n    ctx.canvas.height,\n    0, // border\n    ctx.RGBA, // src format\n    ctx.UNSIGNED_BYTE, // src type\n    null\n  );\n  return texture;\n};\n\nexport const dockBuffer = ({ context, location, buffer }) => {\n  context.bindBuffer(context.ARRAY_BUFFER, buffer.buffer);\n  context.vertexAttribPointer(\n    location,\n    buffer.numComponents,\n    buffer.type,\n    buffer.normalize,\n    buffer.stride,\n    buffer.offset\n  );\n};\n","// mirrorVertex.js\n\nconst mirrorVertex = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nuniform int uIsFrameBuffer;\nout vec2 vTextCoord;\n\nvoid main() {\n  vec4 position = aPosition;\n  if (1 == uIsFrameBuffer) {\n    // frame buffer axis is opposite with canvas.\n    position.y = -aPosition.y;\n  }\n  gl_Position = position;\n  vTextCoord = aTextCoord;\n}\n`;\n\nexport default mirrorVertex;\n","// greenBlueChannelFragment.js\n\nconst greenBlueChannelFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  float gbColor = 2.0 * originColor.b * originColor.g;\n  outColor = vec4(gbColor, gbColor, gbColor, originColor.a);\n}\n`;\n\nexport default greenBlueChannelFragment;\n","// GreenBlueChannel.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport greenBlueChannelFragmentShaderSource from '../shaderSource/greenBlueChannelFragment.js';\n\nconst GreenBlueChannel = function ({ context } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: greenBlueChannelFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n};\n\nGreenBlueChannel.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nGreenBlueChannel.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default GreenBlueChannel;\n","// gaussianBlurFragment.js\n\nconst gaussianBlurFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform vec2 uResolution;\nuniform int uKernalRadius;\nuniform float uKernelData[65];\nuniform int uIsVertical;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec2 delta = 1.0 / uResolution;\n  vec4 outputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\n  for (int index = -uKernalRadius; index <= uKernalRadius; index++) {\n    vec2 step = vec2(index, 0.0);\n    if (1 == uIsVertical) {\n      step = vec2(0.0, index);\n    }\n    vec2 offset = vTextCoord + step * delta;\n    outputColor += uKernelData[index + uKernalRadius] * texture(uSource, offset);\n  }\n\n  outColor = outputColor;\n}\n`;\n\nexport default gaussianBlurFragment;\n","// GaussianBlurFilter.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport gaussianBlurFragmentShaderSource from '../shaderSource/gaussianBlurFragment.js';\n\nconst getKernal = (inputRadius, sigma) => {\n  const radius = Math.floor(Math.abs(inputRadius));\n  const sigma2 = sigma * sigma;\n  const data = new Array(radius * 2 + 1);\n  let sum = 0;\n  for (let x = -radius; x <= radius; ++x) {\n    const index = x + radius;\n    data[index] =\n      Math.exp(-(x * x) / (2.0 * sigma2)) / Math.sqrt(2.0 * Math.PI * sigma2);\n    sum += data[index];\n  }\n  const normalizedData = data.map(value => value / sum);\n  return { data: new Float32Array(normalizedData), radius };\n};\n\nconst GaussianBlurFilter = function ({ context, radius = 16, sigma = 5 } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: gaussianBlurFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n  this.location.uResolution = context.getUniformLocation(\n    this.core.program,\n    'uResolution'\n  );\n  this.location.uKernalRadius = context.getUniformLocation(\n    this.core.program,\n    'uKernalRadius'\n  );\n  this.location.uKernelData = context.getUniformLocation(\n    this.core.program,\n    'uKernelData'\n  );\n  this.location.uIsVertical = context.getUniformLocation(\n    this.core.program,\n    'uIsVertical'\n  );\n\n  this.updateKernal({ radius, sigma });\n};\n\nGaussianBlurFilter.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nGaussianBlurFilter.prototype.updateKernal = function ({ radius, sigma } = {}) {\n  if (radius && isNaN(radius)) {\n    throw new Error('invalid radius');\n  }\n  if (radius && (32 < radius || 0 > radius)) {\n    throw new Error('radius must be [0, 32]');\n  }\n  if (sigma && isNaN(sigma)) {\n    throw new Error('invalid sigma');\n  }\n  if (sigma && 0 >= sigma) {\n    throw new Error('sigma must be > 0');\n  }\n  this._radius = radius || this._radius;\n  this._sigma = sigma || this._sigma;\n  this._kernal = getKernal(this._radius, this._sigma);\n\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform1i(this.location.uKernalRadius, this._kernal.radius);\n  context.uniform1fv(this.location.uKernelData, this._kernal.data);\n};\n\nGaussianBlurFilter.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  midFrameBuffer,\n  midTexture,\n  midTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform2f(\n    this.location.uResolution,\n    context.canvas.width,\n    context.canvas.height\n  );\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  context.bindFramebuffer(context.FRAMEBUFFER, midFrameBuffer);\n  context.uniform1i(this.location.uIsFrameBuffer, 1);\n  context.uniform1i(this.location.uIsVertical, 1);\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n\n  context.bindTexture(context.TEXTURE_2D, midTexture);\n  context.uniform1i(this.location.uSource, midTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.uniform1i(this.location.uIsVertical, 0);\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default GaussianBlurFilter;\n","// highPassFilterFragment.js\n\nconst highPassFilterFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uBlurredSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 blurredColor = texture(uBlurredSource, vTextCoord);\n  outColor = originColor - blurredColor + vec4(0.5, 0.5, 0.5, 1.0);\n}\n`;\n\nexport default highPassFilterFragment;\n","// HighPassFilter.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport highPassFilterFragmentShaderSource from '../shaderSource/highPassFilterFragment.js';\n\nconst HighPassFilter = function ({ context } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: highPassFilterFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n  this.location.uBlurredSource = context.getUniformLocation(\n    this.core.program,\n    'uBlurredSource'\n  );\n};\n\nHighPassFilter.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nHighPassFilter.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  blurredSourceTexture,\n  blurredSourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n  context.bindTexture(context.TEXTURE_2D, blurredSourceTexture);\n  context.uniform1i(this.location.uBlurredSource, blurredSourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default HighPassFilter;\n","// hardLightFragment.js\n// https://github.com/YuAo/YUGPUImageHighPassSkinSmoothing/blob/master/Sources/YUGPUImageHighPassSkinSmoothingFilter.m#L19\n\nconst hardLightFragment = `#version 300 es\nprecision highp float;\n\nuniform int uCycles;\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n\n  float color = originColor.b;\n  for (int i = 0; i < uCycles; ++i) {\n    if (color < 0.5) {\n      color = color * color * 2.0;\n    } else {\n      color = 1.0 - (1.0 - color) * (1.0 - color) * 2.0;\n    }\n  }\n\n  float k = 255.0 / (164.0 - 75.0);\n  color = (color - 75.0 / 255.0) * k;\n\n  outColor = vec4(color, color, color, originColor.a);;\n}\n`;\n\nexport default hardLightFragment;\n","// HardLight.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport hardLightFragmentShaderSource from '../shaderSource/hardLightFragment.js';\n\nconst HardLight = function ({ context, cycles = 3 } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: hardLightFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uCycles = context.getUniformLocation(\n    this.core.program,\n    'uCycles'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n\n  this.updateCycles({ cycles });\n};\n\nHardLight.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nHardLight.prototype.updateCycles = function ({ cycles } = {}) {\n  if (!cycles || isNaN(cycles)) {\n    throw new Error('invalid cycles argument');\n  }\n  this._cycles = Math.max(Math.floor(cycles), 0) || this._cycles;\n\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform1i(this.location.uCycles, this._cycles);\n};\n\nHardLight.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default HardLight;\n","// CardinalSpline.js\n// https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline\n\nconst h00 = t => (1 + 2 * t) * (1 - t) * (1 - t);\nconst h10 = t => t * (1 - t) * (1 - t);\nconst h01 = t => t * t * (3 - 2 * t);\nconst h11 = t => t * t * (t - 1);\n\nconst mk1 = ({ tension, k0, k2 }) =>\n  ((1 - tension) * (k2.y - k0.y)) / (k2.x - k0.x);\n\nconst getPolynomial = ({ tension, p0, p1, p2, p3 }) => {\n  return t =>\n    h00(t) * p1.y +\n    h10(t) * (p2.x - p1.x) * mk1({ tension, k0: p0, k2: p2 }) +\n    h01(t) * p2.y +\n    h11(t) * (p2.x - p1.x) * mk1({ tension, k0: p1, k2: p3 });\n};\n\nconst getPaddedPoints = ({ points }) => {\n  const p0 = points[0];\n  const p1 = points[1];\n  const ptail0 = points[points.length - 1];\n  const ptail1 = points[points.length - 2];\n  return [\n    { x: p0.x - (p1.x - p0.x), y: p0.y - (p1.y - p0.y) },\n    ...points,\n    {\n      x: ptail0.x + (ptail0.x - ptail1.x),\n      y: ptail0.y + (ptail0.y - ptail1.y),\n    },\n  ];\n};\n\nconst getPolynomials = ({\n  points = [\n    { x: 0, y: 0 },\n    { x: 255, y: 255 },\n  ],\n  tension = 0.5,\n} = {}) => {\n  const sortedPoints = points.sort((a, b) => a.x - b.x);\n  const padPoints = getPaddedPoints({ points: sortedPoints });\n  return sortedPoints.slice(0, -1).map((point, index) => {\n    return {\n      startPoint: point,\n      stopPoint: sortedPoints[index + 1],\n      length: sortedPoints[index + 1].x - point.x,\n      polynomial: getPolynomial({\n        tension,\n        p0: padPoints[index],\n        p1: padPoints[index + 1],\n        p2: padPoints[index + 2],\n        p3: padPoints[index + 3],\n      }),\n    };\n  });\n};\n\nconst getCurvePoint = ({ x, polynomials }) => {\n  const polynomial = polynomials.find(\n    p => p.startPoint.x <= x && p.stopPoint.x >= x\n  );\n  if (x === polynomial.startPoint.x) {\n    return { x, y: polynomial.startPoint.y };\n  }\n  const t = (x - polynomial.startPoint.x) / polynomial.length;\n  return { x, y: polynomial.polynomial(t) };\n};\n\nexport const getCurvePoints = ({\n  points = [\n    { x: 0, y: 0 },\n    { x: 255, y: 255 },\n  ],\n  tension = 0.5,\n} = {}) => {\n  const polynomials = getPolynomials({ points, tension });\n\n  return new Array(256).fill(0).map((_, index) => {\n    return getCurvePoint({ x: index, polynomials });\n  });\n};\n","// toneCurveFragment.js\n\nconst toneCurveFragment = `#version 300 es\nprecision highp float;\n\nuniform float uStrength;\nuniform sampler2D uSource;\nuniform sampler2D uTone;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 colorIndex = texture(uSource, vTextCoord);\n  float revStr = 1.0 - uStrength;\n  outColor = vec4(\n    uStrength * vec4(texture(uTone, vec2(colorIndex.r, 0))).r + revStr * colorIndex.r,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.g, 0))).g + revStr * colorIndex.g,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.b, 0))).b + revStr * colorIndex.b,\n    1.0\n  );\n}\n`;\n\nexport default toneCurveFragment;\n","// ToneCurve.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport { getCurvePoints } from '../resource/CardinalSpline.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport toneCurveFragmentShaderSource from '../shaderSource/toneCurveFragment.js';\n\nconst defaultRedControlPoints = [\n  { x: 0, y: 0 },\n  { x: 120, y: 146 }, // default\n  { x: 255, y: 255 },\n];\nconst defaultControlPoints = {\n  red: defaultRedControlPoints,\n  green: defaultRedControlPoints,\n  blue: defaultRedControlPoints,\n};\n\nconst ToneCurve = function ({\n  context,\n  toneMapTexture,\n  toneMapTextureIndex,\n  strength = 0.5,\n  controlPoints = defaultControlPoints,\n  tension = 0.5,\n} = {}) {\n  if (!context || !toneMapTexture || !toneMapTextureIndex) {\n    throw new Error('not enough arguments');\n  }\n  this.context = context;\n  this.toneMapTexture = toneMapTexture;\n  this.toneMapTextureIndex = toneMapTextureIndex;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: toneCurveFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uStrength = context.getUniformLocation(\n    this.core.program,\n    'uStrength'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n  this.location.uTone = context.getUniformLocation(this.core.program, 'uTone');\n\n  context.useProgram(this.core.program);\n  context.uniform1i(this.location.uTone, this.toneMapTextureIndex);\n\n  this.updateStrength({ strength });\n  this.updateCurvePoints({ controlPoints, tension });\n};\n\nToneCurve.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nToneCurve.prototype.updateStrength = function ({ strength } = {}) {\n  if (!strength || isNaN(strength)) {\n    throw new Error('invalid strength argument');\n  }\n  this._strength = Math.max(Math.min(strength, 1), 0) || this._strength;\n\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform1f(this.location.uStrength, this._strength);\n};\n\nToneCurve.prototype.updateCurvePoints = function ({\n  controlPoints,\n  tension,\n} = {}) {\n  if (\n    controlPoints &&\n    (!controlPoints.red || !controlPoints.green || !controlPoints.blue)\n  ) {\n    throw new Error('invalid controlPoints argument');\n  }\n  if (tension && isNaN(tension)) {\n    throw new Error('invalid tension argument');\n  }\n  if (\n    (!controlPoints || controlPoints === this._controlPoints) &&\n    (!tension || tension === this._tension)\n  ) {\n    return;\n  }\n  this._controlPoints = controlPoints || this._controlPoints;\n  this._tension = tension || this._tension;\n  this._curvePoints = {\n    red: getCurvePoints({\n      points: this._controlPoints.red,\n      tension: this._tension,\n    }),\n    green: getCurvePoints({\n      points: this._controlPoints.green,\n      tension: this._tension,\n    }),\n    blue: getCurvePoints({\n      points: this._controlPoints.blue,\n      tension: this._tension,\n    }),\n  };\n  this._curveImageData = new ImageData(\n    new Uint8ClampedArray(\n      new Array(256)\n        .fill(0)\n        .flatMap((_, index) => [\n          this._curvePoints.red[index].y,\n          this._curvePoints.green[index].y,\n          this._curvePoints.blue[index].y,\n          255,\n        ])\n    ),\n    256\n  );\n};\n\nToneCurve.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  context.bindTexture(context.TEXTURE_2D, this.toneMapTexture);\n  context.texImage2D(\n    context.TEXTURE_2D,\n    0, // mip level\n    context.RGBA, // internam format\n    context.RGBA, // src format\n    context.UNSIGNED_BYTE, // src type\n    this._curveImageData\n  );\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default ToneCurve;\n","// maskBlenderFragment.js\n\nconst maskBlenderFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uMask;\nuniform sampler2D uBlendSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 maskColor = texture(uMask, vTextCoord);\n  vec4 blendColor = texture(uBlendSource, vTextCoord);\n  outColor = vec4(mix(originColor.rgb, blendColor.rgb, 1.0 - maskColor.b), 1.0);\n}\n`;\n\nexport default maskBlenderFragment;\n","// MaskBlender.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport maskBlenderFragmentShaderSource from '../shaderSource/maskBlenderFragment.js';\n\nconst MaskBlender = function ({ context } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: maskBlenderFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n  this.location.uMask = context.getUniformLocation(this.core.program, 'uMask');\n  this.location.uBlendSource = context.getUniformLocation(\n    this.core.program,\n    'uBlendSource'\n  );\n};\n\nMaskBlender.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nMaskBlender.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  maskTexture,\n  maskTextureIndex,\n  blendSourceTexture,\n  blendSourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n  context.bindTexture(context.TEXTURE_2D, maskTexture);\n  context.uniform1i(this.location.uMask, maskTextureIndex);\n  context.bindTexture(context.TEXTURE_2D, blendSourceTexture);\n  context.uniform1i(this.location.uBlendSource, blendSourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default MaskBlender;\n","// fillColorFragment.js\n\nconst fillColorFragment = `#version 300 es\nprecision highp float;\n\nuniform vec4 uColor;\nout vec4 outColor;\n\nvoid main() {\n  outColor = uColor;\n}\n`;\n\nexport default fillColorFragment;\n","// FillColor.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport fillColorFragmentShaderSource from '../shaderSource/fillColorFragment.js';\n\nconst FillColor = function ({ context, color = [0, 0, 0, 1] } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: fillColorFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uColor = context.getUniformLocation(\n    this.core.program,\n    'uColor'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n\n  this.updateColor({ color });\n};\n\nFillColor.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nFillColor.prototype.updateColor = function ({ color } = {}) {\n  if (color && (!Array.isArray(color) || 4 !== color.length)) {\n    throw new Error('invalid color argument');\n  }\n  this._color = color || this._color;\n\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform4f(this.location.uColor, ...this._color);\n};\n\nFillColor.prototype.draw = function ({ targetFrameBuffer }) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default FillColor;\n","// mirrorFragment.js\n\nconst mirrorFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(uSource, vTextCoord);\n}\n`;\n\nexport default mirrorFragment;\n","// CopyTexture.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport mirrorFragmentShaderSource from '../shaderSource/mirrorFragment.js';\n\nconst CopyTexture = function ({ context } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: mirrorFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n};\n\nCopyTexture.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nCopyTexture.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default CopyTexture;\n","// BeautifyFilter.js\nimport { createBuffer, createTexture } from '../resource/WebGL.js';\nimport GreenBlueChannel from '../resource/GreenBlueChannel.js';\nimport GaussianBlurFilter from '../resource/GaussianBlurFilter.js';\nimport HighPassFilter from '../resource/HighPassFilter.js';\nimport HardLight from '../resource/HardLight.js';\nimport ToneCurve from '../resource/ToneCurve.js';\nimport MaskBlender from '../resource/MaskBlender.js';\nimport FillColor from '../resource/FillColor.js';\nimport CopyTexture from '../resource/CopyTexture.js';\n\nconst textureNames = [\n  'source',\n  'greenBlueChannel',\n  'gaussianBlurMid',\n  'gaussianBlur',\n  'highPassFilter',\n  'hardLight',\n  'toneMap',\n  'toneCurve',\n  'maskBlender',\n];\nconst frameBufferNames = [\n  'greenBlueChannel',\n  'gaussianBlurMid',\n  'gaussianBlur',\n  'highPassFilter',\n  'hardLight',\n  'toneCurve',\n  'maskBlender',\n];\nconst textureIndex = textureNames.reduce(\n  (current, textureName, index) => ({ ...current, [textureName]: index }),\n  {}\n);\nconst clearColor = [0, 0, 0, 0];\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst BeautifyFilter = function () {\n  const canvas = document.createElement('canvas');\n  this.canvas = canvas;\n  window.canvas = canvas;\n\n  const context = canvas.getContext('webgl2');\n  this.context = context;\n  window.context = context;\n\n  this.buffer = {};\n  this.buffer.aPosition = createBuffer({\n    context,\n    attribute: positionAttribute,\n  });\n  this.buffer.aTextCoord = createBuffer({\n    context,\n    attribute: textCoordAttribute,\n  });\n\n  this.texture = {};\n  textureNames.forEach(name => {\n    this.texture[name] = createTexture({ context, index: textureIndex[name] });\n  });\n\n  this.frameBuffer = {};\n  frameBufferNames.forEach(name => {\n    this.frameBuffer[name] = context.createFramebuffer();\n    context.bindFramebuffer(context.FRAMEBUFFER, this.frameBuffer[name]);\n    context.framebufferTexture2D(\n      context.FRAMEBUFFER,\n      context.COLOR_ATTACHMENT0,\n      context.TEXTURE_2D,\n      this.texture[name],\n      0 // level\n    );\n  });\n\n  this.greenBlueChannel = new GreenBlueChannel({ context: this.context });\n  this.greenBlueChannel.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.greenBlueChannel.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.gaussianBlur = new GaussianBlurFilter({ context: this.context });\n  this.gaussianBlur.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.gaussianBlur.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.highPassFilter = new HighPassFilter({ context: this.context });\n  this.highPassFilter.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.highPassFilter.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.hardLight = new HardLight({ context: this.context });\n  this.hardLight.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.hardLight.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.toneCurve = new ToneCurve({\n    context: this.context,\n    toneMapTexture: this.texture.toneMap,\n    toneMapTextureIndex: textureIndex.toneMap,\n  });\n  this.toneCurve.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.toneCurve.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.maskBlender = new MaskBlender({ context: this.context });\n  this.maskBlender.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.maskBlender.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.fillColor = new FillColor({ context: this.context, color: clearColor });\n  this.fillColor.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.fillColor.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.copyTexture = new CopyTexture({ context: this.context });\n  this.copyTexture.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.copyTexture.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n};\n\nBeautifyFilter.prototype.draw = function ({ pixelSource }) {\n  if (!pixelSource || !this.context) {\n    return;\n  }\n\n  this.updateCanvasSize({ pixelSource });\n\n  const context = this.context;\n  context.clearColor(...clearColor);\n  context.clear(context.COLOR_BUFFER_BIT);\n\n  context.bindTexture(context.TEXTURE_2D, this.texture.source);\n  context.texImage2D(\n    context.TEXTURE_2D,\n    0, // mip level\n    context.RGBA, // internam format\n    context.RGBA, // src format\n    context.UNSIGNED_BYTE, // src type\n    pixelSource\n  );\n\n  this.greenBlueChannel.draw({\n    sourceTexture: this.texture.source,\n    sourceTextureIndex: textureIndex.source,\n    targetFrameBuffer: this.frameBuffer.greenBlueChannel,\n  });\n\n  this.gaussianBlur.draw({\n    sourceTexture: this.texture.greenBlueChannel,\n    sourceTextureIndex: textureIndex.greenBlueChannel,\n    midFrameBuffer: this.frameBuffer.gaussianBlurMid,\n    midTexture: this.texture.gaussianBlurMid,\n    midTextureIndex: textureIndex.gaussianBlurMid,\n    targetFrameBuffer: this.frameBuffer.gaussianBlur,\n  });\n\n  this.highPassFilter.draw({\n    sourceTexture: this.texture.greenBlueChannel,\n    sourceTextureIndex: textureIndex.greenBlueChannel,\n    blurredSourceTexture: this.texture.gaussianBlur,\n    blurredSourceTextureIndex: textureIndex.gaussianBlur,\n    targetFrameBuffer: this.frameBuffer.highPassFilter,\n  });\n\n  this.hardLight.draw({\n    sourceTexture: this.texture.highPassFilter,\n    sourceTextureIndex: textureIndex.highPassFilter,\n    targetFrameBuffer: this.frameBuffer.hardLight,\n  });\n\n  this.toneCurve.draw({\n    sourceTexture: this.texture.source,\n    sourceTextureIndex: textureIndex.source,\n    targetFrameBuffer: this.frameBuffer.toneCurve,\n  });\n\n  this.maskBlender.draw({\n    sourceTexture: this.texture.source,\n    sourceTextureIndex: textureIndex.source,\n    maskTexture: this.texture.highPassFilter,\n    maskTextureIndex: textureIndex.highPassFilter,\n    blendSourceTexture: this.texture.toneCurve,\n    blendSourceTextureIndex: textureIndex.toneCurve,\n    targetFrameBuffer: this.frameBuffer.maskBlender,\n  });\n\n  this.copyTexture.draw({\n    sourceTexture: this.texture.maskBlender,\n    sourceTextureIndex: textureIndex.maskBlender,\n  });\n};\n\nBeautifyFilter.prototype.updateCanvasSize = function ({ pixelSource }) {\n  if (!pixelSource || !this.context) {\n    return;\n  }\n\n  const context = this.context;\n  let sourceWidth = this.context.canvas.width;\n  let sourceHeight = this.context.canvas.height;\n  if ('VIDEO' === pixelSource.nodeName) {\n    sourceWidth = pixelSource.videoWidth;\n    sourceHeight = pixelSource.videoHeight;\n  } else if ('CANVAS' === pixelSource.nodeName) {\n    sourceWidth = pixelSource.width;\n    sourceHeight = pixelSource.height;\n  }\n\n  const canvasWidth = context.canvas.width;\n  const canvasHeight = context.canvas.height;\n  if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n    context.canvas.width = sourceWidth;\n    context.canvas.height = sourceHeight;\n    context.viewport(0, 0, sourceWidth, sourceHeight);\n    // update texture sizes\n    Object.keys(this.texture).forEach(textureKey => {\n      const texture = this.texture[textureKey];\n      context.bindTexture(context.TEXTURE_2D, texture);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // level\n        context.RGBA, // internal format\n        sourceWidth,\n        sourceHeight,\n        0, // border\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        null\n      );\n    });\n  }\n};\n\nexport default BeautifyFilter;\n","// BeautifyFilter.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport BeautifyFilterCore from '../resource/BeautifyFilter.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst BeautifyFilter = ({ pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n  const filterCore = useRef();\n  const canvasRef = useRef();\n\n  useEffect(() => {\n    filterCore.current = new BeautifyFilterCore();\n  }, []);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = canvasRef.current.getContext('2d');\n      if (!context) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      if (!sourceWidth || !sourceHeight) {\n        return;\n      }\n\n      filterCore.current.draw({ pixelSource });\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n      }\n\n      context.clearRect(0, 0, sourceWidth, sourceHeight);\n      context.drawImage(filterCore.current.canvas, 0, 0);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, pixelSource]);\n\n  return (\n    <StyledBeautifyFilter>\n      <Header>BeautifyFilter</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledBeautifyFilter>\n  );\n};\n\nBeautifyFilter.propTypes = {\n  pixelSource: PropTypes.object,\n};\n\nBeautifyFilter.defaultProps = {\n  pixelSource: null,\n};\n\nconst StyledBeautifyFilter = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default BeautifyFilter;\n","// ExposureValue.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n`;\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform float uExposureValue;\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  outColor = vec4(originColor.rgb * pow(2.0, uExposureValue), originColor.a);;\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst ExposureValue = ({ canvasRef, pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [exposureValue, setExposureValue] = useState(0);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const pixelLocation = useRef();\n\n  const shouldUpdateExposureValue = useRef(true);\n  const exposureValueLocation = useRef();\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n\n  useEffect(() => {\n    shouldUpdateExposureValue.current = true;\n  }, [exposureValue]);\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n    exposureValueLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uExposureValue'\n    );\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context });\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n\n      if (shouldUpdateExposureValue.current) {\n        context.uniform1f(exposureValueLocation.current, exposureValue);\n        shouldUpdateExposureValue.current = false;\n      }\n\n      context.uniform1i(pixelLocation.current, 0);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, exposureValue, pixelSource]);\n\n  return (\n    <StyledExposureValue>\n      <Header>ExposureValue</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n          <Label>\n            <span>ExposureValue: {exposureValue}</span>\n            <input\n              type=\"range\"\n              min=\"-5\"\n              max=\"5\"\n              step=\"0.1\"\n              value={exposureValue}\n              onChange={e => setExposureValue(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledExposureValue>\n  );\n};\n\nExposureValue.propTypes = {\n  pixelSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nExposureValue.defaultProps = {\n  pixelSource: null,\n};\n\nconst StyledExposureValue = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default ExposureValue;\n","// GreenBlueChannel.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n`;\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  float gbColor = 2.0 * originColor.b * originColor.g;\n  outColor = vec4(gbColor, gbColor, gbColor, originColor.a);\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst GreenBlueChannel = ({ canvasRef, pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const pixelLocation = useRef();\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context });\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n      context.uniform1i(pixelLocation.current, 0);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, pixelSource]);\n\n  return (\n    <StyledGreenBlueChannel>\n      <Header>GreenBlueChannel</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledGreenBlueChannel>\n  );\n};\n\nGreenBlueChannel.propTypes = {\n  pixelSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nGreenBlueChannel.defaultProps = {\n  pixelSource: null,\n};\n\nconst StyledGreenBlueChannel = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default GreenBlueChannel;\n","// GaussianBlur.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nuniform int uIsVertical;\nout vec2 vTextCoord;\nflat out int vIsVertical;\n\nvoid main() {\n  vec4 position = aPosition;\n  if (1 == uIsVertical) {\n    // texture axis is opposite with canvas.\n    position = vec4(aPosition.x, -aPosition.y, aPosition.zw);\n  }\n  gl_Position = position;\n  vTextCoord = aTextCoord;\n  vIsVertical = uIsVertical;\n}\n`;\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform vec2 uResolution;\nuniform int uKernalRadius;\nuniform float uKernelData[65];\nin vec2 vTextCoord;\nflat in int vIsVertical;\n\nout vec4 outColor;\n\nvoid main() {\n  vec2 delta = 1.0 / uResolution;\n  vec4 outputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\n  for (int index = -uKernalRadius; index <= uKernalRadius; index++) {\n    vec2 step = vec2(index, 0.0);\n    if (1 == vIsVertical) {\n      step = vec2(0.0, index);\n    }\n    vec2 offset = vTextCoord + step * delta;\n    outputColor += uKernelData[index + uKernalRadius] * texture(uSource, offset);\n  }\n\n  outColor = outputColor;\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst getKernal = (inputRadius, sigma) => {\n  const radius = Math.floor(Math.abs(inputRadius));\n  const sigma2 = sigma * sigma;\n  const data = new Array(radius * 2 + 1);\n  let sum = 0;\n  for (let x = -radius; x <= radius; ++x) {\n    const index = x + radius;\n    data[index] =\n      Math.exp(-(x * x) / (2.0 * sigma2)) / Math.sqrt(2.0 * Math.PI * sigma2);\n    sum += data[index];\n  }\n  const normalizedData = data.map(value => value / sum);\n  return { data: new Float32Array(normalizedData), radius };\n};\n\nconst GaussianBlur = ({ canvasRef, pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [maxFps, setMaxFps] = useState(30);\n  const [radius, setRadius] = useState(16);\n  const [sigma, setSigma] = useState(5);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n  const shouldUpdateKernalUniform = useRef(false);\n  const kernal = useRef();\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const resolutionLocation = useRef();\n  const pixelLocation = useRef();\n\n  const twoPassToggleLocation = useRef();\n  const kernalDataLocation = useRef();\n  const kernalRadiusLocation = useRef();\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n  const twoPassTexture = useRef();\n\n  const twoPassFramebuffer = useRef();\n\n  useEffect(() => {\n    kernal.current = getKernal(radius, sigma);\n    shouldUpdateKernalUniform.current = true;\n  }, [radius, sigma]);\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n      if (twoPassFramebuffer.current) {\n        context.deleteFramebuffer(twoPassFramebuffer.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    resolutionLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uResolution'\n    );\n    twoPassToggleLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uIsVertical'\n    );\n    kernalDataLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uKernelData'\n    );\n    kernalRadiusLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uKernalRadius'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    context.useProgram(program.current);\n    context.uniform2f(\n      resolutionLocation.current,\n      context.canvas.width,\n      context.canvas.height\n    );\n    context.uniform1i(twoPassToggleLocation.current, 0);\n    context.uniform1fv(kernalDataLocation.current, kernal.current.data);\n    context.uniform1i(kernalRadiusLocation.current, kernal.current.radius);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context, index: 0 });\n    twoPassTexture.current = createTexture({ context, index: 1 });\n    context.texImage2D(\n      context.TEXTURE_2D,\n      0, // level\n      context.RGBA, // internal format\n      context.canvas.width,\n      context.canvas.height,\n      0, // border\n      context.RGBA, // src format\n      context.UNSIGNED_BYTE, // src type\n      null\n    );\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    twoPassFramebuffer.current = context.createFramebuffer();\n    context.bindFramebuffer(context.FRAMEBUFFER, twoPassFramebuffer.current);\n    context.framebufferTexture2D(\n      context.FRAMEBUFFER,\n      context.COLOR_ATTACHMENT0,\n      context.TEXTURE_2D,\n      twoPassTexture.current,\n      0 // level\n    );\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n        context.uniform2f(\n          resolutionLocation.current,\n          sourceWidth,\n          sourceHeight\n        );\n        context.texImage2D(\n          context.TEXTURE_2D,\n          0, // level\n          context.RGBA, // internal format\n          sourceWidth,\n          sourceHeight,\n          0, // border\n          context.RGBA, // src format\n          context.UNSIGNED_BYTE, // src type\n          null\n        );\n      }\n\n      if (shouldUpdateKernalUniform.current) {\n        context.uniform1fv(kernalDataLocation.current, kernal.current.data);\n        context.uniform1i(kernalRadiusLocation.current, kernal.current.radius);\n        shouldUpdateKernalUniform.current = false;\n      }\n\n      context.bindFramebuffer(context.FRAMEBUFFER, twoPassFramebuffer.current);\n      context.uniform1i(pixelLocation.current, 0);\n      context.uniform1i(twoPassToggleLocation.current, 0);\n      context.bindTexture(context.TEXTURE_2D, pixelTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internal format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n\n      context.bindFramebuffer(context.FRAMEBUFFER, null);\n      context.uniform1i(pixelLocation.current, 1);\n      context.uniform1i(twoPassToggleLocation.current, 1);\n      context.bindTexture(context.TEXTURE_2D, twoPassTexture.current);\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, pixelSource]);\n\n  return (\n    <StyledGaussianBlur>\n      <Header>GaussianBlur</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n          <Label>\n            <span>Radius: {radius}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"32\"\n              step=\"1\"\n              value={radius}\n              onChange={e => setRadius(e.target.value)}\n            />\n          </Label>\n          <Label>\n            <span>Sigma: {sigma}</span>\n            <input\n              type=\"range\"\n              min=\"0.1\"\n              max=\"20\"\n              step=\"0.1\"\n              value={sigma}\n              onChange={e => setSigma(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledGaussianBlur>\n  );\n};\n\nGaussianBlur.propTypes = {\n  pixelSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nGaussianBlur.defaultProps = {\n  pixelSource: null,\n};\n\nconst StyledGaussianBlur = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default GaussianBlur;\n","// HighPassFilter.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n`;\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uBlurredSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 blurredColor = texture(uBlurredSource, vTextCoord);\n  outColor = originColor - blurredColor + vec4(0.5, 0.5, 0.5, 1.0);\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst HighPassFilter = ({ canvasRef, pixelSource, blurredPixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const pixelLocation = useRef();\n  const blurredPixelLocation = useRef();\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n  const blurredPixelTexture = useRef();\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n      if (blurredPixelTexture.current) {\n        context.deleteTexture(blurredPixelTexture.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n    blurredPixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uBlurredSource'\n    );\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context, index: 0 });\n    blurredPixelTexture.current = createTexture({ context, index: 1 });\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n      context.uniform1i(pixelLocation.current, 0);\n      context.uniform1i(blurredPixelLocation.current, 1);\n      context.bindTexture(context.TEXTURE_2D, pixelTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n      context.bindTexture(context.TEXTURE_2D, blurredPixelTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        blurredPixelSource\n      );\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, pixelSource, blurredPixelSource]);\n\n  return (\n    <StyledHighPassFilter>\n      <Header>HighPassFilter</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledHighPassFilter>\n  );\n};\n\nHighPassFilter.propTypes = {\n  pixelSource: PropTypes.object,\n  blurredPixelSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nHighPassFilter.defaultProps = {\n  pixelSource: null,\n  blurredPixelSource: null,\n};\n\nconst StyledHighPassFilter = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default HighPassFilter;\n","// HardLight.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n`;\n// https://github.com/YuAo/YUGPUImageHighPassSkinSmoothing/blob/master/Sources/YUGPUImageHighPassSkinSmoothingFilter.m#L19\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform int uCycles;\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n\n  float color = originColor.b;\n  for (int i = 0; i < uCycles; ++i) {\n    if (color < 0.5) {\n      color = color * color * 2.0;\n    } else {\n      color = 1.0 - (1.0 - color) * (1.0 - color) * 2.0;\n    }\n  }\n\n  float k = 255.0 / (164.0 - 75.0);\n  color = (color - 75.0 / 255.0) * k;\n\n  outColor = vec4(color, color, color, originColor.a);;\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst HardLight = ({ canvasRef, pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [cycles, setCycles] = useState(3);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const pixelLocation = useRef();\n\n  const shouldUpdateCycles = useRef(true);\n  const cyclesLocation = useRef();\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n\n  useEffect(() => {\n    shouldUpdateCycles.current = true;\n  }, [cycles]);\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n    cyclesLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uCycles'\n    );\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context });\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n\n      if (shouldUpdateCycles.current) {\n        context.uniform1i(cyclesLocation.current, cycles);\n        shouldUpdateCycles.current = false;\n      }\n\n      context.uniform1i(pixelLocation.current, 0);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, cycles, pixelSource]);\n\n  return (\n    <StyledHardLight>\n      <Header>HardLight</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n          <Label>\n            <span>Cycles: {cycles}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"8\"\n              step=\"1\"\n              value={cycles}\n              onChange={e => setCycles(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledHardLight>\n  );\n};\n\nHardLight.propTypes = {\n  pixelSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nHardLight.defaultProps = {\n  pixelSource: null,\n};\n\nconst StyledHardLight = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default HardLight;\n","// ToneCurveEditor.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport { getCurvePoints } from '../resource/CardinalSpline.js';\n\nconst SIZE = 256;\n\nconst drawAxis = context => {\n  const originStrokeStyle = context.strokeStyle;\n  context.strokeStyle = 'darkgray';\n  const originLineWidth = context.lineWidth;\n  context.lineWidth = 0.5;\n  context.beginPath();\n  for (let i = 50; i < SIZE; i = i + 50) {\n    context.moveTo(i, 0);\n    context.lineTo(i, SIZE);\n    context.moveTo(0, SIZE - i);\n    context.lineTo(SIZE, SIZE - i);\n  }\n  context.stroke();\n  context.strokeStyle = originStrokeStyle;\n  context.lineWidth = originLineWidth;\n};\n\nconst drawCross = (context, point, size = 10) => {\n  const originLineWidth = context.lineWidth;\n  const originStrokeStyle = context.strokeStyle;\n  const axisPoint = { x: point.x, y: SIZE - point.y };\n  context.strokeStyle = '#f6e58d';\n  context.lineWidth = 0.5;\n  context.beginPath();\n  context.moveTo(axisPoint.x, axisPoint.y - size);\n  context.lineTo(axisPoint.x, axisPoint.y + size);\n  context.moveTo(axisPoint.x - size, axisPoint.y);\n  context.lineTo(axisPoint.x + size, axisPoint.y);\n  context.stroke();\n  context.strokeStyle = originStrokeStyle;\n  context.lineWidth = originLineWidth;\n};\n\nconst ToneCurveEditor = ({ onChange }) => {\n  const [cursorPoint, setCursorPoint] = useState();\n  const [tension, setTension] = useState(0);\n  const [redControlPoints] = useState([\n    { x: 0, y: 0 },\n    { x: 120, y: 146 }, // default\n    // { x: 120, y: 186 },\n    { x: 255, y: 255 },\n  ]);\n  const [redCurvePoints, setRedCurvePoints] = useState([]);\n  const canvas = useRef();\n\n  useEffect(() => {\n    const redCurvePoints = getCurvePoints({\n      tension,\n      points: redControlPoints,\n    });\n    setRedCurvePoints(redCurvePoints);\n    onChange({\n      red: redCurvePoints,\n      green: redCurvePoints,\n      blue: redCurvePoints,\n    });\n  }, [tension, redControlPoints, onChange]);\n\n  useEffect(() => {\n    const context = canvas.current.getContext('2d');\n    context.clearRect(0, 0, SIZE, SIZE);\n\n    drawAxis(context);\n    cursorPoint && drawCross(context, cursorPoint);\n\n    context.strokeStyle = 'red';\n    context.beginPath();\n    context.moveTo(0, SIZE);\n    redCurvePoints.forEach(point => {\n      context.lineTo(point.x, SIZE - point.y);\n    });\n    context.stroke();\n\n    context.fillStyle = 'red';\n    redControlPoints.forEach(point => {\n      context.beginPath();\n      context.arc(point.x, SIZE - point.y, 2, 0, 2 * Math.PI);\n      context.fill();\n    });\n  }, [redControlPoints, redCurvePoints, cursorPoint]);\n\n  const handleOnMouseMove = e => {\n    const x = e.clientX - e.target.offsetLeft;\n    const y = SIZE - e.clientY + e.target.offsetTop;\n    setCursorPoint({ x, y });\n  };\n\n  return (\n    <StyledToneCurveEditor>\n      <Monitor\n        width={SIZE}\n        height={SIZE}\n        ref={canvas}\n        onMouseMove={handleOnMouseMove}\n        onMouseLeave={() => setCursorPoint()}\n      />\n      <Controls>\n        <Label>\n          <span>Tension: {tension}</span>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"1\"\n            step=\"0.01\"\n            value={tension}\n            onChange={e => setTension(e.target.value)}\n          />\n        </Label>\n      </Controls>\n    </StyledToneCurveEditor>\n  );\n};\n\nToneCurveEditor.propTypes = {\n  onChange: PropTypes.func,\n};\n\nToneCurveEditor.defaultProps = {\n  onChange: () => null,\n};\n\nconst StyledToneCurveEditor = styled.div`\n  display: flex;\n`;\n\nconst Monitor = styled.canvas`\n  background-color: black;\n`;\n\nconst Controls = styled.div`\n  margin-left: 8px;\n  width: 100%;\n`;\n\nconst Label = styled.label`\n  display: block;\n  span {\n    display: block;\n  }\n  input {\n    width: 100%;\n  }\n`;\n\nexport default ToneCurveEditor;\n","// ToneCurve.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ToneCurveEditor from '../component/ToneCurveEditor.jsx';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n`;\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform float uStrength;\nuniform sampler2D uSource;\nuniform sampler2D uTone;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 colorIndex = texture(uSource, vTextCoord);\n  float revStr = 1.0 - uStrength;\n  outColor = vec4(\n    uStrength * vec4(texture(uTone, vec2(colorIndex.r, 0))).r + revStr * colorIndex.r,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.g, 0))).g + revStr * colorIndex.g,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.b, 0))).b + revStr * colorIndex.b,\n    1.0\n  );\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\nconst defaultToneTextureData = new ImageData(\n  new Uint8ClampedArray(\n    new Array(256).fill(0).flatMap((_, index) => [index, index, index, 255])\n  ),\n  256\n);\n\nconst ToneCurve = ({ canvasRef, pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [strength, setStrength] = useState(0.5);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n  const toneTextureData = useRef(defaultToneTextureData);\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const pixelLocation = useRef();\n  const strengthLocation = useRef();\n  const toneLocation = useRef();\n\n  const shouldUpdateStrength = useRef(true);\n  const shouldUpdateToneTexture = useRef(true);\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n  const toneTexture = useRef();\n\n  useEffect(() => {\n    shouldUpdateStrength.current = true;\n  }, [strength]);\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n      if (toneTexture.current) {\n        context.deleteTexture(toneTexture.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n    strengthLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uStrength'\n    );\n    toneLocation.current = context.getUniformLocation(glCore.program, 'uTone');\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context, index: 0 });\n    toneTexture.current = createTexture({ context, index: 1 });\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n\n      if (shouldUpdateStrength.current) {\n        context.uniform1f(strengthLocation.current, strength);\n        shouldUpdateStrength.current = false;\n      }\n\n      context.uniform1i(pixelLocation.current, 0);\n      context.bindTexture(context.TEXTURE_2D, pixelTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n\n      if (shouldUpdateToneTexture.current) {\n        shouldUpdateToneTexture.current = false;\n      }\n      // TODO: figure out why must apply tone texture every frame\n      // TODO: figure out why must apply tone texture after pixelSource\n      context.uniform1i(toneLocation.current, 1);\n      context.bindTexture(context.TEXTURE_2D, toneTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        toneTextureData.current\n      );\n\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, strength, pixelSource]);\n\n  const handleToneChange = tonePoints => {\n    const data = new ImageData(\n      new Uint8ClampedArray(\n        new Array(256)\n          .fill(0)\n          .flatMap((_, index) => [\n            tonePoints.red[index].y,\n            tonePoints.green[index].y,\n            tonePoints.blue[index].y,\n            255,\n          ])\n      ),\n      256\n    );\n    toneTextureData.current = data;\n    shouldUpdateToneTexture.current = true;\n  };\n\n  return (\n    <StyledToneCurve>\n      <Header>ToneCurve</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n          <Label>\n            <span>Strength: {strength}</span>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.01\"\n              value={strength}\n              onChange={e => setStrength(e.target.value)}\n            />\n          </Label>\n          <ToneCurveEditor onChange={handleToneChange} />\n        </Controls>\n      </Footer>\n    </StyledToneCurve>\n  );\n};\n\nToneCurve.propTypes = {\n  pixelSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nToneCurve.defaultProps = {\n  pixelSource: null,\n};\n\nconst StyledToneCurve = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n  * + * {\n    margin-top: 4px;\n  }\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default ToneCurve;\n","// MaskBlender.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n`;\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uMask;\nuniform sampler2D uBlend;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 maskColor = texture(uMask, vTextCoord);\n  vec4 blendColor = texture(uBlend, vTextCoord);\n  outColor = vec4(mix(originColor.rgb, blendColor.rgb, 1.0 - maskColor.b), 1.0);\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst MaskBlender = ({ canvasRef, pixelSource, maskSource, blendSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const pixelLocation = useRef();\n  const maskLocation = useRef();\n  const blendLocation = useRef();\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n  const maskTexture = useRef();\n  const blendTexture = useRef();\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n      if (maskTexture.current) {\n        context.deleteTexture(maskTexture.current);\n      }\n      if (blendTexture.current) {\n        context.deleteTexture(blendTexture.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n    maskLocation.current = context.getUniformLocation(glCore.program, 'uMask');\n    blendLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uBlend'\n    );\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context, index: 0 });\n    maskTexture.current = createTexture({ context, index: 1 });\n    blendTexture.current = createTexture({ context, index: 2 });\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n      context.uniform1i(pixelLocation.current, 0);\n      context.uniform1i(maskLocation.current, 1);\n      context.uniform1i(blendLocation.current, 2);\n      context.bindTexture(context.TEXTURE_2D, pixelTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internal format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n      context.bindTexture(context.TEXTURE_2D, maskTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internal format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        maskSource\n      );\n      context.bindTexture(context.TEXTURE_2D, blendTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internal format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        blendSource\n      );\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, pixelSource, maskSource, blendSource]);\n\n  return (\n    <StyledMaskBlender>\n      <Header>MaskBlender</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledMaskBlender>\n  );\n};\n\nMaskBlender.propTypes = {\n  pixelSource: PropTypes.object,\n  maskSource: PropTypes.object,\n  blendSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nMaskBlender.defaultProps = {\n  pixelSource: null,\n  maskSource: null,\n  blendSource: null,\n};\n\nconst StyledMaskBlender = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default MaskBlender;\n","// Main.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport MediaStreamHandler from '../component/MediaStreamHandler.jsx';\nimport MediaStreamMonitor from '../component/MediaStreamMonitor.jsx';\nimport BeautifyFilter from '../component/BeautifyFilter.jsx';\nimport ExposureValue from '../component/ExposureValue.jsx';\nimport GreenBlueChannel from '../component/GreenBlueChannel.jsx';\nimport GaussianBlur from '../component/GaussianBlur.jsx';\nimport HighPassFilter from '../component/HighPassFilter.jsx';\nimport HardLight from '../component/HardLight.jsx';\nimport ToneCurve from '../component/ToneCurve.jsx';\nimport MaskBlender from '../component/MaskBlender.jsx';\n\nconst Main = () => {\n  const [mediaStream, setMediaStream] = useState();\n  const sourceVideo = useRef();\n  const exposureValueCanvas = useRef();\n  const greenBlueChannelCanvas = useRef();\n  const gaussianBlurCanvas = useRef();\n  const highPassFilterCanvas = useRef();\n  const hardLightCanvas = useRef();\n  const toneCurveCanvas = useRef();\n  const maskBlenderCanvas = useRef();\n\n  useEffect(() => {\n    const video = document.createElement('video');\n    // required to tell iOS safari we don't want fullscreen\n    video.setAttribute('playsinline', true);\n    sourceVideo.current = video;\n    return () => {\n      video.srcObject = null;\n      return video.pause();\n    };\n  }, []);\n\n  useEffect(() => {\n    sourceVideo.current.srcObject = mediaStream;\n    if (mediaStream) {\n      sourceVideo.current.play();\n    } else {\n      sourceVideo.current.pause();\n    }\n  }, [mediaStream]);\n\n  return (\n    <StyledMain>\n      <MediaStreamHandler onChange={({ value }) => setMediaStream(value)} />\n      <Modules>\n        <ModuleWrapper>\n          <BeautifyFilter pixelSource={sourceVideo.current} />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <ExposureValue\n            pixelSource={sourceVideo.current}\n            canvasRef={exposureValueCanvas}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <GreenBlueChannel\n            pixelSource={exposureValueCanvas.current}\n            canvasRef={greenBlueChannelCanvas}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <GaussianBlur\n            pixelSource={greenBlueChannelCanvas.current}\n            canvasRef={gaussianBlurCanvas}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <HighPassFilter\n            pixelSource={greenBlueChannelCanvas.current}\n            blurredPixelSource={gaussianBlurCanvas.current}\n            canvasRef={highPassFilterCanvas}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <HardLight\n            pixelSource={highPassFilterCanvas.current}\n            canvasRef={hardLightCanvas}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <ToneCurve\n            pixelSource={sourceVideo.current}\n            canvasRef={toneCurveCanvas}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <MediaStreamMonitor mediaStream={mediaStream} />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <MaskBlender\n            pixelSource={sourceVideo.current}\n            maskSource={hardLightCanvas.current}\n            blendSource={toneCurveCanvas.current}\n            canvasRef={maskBlenderCanvas}\n          />\n        </ModuleWrapper>\n      </Modules>\n    </StyledMain>\n  );\n};\n\nconst StyledMain = styled.div`\n  padding: 8px;\n`;\n\nconst Modules = styled.div`\n  display: grid;\n  gap: 8px;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  margin-top: 8px;\n`;\n\nconst ModuleWrapper = styled.div``;\n\nexport default Main;\n","export default __webpack_public_path__ + \"img/github-icon.e1201fcc.svg\";","// Footer.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport EmailIcon from '../../img/email-icon.svg';\nimport GithubIcon from '../../img/github-icon.svg';\n\nexport class Footer extends React.PureComponent {\n  render() {\n    const { email, github } = this.props;\n    return (\n      <StyledFooter>\n        <Link href={github} target=\"_blank\">\n          <img src={GithubIcon} alt=\"github\" />\n        </Link>\n        <Link href={`mailto:${email}`} target=\"_blank\">\n          <img src={EmailIcon} alt=\"email\" />\n        </Link>\n      </StyledFooter>\n    );\n  }\n}\n\nFooter.propTypes = {\n  email: PropTypes.string,\n  github: PropTypes.string,\n};\n\nFooter.defaultProps = {\n  email: 'bill42362@gmail.com',\n  github: 'https://github.com/bill42362/portfolio',\n};\n\nconst StyledFooter = styled.div`\n  flex: auto;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  padding: 20px;\n`;\n\nconst Link = styled.a`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  background-color: #576574;\n\n  & + & {\n    margin-left: 8px;\n  }\n  img {\n    width: 60%;\n    height: auto;\n  }\n`;\n\nexport default Footer;\n","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNNDY3LDYxSDQ1QzIwLjIxOCw2MSwwLDgxLjE5NiwwLDEwNnYzMDBjMCwyNC43MiwyMC4xMjgsNDUsNDUsNDVoNDIyYzI0LjcyLDAsNDUtMjAuMTI4LDQ1LTQ1VjEwNiBDNTEyLDgxLjI4LDQ5MS44NzIsNjEsNDY3LDYxeiBNNDYwLjc4Niw5MUwyNTYuOTU0LDI5NC44MzNMNTEuMzU5LDkxSDQ2MC43ODZ6IE0zMCwzOTkuNzg4VjExMi4wNjlsMTQ0LjQ3OSwxNDMuMjRMMzAsMzk5Ljc4OHogTTUxLjIxMyw0MjFsMTQ0LjU3LTE0NC41N2w1MC42NTcsNTAuMjIyYzUuODY0LDUuODE0LDE1LjMyNyw1Ljc5NSwyMS4xNjctMC4wNDZMMzE3LDI3Ny4yMTNMNDYwLjc4Nyw0MjFINTEuMjEzeiBNNDgyLDM5OS43ODcgTDMzOC4yMTMsMjU2TDQ4MiwxMTIuMjEyVjM5OS43ODd6Ii8+PC9zdmc+\"","export default __webpack_public_path__ + \"img/x-men-school.0928a818.svg\";","// App.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { hot } from 'react-hot-loader/root';\nimport styled, {\n  createGlobalStyle,\n  StyleSheetManager,\n} from 'styled-components';\nimport styledNormalize from 'styled-normalize';\nimport { Helmet } from 'react-helmet';\n\nimport Main from '../component/Main.jsx';\nimport Footer from '../component/Footer.jsx';\n\nimport XMenLogoSource from '../../img/x-men-school.svg';\n\nconst GlobalStyle = createGlobalStyle`\n  ${styledNormalize};\n  *, ::after, ::before { box-sizing: border-box; }\n  body {\n    background-color: #101010;\n    color: #efefef;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\",\n      Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n    font-weight: 400;\n    -webkit-tap-highlight-color: transparent;\n    overscroll-behavior-y: contain;\n  }\n  button {\n    background-color: rgba(0, 0, 0, 0);\n    cursor: pointer;\n    &:disabled {\n      cursor: not-allowed;\n    }\n  }\n  input::placeholder,\n  input::-webkit-input-placeholder,\n  input::-moz-placeholder {\n    line-height: normal !important;\n    vertical-align: middle;\n  }\n  a { color: inherit; text-decoration: none; }\n  a > * { opacity: inherit; }\n  a:hover { opacity: .7; }\n`;\n\nconst title = 'Portfolio';\nconst description = \"Bill's portfolio\";\n\nconst App = ({ request }) => {\n  // eslint-disable-next-line no-console\n  console.log('App() request:', request);\n  return (\n    <>\n      <Helmet defaultTitle=\"Portfolio\" titleTemplate=\"%s - Portfolio\">\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n\n        <meta name=\"author\" content=\"Bill\" />\n        <meta name=\"description\" content={description} />\n\n        <meta\n          property=\"og:url\"\n          content=\"https://github.com/bill42362/portfolio\"\n        />\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:title\" content={title} />\n        <meta property=\"og:description\" content={description} />\n        <meta property=\"og:site_name\" content={title} />\n        <meta property=\"twitter:card\" content=\"summary\" />\n        <meta property=\"twitter:site\" content=\"@bill_portfolio\" />\n        {/* <meta property=\"twitter:image\" content={twitterImageSource} /> */}\n      </Helmet>\n      <GlobalStyle />\n      <StyledApp>\n        {!window && <img src={XMenLogoSource} title=\"Xavier school\" />}\n        <Main />\n        <Footer />\n      </StyledApp>\n    </>\n  );\n};\n\nApp.propTypes = {\n  request: PropTypes.object,\n};\n\nApp.defaultProps = {\n  request: null,\n};\n\nconst StyledApp = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-height: 100vh;\n  background-color: #222f3e;\n`;\n\nconst Body = ({ sheet, ...props }) => {\n  if (sheet.instance) {\n    return (\n      <StyleSheetManager sheet={sheet.instance}>\n        <App {...props} />\n      </StyleSheetManager>\n    );\n  } else {\n    return <App {...props} />;\n  }\n};\n\nBody.propTypes = {\n  ...App.propTypes,\n  sheet: PropTypes.object,\n};\n\nBody.defaultProps = {\n  ...App.defaultProps,\n  sheet: {},\n};\n\nexport default hot(Body);\n","// index.js\n'use strict';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './component/App.jsx';\n\nReactDOM.render(<App />, document.getElementById('app-root'));\n"],"sourceRoot":""}