{"version":3,"sources":["webpack:///./src/client/js/style/ResetButtonStyle.js","webpack:///./src/client/js/component/MediaStreamHandler.jsx","webpack:///./src/client/js/component/MediaStreamMonitor.jsx","webpack:///./src/client/js/resource/WebGL.js","webpack:///./src/client/js/component/GreenBlueChannel.jsx","webpack:///./src/client/js/component/GaussianBlur.jsx","webpack:///./src/client/js/component/Main.jsx","webpack:///./src/client/img/github-icon.svg","webpack:///./src/client/js/component/Footer.jsx","webpack:///./src/client/img/email-icon.svg","webpack:///./src/client/img/x-men-school.svg","webpack:///./src/client/js/component/App.jsx","webpack:///./src/client/js/index.js"],"names":["ResetButtonStyle","css","MediaStreamHandler","state","isStarted","shouldPreview","mediaStream","error","video","React","createRef","startRecording","props","onChange","onError","setState","navigator","mediaDevices","getUserMedia","facingMode","stream","value","target","stopRecording","getTracks","forEach","track","stop","renderDescription","id","JSON","stringify","message","renderBody","ref","playsInline","handleTogglePreview","_","prevState","this","current","srcObject","play","StyledMediaStreamHandler","Header","StopButton","onClick","StartButton","ToggleButton","isActived","disabled","PureComponent","propTypes","PropTypes","func","defaultProps","styled","div","Body","Footer","Button","button","attrs","style","backgroundColor","MediaStreamMonitor","StyledMediaStreamMonitor","object","createShader","context","type","source","shader","shaderSource","compileShader","createProgram","vertexShaderSource","fragmentShaderSource","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","console","getProgramInfoLog","getShaderInfoLog","deleteShader","deleteProgram","clearGlCore","createBuffer","attribute","buffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","array","STATIC_DRAW","numComponents","count","Math","floor","length","FLOAT","normalize","offset","stride","createTexture","index","ctx","texture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","dockBuffer","location","vertexAttribPointer","positionAttribute","textCoordAttribute","GreenBlueChannel","canvasRef","pixelSource","useState","shouldAnimate","setShouldAnimate","maxFps","setMaxFps","fps","setFps","animationFrame","useRef","lastFrameTimestamp","webGlContext","positionLocation","textCoordLocation","pixelLocation","positionBuffer","textCoordBuffer","pixelTexture","useEffect","clear","deleteBuffer","deleteTexture","disableVertexAttribArray","canvas","rect","getBoundingClientRect","height","width","getContext","glCore","getAttribLocation","getUniformLocation","enableVertexAttribArray","window","cancelAnimationFrame","requestAnimationFrame","animate","timestamp","minInterval","elapsed","sourceWidth","sourceHeight","nodeName","videoWidth","videoHeight","canvasWidth","canvasHeight","viewport","clearColor","COLOR_BUFFER_BIT","useProgram","uniform1i","texImage2D","RGBA","UNSIGNED_BYTE","drawArrays","TRIANGLES","nextFrame","ceil","StyledGreenBlueChannel","DrawButton","Controls","Label","min","max","step","e","isRequired","label","GaussianBlur","radius","setRadius","sigma","setSigma","shouldUpdateKernalUniform","kernal","resolutionLocation","twoPassToggleLocation","kernalDataLocation","kernalRadiusLocation","twoPassTexture","twoPassFramebuffer","inputRadius","abs","sigma2","data","Array","sum","x","exp","sqrt","PI","normalizedData","map","getKernal","deleteFramebuffer","uniform2f","uniform1fv","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","StyledGaussianBlur","StyledMain","ModuleWrapper","Main","setMediaStream","sourceVideo","greenBlueChannelCanvas","gaussianBlurCanvas","document","createElement","setAttribute","pause","email","github","StyledFooter","Link","href","src","GithubIcon","alt","string","a","GlobalStyle","createGlobalStyle","styledNormalize","title","description","App","request","log","Helmet","defaultTitle","titleTemplate","charSet","name","content","property","StyledApp","XMenLogoSource","sheet","instance","ReactDOM","render","getElementById"],"mappings":"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","file":"js/bundle~bundle~5b60049d.f122c13e.js","sourcesContent":["// ResetButtonStyle.js\n'use strict';\nimport { css } from 'styled-components';\n\nexport const ResetButtonStyle = css`\n  border: none;\n  padding: 0px;\n  outline: none;\n  background: none;\n`;\n\nexport default ResetButtonStyle;\n","// MediaStreamHandler.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nexport class MediaStreamHandler extends React.PureComponent {\n  state = {\n    isStarted: false,\n    shouldPreview: false,\n    mediaStream: null,\n    error: false,\n  };\n  video = React.createRef();\n\n  startRecording = async () => {\n    const { onChange, onError } = this.props;\n    try {\n      this.setState({ isStarted: true });\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: { facingMode: 'environment' },\n      });\n      this.setState({ mediaStream: stream });\n      return onChange({ value: stream });\n    } catch (error) {\n      this.setState({ error, isStarted: false });\n      return onError({ error, target: this });\n    }\n  };\n\n  stopRecording = () => {\n    const { mediaStream } = this.state;\n    const { onChange } = this.props;\n    if (mediaStream) {\n      const tracks = mediaStream.getTracks();\n      tracks.forEach(track => track.stop());\n      onChange({ value: null });\n      this.setState({\n        mediaStream: null,\n        isStarted: false,\n        shouldPreview: false,\n      });\n    }\n  };\n\n  componentDidUpdate(_, prevState) {\n    const { mediaStream, shouldPreview } = this.state;\n    if (shouldPreview && shouldPreview !== prevState.shouldPreview) {\n      this.video.current.srcObject = mediaStream;\n      this.video.current.play();\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopRecording();\n  }\n\n  renderDescription = () => {\n    const { isStarted, mediaStream, error } = this.state;\n\n    if (isStarted) {\n      if (mediaStream) {\n        return `Media stream id: ${mediaStream.id}`;\n      } else {\n        return 'Loading mediaStream ...';\n      }\n    }\n\n    if (error) {\n      return `Error: ${JSON.stringify(error.message)}`;\n    }\n\n    return 'Idle';\n  };\n\n  renderBody = () => {\n    const { shouldPreview } = this.state;\n    return (\n      <Body>\n        <div>{this.renderDescription()}</div>\n        {shouldPreview && <video ref={this.video} playsInline />}\n      </Body>\n    );\n  };\n\n  handleTogglePreview = () => {\n    const { mediaStream, shouldPreview } = this.state;\n    if (!mediaStream) {\n      return;\n    }\n    return this.setState({ shouldPreview: !shouldPreview });\n  };\n\n  render() {\n    const { mediaStream, shouldPreview } = this.state;\n    return (\n      <StyledMediaStreamHandler>\n        <Header>MediaStreamHandler</Header>\n        {this.renderBody()}\n        <Footer>\n          {mediaStream ? (\n            <StopButton onClick={this.stopRecording}>Stop</StopButton>\n          ) : (\n            <StartButton onClick={this.startRecording}>Start</StartButton>\n          )}\n          <ToggleButton\n            isActived={shouldPreview}\n            disabled={!mediaStream}\n            onClick={this.handleTogglePreview}\n          >\n            Preview\n          </ToggleButton>\n        </Footer>\n      </StyledMediaStreamHandler>\n    );\n  }\n}\n\nMediaStreamHandler.propTypes = {\n  onChange: PropTypes.func,\n  onError: PropTypes.func,\n};\n\nMediaStreamHandler.defaultProps = {\n  onChange: () => null,\n  onError: () => null,\n};\n\nconst StyledMediaStreamHandler = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > video {\n    margin-top: 8px;\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst StartButton = styled(Button)`\n  background-color: #6ab04c;\n`;\n\nconst StopButton = styled(Button)`\n  background-color: #eb4d4b;\n`;\n\nconst ToggleButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nexport default MediaStreamHandler;\n","// MediaStreamMonitor.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nexport class MediaStreamMonitor extends React.PureComponent {\n  state = {\n    shouldPreview: false,\n  };\n  video = React.createRef();\n\n  componentDidUpdate(_, prevState) {\n    const { mediaStream } = this.props;\n    const { shouldPreview } = this.state;\n    if (!mediaStream && mediaStream !== prevState.mediaStream) {\n      this.setState({ shouldPreview: false });\n    }\n    if (\n      mediaStream &&\n      shouldPreview &&\n      shouldPreview !== prevState.shouldPreview\n    ) {\n      this.video.current.srcObject = mediaStream;\n      this.video.current.play();\n    }\n  }\n\n  handleTogglePreview = () => {\n    const { mediaStream } = this.props;\n    const { shouldPreview } = this.state;\n    if (!mediaStream) {\n      return;\n    }\n    return this.setState({ shouldPreview: !shouldPreview });\n  };\n\n  render() {\n    const { mediaStream } = this.props;\n    const { shouldPreview } = this.state;\n    return (\n      <StyledMediaStreamMonitor>\n        <Header>MediaStreamMonitor</Header>\n        <Body>{shouldPreview && <video ref={this.video} playsInline />}</Body>\n        <Footer>\n          <ToggleButton\n            isActived={shouldPreview}\n            disabled={!mediaStream}\n            onClick={this.handleTogglePreview}\n          >\n            Open\n          </ToggleButton>\n        </Footer>\n      </StyledMediaStreamMonitor>\n    );\n  }\n}\n\nMediaStreamMonitor.propTypes = {\n  mediaStream: PropTypes.object,\n};\n\nMediaStreamMonitor.defaultProps = {\n  mediaStream: null,\n};\n\nconst StyledMediaStreamMonitor = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > video {\n    margin-top: 8px;\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst ToggleButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nexport default MediaStreamMonitor;\n","// WebGL.js\nconst createShader = (context, type, source) => {\n  const shader = context.createShader(type);\n  context.shaderSource(shader, source);\n  context.compileShader(shader);\n  return shader;\n};\n\nexport const createProgram = ({\n  context,\n  vertexShaderSource,\n  fragmentShaderSource,\n}) => {\n  if (!context || !vertexShaderSource || !fragmentShaderSource) {\n    return;\n  }\n  const vertexShader = createShader(\n    context,\n    context.VERTEX_SHADER,\n    vertexShaderSource\n  );\n  const fragmentShader = createShader(\n    context,\n    context.FRAGMENT_SHADER,\n    fragmentShaderSource\n  );\n  const program = context.createProgram();\n  context.attachShader(program, vertexShader);\n  context.attachShader(program, fragmentShader);\n  context.linkProgram(program);\n  const success = context.getProgramParameter(program, context.LINK_STATUS);\n  if (success) {\n    return { vertexShader, fragmentShader, program };\n  }\n  // eslint-disable-next-line no-console\n  console.error('Link failed:', context.getProgramInfoLog(program));\n  // eslint-disable-next-line no-console\n  console.error('vs info-log:', context.getShaderInfoLog(vertexShader));\n  // eslint-disable-next-line no-console\n  console.error('fs info-log:', context.getShaderInfoLog(fragmentShader));\n  context.deleteShader(vertexShader);\n  context.deleteShader(fragmentShader);\n  context.deleteProgram(program);\n  return;\n};\n\nexport const clearGlCore = ({\n  context,\n  vertexShader,\n  fragmentShader,\n  program,\n} = {}) => {\n  if (!context) {\n    return;\n  }\n  vertexShader && context.deleteShader(vertexShader);\n  fragmentShader && context.deleteShader(fragmentShader);\n  program && context.deleteProgram(program);\n};\n\nexport const createBuffer = ({ context, attribute }) => {\n  const buffer = context.createBuffer();\n  context.bindBuffer(context.ARRAY_BUFFER, buffer);\n  context.bufferData(\n    context.ARRAY_BUFFER,\n    new Float32Array(attribute.array),\n    context.STATIC_DRAW\n  );\n  return {\n    buffer,\n    numComponents: attribute.numComponents,\n    count: Math.floor(attribute.array.length / attribute.numComponents),\n    type: context.FLOAT,\n    normalize: false,\n    offset: 0,\n    // how many bytes to get from one set of values to the next\n    // 0 = use type and numComponents above\n    stride: 0,\n  };\n};\n\nexport const createTexture = ({ context, index = 0 }) => {\n  const ctx = context;\n  const texture = ctx.createTexture();\n  ctx.activeTexture(ctx.TEXTURE0 + index);\n  ctx.bindTexture(ctx.TEXTURE_2D, texture);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_WRAP_S, ctx.CLAMP_TO_EDGE);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_WRAP_T, ctx.CLAMP_TO_EDGE);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_MIN_FILTER, ctx.NEAREST);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_MAG_FILTER, ctx.NEAREST);\n  return texture;\n};\n\nexport const dockBuffer = ({ context, location, buffer }) => {\n  context.bindBuffer(context.ARRAY_BUFFER, buffer.buffer);\n  context.vertexAttribPointer(\n    location,\n    buffer.numComponents,\n    buffer.type,\n    buffer.normalize,\n    buffer.stride,\n    buffer.offset\n  );\n};\n","// GreenBlueChannel.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nout vec2 vTextCoord;\n\nvoid main() {\n  gl_Position = aPosition;\n  vTextCoord = aTextCoord;\n}\n`;\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  float gbColor = 2.0 * originColor.b * originColor.g;\n  outColor = vec4(gbColor, gbColor, gbColor, originColor.a);\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst GreenBlueChannel = ({ canvasRef, pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const pixelLocation = useRef();\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context });\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n      context.uniform1i(pixelLocation.current, 0);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internam format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, pixelSource]);\n\n  return (\n    <StyledGreenBlueChannel>\n      <Header>GreenBlueChannel</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledGreenBlueChannel>\n  );\n};\n\nGreenBlueChannel.propTypes = {\n  pixelSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nGreenBlueChannel.defaultProps = {\n  pixelSource: null,\n};\n\nconst StyledGreenBlueChannel = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default GreenBlueChannel;\n","// GaussianBlur.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport {\n  createProgram,\n  clearGlCore,\n  createBuffer,\n  createTexture,\n  dockBuffer,\n} from '../resource/WebGL.js';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst vertexShaderSource = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nuniform int uIsVertical;\nout vec2 vTextCoord;\nflat out int vIsVertical;\n\nvoid main() {\n  vec4 position = aPosition;\n  if (1 == uIsVertical) {\n    // texture axis is opposite with canvas.\n    position = vec4(aPosition.x, -aPosition.y, aPosition.zw);\n  }\n  gl_Position = position;\n  vTextCoord = aTextCoord;\n  vIsVertical = uIsVertical;\n}\n`;\nconst fragmentShaderSource = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform vec2 uResolution;\nuniform int uKernalRadius;\nuniform float uKernelData[65];\nin vec2 vTextCoord;\nflat in int vIsVertical;\n\nout vec4 outColor;\n\nvoid main() {\n  vec2 delta = 1.0 / uResolution;\n  vec4 outputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\n  for (int index = -uKernalRadius; index <= uKernalRadius; index++) {\n    vec2 step = vec2(index, 0.0);\n    if (1 == vIsVertical) {\n      step = vec2(0.0, index);\n    }\n    vec2 offset = vTextCoord + step * delta;\n    outputColor += uKernelData[index + uKernalRadius] * texture(uSource, offset);\n  }\n\n  outColor = outputColor;\n}\n`;\n\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst getKernal = (inputRadius, sigma) => {\n  const radius = Math.floor(Math.abs(inputRadius));\n  const sigma2 = sigma * sigma;\n  const data = new Array(radius * 2 + 1);\n  let sum = 0;\n  for (let x = -radius; x <= radius; ++x) {\n    const index = x + radius;\n    data[index] =\n      Math.exp(-(x * x) / (2.0 * sigma2)) / Math.sqrt(2.0 * Math.PI * sigma2);\n    sum += data[index];\n  }\n  const normalizedData = data.map(value => value / sum);\n  return { data: new Float32Array(normalizedData), radius };\n};\n\nconst GaussianBlur = ({ canvasRef, pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [maxFps, setMaxFps] = useState(30);\n  const [radius, setRadius] = useState(16);\n  const [sigma, setSigma] = useState(5);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n  const shouldUpdateKernalUniform = useRef(false);\n  const kernal = useRef();\n\n  const webGlContext = useRef();\n  const vertexShader = useRef();\n  const fragmentShader = useRef();\n  const program = useRef();\n\n  const positionLocation = useRef();\n  const textCoordLocation = useRef();\n  const resolutionLocation = useRef();\n  const pixelLocation = useRef();\n\n  const twoPassToggleLocation = useRef();\n  const kernalDataLocation = useRef();\n  const kernalRadiusLocation = useRef();\n\n  const positionBuffer = useRef();\n  const textCoordBuffer = useRef();\n  const pixelTexture = useRef();\n  const twoPassTexture = useRef();\n\n  const twoPassFramebuffer = useRef();\n\n  useEffect(() => {\n    kernal.current = getKernal(radius, sigma);\n    shouldUpdateKernalUniform.current = true;\n  }, [radius, sigma]);\n\n  useEffect(() => {\n    const clear = () => {\n      const context = webGlContext.current;\n      if (!context) {\n        return;\n      }\n\n      if (positionBuffer.current.buffer) {\n        context.deleteBuffer(positionBuffer.current.buffer);\n      }\n      if (textCoordBuffer.current.buffer) {\n        context.deleteBuffer(textCoordBuffer.current.buffer);\n      }\n      if (pixelTexture.current) {\n        context.deleteTexture(pixelTexture.current);\n      }\n      if (twoPassFramebuffer.current) {\n        context.deleteFramebuffer(twoPassFramebuffer.current);\n      }\n\n      if (positionLocation.current) {\n        context.disableVertexAttribArray(positionLocation.current);\n      }\n      if (textCoordLocation.current) {\n        context.disableVertexAttribArray(textCoordLocation.current);\n      }\n\n      return clearGlCore({\n        context,\n        vertexShader: vertexShader.current,\n        fragmentShader: fragmentShader.current,\n        program: program.current,\n      });\n    };\n\n    const canvas = canvasRef.current;\n    if (!canvas) {\n      return clear;\n    }\n    const rect = canvas.getBoundingClientRect();\n    canvas.height = rect.height;\n    canvas.width = rect.width;\n    const context = canvas.getContext('webgl2');\n    webGlContext.current = context;\n\n    const glCore = createProgram({\n      context,\n      vertexShaderSource,\n      fragmentShaderSource,\n    });\n    if (!glCore) {\n      return clear;\n    }\n    vertexShader.current = glCore.vertexShader;\n    fragmentShader.current = glCore.fragmentShader;\n    program.current = glCore.program;\n\n    positionLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aPosition'\n    );\n    textCoordLocation.current = context.getAttribLocation(\n      glCore.program,\n      'aTextCoord'\n    );\n    resolutionLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uResolution'\n    );\n    twoPassToggleLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uIsVertical'\n    );\n    kernalDataLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uKernelData'\n    );\n    kernalRadiusLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uKernalRadius'\n    );\n    pixelLocation.current = context.getUniformLocation(\n      glCore.program,\n      'uSource'\n    );\n\n    context.enableVertexAttribArray(positionLocation.current);\n    context.enableVertexAttribArray(textCoordLocation.current);\n\n    context.useProgram(program.current);\n    context.uniform2f(\n      resolutionLocation.current,\n      context.canvas.width,\n      context.canvas.height\n    );\n    context.uniform1i(twoPassToggleLocation.current, 0);\n    context.uniform1fv(kernalDataLocation.current, kernal.current.data);\n    context.uniform1i(kernalRadiusLocation.current, kernal.current.radius);\n\n    positionBuffer.current = createBuffer({\n      context,\n      attribute: positionAttribute,\n    });\n    textCoordBuffer.current = createBuffer({\n      context,\n      attribute: textCoordAttribute,\n    });\n    pixelTexture.current = createTexture({ context, index: 0 });\n    twoPassTexture.current = createTexture({ context, index: 1 });\n    context.texImage2D(\n      context.TEXTURE_2D,\n      0, // level\n      context.RGBA, // internal format\n      context.canvas.width,\n      context.canvas.height,\n      0, // border\n      context.RGBA, // src format\n      context.UNSIGNED_BYTE, // src type\n      null\n    );\n\n    dockBuffer({\n      context,\n      location: positionLocation.current,\n      buffer: positionBuffer.current,\n    });\n    dockBuffer({\n      context,\n      location: textCoordLocation.current,\n      buffer: textCoordBuffer.current,\n    });\n\n    twoPassFramebuffer.current = context.createFramebuffer();\n    context.bindFramebuffer(context.FRAMEBUFFER, twoPassFramebuffer.current);\n    context.framebufferTexture2D(\n      context.FRAMEBUFFER,\n      context.COLOR_ATTACHMENT0,\n      context.TEXTURE_2D,\n      twoPassTexture.current,\n      0 // level\n    );\n\n    return clear;\n  }, [canvasRef]);\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = webGlContext.current;\n      if (!context || !pixelSource || !program.current) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      // clear\n      context.clearColor(0, 0, 0, 1);\n      context.clear(context.COLOR_BUFFER_BIT);\n\n      // draw\n      context.useProgram(program.current);\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n        context.viewport(0, 0, sourceWidth, sourceHeight);\n        context.uniform2f(\n          resolutionLocation.current,\n          sourceWidth,\n          sourceHeight\n        );\n        context.texImage2D(\n          context.TEXTURE_2D,\n          0, // level\n          context.RGBA, // internal format\n          sourceWidth,\n          sourceHeight,\n          0, // border\n          context.RGBA, // src format\n          context.UNSIGNED_BYTE, // src type\n          null\n        );\n      }\n\n      if (shouldUpdateKernalUniform.current) {\n        context.uniform1fv(kernalDataLocation.current, kernal.current.data);\n        context.uniform1i(kernalRadiusLocation.current, kernal.current.radius);\n        shouldUpdateKernalUniform.current = false;\n      }\n\n      context.bindFramebuffer(context.FRAMEBUFFER, twoPassFramebuffer.current);\n      context.uniform1i(pixelLocation.current, 0);\n      context.uniform1i(twoPassToggleLocation.current, 0);\n      context.bindTexture(context.TEXTURE_2D, pixelTexture.current);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // mip level\n        context.RGBA, // internal format\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        pixelSource\n      );\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n\n      context.bindFramebuffer(context.FRAMEBUFFER, null);\n      context.uniform1i(pixelLocation.current, 1);\n      context.uniform1i(twoPassToggleLocation.current, 1);\n      context.bindTexture(context.TEXTURE_2D, twoPassTexture.current);\n      context.drawArrays(context.TRIANGLES, 0, positionBuffer.current.count);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, pixelSource]);\n\n  return (\n    <StyledGaussianBlur>\n      <Header>GaussianBlur</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n          <Label>\n            <span>Radius: {radius}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"32\"\n              step=\"1\"\n              value={radius}\n              onChange={e => setRadius(e.target.value)}\n            />\n          </Label>\n          <Label>\n            <span>Sigma: {sigma}</span>\n            <input\n              type=\"range\"\n              min=\"0.1\"\n              max=\"20\"\n              step=\"0.1\"\n              value={sigma}\n              onChange={e => setSigma(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledGaussianBlur>\n  );\n};\n\nGaussianBlur.propTypes = {\n  pixelSource: PropTypes.object,\n  canvasRef: PropTypes.object.isRequired,\n};\n\nGaussianBlur.defaultProps = {\n  pixelSource: null,\n};\n\nconst StyledGaussianBlur = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default GaussianBlur;\n","// Main.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport MediaStreamHandler from '../component/MediaStreamHandler.jsx';\nimport MediaStreamMonitor from '../component/MediaStreamMonitor.jsx';\nimport GreenBlueChannel from '../component/GreenBlueChannel.jsx';\nimport GaussianBlur from '../component/GaussianBlur.jsx';\n\nconst Main = () => {\n  const [mediaStream, setMediaStream] = useState();\n  const sourceVideo = useRef();\n  const greenBlueChannelCanvas = useRef();\n  const gaussianBlurCanvas = useRef();\n\n  useEffect(() => {\n    const video = document.createElement('video');\n    // required to tell iOS safari we don't want fullscreen\n    video.setAttribute('playsinline', true);\n    sourceVideo.current = video;\n    return () => {\n      video.srcObject = null;\n      return video.pause();\n    };\n  }, []);\n\n  useEffect(() => {\n    sourceVideo.current.srcObject = mediaStream;\n    if (mediaStream) {\n      sourceVideo.current.play();\n    } else {\n      sourceVideo.current.pause();\n    }\n  }, [mediaStream]);\n\n  return (\n    <StyledMain>\n      <ModuleWrapper>\n        <MediaStreamHandler onChange={({ value }) => setMediaStream(value)} />\n      </ModuleWrapper>\n      <ModuleWrapper>\n        <MediaStreamMonitor mediaStream={mediaStream} />\n      </ModuleWrapper>\n      <ModuleWrapper>\n        <GreenBlueChannel\n          pixelSource={sourceVideo.current}\n          canvasRef={greenBlueChannelCanvas}\n        />\n      </ModuleWrapper>\n      <ModuleWrapper>\n        <GaussianBlur\n          pixelSource={greenBlueChannelCanvas.current}\n          canvasRef={gaussianBlurCanvas}\n        />\n      </ModuleWrapper>\n    </StyledMain>\n  );\n};\n\nconst StyledMain = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 8px;\n`;\n\nconst ModuleWrapper = styled.div`\n  & + & {\n    margin-top: 8px;\n  }\n`;\n\nexport default Main;\n","export default __webpack_public_path__ + \"img/github-icon.e1201fcc.svg\";","// Footer.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport EmailIcon from '../../img/email-icon.svg';\nimport GithubIcon from '../../img/github-icon.svg';\n\nexport class Footer extends React.PureComponent {\n  render() {\n    const { email, github } = this.props;\n    return (\n      <StyledFooter>\n        <Link href={github} target=\"_blank\">\n          <img src={GithubIcon} alt=\"github\" />\n        </Link>\n        <Link href={`mailto:${email}`} target=\"_blank\">\n          <img src={EmailIcon} alt=\"email\" />\n        </Link>\n      </StyledFooter>\n    );\n  }\n}\n\nFooter.propTypes = {\n  email: PropTypes.string,\n  github: PropTypes.string,\n};\n\nFooter.defaultProps = {\n  email: 'bill42362@gmail.com',\n  github: 'https://github.com/bill42362/portfolio',\n};\n\nconst StyledFooter = styled.div`\n  flex: auto;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  padding: 20px;\n`;\n\nconst Link = styled.a`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  background-color: #576574;\n\n  & + & {\n    margin-left: 8px;\n  }\n  img {\n    width: 60%;\n    height: auto;\n  }\n`;\n\nexport default Footer;\n","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNNDY3LDYxSDQ1QzIwLjIxOCw2MSwwLDgxLjE5NiwwLDEwNnYzMDBjMCwyNC43MiwyMC4xMjgsNDUsNDUsNDVoNDIyYzI0LjcyLDAsNDUtMjAuMTI4LDQ1LTQ1VjEwNiBDNTEyLDgxLjI4LDQ5MS44NzIsNjEsNDY3LDYxeiBNNDYwLjc4Niw5MUwyNTYuOTU0LDI5NC44MzNMNTEuMzU5LDkxSDQ2MC43ODZ6IE0zMCwzOTkuNzg4VjExMi4wNjlsMTQ0LjQ3OSwxNDMuMjRMMzAsMzk5Ljc4OHogTTUxLjIxMyw0MjFsMTQ0LjU3LTE0NC41N2w1MC42NTcsNTAuMjIyYzUuODY0LDUuODE0LDE1LjMyNyw1Ljc5NSwyMS4xNjctMC4wNDZMMzE3LDI3Ny4yMTNMNDYwLjc4Nyw0MjFINTEuMjEzeiBNNDgyLDM5OS43ODcgTDMzOC4yMTMsMjU2TDQ4MiwxMTIuMjEyVjM5OS43ODd6Ii8+PC9zdmc+\"","export default __webpack_public_path__ + \"img/x-men-school.0928a818.svg\";","// App.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { hot } from 'react-hot-loader/root';\nimport styled, {\n  createGlobalStyle,\n  StyleSheetManager,\n} from 'styled-components';\nimport styledNormalize from 'styled-normalize';\nimport { Helmet } from 'react-helmet';\n\nimport Main from '../component/Main.jsx';\nimport Footer from '../component/Footer.jsx';\n\nimport XMenLogoSource from '../../img/x-men-school.svg';\n\nconst GlobalStyle = createGlobalStyle`\n  ${styledNormalize};\n  *, ::after, ::before { box-sizing: border-box; }\n  body {\n    background-color: #101010;\n    color: #efefef;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\",\n      Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n    font-weight: 400;\n    -webkit-tap-highlight-color: transparent;\n    overscroll-behavior-y: contain;\n  }\n  button {\n    background-color: rgba(0, 0, 0, 0);\n    cursor: pointer;\n    &:disabled {\n      cursor: not-allowed;\n    }\n  }\n  input::placeholder,\n  input::-webkit-input-placeholder,\n  input::-moz-placeholder {\n    line-height: normal !important;\n    vertical-align: middle;\n  }\n  a { color: inherit; text-decoration: none; }\n  a > * { opacity: inherit; }\n  a:hover { opacity: .7; }\n`;\n\nconst title = 'Portfolio';\nconst description = \"Bill's portfolio\";\n\nconst App = ({ request }) => {\n  // eslint-disable-next-line no-console\n  console.log('App() request:', request);\n  return (\n    <>\n      <Helmet defaultTitle=\"Portfolio\" titleTemplate=\"%s - Portfolio\">\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n\n        <meta name=\"author\" content=\"Bill\" />\n        <meta name=\"description\" content={description} />\n\n        <meta\n          property=\"og:url\"\n          content=\"https://github.com/bill42362/portfolio\"\n        />\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:title\" content={title} />\n        <meta property=\"og:description\" content={description} />\n        <meta property=\"og:site_name\" content={title} />\n        <meta property=\"twitter:card\" content=\"summary\" />\n        <meta property=\"twitter:site\" content=\"@bill_portfolio\" />\n        {/* <meta property=\"twitter:image\" content={twitterImageSource} /> */}\n      </Helmet>\n      <GlobalStyle />\n      <StyledApp>\n        {!window && <img src={XMenLogoSource} title=\"Xavier school\" />}\n        <Main />\n        <Footer />\n      </StyledApp>\n    </>\n  );\n};\n\nApp.propTypes = {\n  request: PropTypes.object,\n};\n\nApp.defaultProps = {\n  request: null,\n};\n\nconst StyledApp = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-height: 100vh;\n  background-color: #222f3e;\n`;\n\nconst Body = ({ sheet, ...props }) => {\n  if (sheet.instance) {\n    return (\n      <StyleSheetManager sheet={sheet.instance}>\n        <App {...props} />\n      </StyleSheetManager>\n    );\n  } else {\n    return <App {...props} />;\n  }\n};\n\nBody.propTypes = {\n  ...App.propTypes,\n  sheet: PropTypes.object,\n};\n\nBody.defaultProps = {\n  ...App.defaultProps,\n  sheet: {},\n};\n\nexport default hot(Body);\n","// index.js\n'use strict';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './component/App.jsx';\n\nReactDOM.render(<App />, document.getElementById('app-root'));\n"],"sourceRoot":""}