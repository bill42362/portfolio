{"version":3,"sources":["webpack:///./src/client/js/component/App.jsx","webpack:///./src/client/img/x-men-school.svg","webpack:///./src/client/js/style/ResetButtonStyle.js","webpack:///./src/client/js/component/MediaStreamHandler.jsx","webpack:///./src/client/js/component/FilterPanel.jsx","webpack:///./src/client/js/component/SliceMonitor.jsx","webpack:///./src/client/js/component/GaussianBlurPanel.jsx","webpack:///./src/client/js/component/HardLightPanel.jsx","webpack:///./src/client/js/resource/CardinalSpline.js","webpack:///./src/client/js/component/ToneCurveEditor.jsx","webpack:///./src/client/js/component/ToneCurvePanel.jsx","webpack:///./src/client/js/resource/WebGL.js","webpack:///./src/client/js/shaderSource/mirrorVertex.js","webpack:///./src/client/js/shaderSource/greenBlueChannelFragment.js","webpack:///./src/client/js/resource/GreenBlueChannel.js","webpack:///./src/client/js/shaderSource/gaussianBlurFragment.js","webpack:///./src/client/js/resource/GaussianBlurFilter.js","webpack:///./src/client/js/shaderSource/highPassFilterFragment.js","webpack:///./src/client/js/resource/HighPassFilter.js","webpack:///./src/client/js/shaderSource/hardLightFragment.js","webpack:///./src/client/js/resource/HardLight.js","webpack:///./src/client/js/shaderSource/toneCurveFragment.js","webpack:///./src/client/js/resource/ToneCurve.js","webpack:///./src/client/js/shaderSource/maskBlenderFragment.js","webpack:///./src/client/js/resource/MaskBlender.js","webpack:///./src/client/js/shaderSource/fillColorFragment.js","webpack:///./src/client/js/resource/FillColor.js","webpack:///./src/client/js/shaderSource/mirrorFragment.js","webpack:///./src/client/js/resource/CopyTexture.js","webpack:///./src/client/js/resource/BeautifyFilter.js","webpack:///./src/client/js/component/Main.jsx","webpack:///./src/client/img/github-icon.svg","webpack:///./src/client/js/component/Footer.jsx","webpack:///./src/client/img/email-icon.svg","webpack:///./src/client/js/index.js"],"names":["GlobalStyle","createGlobalStyle","styledNormalize","isServer","window","title","description","branchName","process","env","BRANCH_NAME","__SSR_ENVIRONMENT__","App","request","console","log","defaultTitle","titleTemplate","charSet","name","content","property","StyledApp","src","XMenLogoSource","propTypes","PropTypes","object","defaultProps","styled","div","Body","sheet","props","instance","ResetButtonStyle","css","MediaStreamHandler","state","isStarted","shouldPreview","mediaStream","error","video","React","createRef","startRecording","onChange","onError","setState","navigator","mediaDevices","getUserMedia","facingMode","width","min","ideal","max","height","stream","value","target","stopRecording","getTracks","forEach","track","stop","renderDescription","id","JSON","stringify","message","renderBody","ref","playsInline","handleTogglePreview","_","prevState","this","current","srcObject","play","StyledMediaStreamHandler","Header","Footer","StopButton","onClick","StartButton","ToggleButton","isActived","disabled","PureComponent","func","Button","button","attrs","style","backgroundColor","FilterPanel","filterName","filterCore","pixelSource","useState","shouldAnimate","setShouldAnimate","maxFps","setMaxFps","fps","setFps","animationFrame","useRef","lastFrameTimestamp","canvasRef","useEffect","cancelAnimationFrame","requestAnimationFrame","animate","timestamp","minInterval","elapsed","context","getContext","sourceWidth","canvas","sourceHeight","nodeName","videoWidth","videoHeight","draw","canvasWidth","canvasHeight","clearRect","drawImage","nextFrame","Math","ceil","StyledFilterPanel","DrawButton","Controls","Label","type","step","e","string","label","SliceMonitor","sliceKey","sliceName","registerSlice","unregisterSlice","setIsActived","sliceId","random","unregister","key","StyledSliceMonitor","Title","EnableButton","GaussianBlurPanel","radius","sigma","StyledGaussianBlur","number","HardLightPanel","cycles","StyledHardLight","mk1","tension","k0","k2","y","x","getPolynomial","p0","p1","p2","p3","t","h00","h10","h01","h11","getPaddedPoints","points","ptail0","length","ptail1","getPolynomials","sortedPoints","sort","a","b","padPoints","slice","map","point","index","startPoint","stopPoint","polynomial","getCurvePoint","polynomials","find","p","getCurvePoints","Array","fill","SIZE","defaultCurveControlPoints","defaultToneCurveControlPoints","red","green","blue","getToneCurvePoints","controlPoints","ToneCurveEditor","cursorPoint","setCursorPoint","curvePoints","setCurvePoints","originStrokeStyle","strokeStyle","originLineWidth","lineWidth","beginPath","i","moveTo","lineTo","stroke","drawAxis","size","axisPoint","drawCross","fillStyle","arc","PI","StyledToneCurveEditor","Monitor","onMouseMove","clientX","offsetLeft","clientY","offsetTop","onMouseLeave","shape","array","isRequired","ToneCurvePanel","strength","handleCurvePointsChange","useCallback","StyledToneCurve","EditorWrapper","createShader","source","shader","shaderSource","compileShader","createProgram","vertexShaderSource","fragmentShaderSource","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","getShaderInfoLog","deleteShader","deleteProgram","createBuffer","attribute","buffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","numComponents","count","floor","FLOAT","normalize","offset","stride","dockBuffer","location","vertexAttribPointer","mirrorVertex","greenBlueChannelFragment","GreenBlueChannel","Error","core","mirrorVertexShaderSource","greenBlueChannelFragmentShaderSource","aPosition","getAttribLocation","aTextCoord","enableVertexAttribArray","uIsFrameBuffer","getUniformLocation","uSource","prototype","includes","sourceTexture","sourceTextureIndex","targetFrameBuffer","useProgram","bindTexture","TEXTURE_2D","uniform1i","bindFramebuffer","FRAMEBUFFER","drawArrays","TRIANGLES","gaussianBlurFragment","getKernal","inputRadius","abs","sigma2","data","sum","exp","sqrt","normalizedData","GaussianBlurFilter","gaussianBlurFragmentShaderSource","uResolution","uKernalRadius","uKernelData","uIsVertical","updateKernal","isNaN","_radius","_sigma","_kernal","uniform1fv","midFrameBuffer","midTexture","midTextureIndex","uniform2f","highPassFilterFragment","HighPassFilter","highPassFilterFragmentShaderSource","uBlurredSource","blurredSourceTexture","blurredSourceTextureIndex","hardLightFragment","HardLight","hardLightFragmentShaderSource","uCycles","updateCycles","_cycles","toneCurveFragment","defaultRedControlPoints","defaultControlPoints","ToneCurve","toneMapTexture","toneMapTextureIndex","toneCurveFragmentShaderSource","uStrength","uTone","updateStrength","updateCurvePoints","_strength","uniform1f","_controlPoints","_tension","_curvePoints","_curveImageData","ImageData","Uint8ClampedArray","flatMap","texImage2D","RGBA","UNSIGNED_BYTE","maskBlenderFragment","MaskBlender","maskBlenderFragmentShaderSource","uMask","uBlendSource","maskTexture","maskTextureIndex","blendSourceTexture","blendSourceTextureIndex","fillColorFragment","FillColor","color","fillColorFragmentShaderSource","uColor","updateColor","isArray","_color","uniform4f","mirrorFragment","CopyTexture","mirrorFragmentShaderSource","textureNames","frameBufferNames","textureIndex","reduce","textureName","clearColor","positionAttribute","textCoordAttribute","BeautifyFilter","document","createElement","texture","ctx","createTexture","activeTexture","TEXTURE0","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","frameBuffer","createFramebuffer","framebufferTexture2D","COLOR_ATTACHMENT0","greenBlueChannel","gaussianBlur","highPassFilter","hardLight","toneCurve","toneMap","maskBlender","fillColor","copyTexture","updateCanvasSize","clear","COLOR_BUFFER_BIT","exportTextureToCanvases","canvases","gaussianBlurMid","viewport","Object","keys","textureKey","canvasArray","targetContexts","filter","Boolean","targetContext","sourceCanvas","targetWidth","targetHeight","updateGaussianBlurKernal","updateHardLightCycles","updateToneCurveData","StyledMain","ErrorPanel","Modules","ModuleWrapper","Main","setError","setMediaStream","setGaussianBlur","setHardLight","setToneCurve","sourceVideo","beautifyFilter","setAttribute","args","pause","githubBaseUrl","email","githubUrl","StyledFooter","Link","href","GithubIcon","alt","ReactDOM","render","getElementById"],"mappings":"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","file":"js/bundle~bundle~5b60049d.4af6ee94.js","sourcesContent":["// App.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { hot } from 'react-hot-loader/root';\nimport styled, {\n  createGlobalStyle,\n  StyleSheetManager,\n} from 'styled-components';\nimport styledNormalize from 'styled-normalize';\nimport { Helmet } from 'react-helmet';\n\nimport Main from '../component/Main.jsx';\nimport Footer from '../component/Footer.jsx';\n\nimport XMenLogoSource from '../../img/x-men-school.svg';\n\nconst GlobalStyle = createGlobalStyle`\n  ${styledNormalize};\n  *, ::after, ::before { box-sizing: border-box; }\n  body {\n    background-color: #101010;\n    color: #efefef;\n    font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\",\n      Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n    font-weight: 400;\n    -webkit-tap-highlight-color: transparent;\n    overscroll-behavior-y: contain;\n  }\n  button {\n    background-color: rgba(0, 0, 0, 0);\n    cursor: pointer;\n    &:disabled {\n      cursor: not-allowed;\n    }\n  }\n  input::placeholder,\n  input::-webkit-input-placeholder,\n  input::-moz-placeholder {\n    line-height: normal !important;\n    vertical-align: middle;\n  }\n  a { color: inherit; text-decoration: none; }\n  a > * { opacity: inherit; }\n  a:hover { opacity: .7; }\n`;\n\nconst isServer = typeof window === 'undefined';\nconst title = 'Portfolio';\nconst description = \"Bill's portfolio\";\nconst branchName = isServer\n  ? process.env.BRANCH_NAME\n  : window.__SSR_ENVIRONMENT__.branchName;\n\nconst App = ({ request }) => {\n  // eslint-disable-next-line no-console\n  console.log('App() request:', request);\n  return (\n    <>\n      <Helmet defaultTitle=\"Portfolio\" titleTemplate=\"%s - Portfolio\">\n        <meta charSet=\"utf-8\" />\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n\n        <meta name=\"author\" content=\"Bill\" />\n        <meta name=\"description\" content={description} />\n\n        <meta\n          property=\"og:url\"\n          content=\"https://github.com/bill42362/portfolio\"\n        />\n        <meta property=\"og:type\" content=\"website\" />\n        <meta property=\"og:title\" content={title} />\n        <meta property=\"og:description\" content={description} />\n        <meta property=\"og:site_name\" content={title} />\n        <meta property=\"twitter:card\" content=\"summary\" />\n        <meta property=\"twitter:site\" content=\"@bill_portfolio\" />\n        {/* <meta property=\"twitter:image\" content={twitterImageSource} /> */}\n      </Helmet>\n      <GlobalStyle />\n      <StyledApp>\n        {!window && <img src={XMenLogoSource} title=\"Xavier school\" />}\n        <Main />\n        <Footer branchName={branchName} />\n      </StyledApp>\n    </>\n  );\n};\n\nApp.propTypes = {\n  request: PropTypes.object,\n};\n\nApp.defaultProps = {\n  request: null,\n};\n\nconst StyledApp = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-height: 100vh;\n  background-color: #222f3e;\n`;\n\nconst Body = ({ sheet, ...props }) => {\n  if (sheet.instance) {\n    return (\n      <StyleSheetManager sheet={sheet.instance}>\n        <App {...props} />\n      </StyleSheetManager>\n    );\n  } else {\n    return <App {...props} />;\n  }\n};\n\nBody.propTypes = {\n  ...App.propTypes,\n  sheet: PropTypes.object,\n};\n\nBody.defaultProps = {\n  ...App.defaultProps,\n  sheet: {},\n};\n\nexport default hot(Body);\n","export default __webpack_public_path__ + \"img/x-men-school.0928a818.svg\";","// ResetButtonStyle.js\n'use strict';\nimport { css } from 'styled-components';\n\nexport const ResetButtonStyle = css`\n  border: none;\n  padding: 0px;\n  outline: none;\n  background: none;\n`;\n\nexport default ResetButtonStyle;\n","// MediaStreamHandler.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nexport class MediaStreamHandler extends React.PureComponent {\n  state = {\n    isStarted: false,\n    shouldPreview: false,\n    mediaStream: null,\n    error: false,\n  };\n  video = React.createRef();\n\n  startRecording = async () => {\n    const { onChange, onError } = this.props;\n    try {\n      this.setState({ isStarted: true });\n      const stream = await navigator.mediaDevices.getUserMedia({\n        video: {\n          facingMode: 'environment',\n          width: { min: 1024, ideal: 1280, max: 1920 },\n          height: { min: 576, ideal: 720, max: 1080 },\n        },\n      });\n      this.setState({ mediaStream: stream });\n      return onChange({ value: stream });\n    } catch (error) {\n      this.setState({ error, isStarted: false });\n      return onError({ error, target: this });\n    }\n  };\n\n  stopRecording = () => {\n    const { mediaStream } = this.state;\n    const { onChange } = this.props;\n    if (mediaStream) {\n      const tracks = mediaStream.getTracks();\n      tracks.forEach(track => track.stop());\n      onChange({ value: null });\n      this.setState({\n        mediaStream: null,\n        isStarted: false,\n        shouldPreview: false,\n      });\n    }\n  };\n\n  componentDidUpdate(_, prevState) {\n    const { mediaStream, shouldPreview } = this.state;\n    if (shouldPreview && shouldPreview !== prevState.shouldPreview) {\n      this.video.current.srcObject = mediaStream;\n      this.video.current.play();\n    }\n  }\n\n  componentWillUnmount() {\n    this.stopRecording();\n  }\n\n  renderDescription = () => {\n    const { isStarted, mediaStream, error } = this.state;\n\n    if (isStarted) {\n      if (mediaStream) {\n        return `Media stream id: ${mediaStream.id}`;\n      } else {\n        return 'Loading mediaStream ...';\n      }\n    }\n\n    if (error) {\n      return `Error: ${JSON.stringify(error.message)}`;\n    }\n\n    return 'Idle';\n  };\n\n  renderBody = () => {\n    const { shouldPreview } = this.state;\n    return (\n      <Body>\n        <div>{this.renderDescription()}</div>\n        {shouldPreview && <video ref={this.video} playsInline />}\n      </Body>\n    );\n  };\n\n  handleTogglePreview = () => {\n    const { mediaStream, shouldPreview } = this.state;\n    if (!mediaStream) {\n      return;\n    }\n    return this.setState({ shouldPreview: !shouldPreview });\n  };\n\n  render() {\n    const { mediaStream, shouldPreview } = this.state;\n    return (\n      <StyledMediaStreamHandler>\n        <Header>MediaStreamHandler</Header>\n        {this.renderBody()}\n        <Footer>\n          {mediaStream ? (\n            <StopButton onClick={this.stopRecording}>Stop</StopButton>\n          ) : (\n            <StartButton onClick={this.startRecording}>Start</StartButton>\n          )}\n          <ToggleButton\n            isActived={shouldPreview}\n            disabled={!mediaStream}\n            onClick={this.handleTogglePreview}\n          >\n            Preview\n          </ToggleButton>\n        </Footer>\n      </StyledMediaStreamHandler>\n    );\n  }\n}\n\nMediaStreamHandler.propTypes = {\n  onChange: PropTypes.func,\n  onError: PropTypes.func,\n};\n\nMediaStreamHandler.defaultProps = {\n  onChange: () => null,\n  onError: () => null,\n};\n\nconst StyledMediaStreamHandler = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > video {\n    margin-top: 8px;\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst StartButton = styled(Button)`\n  background-color: #6ab04c;\n`;\n\nconst StopButton = styled(Button)`\n  background-color: #eb4d4b;\n`;\n\nconst ToggleButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nexport default MediaStreamHandler;\n","// FilterPanel.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst FilterPanel = ({ filterName, filterCore, pixelSource }) => {\n  const [shouldAnimate, setShouldAnimate] = useState(false);\n  const [maxFps, setMaxFps] = useState(30);\n  const [fps, setFps] = useState(0);\n\n  const animationFrame = useRef();\n  const lastFrameTimestamp = useRef(0);\n  const canvasRef = useRef();\n\n  useEffect(() => {\n    const nextFrame = () => {\n      const context = canvasRef.current.getContext('2d');\n      if (!context) {\n        return;\n      }\n\n      let sourceWidth = context.canvas.width;\n      let sourceHeight = context.canvas.height;\n      if ('VIDEO' == pixelSource.nodeName) {\n        sourceWidth = pixelSource.videoWidth;\n        sourceHeight = pixelSource.videoHeight;\n      } else if ('CANVAS' === pixelSource.nodeName) {\n        sourceWidth = pixelSource.width;\n        sourceHeight = pixelSource.height;\n      }\n\n      if (!sourceWidth || !sourceHeight) {\n        return;\n      }\n\n      filterCore.draw({ pixelSource });\n\n      const canvasWidth = context.canvas.width;\n      const canvasHeight = context.canvas.height;\n      if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n        context.canvas.width = sourceWidth;\n        context.canvas.height = sourceHeight;\n      }\n\n      context.clearRect(0, 0, sourceWidth, sourceHeight);\n      context.drawImage(filterCore.canvas, 0, 0);\n    };\n\n    const animate = timestamp => {\n      if (shouldAnimate) {\n        animationFrame.current = window.requestAnimationFrame(animate);\n      }\n      const minInterval = 1000 / maxFps;\n      const elapsed = timestamp - lastFrameTimestamp.current;\n      if (elapsed >= minInterval) {\n        lastFrameTimestamp.current = timestamp;\n        nextFrame();\n        setFps(Math.ceil(1000 / elapsed));\n      }\n    };\n\n    if (!shouldAnimate) {\n      window.cancelAnimationFrame(animationFrame.current);\n      return;\n    }\n\n    window.cancelAnimationFrame(animationFrame.current);\n    animationFrame.current = window.requestAnimationFrame(animate);\n    return () => window.cancelAnimationFrame(animationFrame.current);\n  }, [shouldAnimate, maxFps, filterCore, pixelSource]);\n\n  return (\n    <StyledFilterPanel>\n      <Header>{filterName}</Header>\n      <Body>\n        <canvas ref={canvasRef} />\n      </Body>\n      <Footer>\n        <DrawButton\n          isActived={shouldAnimate}\n          disabled={!pixelSource}\n          onClick={() => setShouldAnimate(!shouldAnimate)}\n        >\n          Draw\n        </DrawButton>\n        <span>FPS: {fps}</span>\n        <Controls>\n          <Label>\n            <span>Max FPS: {maxFps}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"60\"\n              step=\"1\"\n              value={maxFps}\n              onChange={e => setMaxFps(e.target.value)}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledFilterPanel>\n  );\n};\n\nFilterPanel.propTypes = {\n  filterName: PropTypes.string,\n  filterCore: PropTypes.object,\n  pixelSource: PropTypes.object,\n};\n\nFilterPanel.defaultProps = {\n  filterName: '',\n  filterCore: null,\n  pixelSource: null,\n};\n\nconst StyledFilterPanel = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst DrawButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default FilterPanel;\n","// SliceMonitor.jsx\nimport React, { useRef, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst SliceMonitor = ({\n  sliceKey,\n  sliceName,\n  registerSlice,\n  unregisterSlice,\n}) => {\n  const [isActived, setIsActived] = useState(false);\n  const canvasRef = useRef();\n  const sliceId = useRef(Math.random());\n\n  useEffect(() => {\n    const unregister = () =>\n      unregisterSlice({ key: sliceKey, sliceId: sliceId.current });\n    unregister();\n    if (isActived) {\n      registerSlice({\n        key: sliceKey,\n        sliceId: sliceId.current,\n        canvas: canvasRef.current,\n      });\n    }\n    return unregister;\n  }, [sliceKey, isActived, registerSlice, unregisterSlice]);\n\n  return (\n    <StyledSliceMonitor>\n      <Header>\n        <Title>{sliceName}</Title>\n        <EnableButton\n          isActived={isActived}\n          onClick={() => setIsActived(!isActived)}\n        >\n          Open\n        </EnableButton>\n      </Header>\n      {isActived && (\n        <>\n          <Body>\n            <canvas ref={canvasRef} />\n          </Body>\n          <Footer></Footer>\n        </>\n      )}\n    </StyledSliceMonitor>\n  );\n};\n\nSliceMonitor.propTypes = {\n  sliceKey: PropTypes.string,\n  sliceName: PropTypes.string,\n  registerSlice: PropTypes.func,\n  unregisterSlice: PropTypes.func,\n};\n\nSliceMonitor.defaultProps = {\n  sliceKey: 'greenBlueChannel',\n  sliceName: '',\n  registerSlice: () => null,\n  unregisterSlice: () => null,\n};\n\nconst StyledSliceMonitor = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Title = styled.div`\n  flex: 1;\n  align-self: center;\n`;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst EnableButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nexport default SliceMonitor;\n","// GaussianBlurPanel.jsx\nimport React, { useRef, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst sliceKey = 'gaussianBlur';\n\nconst GaussianBlurPanel = ({\n  registerSlice,\n  unregisterSlice,\n  radius,\n  sigma,\n  onChange,\n}) => {\n  const [isActived, setIsActived] = useState(false);\n  const canvasRef = useRef();\n  const sliceId = useRef(Math.random());\n\n  useEffect(() => {\n    const unregister = () =>\n      unregisterSlice({ key: sliceKey, sliceId: sliceId.current });\n    unregister();\n    if (isActived) {\n      registerSlice({\n        key: sliceKey,\n        sliceId: sliceId.current,\n        canvas: canvasRef.current,\n      });\n    }\n    return unregister;\n  }, [isActived, registerSlice, unregisterSlice]);\n  return (\n    <StyledGaussianBlur>\n      <Header>\n        <Title>GaussianBlurPanel</Title>\n        <EnableButton\n          isActived={isActived}\n          onClick={() => setIsActived(!isActived)}\n        >\n          Open\n        </EnableButton>\n      </Header>\n      {isActived && (\n        <Body>\n          <canvas ref={canvasRef} />\n        </Body>\n      )}\n      <Footer>\n        <Controls>\n          <Label>\n            <span>Radius: {radius}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"32\"\n              step=\"1\"\n              value={radius}\n              onChange={e => onChange({ radius: +e.target.value, sigma })}\n            />\n          </Label>\n          <Label>\n            <span>Sigma: {sigma}</span>\n            <input\n              type=\"range\"\n              min=\"0.1\"\n              max=\"20\"\n              step=\"0.1\"\n              value={sigma}\n              onChange={e => onChange({ sigma: +e.target.value, radius })}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledGaussianBlur>\n  );\n};\n\nGaussianBlurPanel.propTypes = {\n  registerSlice: PropTypes.func,\n  unregisterSlice: PropTypes.func,\n  radius: PropTypes.number,\n  sigma: PropTypes.number,\n  onChange: PropTypes.func,\n};\n\nGaussianBlurPanel.defaultProps = {\n  registerSlice: () => null,\n  unregisterSlice: () => null,\n  radius: 16,\n  sigma: 16,\n  onChange: () => null,\n};\n\nconst StyledGaussianBlur = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Title = styled.div`\n  flex: 1;\n  align-self: center;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst EnableButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default GaussianBlurPanel;\n","// HardLightPanel.jsx\nimport React, { useRef, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst sliceKey = 'hardLight';\n\nconst HardLightPanel = ({\n  registerSlice,\n  unregisterSlice,\n  cycles,\n  onChange,\n}) => {\n  const [isActived, setIsActived] = useState(false);\n  const canvasRef = useRef();\n  const sliceId = useRef(Math.random());\n\n  useEffect(() => {\n    const unregister = () =>\n      unregisterSlice({ key: sliceKey, sliceId: sliceId.current });\n    unregister();\n    if (isActived) {\n      registerSlice({\n        key: sliceKey,\n        sliceId: sliceId.current,\n        canvas: canvasRef.current,\n      });\n    }\n    return unregister;\n  }, [isActived, registerSlice, unregisterSlice]);\n  return (\n    <StyledHardLight>\n      <Header>\n        <Title>HardLightPanel</Title>\n        <EnableButton\n          isActived={isActived}\n          onClick={() => setIsActived(!isActived)}\n        >\n          Open\n        </EnableButton>\n      </Header>\n      {isActived && (\n        <Body>\n          <canvas ref={canvasRef} />\n        </Body>\n      )}\n      <Footer>\n        <Controls>\n          <Label>\n            <span>Cycles: {cycles}</span>\n            <input\n              type=\"range\"\n              min=\"1\"\n              max=\"8\"\n              step=\"1\"\n              value={cycles}\n              onChange={e => onChange({ cycles: +e.target.value })}\n            />\n          </Label>\n        </Controls>\n      </Footer>\n    </StyledHardLight>\n  );\n};\n\nHardLightPanel.propTypes = {\n  registerSlice: PropTypes.func,\n  unregisterSlice: PropTypes.func,\n  cycles: PropTypes.number,\n  onChange: PropTypes.func,\n};\n\nHardLightPanel.defaultProps = {\n  registerSlice: () => null,\n  unregisterSlice: () => null,\n  cycles: 3,\n  onChange: () => null,\n};\n\nconst StyledHardLight = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Title = styled.div`\n  flex: 1;\n  align-self: center;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst EnableButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nexport default HardLightPanel;\n","// CardinalSpline.js\n// https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Cardinal_spline\n\nconst h00 = t => (1 + 2 * t) * (1 - t) * (1 - t);\nconst h10 = t => t * (1 - t) * (1 - t);\nconst h01 = t => t * t * (3 - 2 * t);\nconst h11 = t => t * t * (t - 1);\n\nconst mk1 = ({ tension, k0, k2 }) =>\n  ((1 - tension) * (k2.y - k0.y)) / (k2.x - k0.x);\n\nconst getPolynomial = ({ tension, p0, p1, p2, p3 }) => {\n  return t =>\n    h00(t) * p1.y +\n    h10(t) * (p2.x - p1.x) * mk1({ tension, k0: p0, k2: p2 }) +\n    h01(t) * p2.y +\n    h11(t) * (p2.x - p1.x) * mk1({ tension, k0: p1, k2: p3 });\n};\n\nconst getPaddedPoints = ({ points }) => {\n  const p0 = points[0];\n  const p1 = points[1];\n  const ptail0 = points[points.length - 1];\n  const ptail1 = points[points.length - 2];\n  return [\n    { x: p0.x - (p1.x - p0.x), y: p0.y - (p1.y - p0.y) },\n    ...points,\n    {\n      x: ptail0.x + (ptail0.x - ptail1.x),\n      y: ptail0.y + (ptail0.y - ptail1.y),\n    },\n  ];\n};\n\nconst getPolynomials = ({\n  points = [\n    { x: 0, y: 0 },\n    { x: 255, y: 255 },\n  ],\n  tension = 0.5,\n} = {}) => {\n  const sortedPoints = points.sort((a, b) => a.x - b.x);\n  const padPoints = getPaddedPoints({ points: sortedPoints });\n  return sortedPoints.slice(0, -1).map((point, index) => {\n    return {\n      startPoint: point,\n      stopPoint: sortedPoints[index + 1],\n      length: sortedPoints[index + 1].x - point.x,\n      polynomial: getPolynomial({\n        tension,\n        p0: padPoints[index],\n        p1: padPoints[index + 1],\n        p2: padPoints[index + 2],\n        p3: padPoints[index + 3],\n      }),\n    };\n  });\n};\n\nconst getCurvePoint = ({ x, polynomials }) => {\n  const polynomial = polynomials.find(\n    p => p.startPoint.x <= x && p.stopPoint.x >= x\n  );\n  if (x === polynomial.startPoint.x) {\n    return { x, y: polynomial.startPoint.y };\n  }\n  const t = (x - polynomial.startPoint.x) / polynomial.length;\n  return { x, y: polynomial.polynomial(t) };\n};\n\nexport const getCurvePoints = ({\n  points = [\n    { x: 0, y: 0 },\n    { x: 255, y: 255 },\n  ],\n  tension = 0,\n} = {}) => {\n  const polynomials = getPolynomials({ points, tension });\n\n  return new Array(256).fill(0).map((_, index) => {\n    return getCurvePoint({ x: index, polynomials });\n  });\n};\n","// ToneCurveEditor.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport { getCurvePoints } from '../resource/CardinalSpline.js';\n\nconst SIZE = 256;\n\nconst defaultCurveControlPoints = [\n  { x: 0, y: 0 },\n  { x: 120, y: 146 }, // default\n  // { x: 120, y: 186 },\n  { x: 255, y: 255 },\n];\nexport const defaultToneCurveControlPoints = {\n  red: defaultCurveControlPoints,\n  green: defaultCurveControlPoints,\n  blue: defaultCurveControlPoints,\n};\n\nconst drawAxis = context => {\n  const originStrokeStyle = context.strokeStyle;\n  context.strokeStyle = 'darkgray';\n  const originLineWidth = context.lineWidth;\n  context.lineWidth = 0.5;\n  context.beginPath();\n  for (let i = 50; i < SIZE; i = i + 50) {\n    context.moveTo(i, 0);\n    context.lineTo(i, SIZE);\n    context.moveTo(0, SIZE - i);\n    context.lineTo(SIZE, SIZE - i);\n  }\n  context.stroke();\n  context.strokeStyle = originStrokeStyle;\n  context.lineWidth = originLineWidth;\n};\n\nconst drawCross = (context, point, size = 10) => {\n  const originLineWidth = context.lineWidth;\n  const originStrokeStyle = context.strokeStyle;\n  const axisPoint = { x: point.x, y: SIZE - point.y };\n  context.strokeStyle = '#f6e58d';\n  context.lineWidth = 0.5;\n  context.beginPath();\n  context.moveTo(axisPoint.x, axisPoint.y - size);\n  context.lineTo(axisPoint.x, axisPoint.y + size);\n  context.moveTo(axisPoint.x - size, axisPoint.y);\n  context.lineTo(axisPoint.x + size, axisPoint.y);\n  context.stroke();\n  context.strokeStyle = originStrokeStyle;\n  context.lineWidth = originLineWidth;\n};\n\nconst getToneCurvePoints = ({ controlPoints, tension }) => {\n  return {\n    red: getCurvePoints({ points: controlPoints.red, tension }),\n    green: getCurvePoints({ points: controlPoints.green, tension }),\n    blue: getCurvePoints({ points: controlPoints.blue, tension }),\n  };\n};\n\nconst ToneCurveEditor = ({ controlPoints, tension, onChange }) => {\n  const [cursorPoint, setCursorPoint] = useState();\n  const [curvePoints, setCurvePoints] = useState(\n    getToneCurvePoints({ controlPoints, tension })\n  );\n  const canvas = useRef();\n\n  useEffect(() => {\n    setCurvePoints(getToneCurvePoints({ controlPoints, tension }));\n    onChange({ controlPoints, tension });\n  }, [tension, controlPoints, onChange]);\n\n  useEffect(() => {\n    const context = canvas.current.getContext('2d');\n    context.clearRect(0, 0, SIZE, SIZE);\n\n    drawAxis(context);\n    cursorPoint && drawCross(context, cursorPoint);\n\n    context.strokeStyle = 'red';\n    context.beginPath();\n    context.moveTo(0, SIZE);\n    curvePoints.red.forEach(point => {\n      context.lineTo(point.x, SIZE - point.y);\n    });\n    context.stroke();\n\n    context.fillStyle = 'red';\n    controlPoints.red.forEach(point => {\n      context.beginPath();\n      context.arc(point.x, SIZE - point.y, 2, 0, 2 * Math.PI);\n      context.fill();\n    });\n  }, [controlPoints, curvePoints, cursorPoint]);\n\n  const handleOnMouseMove = e => {\n    const x = e.clientX - e.target.offsetLeft;\n    const y = SIZE - e.clientY + e.target.offsetTop;\n    setCursorPoint({ x, y });\n  };\n\n  return (\n    <StyledToneCurveEditor>\n      <Monitor\n        width={SIZE}\n        height={SIZE}\n        ref={canvas}\n        onMouseMove={handleOnMouseMove}\n        onMouseLeave={() => setCursorPoint()}\n      />\n      <Controls>\n        <Label>\n          <span>Tension: {tension}</span>\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"1\"\n            step=\"0.01\"\n            value={tension}\n            onChange={e =>\n              onChange({ controlPoints, tension: +e.target.value })\n            }\n          />\n        </Label>\n      </Controls>\n    </StyledToneCurveEditor>\n  );\n};\n\nToneCurveEditor.propTypes = {\n  controlPoints: PropTypes.shape({\n    red: PropTypes.array.isRequired,\n    green: PropTypes.array.isRequired,\n    blue: PropTypes.array.isRequired,\n  }),\n  tension: PropTypes.number,\n  onChange: PropTypes.func,\n};\n\nToneCurveEditor.defaultProps = {\n  controlPoints: defaultToneCurveControlPoints,\n  tension: 0.0,\n  onChange: () => null,\n};\n\nconst StyledToneCurveEditor = styled.div`\n  display: flex;\n`;\n\nconst Monitor = styled.canvas`\n  background-color: black;\n`;\n\nconst Controls = styled.div`\n  margin-left: 8px;\n  width: 100%;\n`;\n\nconst Label = styled.label`\n  display: block;\n  span {\n    display: block;\n  }\n  input {\n    width: 100%;\n  }\n`;\n\nexport default ToneCurveEditor;\n","// ToneCurvePanel.jsx\nimport React, { useRef, useState, useEffect, useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport ToneCurveEditor, {\n  defaultToneCurveControlPoints,\n} from '../component/ToneCurveEditor.jsx';\nimport ResetButtonStyle from '../style/ResetButtonStyle.js';\n\nconst sliceKey = 'toneCurve';\n\nconst ToneCurvePanel = ({\n  registerSlice,\n  unregisterSlice,\n  strength,\n  controlPoints,\n  tension,\n  onChange,\n}) => {\n  const [isActived, setIsActived] = useState(false);\n  const canvasRef = useRef();\n  const sliceId = useRef(Math.random());\n\n  useEffect(() => {\n    const unregister = () =>\n      unregisterSlice({ key: sliceKey, sliceId: sliceId.current });\n    unregister();\n    if (isActived) {\n      registerSlice({\n        key: sliceKey,\n        sliceId: sliceId.current,\n        canvas: canvasRef.current,\n      });\n    }\n    return unregister;\n  }, [isActived, registerSlice, unregisterSlice]);\n\n  const handleCurvePointsChange = useCallback(\n    ({ controlPoints, tension }) =>\n      onChange({ controlPoints, tension, strength }),\n    [strength, onChange]\n  );\n\n  return (\n    <StyledToneCurve>\n      <Header>\n        <Title>ToneCurvePanel</Title>\n        <EnableButton\n          isActived={isActived}\n          onClick={() => setIsActived(!isActived)}\n        >\n          Open\n        </EnableButton>\n      </Header>\n      {isActived && (\n        <Body>\n          <canvas ref={canvasRef} />\n        </Body>\n      )}\n      <Footer>\n        <Controls>\n          <Label>\n            <span>Strength: {strength}</span>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"1\"\n              step=\"0.01\"\n              value={strength}\n              onChange={e =>\n                onChange({ strength: +e.target.value, controlPoints, tension })\n              }\n            />\n          </Label>\n          <EditorWrapper>\n            <ToneCurveEditor\n              controlPoints={controlPoints}\n              tension={tension}\n              onChange={handleCurvePointsChange}\n            />\n          </EditorWrapper>\n        </Controls>\n      </Footer>\n    </StyledToneCurve>\n  );\n};\n\nToneCurvePanel.propTypes = {\n  registerSlice: PropTypes.func,\n  unregisterSlice: PropTypes.func,\n  strength: PropTypes.number,\n  controlPoints: PropTypes.shape({\n    red: PropTypes.array.isRequired,\n    green: PropTypes.array.isRequired,\n    blue: PropTypes.array.isRequired,\n  }),\n  tension: PropTypes.number,\n  onChange: PropTypes.func,\n};\n\nToneCurvePanel.defaultProps = {\n  registerSlice: () => null,\n  unregisterSlice: () => null,\n  strength: 0.5,\n  controlPoints: defaultToneCurveControlPoints,\n  tension: 0.0,\n  onChange: () => null,\n};\n\nconst StyledToneCurve = styled.div`\n  border: solid 1px #4834d4;\n  border-radius: 8px;\n  overflow: hidden;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  background-color: #4834d4;\n  padding: 8px;\n`;\n\nconst Title = styled.div`\n  flex: 1;\n  align-self: center;\n`;\n\nconst Button = styled.button`\n  ${ResetButtonStyle}\n  border-radius: 4px;\n  padding: 4px;\n  color: white;\n  font-size: 14px;\n  & + & {\n    margin-left: 8px;\n  }\n`;\n\nconst EnableButton = styled(Button).attrs(({ isActived }) => {\n  return {\n    style: {\n      backgroundColor: isActived ? '#6ab04c' : '#badc58',\n    },\n  };\n})``;\n\nconst Body = styled.div`\n  position: relative;\n  background-color: #686de0;\n  padding: 8px;\n  & > canvas {\n    width: 100%;\n  }\n`;\n\nconst Footer = styled.div`\n  background-color: #4834d4;\n  padding: 8px;\n  button + span {\n    margin-left: 8px;\n  }\n`;\n\nconst Controls = styled.div`\n  margin-top: 8px;\n`;\n\nconst Label = styled.label`\n  display: flex;\n\n  input {\n    flex: 1;\n    margin-left: 8px;\n  }\n`;\n\nconst EditorWrapper = styled.div`\n  margin-top: 8px;\n`;\n\nexport default ToneCurvePanel;\n","// WebGL.js\nconst createShader = (context, type, source) => {\n  const shader = context.createShader(type);\n  context.shaderSource(shader, source);\n  context.compileShader(shader);\n  return shader;\n};\n\nexport const createProgram = ({\n  context,\n  vertexShaderSource,\n  fragmentShaderSource,\n}) => {\n  if (!context || !vertexShaderSource || !fragmentShaderSource) {\n    return;\n  }\n  const vertexShader = createShader(\n    context,\n    context.VERTEX_SHADER,\n    vertexShaderSource\n  );\n  const fragmentShader = createShader(\n    context,\n    context.FRAGMENT_SHADER,\n    fragmentShaderSource\n  );\n  const program = context.createProgram();\n  context.attachShader(program, vertexShader);\n  context.attachShader(program, fragmentShader);\n  context.linkProgram(program);\n  const success = context.getProgramParameter(program, context.LINK_STATUS);\n  if (success) {\n    return { vertexShader, fragmentShader, program };\n  }\n  // eslint-disable-next-line no-console\n  console.error('Link failed:', context.getProgramInfoLog(program));\n  // eslint-disable-next-line no-console\n  console.error('vs info-log:', context.getShaderInfoLog(vertexShader));\n  // eslint-disable-next-line no-console\n  console.error('fs info-log:', context.getShaderInfoLog(fragmentShader));\n  context.deleteShader(vertexShader);\n  context.deleteShader(fragmentShader);\n  context.deleteProgram(program);\n  return;\n};\n\nexport const clearGlCore = ({\n  context,\n  vertexShader,\n  fragmentShader,\n  program,\n} = {}) => {\n  if (!context) {\n    return;\n  }\n  vertexShader && context.deleteShader(vertexShader);\n  fragmentShader && context.deleteShader(fragmentShader);\n  program && context.deleteProgram(program);\n};\n\nexport const createBuffer = ({ context, attribute }) => {\n  const buffer = context.createBuffer();\n  context.bindBuffer(context.ARRAY_BUFFER, buffer);\n  context.bufferData(\n    context.ARRAY_BUFFER,\n    new Float32Array(attribute.array),\n    context.STATIC_DRAW\n  );\n  return {\n    buffer,\n    numComponents: attribute.numComponents,\n    count: Math.floor(attribute.array.length / attribute.numComponents),\n    type: context.FLOAT,\n    normalize: false,\n    offset: 0,\n    // how many bytes to get from one set of values to the next\n    // 0 = use type and numComponents above\n    stride: 0,\n  };\n};\n\nexport const createTexture = ({ context, index = 0 }) => {\n  const ctx = context;\n  const texture = ctx.createTexture();\n  ctx.activeTexture(ctx.TEXTURE0 + index);\n  ctx.bindTexture(ctx.TEXTURE_2D, texture);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_WRAP_S, ctx.CLAMP_TO_EDGE);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_WRAP_T, ctx.CLAMP_TO_EDGE);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_MIN_FILTER, ctx.NEAREST);\n  ctx.texParameteri(ctx.TEXTURE_2D, ctx.TEXTURE_MAG_FILTER, ctx.NEAREST);\n  // setup default texture data\n  ctx.texImage2D(\n    ctx.TEXTURE_2D,\n    0, // level\n    ctx.RGBA, // internal format\n    ctx.canvas.width,\n    ctx.canvas.height,\n    0, // border\n    ctx.RGBA, // src format\n    ctx.UNSIGNED_BYTE, // src type\n    null\n  );\n  return texture;\n};\n\nexport const dockBuffer = ({ context, location, buffer }) => {\n  context.bindBuffer(context.ARRAY_BUFFER, buffer.buffer);\n  context.vertexAttribPointer(\n    location,\n    buffer.numComponents,\n    buffer.type,\n    buffer.normalize,\n    buffer.stride,\n    buffer.offset\n  );\n};\n","// mirrorVertex.js\n\nconst mirrorVertex = `#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nuniform int uIsFrameBuffer;\nout vec2 vTextCoord;\n\nvoid main() {\n  vec4 position = aPosition;\n  if (1 == uIsFrameBuffer) {\n    // frame buffer axis is opposite with canvas.\n    position.y = -aPosition.y;\n  }\n  gl_Position = position;\n  vTextCoord = aTextCoord;\n}\n`;\n\nexport default mirrorVertex;\n","// greenBlueChannelFragment.js\n\nconst greenBlueChannelFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  float gbColor = 2.0 * originColor.b * originColor.g;\n  outColor = vec4(gbColor, gbColor, gbColor, originColor.a);\n}\n`;\n\nexport default greenBlueChannelFragment;\n","// GreenBlueChannel.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport greenBlueChannelFragmentShaderSource from '../shaderSource/greenBlueChannelFragment.js';\n\nconst GreenBlueChannel = function ({ context } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: greenBlueChannelFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n};\n\nGreenBlueChannel.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nGreenBlueChannel.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default GreenBlueChannel;\n","// gaussianBlurFragment.js\n\nconst gaussianBlurFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform vec2 uResolution;\nuniform int uKernalRadius;\nuniform float uKernelData[65];\nuniform int uIsVertical;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec2 delta = 1.0 / uResolution;\n  vec4 outputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\n  for (int index = -uKernalRadius; index <= uKernalRadius; index++) {\n    vec2 step = vec2(index, 0.0);\n    if (1 == uIsVertical) {\n      step = vec2(0.0, index);\n    }\n    vec2 offset = vTextCoord + step * delta;\n    outputColor += uKernelData[index + uKernalRadius] * texture(uSource, offset);\n  }\n\n  outColor = outputColor;\n}\n`;\n\nexport default gaussianBlurFragment;\n","// GaussianBlurFilter.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport gaussianBlurFragmentShaderSource from '../shaderSource/gaussianBlurFragment.js';\n\nconst getKernal = (inputRadius, sigma) => {\n  const radius = Math.floor(Math.abs(inputRadius));\n  const sigma2 = sigma * sigma;\n  const data = new Array(radius * 2 + 1);\n  let sum = 0;\n  for (let x = -radius; x <= radius; ++x) {\n    const index = x + radius;\n    data[index] =\n      Math.exp(-(x * x) / (2.0 * sigma2)) / Math.sqrt(2.0 * Math.PI * sigma2);\n    sum += data[index];\n  }\n  const normalizedData = data.map(value => value / sum);\n  return { data: new Float32Array(normalizedData), radius };\n};\n\nconst GaussianBlurFilter = function ({ context, radius = 16, sigma = 5 } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: gaussianBlurFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n  this.location.uResolution = context.getUniformLocation(\n    this.core.program,\n    'uResolution'\n  );\n  this.location.uKernalRadius = context.getUniformLocation(\n    this.core.program,\n    'uKernalRadius'\n  );\n  this.location.uKernelData = context.getUniformLocation(\n    this.core.program,\n    'uKernelData'\n  );\n  this.location.uIsVertical = context.getUniformLocation(\n    this.core.program,\n    'uIsVertical'\n  );\n\n  this.updateKernal({ radius, sigma });\n};\n\nGaussianBlurFilter.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nGaussianBlurFilter.prototype.updateKernal = function ({ radius, sigma } = {}) {\n  if (radius && isNaN(radius)) {\n    throw new Error('invalid radius');\n  }\n  if (radius && (32 < radius || 0 > radius)) {\n    throw new Error('radius must be [0, 32]');\n  }\n  if (sigma && isNaN(sigma)) {\n    throw new Error('invalid sigma');\n  }\n  if (sigma && 0 >= sigma) {\n    throw new Error('sigma must be > 0');\n  }\n  this._radius = radius || this._radius;\n  this._sigma = sigma || this._sigma;\n  this._kernal = getKernal(this._radius, this._sigma);\n\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform1i(this.location.uKernalRadius, this._kernal.radius);\n  context.uniform1fv(this.location.uKernelData, this._kernal.data);\n};\n\nGaussianBlurFilter.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  midFrameBuffer,\n  midTexture,\n  midTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform2f(\n    this.location.uResolution,\n    context.canvas.width,\n    context.canvas.height\n  );\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  context.bindFramebuffer(context.FRAMEBUFFER, midFrameBuffer);\n  context.uniform1i(this.location.uIsFrameBuffer, 1);\n  context.uniform1i(this.location.uIsVertical, 1);\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n\n  context.bindTexture(context.TEXTURE_2D, midTexture);\n  context.uniform1i(this.location.uSource, midTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.uniform1i(this.location.uIsVertical, 0);\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default GaussianBlurFilter;\n","// highPassFilterFragment.js\n\nconst highPassFilterFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uBlurredSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 blurredColor = texture(uBlurredSource, vTextCoord);\n  outColor = originColor - blurredColor + vec4(0.5, 0.5, 0.5, 1.0);\n}\n`;\n\nexport default highPassFilterFragment;\n","// HighPassFilter.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport highPassFilterFragmentShaderSource from '../shaderSource/highPassFilterFragment.js';\n\nconst HighPassFilter = function ({ context } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: highPassFilterFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n  this.location.uBlurredSource = context.getUniformLocation(\n    this.core.program,\n    'uBlurredSource'\n  );\n};\n\nHighPassFilter.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nHighPassFilter.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  blurredSourceTexture,\n  blurredSourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n  context.bindTexture(context.TEXTURE_2D, blurredSourceTexture);\n  context.uniform1i(this.location.uBlurredSource, blurredSourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default HighPassFilter;\n","// hardLightFragment.js\n// https://github.com/YuAo/YUGPUImageHighPassSkinSmoothing/blob/master/Sources/YUGPUImageHighPassSkinSmoothingFilter.m#L19\n\nconst hardLightFragment = `#version 300 es\nprecision highp float;\n\nuniform int uCycles;\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n\n  float color = originColor.b;\n  for (int i = 0; i < uCycles; ++i) {\n    if (color < 0.5) {\n      color = color * color * 2.0;\n    } else {\n      color = 1.0 - (1.0 - color) * (1.0 - color) * 2.0;\n    }\n  }\n\n  float k = 255.0 / (164.0 - 75.0);\n  color = (color - 75.0 / 255.0) * k;\n\n  outColor = vec4(color, color, color, originColor.a);;\n}\n`;\n\nexport default hardLightFragment;\n","// HardLight.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport hardLightFragmentShaderSource from '../shaderSource/hardLightFragment.js';\n\nconst HardLight = function ({ context, cycles = 3 } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: hardLightFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uCycles = context.getUniformLocation(\n    this.core.program,\n    'uCycles'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n\n  this.updateCycles({ cycles });\n};\n\nHardLight.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nHardLight.prototype.updateCycles = function ({ cycles } = {}) {\n  if (!cycles || isNaN(cycles)) {\n    throw new Error('invalid cycles argument');\n  }\n  this._cycles = Math.max(Math.floor(cycles), 0) || this._cycles;\n\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform1i(this.location.uCycles, this._cycles);\n};\n\nHardLight.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default HardLight;\n","// toneCurveFragment.js\n\nconst toneCurveFragment = `#version 300 es\nprecision highp float;\n\nuniform float uStrength;\nuniform sampler2D uSource;\nuniform sampler2D uTone;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 colorIndex = texture(uSource, vTextCoord);\n  float revStr = 1.0 - uStrength;\n  outColor = vec4(\n    uStrength * vec4(texture(uTone, vec2(colorIndex.r, 0))).r + revStr * colorIndex.r,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.g, 0))).g + revStr * colorIndex.g,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.b, 0))).b + revStr * colorIndex.b,\n    1.0\n  );\n}\n`;\n\nexport default toneCurveFragment;\n","// ToneCurve.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport { getCurvePoints } from '../resource/CardinalSpline.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport toneCurveFragmentShaderSource from '../shaderSource/toneCurveFragment.js';\n\nconst defaultRedControlPoints = [\n  { x: 0, y: 0 },\n  { x: 120, y: 146 }, // default\n  { x: 255, y: 255 },\n];\nconst defaultControlPoints = {\n  red: defaultRedControlPoints,\n  green: defaultRedControlPoints,\n  blue: defaultRedControlPoints,\n};\n\nconst ToneCurve = function ({\n  context,\n  toneMapTexture,\n  toneMapTextureIndex,\n  strength = 0.5,\n  controlPoints = defaultControlPoints,\n  tension = 0.5,\n} = {}) {\n  if (!context || !toneMapTexture || !toneMapTextureIndex) {\n    throw new Error('not enough arguments');\n  }\n  this.context = context;\n  this.toneMapTexture = toneMapTexture;\n  this.toneMapTextureIndex = toneMapTextureIndex;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: toneCurveFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uStrength = context.getUniformLocation(\n    this.core.program,\n    'uStrength'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n  this.location.uTone = context.getUniformLocation(this.core.program, 'uTone');\n\n  context.useProgram(this.core.program);\n  context.uniform1i(this.location.uTone, this.toneMapTextureIndex);\n\n  this.updateStrength({ strength });\n  this.updateCurvePoints({ controlPoints, tension });\n};\n\nToneCurve.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nToneCurve.prototype.updateStrength = function ({ strength } = {}) {\n  if (isNaN(strength)) {\n    throw new Error('invalid strength argument');\n  }\n  this._strength = Math.max(Math.min(strength, 1), 0) || this._strength;\n\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform1f(this.location.uStrength, this._strength);\n};\n\nToneCurve.prototype.updateCurvePoints = function ({\n  controlPoints,\n  tension,\n} = {}) {\n  if (\n    controlPoints &&\n    (!controlPoints.red || !controlPoints.green || !controlPoints.blue)\n  ) {\n    throw new Error('invalid controlPoints argument');\n  }\n  if (tension && isNaN(tension)) {\n    throw new Error('invalid tension argument');\n  }\n  if (\n    (!controlPoints || controlPoints === this._controlPoints) &&\n    (!tension || tension === this._tension)\n  ) {\n    return;\n  }\n  this._controlPoints = controlPoints || this._controlPoints;\n  this._tension = tension || this._tension;\n  this._curvePoints = {\n    red: getCurvePoints({\n      points: this._controlPoints.red,\n      tension: this._tension,\n    }),\n    green: getCurvePoints({\n      points: this._controlPoints.green,\n      tension: this._tension,\n    }),\n    blue: getCurvePoints({\n      points: this._controlPoints.blue,\n      tension: this._tension,\n    }),\n  };\n  this._curveImageData = new ImageData(\n    new Uint8ClampedArray(\n      new Array(256)\n        .fill(0)\n        .flatMap((_, index) => [\n          this._curvePoints.red[index].y,\n          this._curvePoints.green[index].y,\n          this._curvePoints.blue[index].y,\n          255,\n        ])\n    ),\n    256\n  );\n};\n\nToneCurve.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  context.bindTexture(context.TEXTURE_2D, this.toneMapTexture);\n  context.texImage2D(\n    context.TEXTURE_2D,\n    0, // mip level\n    context.RGBA, // internam format\n    context.RGBA, // src format\n    context.UNSIGNED_BYTE, // src type\n    this._curveImageData\n  );\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default ToneCurve;\n","// maskBlenderFragment.js\n\nconst maskBlenderFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uMask;\nuniform sampler2D uBlendSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 maskColor = texture(uMask, vTextCoord);\n  vec4 blendColor = texture(uBlendSource, vTextCoord);\n  outColor = vec4(mix(originColor.rgb, blendColor.rgb, 1.0 - maskColor.b), 1.0);\n}\n`;\n\nexport default maskBlenderFragment;\n","// MaskBlender.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport maskBlenderFragmentShaderSource from '../shaderSource/maskBlenderFragment.js';\n\nconst MaskBlender = function ({ context } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: maskBlenderFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n  this.location.uMask = context.getUniformLocation(this.core.program, 'uMask');\n  this.location.uBlendSource = context.getUniformLocation(\n    this.core.program,\n    'uBlendSource'\n  );\n};\n\nMaskBlender.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nMaskBlender.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  maskTexture,\n  maskTextureIndex,\n  blendSourceTexture,\n  blendSourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n  context.bindTexture(context.TEXTURE_2D, maskTexture);\n  context.uniform1i(this.location.uMask, maskTextureIndex);\n  context.bindTexture(context.TEXTURE_2D, blendSourceTexture);\n  context.uniform1i(this.location.uBlendSource, blendSourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default MaskBlender;\n","// fillColorFragment.js\n\nconst fillColorFragment = `#version 300 es\nprecision highp float;\n\nuniform vec4 uColor;\nout vec4 outColor;\n\nvoid main() {\n  outColor = uColor;\n}\n`;\n\nexport default fillColorFragment;\n","// FillColor.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport fillColorFragmentShaderSource from '../shaderSource/fillColorFragment.js';\n\nconst FillColor = function ({ context, color = [0, 0, 0, 1] } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: fillColorFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uColor = context.getUniformLocation(\n    this.core.program,\n    'uColor'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n\n  this.updateColor({ color });\n};\n\nFillColor.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nFillColor.prototype.updateColor = function ({ color } = {}) {\n  if (color && (!Array.isArray(color) || 4 !== color.length)) {\n    throw new Error('invalid color argument');\n  }\n  this._color = color || this._color;\n\n  const context = this.context;\n  context.useProgram(this.core.program);\n  context.uniform4f(this.location.uColor, ...this._color);\n};\n\nFillColor.prototype.draw = function ({ targetFrameBuffer } = {}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default FillColor;\n","// mirrorFragment.js\n\nconst mirrorFragment = `#version 300 es\nprecision highp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(uSource, vTextCoord);\n}\n`;\n\nexport default mirrorFragment;\n","// CopyTexture.js\nimport { createProgram, dockBuffer } from '../resource/WebGL.js';\nimport mirrorVertexShaderSource from '../shaderSource/mirrorVertex.js';\nimport mirrorFragmentShaderSource from '../shaderSource/mirrorFragment.js';\n\nconst CopyTexture = function ({ context } = {}) {\n  if (!context) {\n    throw new Error('need context arg');\n  }\n  this.context = context;\n\n  this.core = createProgram({\n    context,\n    vertexShaderSource: mirrorVertexShaderSource,\n    fragmentShaderSource: mirrorFragmentShaderSource,\n  });\n  this.buffer = {};\n\n  this.location = {};\n  this.location.aPosition = context.getAttribLocation(\n    this.core.program,\n    'aPosition'\n  );\n  this.location.aTextCoord = context.getAttribLocation(\n    this.core.program,\n    'aTextCoord'\n  );\n  context.enableVertexAttribArray(this.location.aPosition);\n  context.enableVertexAttribArray(this.location.aTextCoord);\n\n  this.location.uIsFrameBuffer = context.getUniformLocation(\n    this.core.program,\n    'uIsFrameBuffer'\n  );\n  this.location.uSource = context.getUniformLocation(\n    this.core.program,\n    'uSource'\n  );\n};\n\nCopyTexture.prototype.dockBuffer = function ({ key, buffer }) {\n  if (!['aPosition', 'aTextCoord'].includes(key)) {\n    throw new Error('invalid buffer name');\n  }\n  this.buffer[key] = buffer;\n  dockBuffer({ context: this.context, location: this.location[key], buffer });\n};\n\nCopyTexture.prototype.draw = function ({\n  sourceTexture,\n  sourceTextureIndex,\n  targetFrameBuffer,\n}) {\n  const context = this.context;\n  context.useProgram(this.core.program);\n\n  context.bindTexture(context.TEXTURE_2D, sourceTexture);\n  context.uniform1i(this.location.uSource, sourceTextureIndex);\n\n  if (targetFrameBuffer) {\n    context.bindFramebuffer(context.FRAMEBUFFER, targetFrameBuffer);\n    context.uniform1i(this.location.uIsFrameBuffer, 1);\n  } else {\n    context.bindFramebuffer(context.FRAMEBUFFER, null);\n    context.uniform1i(this.location.uIsFrameBuffer, 0);\n  }\n  context.drawArrays(context.TRIANGLES, 0, this.buffer.aPosition.count);\n};\n\nexport default CopyTexture;\n","// BeautifyFilter.js\nimport { createBuffer, createTexture } from '../resource/WebGL.js';\nimport GreenBlueChannel from '../resource/GreenBlueChannel.js';\nimport GaussianBlurFilter from '../resource/GaussianBlurFilter.js';\nimport HighPassFilter from '../resource/HighPassFilter.js';\nimport HardLight from '../resource/HardLight.js';\nimport ToneCurve from '../resource/ToneCurve.js';\nimport MaskBlender from '../resource/MaskBlender.js';\nimport FillColor from '../resource/FillColor.js';\nimport CopyTexture from '../resource/CopyTexture.js';\n\nconst textureNames = [\n  'source',\n  'greenBlueChannel',\n  'gaussianBlurMid',\n  'gaussianBlur',\n  'highPassFilter',\n  'hardLight',\n  'toneMap',\n  'toneCurve',\n  'maskBlender',\n];\nconst frameBufferNames = [\n  'greenBlueChannel',\n  'gaussianBlurMid',\n  'gaussianBlur',\n  'highPassFilter',\n  'hardLight',\n  'toneCurve',\n  'maskBlender',\n];\nconst textureIndex = textureNames.reduce(\n  (current, textureName, index) => ({ ...current, [textureName]: index }),\n  {}\n);\nconst clearColor = [0, 0, 0, 0];\nconst positionAttribute = {\n  array: [-1, -1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1],\n  numComponents: 2,\n};\nconst textCoordAttribute = {\n  array: [0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0],\n  numComponents: 2,\n};\n\nconst BeautifyFilter = function () {\n  const canvas = document.createElement('canvas');\n  this.canvas = canvas;\n\n  const context = canvas.getContext('webgl2');\n  this.context = context;\n  if (!context) {\n    throw new Error('Browser not support WebGL2.0');\n  }\n\n  this.slice = textureNames.reduce(\n    (current, textureName) => ({ ...current, [textureName]: {} }),\n    {}\n  );\n\n  this.buffer = {};\n  this.buffer.aPosition = createBuffer({\n    context,\n    attribute: positionAttribute,\n  });\n  this.buffer.aTextCoord = createBuffer({\n    context,\n    attribute: textCoordAttribute,\n  });\n\n  this.texture = {};\n  textureNames.forEach(name => {\n    this.texture[name] = createTexture({ context, index: textureIndex[name] });\n  });\n\n  this.frameBuffer = {};\n  frameBufferNames.forEach(name => {\n    this.frameBuffer[name] = context.createFramebuffer();\n    context.bindFramebuffer(context.FRAMEBUFFER, this.frameBuffer[name]);\n    context.framebufferTexture2D(\n      context.FRAMEBUFFER,\n      context.COLOR_ATTACHMENT0,\n      context.TEXTURE_2D,\n      this.texture[name],\n      0 // level\n    );\n  });\n\n  this.greenBlueChannel = new GreenBlueChannel({ context: this.context });\n  this.greenBlueChannel.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.greenBlueChannel.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.gaussianBlur = new GaussianBlurFilter({ context: this.context });\n  this.gaussianBlur.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.gaussianBlur.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.highPassFilter = new HighPassFilter({ context: this.context });\n  this.highPassFilter.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.highPassFilter.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.hardLight = new HardLight({ context: this.context });\n  this.hardLight.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.hardLight.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.toneCurve = new ToneCurve({\n    context: this.context,\n    toneMapTexture: this.texture.toneMap,\n    toneMapTextureIndex: textureIndex.toneMap,\n  });\n  this.toneCurve.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.toneCurve.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.maskBlender = new MaskBlender({ context: this.context });\n  this.maskBlender.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.maskBlender.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.fillColor = new FillColor({ context: this.context, color: clearColor });\n  this.fillColor.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.fillColor.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n\n  this.copyTexture = new CopyTexture({ context: this.context });\n  this.copyTexture.dockBuffer({\n    key: 'aPosition',\n    buffer: this.buffer.aPosition,\n  });\n  this.copyTexture.dockBuffer({\n    key: 'aTextCoord',\n    buffer: this.buffer.aTextCoord,\n  });\n};\n\nBeautifyFilter.prototype.draw = function ({ pixelSource }) {\n  if (!pixelSource || !this.context) {\n    return;\n  }\n\n  this.updateCanvasSize({ pixelSource });\n\n  const context = this.context;\n  context.clearColor(...clearColor);\n  context.clear(context.COLOR_BUFFER_BIT);\n\n  context.bindTexture(context.TEXTURE_2D, this.texture.source);\n  context.texImage2D(\n    context.TEXTURE_2D,\n    0, // mip level\n    context.RGBA, // internam format\n    context.RGBA, // src format\n    context.UNSIGNED_BYTE, // src type\n    pixelSource\n  );\n\n  this.exportTextureToCanvases({\n    texture: this.texture.source,\n    textureIndex: textureIndex.source,\n    canvases: this.slice['source'],\n  });\n\n  this.greenBlueChannel.draw({\n    sourceTexture: this.texture.source,\n    sourceTextureIndex: textureIndex.source,\n    targetFrameBuffer: this.frameBuffer.greenBlueChannel,\n  });\n\n  this.exportTextureToCanvases({\n    texture: this.texture.greenBlueChannel,\n    textureIndex: textureIndex.greenBlueChannel,\n    canvases: this.slice['greenBlueChannel'],\n  });\n\n  this.gaussianBlur.draw({\n    sourceTexture: this.texture.greenBlueChannel,\n    sourceTextureIndex: textureIndex.greenBlueChannel,\n    midFrameBuffer: this.frameBuffer.gaussianBlurMid,\n    midTexture: this.texture.gaussianBlurMid,\n    midTextureIndex: textureIndex.gaussianBlurMid,\n    targetFrameBuffer: this.frameBuffer.gaussianBlur,\n  });\n\n  this.exportTextureToCanvases({\n    texture: this.texture.gaussianBlur,\n    textureIndex: textureIndex.gaussianBlur,\n    canvases: this.slice['gaussianBlur'],\n  });\n\n  this.highPassFilter.draw({\n    sourceTexture: this.texture.greenBlueChannel,\n    sourceTextureIndex: textureIndex.greenBlueChannel,\n    blurredSourceTexture: this.texture.gaussianBlur,\n    blurredSourceTextureIndex: textureIndex.gaussianBlur,\n    targetFrameBuffer: this.frameBuffer.highPassFilter,\n  });\n\n  this.exportTextureToCanvases({\n    texture: this.texture.highPassFilter,\n    textureIndex: textureIndex.highPassFilter,\n    canvases: this.slice['highPassFilter'],\n  });\n\n  this.hardLight.draw({\n    sourceTexture: this.texture.highPassFilter,\n    sourceTextureIndex: textureIndex.highPassFilter,\n    targetFrameBuffer: this.frameBuffer.hardLight,\n  });\n\n  this.exportTextureToCanvases({\n    texture: this.texture.hardLight,\n    textureIndex: textureIndex.hardLight,\n    canvases: this.slice['hardLight'],\n  });\n\n  this.toneCurve.draw({\n    sourceTexture: this.texture.source,\n    sourceTextureIndex: textureIndex.source,\n    targetFrameBuffer: this.frameBuffer.toneCurve,\n  });\n\n  this.exportTextureToCanvases({\n    texture: this.texture.toneCurve,\n    textureIndex: textureIndex.toneCurve,\n    canvases: this.slice['toneCurve'],\n  });\n\n  this.maskBlender.draw({\n    sourceTexture: this.texture.source,\n    sourceTextureIndex: textureIndex.source,\n    maskTexture: this.texture.hardLight,\n    maskTextureIndex: textureIndex.hardLight,\n    blendSourceTexture: this.texture.toneCurve,\n    blendSourceTextureIndex: textureIndex.toneCurve,\n    targetFrameBuffer: this.frameBuffer.maskBlender,\n  });\n\n  this.exportTextureToCanvases({\n    texture: this.texture.maskBlender,\n    textureIndex: textureIndex.maskBlender,\n    canvases: this.slice['maskBlender'],\n  });\n\n  this.copyTexture.draw({\n    sourceTexture: this.texture.maskBlender,\n    sourceTextureIndex: textureIndex.maskBlender,\n  });\n};\n\nBeautifyFilter.prototype.updateCanvasSize = function ({ pixelSource }) {\n  if (!pixelSource || !this.context) {\n    return;\n  }\n\n  const context = this.context;\n  let sourceWidth = this.context.canvas.width;\n  let sourceHeight = this.context.canvas.height;\n  if ('VIDEO' === pixelSource.nodeName) {\n    sourceWidth = pixelSource.videoWidth;\n    sourceHeight = pixelSource.videoHeight;\n  } else if ('CANVAS' === pixelSource.nodeName) {\n    sourceWidth = pixelSource.width;\n    sourceHeight = pixelSource.height;\n  }\n\n  const canvasWidth = context.canvas.width;\n  const canvasHeight = context.canvas.height;\n  if (canvasWidth !== sourceWidth || canvasHeight !== sourceHeight) {\n    context.canvas.width = sourceWidth;\n    context.canvas.height = sourceHeight;\n    context.viewport(0, 0, sourceWidth, sourceHeight);\n    // update texture sizes\n    Object.keys(this.texture).forEach(textureKey => {\n      const texture = this.texture[textureKey];\n      context.bindTexture(context.TEXTURE_2D, texture);\n      context.texImage2D(\n        context.TEXTURE_2D,\n        0, // level\n        context.RGBA, // internal format\n        sourceWidth,\n        sourceHeight,\n        0, // border\n        context.RGBA, // src format\n        context.UNSIGNED_BYTE, // src type\n        null\n      );\n    });\n  }\n};\n\nBeautifyFilter.prototype.registerSlice = function ({\n  key = 'greenBlueChannel',\n  sliceId,\n  canvas,\n}) {\n  if (\n    !textureNames.includes(key) ||\n    !sliceId ||\n    !canvas ||\n    'CANVAS' !== canvas.nodeName\n  ) {\n    return;\n  }\n  return (this.slice[key][sliceId] = canvas);\n};\n\nBeautifyFilter.prototype.unregisterSlice = function ({\n  key = 'greenBlueChannel',\n  sliceId,\n}) {\n  if (!textureNames.includes(key) || !sliceId) {\n    return;\n  }\n  return delete this.slice[key][sliceId];\n};\n\nBeautifyFilter.prototype.exportTextureToCanvases = function ({\n  texture,\n  textureIndex,\n  canvases,\n}) {\n  const canvasArray = Object.keys(canvases).map(id => canvases[id]);\n  if (!texture || isNaN(textureIndex) || !canvasArray.length) return;\n\n  const targetContexts = canvasArray\n    .map(canvas => {\n      if ('CANVAS' !== canvas?.nodeName) return;\n      return canvas.getContext('2d');\n    })\n    .filter(Boolean);\n  if (!targetContexts.length) return;\n\n  this.copyTexture.draw({\n    sourceTexture: texture,\n    sourceTextureIndex: textureIndex,\n  });\n\n  targetContexts.forEach(targetContext => {\n    const sourceCanvas = this.canvas;\n    const sourceWidth = sourceCanvas.width;\n    const sourceHeight = sourceCanvas.height;\n\n    const targetWidth = targetContext.canvas.width;\n    const targetHeight = targetContext.canvas.height;\n\n    if (targetWidth !== sourceWidth || targetHeight !== sourceHeight) {\n      targetContext.canvas.width = sourceWidth;\n      targetContext.canvas.height = sourceHeight;\n    }\n    targetContext.clearRect(0, 0, sourceWidth, sourceHeight);\n    targetContext.drawImage(sourceCanvas, 0, 0);\n  });\n\n  this.fillColor.draw();\n};\n\nBeautifyFilter.prototype.updateGaussianBlurKernal = function ({\n  radius,\n  sigma,\n} = {}) {\n  return this.gaussianBlur.updateKernal({ radius, sigma });\n};\n\nBeautifyFilter.prototype.updateHardLightCycles = function ({ cycles } = {}) {\n  return this.hardLight.updateCycles({ cycles });\n};\n\nBeautifyFilter.prototype.updateToneCurveData = function ({\n  strength,\n  controlPoints,\n  tension,\n} = {}) {\n  this.toneCurve.updateCurvePoints({ controlPoints, tension });\n  return this.toneCurve.updateStrength({ strength });\n};\n\nexport default BeautifyFilter;\n","// Main.jsx\nimport React, { useState, useRef, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport MediaStreamHandler from '../component/MediaStreamHandler.jsx';\nimport FilterPanel from '../component/FilterPanel.jsx';\nimport SliceMonitor from '../component/SliceMonitor.jsx';\nimport GaussianBlurPanel from '../component/GaussianBlurPanel.jsx';\nimport HardLightPanel from '../component/HardLightPanel.jsx';\nimport ToneCurvePanel from '../component/ToneCurvePanel.jsx';\nimport { defaultToneCurveControlPoints } from '../component/ToneCurveEditor.jsx';\n\nimport BeautifyFilter from '../resource/BeautifyFilter.js';\n\nconst Main = () => {\n  const [error, setError] = useState();\n  const [mediaStream, setMediaStream] = useState();\n  const [gaussianBlur, setGaussianBlur] = useState({ radius: 16, sigma: 5 });\n  const [hardLight, setHardLight] = useState({ cycles: 3 });\n  const [toneCurve, setToneCurve] = useState({\n    strength: 0.5,\n    controlPoints: defaultToneCurveControlPoints,\n    tension: 0.0,\n  });\n  const sourceVideo = useRef();\n  const beautifyFilter = useRef();\n  const registerSlice = useRef();\n  const unregisterSlice = useRef();\n\n  useEffect(() => {\n    const video = document.createElement('video');\n    // required to tell iOS safari we don't want fullscreen\n    video.setAttribute('playsinline', true);\n    sourceVideo.current = video;\n\n    try {\n      beautifyFilter.current = new BeautifyFilter();\n    } catch (error) {\n      setError(error);\n    }\n    window.beautifyFilter = beautifyFilter.current;\n    registerSlice.current = args => beautifyFilter.current?.registerSlice(args);\n    unregisterSlice.current = args =>\n      beautifyFilter.current?.unregisterSlice(args);\n    return () => {\n      video.srcObject = null;\n      return video.pause();\n    };\n  }, []);\n\n  useEffect(() => {\n    sourceVideo.current.srcObject = mediaStream;\n    if (mediaStream) {\n      sourceVideo.current.play();\n    } else {\n      sourceVideo.current.pause();\n    }\n  }, [mediaStream]);\n\n  useEffect(() => {\n    beautifyFilter.current?.updateGaussianBlurKernal(gaussianBlur);\n  }, [gaussianBlur]);\n\n  useEffect(() => {\n    beautifyFilter.current?.updateHardLightCycles(hardLight);\n  }, [hardLight]);\n\n  useEffect(() => {\n    beautifyFilter.current?.updateToneCurveData(toneCurve);\n  }, [toneCurve]);\n\n  return (\n    <StyledMain>\n      {error && <ErrorPanel>{error.message}</ErrorPanel>}\n      <MediaStreamHandler onChange={({ value }) => setMediaStream(value)} />\n      <Modules>\n        <ModuleWrapper>\n          <FilterPanel\n            filterName=\"BeautifyFilterPanel\"\n            filterCore={beautifyFilter.current}\n            pixelSource={sourceVideo.current}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <SliceMonitor\n            sliceKey=\"source\"\n            sliceName=\"Source\"\n            registerSlice={registerSlice.current}\n            unregisterSlice={unregisterSlice.current}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <SliceMonitor\n            sliceKey=\"greenBlueChannel\"\n            sliceName=\"GreenBlueChannel\"\n            registerSlice={registerSlice.current}\n            unregisterSlice={unregisterSlice.current}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <GaussianBlurPanel\n            registerSlice={registerSlice.current}\n            unregisterSlice={unregisterSlice.current}\n            radius={gaussianBlur.radius}\n            sigma={gaussianBlur.sigma}\n            onChange={setGaussianBlur}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <SliceMonitor\n            sliceKey=\"highPassFilter\"\n            sliceName=\"HighPassFilter\"\n            registerSlice={registerSlice.current}\n            unregisterSlice={unregisterSlice.current}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <HardLightPanel\n            registerSlice={registerSlice.current}\n            unregisterSlice={unregisterSlice.current}\n            cycles={hardLight.cycles}\n            onChange={setHardLight}\n          />\n        </ModuleWrapper>\n        <ModuleWrapper>\n          <ToneCurvePanel\n            registerSlice={registerSlice.current}\n            unregisterSlice={unregisterSlice.current}\n            strength={toneCurve.strength}\n            controlPoints={toneCurve.controlPoints}\n            tension={toneCurve.tension}\n            onChange={setToneCurve}\n          />\n        </ModuleWrapper>\n      </Modules>\n    </StyledMain>\n  );\n};\n\nconst StyledMain = styled.div`\n  padding: 8px;\n`;\n\nconst ErrorPanel = styled.div`\n  border-radius: 8px;\n  background-color: #eb4d4b;\n  padding: 8px;\n  margin-bottom: 8px;\n`;\n\nconst Modules = styled.div`\n  display: grid;\n  gap: 8px;\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  margin-top: 8px;\n`;\n\nconst ModuleWrapper = styled.div``;\n\nexport default Main;\n","export default __webpack_public_path__ + \"img/github-icon.e1201fcc.svg\";","// Footer.jsx\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\n\nimport EmailIcon from '../../img/email-icon.svg';\nimport GithubIcon from '../../img/github-icon.svg';\n\nconst githubBaseUrl = 'https://github.com/bill42362/portfolio';\n\nexport class Footer extends React.PureComponent {\n  render() {\n    const { email, branchName } = this.props;\n    const githubUrl = branchName\n      ? `${githubBaseUrl}/tree/${branchName}`\n      : githubBaseUrl;\n    return (\n      <StyledFooter>\n        <Link href={githubUrl} target=\"_blank\">\n          <img src={GithubIcon} alt=\"github\" />\n        </Link>\n        <Link href={`mailto:${email}`} target=\"_blank\">\n          <img src={EmailIcon} alt=\"email\" />\n        </Link>\n      </StyledFooter>\n    );\n  }\n}\n\nFooter.propTypes = {\n  email: PropTypes.string,\n  branchName: PropTypes.string,\n};\n\nFooter.defaultProps = {\n  email: 'bill42362@gmail.com',\n  branchName: '',\n};\n\nconst StyledFooter = styled.div`\n  flex: auto;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  padding: 20px;\n`;\n\nconst Link = styled.a`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 50%;\n  width: 36px;\n  height: 36px;\n  background-color: #576574;\n\n  & + & {\n    margin-left: 8px;\n  }\n  img {\n    width: 60%;\n    height: auto;\n  }\n`;\n\nexport default Footer;\n","export default \"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNNDY3LDYxSDQ1QzIwLjIxOCw2MSwwLDgxLjE5NiwwLDEwNnYzMDBjMCwyNC43MiwyMC4xMjgsNDUsNDUsNDVoNDIyYzI0LjcyLDAsNDUtMjAuMTI4LDQ1LTQ1VjEwNiBDNTEyLDgxLjI4LDQ5MS44NzIsNjEsNDY3LDYxeiBNNDYwLjc4Niw5MUwyNTYuOTU0LDI5NC44MzNMNTEuMzU5LDkxSDQ2MC43ODZ6IE0zMCwzOTkuNzg4VjExMi4wNjlsMTQ0LjQ3OSwxNDMuMjRMMzAsMzk5Ljc4OHogTTUxLjIxMyw0MjFsMTQ0LjU3LTE0NC41N2w1MC42NTcsNTAuMjIyYzUuODY0LDUuODE0LDE1LjMyNyw1Ljc5NSwyMS4xNjctMC4wNDZMMzE3LDI3Ny4yMTNMNDYwLjc4Nyw0MjFINTEuMjEzeiBNNDgyLDM5OS43ODcgTDMzOC4yMTMsMjU2TDQ4MiwxMTIuMjEyVjM5OS43ODd6Ii8+PC9zdmc+\"","// index.js\n'use strict';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './component/App.jsx';\n\nReactDOM.render(<App />, document.getElementById('app-root'));\n"],"sourceRoot":""}