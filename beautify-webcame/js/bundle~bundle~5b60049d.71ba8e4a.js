(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[1],{147:function(e,t,r){"use strict";(function(e){r(19),r(164),r(122),r(166),r(16),r(126),r(127),r(58),r(129);var n,o=r(0),i=r.n(o),a=r(2),u=r.n(a),c=r(1),l=r(148),s=r.n(l),f=r(152),d=r(156),h=r(157),m=r(155);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var b,x,w=Object(c.createGlobalStyle)(n||(b=["\n  ",';\n  *, ::after, ::before { box-sizing: border-box; }\n  body {\n    background-color: #101010;\n    color: #efefef;\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue",\n      Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-weight: 400;\n    -webkit-tap-highlight-color: transparent;\n    overscroll-behavior-y: contain;\n  }\n  button {\n    background-color: rgba(0, 0, 0, 0);\n    cursor: pointer;\n    &:disabled {\n      cursor: not-allowed;\n    }\n  }\n  input::placeholder,\n  input::-webkit-input-placeholder,\n  input::-moz-placeholder {\n    line-height: normal !important;\n    vertical-align: middle;\n  }\n  a { color: inherit; text-decoration: none; }\n  a > * { opacity: inherit; }\n  a:hover { opacity: .7; }\n'],x||(x=b.slice(0)),n=Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(x)}}))),s.a),C="undefined"==typeof window,S="Portfolio",E="Bill's portfolio",T=C?e.env.BRANCH_NAME:window.__SSR_ENVIRONMENT__.branchName,P=function(e){var t=e.request;return console.log("App() request:",t),i.a.createElement(i.a.Fragment,null,i.a.createElement(f.a,{defaultTitle:"Portfolio",titleTemplate:"%s - Portfolio"},i.a.createElement("meta",{charSet:"utf-8"}),i.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),i.a.createElement("meta",{name:"author",content:"Bill"}),i.a.createElement("meta",{name:"description",content:E}),i.a.createElement("meta",{property:"og:url",content:"https://github.com/bill42362/portfolio"}),i.a.createElement("meta",{property:"og:type",content:"website"}),i.a.createElement("meta",{property:"og:title",content:S}),i.a.createElement("meta",{property:"og:description",content:E}),i.a.createElement("meta",{property:"og:site_name",content:S}),i.a.createElement("meta",{property:"twitter:card",content:"summary"}),i.a.createElement("meta",{property:"twitter:site",content:"@bill_portfolio"})),i.a.createElement(w,null),i.a.createElement(I,null,!window&&i.a.createElement("img",{src:m.a,title:"Xavier school"}),i.a.createElement(d.a,null),i.a.createElement(h.a,{branchName:T})))};P.propTypes={request:u.a.object},P.defaultProps={request:null};var I=c.default.div.withConfig({displayName:"App__StyledApp",componentId:"sc-1v2nrsx-0"})(["display:flex;flex-direction:column;justify-content:center;min-height:100vh;background-color:#222f3e;"]),_=function(e){var t=e.sheet,r=y(e,["sheet"]);return t.instance?i.a.createElement(c.StyleSheetManager,{sheet:t.instance},i.a.createElement(P,r)):i.a.createElement(P,r)};_.propTypes=g(g({},P.propTypes),{},{sheet:u.a.object}),_.defaultProps=g(g({},P.defaultProps),{},{sheet:{}}),t.a=_}).call(this,r(108))},155:function(e,t,r){"use strict";t.a=r.p+"img/x-men-school.0928a818.svg"},156:function(e,t,r){"use strict";r(16),r(21),r(15),r(22),r(23),r(11),r(24),r(19),r(28),r(29);var n=r(0),o=r.n(n),i=r(1),a=(r(180),r(76),r(58),r(134),r(135),r(182),r(2)),u=r.n(a),c=Object(i.css)(["border:none;padding:0px;outline:none;background:none;"]);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,u,"next",e)}function u(e){s(i,n,o,a,u,"throw",e)}a(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,r,n,i=p(a);function a(){var e;d(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(e=i.call.apply(i,[this].concat(r))).state={isStarted:!1,shouldPreview:!1,mediaStream:null,error:!1},e.video=o.a.createRef(),e.startRecording=f(regeneratorRuntime.mark((function t(){var r,n,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,n=r.onChange,o=r.onError,t.prev=1,e.setState({isStarted:!0}),t.next=5,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{min:1024,ideal:1280,max:1920},height:{min:576,ideal:720,max:1080}}});case 5:return i=t.sent,e.setState({mediaStream:i}),t.abrupt("return",n({value:i}));case 10:return t.prev=10,t.t0=t.catch(1),e.setState({error:t.t0,isStarted:!1}),t.abrupt("return",o({error:t.t0,target:v(e)}));case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.stopRecording=function(){var t=e.state.mediaStream,r=e.props.onChange;t&&(t.getTracks().forEach((function(e){return e.stop()})),r({value:null}),e.setState({mediaStream:null,isStarted:!1,shouldPreview:!1}))},e.renderDescription=function(){var t=e.state,r=t.isStarted,n=t.mediaStream,o=t.error;return r?n?"Media stream id: ".concat(n.id):"Loading mediaStream ...":o?"Error: ".concat(JSON.stringify(o.message)):"Idle"},e.renderBody=function(){var t=e.state.shouldPreview;return o.a.createElement(C,null,o.a.createElement("div",null,e.renderDescription()),t&&o.a.createElement("video",{ref:e.video,playsInline:!0}))},e.handleTogglePreview=function(){var t=e.state,r=t.mediaStream,n=t.shouldPreview;if(r)return e.setState({shouldPreview:!n})},e}return t=a,(r=[{key:"componentDidUpdate",value:function(e,t){var r=this.state,n=r.mediaStream,o=r.shouldPreview;o&&o!==t.shouldPreview&&(this.video.current.srcObject=n,this.video.current.play())}},{key:"componentWillUnmount",value:function(){this.stopRecording()}},{key:"render",value:function(){var e=this.state,t=e.mediaStream,r=e.shouldPreview;return o.a.createElement(x,null,o.a.createElement(w,null,"MediaStreamHandler"),this.renderBody(),o.a.createElement(S,null,t?o.a.createElement(P,{onClick:this.stopRecording},"Stop"):o.a.createElement(T,{onClick:this.startRecording},"Start"),o.a.createElement(I,{isActived:r,disabled:!t,onClick:this.handleTogglePreview},"Preview")))}}])&&h(t.prototype,r),n&&h(t,n),a}(o.a.PureComponent);b.propTypes={onChange:u.a.func,onError:u.a.func},b.defaultProps={onChange:function(){return null},onError:function(){return null}};var x=i.default.div.withConfig({displayName:"MediaStreamHandler__StyledMediaStreamHandler",componentId:"ah9iko-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),w=i.default.div.withConfig({displayName:"MediaStreamHandler__Header",componentId:"ah9iko-1"})(["background-color:#4834d4;padding:8px;"]),C=i.default.div.withConfig({displayName:"MediaStreamHandler__Body",componentId:"ah9iko-2"})(["position:relative;background-color:#686de0;padding:8px;& > video{margin-top:8px;width:100%;}"]),S=i.default.div.withConfig({displayName:"MediaStreamHandler__Footer",componentId:"ah9iko-3"})(["background-color:#4834d4;padding:8px;"]),E=i.default.button.withConfig({displayName:"MediaStreamHandler__Button",componentId:"ah9iko-4"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],c),T=Object(i.default)(E).withConfig({displayName:"MediaStreamHandler__StartButton",componentId:"ah9iko-5"})(["background-color:#6ab04c;"]),P=Object(i.default)(E).withConfig({displayName:"MediaStreamHandler__StopButton",componentId:"ah9iko-6"})(["background-color:#eb4d4b;"]),I=Object(i.default)(E).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"MediaStreamHandler__ToggleButton",componentId:"ah9iko-7"})([""]),_=b;function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=e.filterName,r=e.filterCore,i=e.pixelSource,a=B(Object(n.useState)(!1),2),u=a[0],c=a[1],l=B(Object(n.useState)(30),2),s=l[0],f=l[1],d=B(Object(n.useState)(0),2),h=d[0],m=d[1],p=Object(n.useRef)(),g=Object(n.useRef)(0),v=Object(n.useRef)();return Object(n.useEffect)((function(){if(u)return window.cancelAnimationFrame(p.current),p.current=window.requestAnimationFrame((function e(t){u&&(p.current=window.requestAnimationFrame(e));var n=1e3/s,o=t-g.current;o>=n&&(g.current=t,function(){var e=v.current.getContext("2d");if(e){var t=e.canvas.width,n=e.canvas.height;if("VIDEO"==i.nodeName?(t=i.videoWidth,n=i.videoHeight):"CANVAS"===i.nodeName&&(t=i.width,n=i.height),t&&n){r.draw({pixelSource:i});var o=e.canvas.width,a=e.canvas.height;o===t&&a===n||(e.canvas.width=t,e.canvas.height=n),e.clearRect(0,0,t,n),e.drawImage(r.canvas,0,0)}}}(),m(Math.ceil(1e3/o)))})),function(){return window.cancelAnimationFrame(p.current)};window.cancelAnimationFrame(p.current)}),[u,s,r,i]),o.a.createElement(j,null,o.a.createElement(F,null,t),o.a.createElement(O,null,o.a.createElement("canvas",{ref:v})),o.a.createElement(R,null,o.a.createElement(M,{isActived:u,disabled:!i,onClick:function(){return c(!u)}},"Draw"),o.a.createElement("span",null,"FPS: ",h),o.a.createElement(L,null,o.a.createElement(D,null,o.a.createElement("span",null,"Max FPS: ",s),o.a.createElement("input",{type:"range",min:"1",max:"60",step:"1",value:s,onChange:function(e){return f(e.target.value)}})))))};k.propTypes={filterName:u.a.string,filterCore:u.a.object,pixelSource:u.a.object},k.defaultProps={filterName:"",filterCore:null,pixelSource:null};var j=i.default.div.withConfig({displayName:"FilterPanel__StyledFilterPanel",componentId:"ss4wk6-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),F=i.default.div.withConfig({displayName:"FilterPanel__Header",componentId:"ss4wk6-1"})(["background-color:#4834d4;padding:8px;"]),O=i.default.div.withConfig({displayName:"FilterPanel__Body",componentId:"ss4wk6-2"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),N=i.default.button.withConfig({displayName:"FilterPanel__Button",componentId:"ss4wk6-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],c),R=i.default.div.withConfig({displayName:"FilterPanel__Footer",componentId:"ss4wk6-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),M=Object(i.default)(N).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"FilterPanel__DrawButton",componentId:"ss4wk6-5"})([""]),L=i.default.div.withConfig({displayName:"FilterPanel__Controls",componentId:"ss4wk6-6"})(["margin-top:8px;"]),D=i.default.label.withConfig({displayName:"FilterPanel__Label",componentId:"ss4wk6-7"})(["display:flex;input{flex:1;margin-left:8px;}"]),U=k;function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){var t=e.sliceKey,r=e.sliceName,i=e.registerSlice,a=e.unregisterSlice,u=G(Object(n.useState)(!1),2),c=u[0],l=u[1],s=Object(n.useRef)(),f=Object(n.useRef)(Math.random());return Object(n.useEffect)((function(){var e=function(){return a({key:t,sliceId:f.current})};return e(),c&&i({key:t,sliceId:f.current,canvas:s.current}),e}),[t,c,i,a]),o.a.createElement(V,null,o.a.createElement(X,null,o.a.createElement(q,null,r),o.a.createElement(Q,{isActived:c,onClick:function(){return l(!c)}},"Open")),c&&o.a.createElement(o.a.Fragment,null,o.a.createElement(K,null,o.a.createElement("canvas",{ref:s})),o.a.createElement(Y,null)))};z.propTypes={sliceKey:u.a.string,sliceName:u.a.string,registerSlice:u.a.func,unregisterSlice:u.a.func},z.defaultProps={sliceKey:"greenBlueChannel",sliceName:"",registerSlice:function(){return null},unregisterSlice:function(){return null}};var V=i.default.div.withConfig({displayName:"SliceMonitor__StyledSliceMonitor",componentId:"n9hfqv-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),X=i.default.div.withConfig({displayName:"SliceMonitor__Header",componentId:"n9hfqv-1"})(["display:flex;background-color:#4834d4;padding:8px;"]),q=i.default.div.withConfig({displayName:"SliceMonitor__Title",componentId:"n9hfqv-2"})(["flex:1;align-self:center;"]),K=i.default.div.withConfig({displayName:"SliceMonitor__Body",componentId:"n9hfqv-3"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),Y=i.default.div.withConfig({displayName:"SliceMonitor__Footer",componentId:"n9hfqv-4"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),W=i.default.button.withConfig({displayName:"SliceMonitor__Button",componentId:"n9hfqv-5"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],c),Q=Object(i.default)(W).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"SliceMonitor__EnableButton",componentId:"n9hfqv-6"})([""]),$=z;function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ee="gaussianBlur",te=function(e){var t=e.registerSlice,r=e.unregisterSlice,i=e.radius,a=e.sigma,u=e.onChange,c=Z(Object(n.useState)(!1),2),l=c[0],s=c[1],f=Object(n.useRef)(),d=Object(n.useRef)(Math.random());return Object(n.useEffect)((function(){var e=function(){return r({key:ee,sliceId:d.current})};return e(),l&&t({key:ee,sliceId:d.current,canvas:f.current}),e}),[l,t,r]),o.a.createElement(re,null,o.a.createElement(ne,null,o.a.createElement(oe,null,"GaussianBlurPanel"),o.a.createElement(ae,{isActived:l,onClick:function(){return s(!l)}},"Open")),l&&o.a.createElement(ue,null,o.a.createElement("canvas",{ref:f})),o.a.createElement(ce,null,o.a.createElement(le,null,o.a.createElement(se,null,o.a.createElement("span",null,"Radius: ",i),o.a.createElement("input",{type:"range",min:"1",max:"32",step:"1",value:i,onChange:function(e){return u({radius:+e.target.value,sigma:a})}})),o.a.createElement(se,null,o.a.createElement("span",null,"Sigma: ",a),o.a.createElement("input",{type:"range",min:"0.1",max:"20",step:"0.1",value:a,onChange:function(e){return u({sigma:+e.target.value,radius:i})}})))))};te.propTypes={registerSlice:u.a.func,unregisterSlice:u.a.func,radius:u.a.number,sigma:u.a.number,onChange:u.a.func},te.defaultProps={registerSlice:function(){return null},unregisterSlice:function(){return null},radius:16,sigma:16,onChange:function(){return null}};var re=i.default.div.withConfig({displayName:"GaussianBlurPanel__StyledGaussianBlur",componentId:"jwifs5-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),ne=i.default.div.withConfig({displayName:"GaussianBlurPanel__Header",componentId:"jwifs5-1"})(["display:flex;background-color:#4834d4;padding:8px;"]),oe=i.default.div.withConfig({displayName:"GaussianBlurPanel__Title",componentId:"jwifs5-2"})(["flex:1;align-self:center;"]),ie=i.default.button.withConfig({displayName:"GaussianBlurPanel__Button",componentId:"jwifs5-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],c),ae=Object(i.default)(ie).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"GaussianBlurPanel__EnableButton",componentId:"jwifs5-4"})([""]),ue=i.default.div.withConfig({displayName:"GaussianBlurPanel__Body",componentId:"jwifs5-5"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),ce=i.default.div.withConfig({displayName:"GaussianBlurPanel__Footer",componentId:"jwifs5-6"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),le=i.default.div.withConfig({displayName:"GaussianBlurPanel__Controls",componentId:"jwifs5-7"})(["margin-top:8px;"]),se=i.default.label.withConfig({displayName:"GaussianBlurPanel__Label",componentId:"jwifs5-8"})(["display:flex;input{flex:1;margin-left:8px;}"]),fe=te;function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var me="hardLight",pe=function(e){var t=e.registerSlice,r=e.unregisterSlice,i=e.cycles,a=e.onChange,u=de(Object(n.useState)(!1),2),c=u[0],l=u[1],s=Object(n.useRef)(),f=Object(n.useRef)(Math.random());return Object(n.useEffect)((function(){var e=function(){return r({key:me,sliceId:f.current})};return e(),c&&t({key:me,sliceId:f.current,canvas:s.current}),e}),[c,t,r]),o.a.createElement(ge,null,o.a.createElement(ve,null,o.a.createElement(ye,null,"HardLightPanel"),o.a.createElement(xe,{isActived:c,onClick:function(){return l(!c)}},"Open")),c&&o.a.createElement(we,null,o.a.createElement("canvas",{ref:s})),o.a.createElement(Ce,null,o.a.createElement(Se,null,o.a.createElement(Ee,null,o.a.createElement("span",null,"Cycles: ",i),o.a.createElement("input",{type:"range",min:"1",max:"8",step:"1",value:i,onChange:function(e){return a({cycles:+e.target.value})}})))))};pe.propTypes={registerSlice:u.a.func,unregisterSlice:u.a.func,cycles:u.a.number,onChange:u.a.func},pe.defaultProps={registerSlice:function(){return null},unregisterSlice:function(){return null},cycles:3,onChange:function(){return null}};var ge=i.default.div.withConfig({displayName:"HardLightPanel__StyledHardLight",componentId:"mnw1f1-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),ve=i.default.div.withConfig({displayName:"HardLightPanel__Header",componentId:"mnw1f1-1"})(["display:flex;background-color:#4834d4;padding:8px;"]),ye=i.default.div.withConfig({displayName:"HardLightPanel__Title",componentId:"mnw1f1-2"})(["flex:1;align-self:center;"]),be=i.default.button.withConfig({displayName:"HardLightPanel__Button",componentId:"mnw1f1-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],c),xe=Object(i.default)(be).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"HardLightPanel__EnableButton",componentId:"mnw1f1-4"})([""]),we=i.default.div.withConfig({displayName:"HardLightPanel__Body",componentId:"mnw1f1-5"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),Ce=i.default.div.withConfig({displayName:"HardLightPanel__Footer",componentId:"mnw1f1-6"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),Se=i.default.div.withConfig({displayName:"HardLightPanel__Controls",componentId:"mnw1f1-7"})(["margin-top:8px;"]),Ee=i.default.label.withConfig({displayName:"HardLightPanel__Label",componentId:"mnw1f1-8"})(["display:flex;input{flex:1;margin-left:8px;}"]),Te=pe;r(78),r(189),r(80),r(190);function Pe(e){return function(e){if(Array.isArray(e))return Ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _e=function(e){var t=e.tension,r=e.k0,n=e.k2;return(1-t)*(n.y-r.y)/(n.x-r.x)},Be=function(e){var t=e.tension,r=e.p0,n=e.p1,o=e.p2,i=e.p3;return function(e){return function(e){return(1+2*e)*(1-e)*(1-e)}(e)*n.y+function(e){return e*(1-e)*(1-e)}(e)*(o.x-n.x)*_e({tension:t,k0:r,k2:o})+function(e){return e*e*(3-2*e)}(e)*o.y+function(e){return e*e*(e-1)}(e)*(o.x-n.x)*_e({tension:t,k0:n,k2:i})}},Ae=function(e){var t=e.points,r=t[0],n=t[1],o=t[t.length-1],i=t[t.length-2];return[{x:r.x-(n.x-r.x),y:r.y-(n.y-r.y)}].concat(Pe(t),[{x:o.x+(o.x-i.x),y:o.y+(o.y-i.y)}])},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.points,r=void 0===t?[{x:0,y:0},{x:255,y:255}]:t,n=e.tension,o=void 0===n?.5:n,i=r.sort((function(e,t){return e.x-t.x})),a=Ae({points:i});return i.slice(0,-1).map((function(e,t){return{startPoint:e,stopPoint:i[t+1],length:i[t+1].x-e.x,polynomial:Be({tension:o,p0:a[t],p1:a[t+1],p2:a[t+2],p3:a[t+3]})}}))},je=function(e){var t=e.x,r=e.polynomials.find((function(e){return e.startPoint.x<=t&&e.stopPoint.x>=t}));if(t===r.startPoint.x)return{x:t,y:r.startPoint.y};var n=(t-r.startPoint.x)/r.length;return{x:t,y:r.polynomial(n)}},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.points,r=void 0===t?[{x:0,y:0},{x:255,y:255}]:t,n=e.tension,o=void 0===n?0:n,i=ke({points:r,tension:o});return new Array(256).fill(0).map((function(e,t){return je({x:t,polynomials:i})}))};function Oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Re=256,Me=[{x:0,y:0},{x:120,y:146},{x:255,y:255}],Le={red:Me,green:Me,blue:Me},De=function(e){var t=e.controlPoints,r=e.tension;return{red:Fe({points:t.red,tension:r}),green:Fe({points:t.green,tension:r}),blue:Fe({points:t.blue,tension:r})}},Ue=function(e){var t=e.controlPoints,r=e.tension,i=e.onChange,a=Oe(Object(n.useState)(),2),u=a[0],c=a[1],l=Oe(Object(n.useState)(De({controlPoints:t,tension:r})),2),s=l[0],f=l[1],d=Object(n.useRef)();Object(n.useEffect)((function(){f(De({controlPoints:t,tension:r})),i({controlPoints:t,tension:r})}),[r,t,i]),Object(n.useEffect)((function(){var e=d.current.getContext("2d");e.clearRect(0,0,Re,Re),function(e){var t=e.strokeStyle;e.strokeStyle="darkgray";var r=e.lineWidth;e.lineWidth=.5,e.beginPath();for(var n=50;n<Re;n+=50)e.moveTo(n,0),e.lineTo(n,Re),e.moveTo(0,Re-n),e.lineTo(Re,Re-n);e.stroke(),e.strokeStyle=t,e.lineWidth=r}(e),u&&function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=e.lineWidth,o=e.strokeStyle,i={x:t.x,y:Re-t.y};e.strokeStyle="#f6e58d",e.lineWidth=.5,e.beginPath(),e.moveTo(i.x,i.y-r),e.lineTo(i.x,i.y+r),e.moveTo(i.x-r,i.y),e.lineTo(i.x+r,i.y),e.stroke(),e.strokeStyle=o,e.lineWidth=n}(e,u),e.strokeStyle="red",e.beginPath(),e.moveTo(0,Re),s.red.forEach((function(t){e.lineTo(t.x,Re-t.y)})),e.stroke(),e.fillStyle="red",t.red.forEach((function(t){e.beginPath(),e.arc(t.x,Re-t.y,2,0,2*Math.PI),e.fill()}))}),[t,s,u]);return o.a.createElement(Ge,null,o.a.createElement(He,{width:Re,height:Re,ref:d,onMouseMove:function(e){var t=e.clientX-e.target.offsetLeft,r=Re-e.clientY+e.target.offsetTop;c({x:t,y:r})},onMouseLeave:function(){return c()}}),o.a.createElement(ze,null,o.a.createElement(Ve,null,o.a.createElement("span",null,"Tension: ",r),o.a.createElement("input",{type:"range",min:"0",max:"1",step:"0.01",value:r,onChange:function(e){return i({controlPoints:t,tension:+e.target.value})}}))))};Ue.propTypes={controlPoints:u.a.shape({red:u.a.array.isRequired,green:u.a.array.isRequired,blue:u.a.array.isRequired}),tension:u.a.number,onChange:u.a.func},Ue.defaultProps={controlPoints:Le,tension:0,onChange:function(){return null}};var Ge=i.default.div.withConfig({displayName:"ToneCurveEditor__StyledToneCurveEditor",componentId:"q38yul-0"})(["display:flex;"]),He=i.default.canvas.withConfig({displayName:"ToneCurveEditor__Monitor",componentId:"q38yul-1"})(["background-color:black;"]),ze=i.default.div.withConfig({displayName:"ToneCurveEditor__Controls",componentId:"q38yul-2"})(["margin-left:8px;width:100%;"]),Ve=i.default.label.withConfig({displayName:"ToneCurveEditor__Label",componentId:"q38yul-3"})(["display:block;span{display:block;}input{width:100%;}"]),Xe=Ue;function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ye="toneCurve",We=function(e){var t=e.registerSlice,r=e.unregisterSlice,i=e.strength,a=e.controlPoints,u=e.tension,c=e.onChange,l=qe(Object(n.useState)(!1),2),s=l[0],f=l[1],d=Object(n.useRef)(),h=Object(n.useRef)(Math.random());Object(n.useEffect)((function(){var e=function(){return r({key:Ye,sliceId:h.current})};return e(),s&&t({key:Ye,sliceId:h.current,canvas:d.current}),e}),[s,t,r]);var m=Object(n.useCallback)((function(e){var t=e.controlPoints,r=e.tension;return c({controlPoints:t,tension:r,strength:i})}),[i,c]);return o.a.createElement(Qe,null,o.a.createElement($e,null,o.a.createElement(Ze,null,"ToneCurvePanel"),o.a.createElement(et,{isActived:s,onClick:function(){return f(!s)}},"Open")),s&&o.a.createElement(tt,null,o.a.createElement("canvas",{ref:d})),o.a.createElement(rt,null,o.a.createElement(nt,null,o.a.createElement(ot,null,o.a.createElement("span",null,"Strength: ",i),o.a.createElement("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:function(e){return c({strength:+e.target.value,controlPoints:a,tension:u})}})),o.a.createElement(it,null,o.a.createElement(Xe,{controlPoints:a,tension:u,onChange:m})))))};We.propTypes={registerSlice:u.a.func,unregisterSlice:u.a.func,strength:u.a.number,controlPoints:u.a.shape({red:u.a.array.isRequired,green:u.a.array.isRequired,blue:u.a.array.isRequired}),tension:u.a.number,onChange:u.a.func},We.defaultProps={registerSlice:function(){return null},unregisterSlice:function(){return null},strength:.5,controlPoints:Le,tension:0,onChange:function(){return null}};var Qe=i.default.div.withConfig({displayName:"ToneCurvePanel__StyledToneCurve",componentId:"sc-1iarfin-0"})(["border:solid 1px #4834d4;border-radius:8px;overflow:hidden;"]),$e=i.default.div.withConfig({displayName:"ToneCurvePanel__Header",componentId:"sc-1iarfin-1"})(["display:flex;background-color:#4834d4;padding:8px;"]),Ze=i.default.div.withConfig({displayName:"ToneCurvePanel__Title",componentId:"sc-1iarfin-2"})(["flex:1;align-self:center;"]),Je=i.default.button.withConfig({displayName:"ToneCurvePanel__Button",componentId:"sc-1iarfin-3"})([""," border-radius:4px;padding:4px;color:white;font-size:14px;& + &{margin-left:8px;}"],c),et=Object(i.default)(Je).attrs((function(e){return{style:{backgroundColor:e.isActived?"#6ab04c":"#badc58"}}})).withConfig({displayName:"ToneCurvePanel__EnableButton",componentId:"sc-1iarfin-4"})([""]),tt=i.default.div.withConfig({displayName:"ToneCurvePanel__Body",componentId:"sc-1iarfin-5"})(["position:relative;background-color:#686de0;padding:8px;& > canvas{width:100%;}"]),rt=i.default.div.withConfig({displayName:"ToneCurvePanel__Footer",componentId:"sc-1iarfin-6"})(["background-color:#4834d4;padding:8px;button + span{margin-left:8px;}"]),nt=i.default.div.withConfig({displayName:"ToneCurvePanel__Controls",componentId:"sc-1iarfin-7"})(["margin-top:8px;"]),ot=i.default.label.withConfig({displayName:"ToneCurvePanel__Label",componentId:"sc-1iarfin-8"})(["display:flex;input{flex:1;margin-left:8px;}"]),it=i.default.div.withConfig({displayName:"ToneCurvePanel__EditorWrapper",componentId:"sc-1iarfin-9"})(["margin-top:8px;"]),at=We,ut=(r(191),r(122),r(30),r(126),r(127),r(129),r(141),r(82),r(83),r(84),r(85),r(86),r(87),r(88),r(89),r(90),r(91),r(92),r(93),r(94),r(95),r(96),r(97),r(98),r(99),r(100),r(101),r(102),r(103),r(104),function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}),ct=function(e){var t=e.context,r=e.vertexShaderSource,n=e.fragmentShaderSource;if(t&&r&&n){var o=ut(t,t.VERTEX_SHADER,r),i=ut(t,t.FRAGMENT_SHADER,n),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,i),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return{vertexShader:o,fragmentShader:i,program:a};console.error("Link failed:",t.getProgramInfoLog(a)),console.error("vs info-log:",t.getShaderInfoLog(o)),console.error("fs info-log:",t.getShaderInfoLog(i)),t.deleteShader(o),t.deleteShader(i),t.deleteProgram(a)}},lt=function(e){var t=e.context,r=e.attribute,n=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r.array),t.STATIC_DRAW),{buffer:n,numComponents:r.numComponents,count:Math.floor(r.array.length/r.numComponents),type:t.FLOAT,normalize:!1,offset:0,stride:0}},st=function(e){var t=e.context,r=e.location,n=e.buffer;t.bindBuffer(t.ARRAY_BUFFER,n.buffer),t.vertexAttribPointer(r,n.numComponents,n.type,n.normalize,n.stride,n.offset)},ft="#version 300 es\nin vec4 aPosition;\nin vec2 aTextCoord;\nuniform int uIsFrameBuffer;\nout vec2 vTextCoord;\n\nvoid main() {\n  vec4 position = aPosition;\n  if (1 == uIsFrameBuffer) {\n    // frame buffer axis is opposite with canvas.\n    position.y = -aPosition.y;\n  }\n  gl_Position = position;\n  vTextCoord = aTextCoord;\n}\n",dt="#version 300 es\nprecision lowp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  float gbColor = 2.0 * originColor.b * originColor.g;\n  outColor = vec4(gbColor, gbColor, gbColor, originColor.a);\n}\n",ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context;if(!t)throw new Error("need context arg");this.context=t,this.core=ct({context:t,vertexShaderSource:ft,fragmentShaderSource:dt}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource")};ht.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,st({context:this.context,location:this.location[t],buffer:r})},ht.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.targetFrameBuffer,o=this.context;o.useProgram(this.core.program),o.bindTexture(o.TEXTURE_2D,t),o.uniform1i(this.location.uSource,r),n?(o.bindFramebuffer(o.FRAMEBUFFER,n),o.uniform1i(this.location.uIsFrameBuffer,1)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this.location.uIsFrameBuffer,0)),o.drawArrays(o.TRIANGLES,0,this.buffer.aPosition.count)};var mt=ht,pt="#version 300 es\nprecision lowp float;\n\nuniform sampler2D uSource;\nuniform vec2 uResolution;\nuniform int uKernalRadius;\nuniform float uKernelData[65];\nuniform int uIsVertical;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec2 delta = 1.0 / uResolution;\n  vec4 outputColor = vec4(0.0, 0.0, 0.0, 0.0);\n\n  for (int index = -uKernalRadius; index <= uKernalRadius; index++) {\n    vec2 step = vec2(index, 0.0);\n    if (1 == uIsVertical) {\n      step = vec2(0.0, index);\n    }\n    vec2 offset = vTextCoord + step * delta;\n    outputColor += uKernelData[index + uKernalRadius] * texture(uSource, offset);\n  }\n\n  outColor = outputColor;\n}\n",gt=function(e,t){for(var r=Math.floor(Math.abs(e)),n=t*t,o=new Array(2*r+1),i=0,a=-r;a<=r;++a){var u=a+r;o[u]=Math.exp(-a*a/(2*n))/Math.sqrt(2*Math.PI*n),i+=o[u]}var c=o.map((function(e){return e/i}));return{data:new Float32Array(c),radius:r}},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=e.radius,n=void 0===r?16:r,o=e.sigma,i=void 0===o?5:o;if(!t)throw new Error("need context arg");this.context=t,this.core=ct({context:t,vertexShaderSource:ft,fragmentShaderSource:pt}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.location.uResolution=t.getUniformLocation(this.core.program,"uResolution"),this.location.uKernalRadius=t.getUniformLocation(this.core.program,"uKernalRadius"),this.location.uKernelData=t.getUniformLocation(this.core.program,"uKernelData"),this.location.uIsVertical=t.getUniformLocation(this.core.program,"uIsVertical"),this.updateKernal({radius:n,sigma:i})};vt.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,st({context:this.context,location:this.location[t],buffer:r})},vt.prototype.updateKernal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,r=e.sigma;if(t&&isNaN(t))throw new Error("invalid radius");if(t&&(32<t||0>t))throw new Error("radius must be [0, 32]");if(r&&isNaN(r))throw new Error("invalid sigma");if(r&&0>=r)throw new Error("sigma must be > 0");this._radius=t||this._radius,this._sigma=r||this._sigma,this._kernal=gt(this._radius,this._sigma);var n=this.context;n.useProgram(this.core.program),n.uniform1i(this.location.uKernalRadius,this._kernal.radius),n.uniform1fv(this.location.uKernelData,this._kernal.data)},vt.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.midFrameBuffer,o=e.midTexture,i=e.midTextureIndex,a=e.targetFrameBuffer,u=this.context;u.useProgram(this.core.program),u.uniform2f(this.location.uResolution,u.canvas.width,u.canvas.height),u.bindTexture(u.TEXTURE_2D,t),u.uniform1i(this.location.uSource,r),u.bindFramebuffer(u.FRAMEBUFFER,n),u.uniform1i(this.location.uIsFrameBuffer,1),u.uniform1i(this.location.uIsVertical,1),u.drawArrays(u.TRIANGLES,0,this.buffer.aPosition.count),u.bindTexture(u.TEXTURE_2D,o),u.uniform1i(this.location.uSource,i),a?u.bindFramebuffer(u.FRAMEBUFFER,a):(u.bindFramebuffer(u.FRAMEBUFFER,null),u.uniform1i(this.location.uIsFrameBuffer,0)),u.uniform1i(this.location.uIsVertical,0),u.drawArrays(u.TRIANGLES,0,this.buffer.aPosition.count)};var yt=vt,bt="#version 300 es\nprecision lowp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uBlurredSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 blurredColor = texture(uBlurredSource, vTextCoord);\n  outColor = originColor - blurredColor + vec4(0.5, 0.5, 0.5, 1.0);\n}\n",xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context;if(!t)throw new Error("need context arg");this.context=t,this.core=ct({context:t,vertexShaderSource:ft,fragmentShaderSource:bt}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.location.uBlurredSource=t.getUniformLocation(this.core.program,"uBlurredSource")};xt.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,st({context:this.context,location:this.location[t],buffer:r})},xt.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.blurredSourceTexture,o=e.blurredSourceTextureIndex,i=e.targetFrameBuffer,a=this.context;a.useProgram(this.core.program),a.bindTexture(a.TEXTURE_2D,t),a.uniform1i(this.location.uSource,r),a.bindTexture(a.TEXTURE_2D,n),a.uniform1i(this.location.uBlurredSource,o),i?(a.bindFramebuffer(a.FRAMEBUFFER,i),a.uniform1i(this.location.uIsFrameBuffer,1)):(a.bindFramebuffer(a.FRAMEBUFFER,null),a.uniform1i(this.location.uIsFrameBuffer,0)),a.drawArrays(a.TRIANGLES,0,this.buffer.aPosition.count)};var wt=xt,Ct="#version 300 es\nprecision lowp float;\n\nuniform int uCycles;\nuniform sampler2D uSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n\n  float color = originColor.b;\n  for (int i = 0; i < uCycles; ++i) {\n    if (color < 0.5) {\n      color = color * color * 2.0;\n    } else {\n      color = 1.0 - (1.0 - color) * (1.0 - color) * 2.0;\n    }\n  }\n\n  float k = 255.0 / (164.0 - 75.0);\n  color = (color - 75.0 / 255.0) * k;\n\n  outColor = vec4(color, color, color, originColor.a);;\n}\n",St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=e.cycles,n=void 0===r?3:r;if(!t)throw new Error("need context arg");this.context=t,this.core=ct({context:t,vertexShaderSource:ft,fragmentShaderSource:Ct}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uCycles=t.getUniformLocation(this.core.program,"uCycles"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.updateCycles({cycles:n})};St.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,st({context:this.context,location:this.location[t],buffer:r})},St.prototype.updateCycles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cycles;if(!t||isNaN(t))throw new Error("invalid cycles argument");this._cycles=Math.max(Math.floor(t),0)||this._cycles;var r=this.context;r.useProgram(this.core.program),r.uniform1i(this.location.uCycles,this._cycles)},St.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.targetFrameBuffer,o=this.context;o.useProgram(this.core.program),o.bindTexture(o.TEXTURE_2D,t),o.uniform1i(this.location.uSource,r),n?(o.bindFramebuffer(o.FRAMEBUFFER,n),o.uniform1i(this.location.uIsFrameBuffer,1)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this.location.uIsFrameBuffer,0)),o.drawArrays(o.TRIANGLES,0,this.buffer.aPosition.count)};var Et=St,Tt=(r(200),r(201),r(203),"#version 300 es\nprecision lowp float;\n\nuniform float uStrength;\nuniform sampler2D uSource;\nuniform sampler2D uTone;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 colorIndex = texture(uSource, vTextCoord);\n  float revStr = 1.0 - uStrength;\n  outColor = vec4(\n    uStrength * vec4(texture(uTone, vec2(colorIndex.r, 0))).r + revStr * colorIndex.r,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.g, 0))).g + revStr * colorIndex.g,\n    uStrength * vec4(texture(uTone, vec2(colorIndex.b, 0))).b + revStr * colorIndex.b,\n    1.0\n  );\n}\n"),Pt=[{x:0,y:0},{x:120,y:146},{x:255,y:255}],It={red:Pt,green:Pt,blue:Pt},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=e.toneMapTexture,n=e.toneMapTextureIndex,o=e.strength,i=void 0===o?.5:o,a=e.controlPoints,u=void 0===a?It:a,c=e.tension,l=void 0===c?.5:c;if(!t||!r||!n)throw new Error("not enough arguments");this.context=t,this.toneMapTexture=r,this.toneMapTextureIndex=n,this.core=ct({context:t,vertexShaderSource:ft,fragmentShaderSource:Tt}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uStrength=t.getUniformLocation(this.core.program,"uStrength"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.location.uTone=t.getUniformLocation(this.core.program,"uTone"),t.useProgram(this.core.program),t.uniform1i(this.location.uTone,this.toneMapTextureIndex),this.updateStrength({strength:i}),this.updateCurvePoints({controlPoints:u,tension:l})};_t.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,st({context:this.context,location:this.location[t],buffer:r})},_t.prototype.updateStrength=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.strength;if(isNaN(t))throw new Error("invalid strength argument");this._strength=Math.max(Math.min(t,1),0)||this._strength;var r=this.context;r.useProgram(this.core.program),r.uniform1f(this.location.uStrength,this._strength)},_t.prototype.updateCurvePoints=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.controlPoints,n=t.tension;if(r&&(!r.red||!r.green||!r.blue))throw new Error("invalid controlPoints argument");if(n&&isNaN(n))throw new Error("invalid tension argument");(r&&r!==this._controlPoints||n&&n!==this._tension)&&(this._controlPoints=r||this._controlPoints,this._tension=n||this._tension,this._curvePoints={red:Fe({points:this._controlPoints.red,tension:this._tension}),green:Fe({points:this._controlPoints.green,tension:this._tension}),blue:Fe({points:this._controlPoints.blue,tension:this._tension})},this._curveImageData=new ImageData(new Uint8ClampedArray(new Array(256).fill(0).flatMap((function(t,r){return[e._curvePoints.red[r].y,e._curvePoints.green[r].y,e._curvePoints.blue[r].y,255]}))),256))},_t.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.targetFrameBuffer,o=this.context;o.useProgram(this.core.program),o.bindTexture(o.TEXTURE_2D,t),o.uniform1i(this.location.uSource,r),o.bindTexture(o.TEXTURE_2D,this.toneMapTexture),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,this._curveImageData),n?(o.bindFramebuffer(o.FRAMEBUFFER,n),o.uniform1i(this.location.uIsFrameBuffer,1)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this.location.uIsFrameBuffer,0)),o.drawArrays(o.TRIANGLES,0,this.buffer.aPosition.count)};var Bt=_t,At="#version 300 es\nprecision lowp float;\n\nuniform sampler2D uSource;\nuniform sampler2D uMask;\nuniform sampler2D uBlendSource;\nin vec2 vTextCoord;\n\nout vec4 outColor;\n\nvoid main() {\n  vec4 originColor = texture(uSource, vTextCoord);\n  vec4 maskColor = texture(uMask, vTextCoord);\n  vec4 blendColor = texture(uBlendSource, vTextCoord);\n  outColor = vec4(mix(originColor.rgb, blendColor.rgb, 1.0 - maskColor.b), 1.0);\n}\n",kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context;if(!t)throw new Error("need context arg");this.context=t,this.core=ct({context:t,vertexShaderSource:ft,fragmentShaderSource:At}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.location.uMask=t.getUniformLocation(this.core.program,"uMask"),this.location.uBlendSource=t.getUniformLocation(this.core.program,"uBlendSource")};kt.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,st({context:this.context,location:this.location[t],buffer:r})},kt.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.maskTexture,o=e.maskTextureIndex,i=e.blendSourceTexture,a=e.blendSourceTextureIndex,u=e.targetFrameBuffer,c=this.context;c.useProgram(this.core.program),c.bindTexture(c.TEXTURE_2D,t),c.uniform1i(this.location.uSource,r),c.bindTexture(c.TEXTURE_2D,n),c.uniform1i(this.location.uMask,o),c.bindTexture(c.TEXTURE_2D,i),c.uniform1i(this.location.uBlendSource,a),u?(c.bindFramebuffer(c.FRAMEBUFFER,u),c.uniform1i(this.location.uIsFrameBuffer,1)):(c.bindFramebuffer(c.FRAMEBUFFER,null),c.uniform1i(this.location.uIsFrameBuffer,0)),c.drawArrays(c.TRIANGLES,0,this.buffer.aPosition.count)};var jt=kt,Ft="#version 300 es\nprecision lowp float;\n\nuniform vec4 uColor;\nout vec4 outColor;\n\nvoid main() {\n  outColor = uColor;\n}\n";function Ot(e){return function(e){if(Array.isArray(e))return Nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Nt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=e.color,n=void 0===r?[0,0,0,1]:r;if(!t)throw new Error("need context arg");this.context=t,this.core=ct({context:t,vertexShaderSource:ft,fragmentShaderSource:Ft}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uColor=t.getUniformLocation(this.core.program,"uColor"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource"),this.updateColor({color:n})};Rt.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,st({context:this.context,location:this.location[t],buffer:r})},Rt.prototype.updateColor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color;if(t&&(!Array.isArray(t)||4!==t.length))throw new Error("invalid color argument");this._color=t||this._color;var r=this.context;r.useProgram(this.core.program),r.uniform4f.apply(r,[this.location.uColor].concat(Ot(this._color)))},Rt.prototype.draw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.targetFrameBuffer,r=this.context;r.useProgram(this.core.program),t?(r.bindFramebuffer(r.FRAMEBUFFER,t),r.uniform1i(this.location.uIsFrameBuffer,1)):(r.bindFramebuffer(r.FRAMEBUFFER,null),r.uniform1i(this.location.uIsFrameBuffer,0)),r.drawArrays(r.TRIANGLES,0,this.buffer.aPosition.count)};var Mt=Rt,Lt="#version 300 es\nprecision lowp float;\n\nuniform sampler2D uSource;\nin vec2 vTextCoord;\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(uSource, vTextCoord);\n}\n",Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context;if(!t)throw new Error("need context arg");this.context=t,this.core=ct({context:t,vertexShaderSource:ft,fragmentShaderSource:Lt}),this.buffer={},this.location={},this.location.aPosition=t.getAttribLocation(this.core.program,"aPosition"),this.location.aTextCoord=t.getAttribLocation(this.core.program,"aTextCoord"),t.enableVertexAttribArray(this.location.aPosition),t.enableVertexAttribArray(this.location.aTextCoord),this.location.uIsFrameBuffer=t.getUniformLocation(this.core.program,"uIsFrameBuffer"),this.location.uSource=t.getUniformLocation(this.core.program,"uSource")};Dt.prototype.dockBuffer=function(e){var t=e.key,r=e.buffer;if(!["aPosition","aTextCoord"].includes(t))throw new Error("invalid buffer name");this.buffer[t]=r,st({context:this.context,location:this.location[t],buffer:r})},Dt.prototype.draw=function(e){var t=e.sourceTexture,r=e.sourceTextureIndex,n=e.targetFrameBuffer,o=this.context;o.useProgram(this.core.program),o.bindTexture(o.TEXTURE_2D,t),o.uniform1i(this.location.uSource,r),n?(o.bindFramebuffer(o.FRAMEBUFFER,n),o.uniform1i(this.location.uIsFrameBuffer,1)):(o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this.location.uIsFrameBuffer,0)),o.drawArrays(o.TRIANGLES,0,this.buffer.aPosition.count)};var Ut=Dt;function Gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ht(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(r),!0).forEach((function(t){zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Vt=["source","greenBlueChannel","gaussianBlurMid","gaussianBlur","highPassFilter","hardLight","toneMap","toneCurve","maskBlender"],Xt=["greenBlueChannel","gaussianBlurMid","gaussianBlur","highPassFilter","hardLight","toneCurve","maskBlender"],qt=Vt.reduce((function(e,t,r){return Ht(Ht({},e),{},zt({},t,r))}),{}),Kt=[0,0,0,0],Yt={array:[-1,-1,1,-1,1,1,-1,-1,1,1,-1,1],numComponents:2},Wt={array:[0,1,1,1,1,0,0,1,1,0,0,0],numComponents:2},Qt=function(){var e=this,t=document.createElement("canvas");this.canvas=t;var r=t.getContext("webgl2");if(this.context=r,!r)throw new Error("Browser not support WebGL2.0");this.slice=Vt.reduce((function(e,t){return Ht(Ht({},e),{},zt({},t,{}))}),{}),this.buffer={},this.buffer.aPosition=lt({context:r,attribute:Yt}),this.buffer.aTextCoord=lt({context:r,attribute:Wt}),this.texture={},Vt.forEach((function(t){e.texture[t]=function(e){var t=e.context,r=e.index,n=void 0===r?0:r,o=t,i=o.createTexture();return o.activeTexture(o.TEXTURE0+n),o.bindTexture(o.TEXTURE_2D,i),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.canvas.width,o.canvas.height,0,o.RGBA,o.UNSIGNED_BYTE,null),i}({context:r,index:qt[t]})})),this.frameBuffer={},Xt.forEach((function(t){e.frameBuffer[t]=r.createFramebuffer(),r.bindFramebuffer(r.FRAMEBUFFER,e.frameBuffer[t]),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e.texture[t],0)})),this.greenBlueChannel=new mt({context:this.context}),this.greenBlueChannel.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.greenBlueChannel.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.gaussianBlur=new yt({context:this.context}),this.gaussianBlur.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.gaussianBlur.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.highPassFilter=new wt({context:this.context}),this.highPassFilter.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.highPassFilter.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.hardLight=new Et({context:this.context}),this.hardLight.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.hardLight.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.toneCurve=new Bt({context:this.context,toneMapTexture:this.texture.toneMap,toneMapTextureIndex:qt.toneMap}),this.toneCurve.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.toneCurve.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.maskBlender=new jt({context:this.context}),this.maskBlender.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.maskBlender.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.fillColor=new Mt({context:this.context,color:Kt}),this.fillColor.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.fillColor.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord}),this.copyTexture=new Ut({context:this.context}),this.copyTexture.dockBuffer({key:"aPosition",buffer:this.buffer.aPosition}),this.copyTexture.dockBuffer({key:"aTextCoord",buffer:this.buffer.aTextCoord})};Qt.prototype.draw=function(e){var t=e.pixelSource;if(t&&this.context){this.updateCanvasSize({pixelSource:t});var r=this.context;r.clearColor.apply(r,Kt),r.clear(r.COLOR_BUFFER_BIT),r.bindTexture(r.TEXTURE_2D,this.texture.source),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),this.exportTextureToCanvases({texture:this.texture.source,textureIndex:qt.source,canvases:this.slice.source}),this.greenBlueChannel.draw({sourceTexture:this.texture.source,sourceTextureIndex:qt.source,targetFrameBuffer:this.frameBuffer.greenBlueChannel}),this.exportTextureToCanvases({texture:this.texture.greenBlueChannel,textureIndex:qt.greenBlueChannel,canvases:this.slice.greenBlueChannel}),this.gaussianBlur.draw({sourceTexture:this.texture.greenBlueChannel,sourceTextureIndex:qt.greenBlueChannel,midFrameBuffer:this.frameBuffer.gaussianBlurMid,midTexture:this.texture.gaussianBlurMid,midTextureIndex:qt.gaussianBlurMid,targetFrameBuffer:this.frameBuffer.gaussianBlur}),this.exportTextureToCanvases({texture:this.texture.gaussianBlur,textureIndex:qt.gaussianBlur,canvases:this.slice.gaussianBlur}),this.highPassFilter.draw({sourceTexture:this.texture.greenBlueChannel,sourceTextureIndex:qt.greenBlueChannel,blurredSourceTexture:this.texture.gaussianBlur,blurredSourceTextureIndex:qt.gaussianBlur,targetFrameBuffer:this.frameBuffer.highPassFilter}),this.exportTextureToCanvases({texture:this.texture.highPassFilter,textureIndex:qt.highPassFilter,canvases:this.slice.highPassFilter}),this.hardLight.draw({sourceTexture:this.texture.highPassFilter,sourceTextureIndex:qt.highPassFilter,targetFrameBuffer:this.frameBuffer.hardLight}),this.exportTextureToCanvases({texture:this.texture.hardLight,textureIndex:qt.hardLight,canvases:this.slice.hardLight}),this.toneCurve.draw({sourceTexture:this.texture.source,sourceTextureIndex:qt.source,targetFrameBuffer:this.frameBuffer.toneCurve}),this.exportTextureToCanvases({texture:this.texture.toneCurve,textureIndex:qt.toneCurve,canvases:this.slice.toneCurve}),this.maskBlender.draw({sourceTexture:this.texture.source,sourceTextureIndex:qt.source,maskTexture:this.texture.hardLight,maskTextureIndex:qt.hardLight,blendSourceTexture:this.texture.toneCurve,blendSourceTextureIndex:qt.toneCurve,targetFrameBuffer:this.frameBuffer.maskBlender}),this.exportTextureToCanvases({texture:this.texture.maskBlender,textureIndex:qt.maskBlender,canvases:this.slice.maskBlender}),this.copyTexture.draw({sourceTexture:this.texture.maskBlender,sourceTextureIndex:qt.maskBlender})}},Qt.prototype.updateCanvasSize=function(e){var t=this,r=e.pixelSource;if(r&&this.context){var n=this.context,o=this.context.canvas.width,i=this.context.canvas.height;"VIDEO"===r.nodeName?(o=r.videoWidth,i=r.videoHeight):"CANVAS"===r.nodeName&&(o=r.width,i=r.height);var a=n.canvas.width,u=n.canvas.height;a===o&&u===i||(n.canvas.width=o,n.canvas.height=i,n.viewport(0,0,o,i),Object.keys(this.texture).forEach((function(e){var r=t.texture[e];n.bindTexture(n.TEXTURE_2D,r),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,o,i,0,n.RGBA,n.UNSIGNED_BYTE,null)})))}},Qt.prototype.registerSlice=function(e){var t=e.key,r=void 0===t?"greenBlueChannel":t,n=e.sliceId,o=e.canvas;if(Vt.includes(r)&&n&&o&&"CANVAS"===o.nodeName)return this.slice[r][n]=o},Qt.prototype.unregisterSlice=function(e){var t=e.key,r=void 0===t?"greenBlueChannel":t,n=e.sliceId;if(Vt.includes(r)&&n)return delete this.slice[r][n]},Qt.prototype.exportTextureToCanvases=function(e){var t=this,r=e.texture,n=e.textureIndex,o=e.canvases,i=Object.keys(o).map((function(e){return o[e]}));if(r&&!isNaN(n)&&i.length){var a=i.map((function(e){if("CANVAS"===(null==e?void 0:e.nodeName))return e.getContext("2d")})).filter(Boolean);a.length&&(this.copyTexture.draw({sourceTexture:r,sourceTextureIndex:n}),a.forEach((function(e){var r=t.canvas,n=r.width,o=r.height,i=e.canvas.width,a=e.canvas.height;i===n&&a===o||(e.canvas.width=n,e.canvas.height=o),e.clearRect(0,0,n,o),e.drawImage(r,0,0)})),this.fillColor.draw())}},Qt.prototype.updateGaussianBlurKernal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.radius,r=e.sigma;return this.gaussianBlur.updateKernal({radius:t,sigma:r})},Qt.prototype.updateHardLightCycles=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cycles;return this.hardLight.updateCycles({cycles:t})},Qt.prototype.updateToneCurveData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.strength,r=e.controlPoints,n=e.tension;return this.toneCurve.updateCurvePoints({controlPoints:r,tension:n}),this.toneCurve.updateStrength({strength:t})};var $t=Qt;function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var er=i.default.div.withConfig({displayName:"Main__StyledMain",componentId:"sc-1te9q8o-0"})(["padding:8px;"]),tr=i.default.div.withConfig({displayName:"Main__ErrorPanel",componentId:"sc-1te9q8o-1"})(["border-radius:8px;background-color:#eb4d4b;padding:8px;margin-bottom:8px;"]),rr=i.default.div.withConfig({displayName:"Main__Modules",componentId:"sc-1te9q8o-2"})(["display:grid;gap:8px;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));margin-top:8px;"]),nr=i.default.div.withConfig({displayName:"Main__ModuleWrapper",componentId:"sc-1te9q8o-3"})([""]);t.a=function(){var e=Zt(Object(n.useState)(),2),t=e[0],r=e[1],i=Zt(Object(n.useState)(),2),a=i[0],u=i[1],c=Zt(Object(n.useState)({radius:16,sigma:5}),2),l=c[0],s=c[1],f=Zt(Object(n.useState)({cycles:3}),2),d=f[0],h=f[1],m=Zt(Object(n.useState)({strength:.5,controlPoints:Le,tension:0}),2),p=m[0],g=m[1],v=Object(n.useRef)(),y=Object(n.useRef)(),b=Object(n.useRef)(),x=Object(n.useRef)();return Object(n.useEffect)((function(){var e=document.createElement("video");e.setAttribute("playsinline",!0),v.current=e;try{y.current=new $t}catch(e){r(e)}return window.beautifyFilter=y.current,b.current=function(e){var t;return null===(t=y.current)||void 0===t?void 0:t.registerSlice(e)},x.current=function(e){var t;return null===(t=y.current)||void 0===t?void 0:t.unregisterSlice(e)},function(){return e.srcObject=null,e.pause()}}),[]),Object(n.useEffect)((function(){v.current.srcObject=a,a?v.current.play():v.current.pause()}),[a]),Object(n.useEffect)((function(){var e;null===(e=y.current)||void 0===e||e.updateGaussianBlurKernal(l)}),[l]),Object(n.useEffect)((function(){var e;null===(e=y.current)||void 0===e||e.updateHardLightCycles(d)}),[d]),Object(n.useEffect)((function(){var e;null===(e=y.current)||void 0===e||e.updateToneCurveData(p)}),[p]),o.a.createElement(er,null,t&&o.a.createElement(tr,null,t.message),o.a.createElement(_,{onChange:function(e){var t=e.value;return u(t)}}),o.a.createElement(rr,null,o.a.createElement(nr,null,o.a.createElement(U,{filterName:"BeautifyFilterPanel",filterCore:y.current,pixelSource:v.current})),o.a.createElement(nr,null,o.a.createElement($,{sliceKey:"source",sliceName:"Source",registerSlice:b.current,unregisterSlice:x.current})),o.a.createElement(nr,null,o.a.createElement($,{sliceKey:"greenBlueChannel",sliceName:"GreenBlueChannel",registerSlice:b.current,unregisterSlice:x.current})),o.a.createElement(nr,null,o.a.createElement(fe,{registerSlice:b.current,unregisterSlice:x.current,radius:l.radius,sigma:l.sigma,onChange:s})),o.a.createElement(nr,null,o.a.createElement($,{sliceKey:"highPassFilter",sliceName:"HighPassFilter",registerSlice:b.current,unregisterSlice:x.current})),o.a.createElement(nr,null,o.a.createElement(Te,{registerSlice:b.current,unregisterSlice:x.current,cycles:d.cycles,onChange:h})),o.a.createElement(nr,null,o.a.createElement(at,{registerSlice:b.current,unregisterSlice:x.current,strength:p.strength,controlPoints:p.controlPoints,tension:p.tension,onChange:g}))))}},157:function(e,t,r){"use strict";r(134),r(135),r(16),r(21),r(15),r(22),r(23),r(11),r(24);var n=r(0),o=r.n(n),i=r(2),a=r.n(i),u=r(1),c=r.p+"img/github-icon.e1201fcc.svg";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g="https://github.com/bill42362/portfolio",v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,r,n,i=h(a);function a(){return s(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.email,r=e.branchName,n=r?"".concat(g,"/tree/").concat(r):g;return o.a.createElement(y,null,o.a.createElement(b,{href:n,target:"_blank"},o.a.createElement("img",{src:c,alt:"github"})),o.a.createElement(b,{href:"mailto:".concat(t),target:"_blank"},o.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNNDY3LDYxSDQ1QzIwLjIxOCw2MSwwLDgxLjE5NiwwLDEwNnYzMDBjMCwyNC43MiwyMC4xMjgsNDUsNDUsNDVoNDIyYzI0LjcyLDAsNDUtMjAuMTI4LDQ1LTQ1VjEwNiBDNTEyLDgxLjI4LDQ5MS44NzIsNjEsNDY3LDYxeiBNNDYwLjc4Niw5MUwyNTYuOTU0LDI5NC44MzNMNTEuMzU5LDkxSDQ2MC43ODZ6IE0zMCwzOTkuNzg4VjExMi4wNjlsMTQ0LjQ3OSwxNDMuMjRMMzAsMzk5Ljc4OHogTTUxLjIxMyw0MjFsMTQ0LjU3LTE0NC41N2w1MC42NTcsNTAuMjIyYzUuODY0LDUuODE0LDE1LjMyNyw1Ljc5NSwyMS4xNjctMC4wNDZMMzE3LDI3Ny4yMTNMNDYwLjc4Nyw0MjFINTEuMjEzeiBNNDgyLDM5OS43ODcgTDMzOC4yMTMsMjU2TDQ4MiwxMTIuMjEyVjM5OS43ODd6Ii8+PC9zdmc+",alt:"email"})))}}])&&f(t.prototype,r),n&&f(t,n),a}(o.a.PureComponent);v.propTypes={email:a.a.string,branchName:a.a.string},v.defaultProps={email:"bill42362@gmail.com",branchName:""};var y=u.default.div.withConfig({displayName:"Footer__StyledFooter",componentId:"sc-1ygzj31-0"})(["flex:auto;display:flex;justify-content:center;align-items:flex-end;padding:20px;"]),b=u.default.a.withConfig({displayName:"Footer__Link",componentId:"sc-1ygzj31-1"})(["display:flex;justify-content:center;align-items:center;border-radius:50%;width:36px;height:36px;background-color:#576574;& + &{margin-left:8px;}img{width:60%;height:auto;}"]);t.a=v},158:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(146),a=r.n(i),u=r(147);a.a.render(o.a.createElement(u.a,null),document.getElementById("app-root"))}}]);
//# sourceMappingURL=bundle~bundle~5b60049d.71ba8e4a.js.map