(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[1],{132:function(e,t,n){"use strict";(function(e){n(55),n(97),n(38),n(158),n(159),n(72),n(161);var r=n(1),o=n.n(r),a=n(2),i=n.n(a),s=n(17),l=n(133),c=n.n(l),u=n(137),d=n(143),m=n(144),p=n(142),h=["sheet"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var y=Object(s.createGlobalStyle)(["",';*,::after,::before{box-sizing:border-box;}body{background-color:#101010;color:#efefef;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";font-weight:400;-webkit-tap-highlight-color:transparent;overscroll-behavior-y:contain;}button{background-color:rgba(0,0,0,0);cursor:pointer;&:disabled{cursor:not-allowed;}}input::placeholder,input::-webkit-input-placeholder,input::-moz-placeholder{line-height:normal !important;vertical-align:middle;}a{color:inherit;text-decoration:none;}a > *{opacity:inherit;}a:hover{opacity:.7;}'],c.a),w="undefined"==typeof window,v="Portfolio",x="Bill's portfolio",C=w?e.env.BRANCH_NAME:window.__SSR_ENVIRONMENT__.branchName,k=function(e){var t=e.request;return console.log("App() request:",t),o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{defaultTitle:"Portfolio",titleTemplate:"%s - Portfolio"},o.a.createElement("meta",{charSet:"utf-8"}),o.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),o.a.createElement("meta",{name:"author",content:"Bill"}),o.a.createElement("meta",{name:"description",content:x}),o.a.createElement("meta",{property:"og:url",content:"https://github.com/bill42362/portfolio"}),o.a.createElement("meta",{property:"og:type",content:"website"}),o.a.createElement("meta",{property:"og:title",content:v}),o.a.createElement("meta",{property:"og:description",content:x}),o.a.createElement("meta",{property:"og:site_name",content:v}),o.a.createElement("meta",{property:"twitter:card",content:"summary"}),o.a.createElement("meta",{property:"twitter:site",content:"@bill_portfolio"})),o.a.createElement(y,null),o.a.createElement(E,null,!window&&o.a.createElement("img",{src:p.a,title:"Xavier school"}),o.a.createElement(d.a,null),o.a.createElement(m.a,{branchName:C})))};k.propTypes={request:i.a.object},k.defaultProps={request:null};var E=s.default.div.withConfig({displayName:"App__StyledApp",componentId:"sc-1v2nrsx-0"})(["display:flex;flex-direction:column;justify-content:center;height:100vh;background-color:#222f3e;"]),M=function(e){var t=e.sheet,n=b(e,h);return t.instance?o.a.createElement(s.StyleSheetManager,{sheet:t.instance},o.a.createElement(k,n)):o.a.createElement(k,n)};M.propTypes=g(g({},k.propTypes),{},{sheet:i.a.object}),M.defaultProps=g(g({},k.defaultProps),{},{sheet:{}}),t.a=M}).call(this,n(88))},142:function(e,t,n){"use strict";t.a=n.p+"img/x-men-school.0928a818.svg"},143:function(e,t,n){"use strict";n(167),n(168),n(72),n(55),n(169),n(170),n(171),n(107),n(108),n(110),n(52),n(111),n(38),n(78),n(79),n(42),n(80),n(81);var r=n(1),o=n.n(r),a=n(17),i=n(85),s=n.n(i),l=n(140),c=n(141),u=n(0);const d={defines:{TOON:!0,MATCAP:!0,MATCAP_BLENDING_ADD:!0},uniforms:u.nb.merge([u.cb.toon.uniforms,u.cb.phong.uniforms,u.cb.matcap.uniforms]),vertexShader:u.cb.phong.vertexShader,fragmentShader:u.cb.phong.fragmentShader.replace("#include <common>","\n\t\t\t\t\t#ifdef USE_MATCAP\n\t\t\t\t\t\tuniform sampler2D matcap;\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#include <common>\n\t\t\t\t").replace("#include <envmap_common_pars_fragment>","\n\t\t\t\t\t#include <gradientmap_pars_fragment>\n\t\t\t\t\t#include <envmap_common_pars_fragment>\n\t\t\t\t").replace("#include <lights_phong_pars_fragment>","\nvarying vec3 vViewPosition;\n\nstruct BlinnPhongMaterial {\n\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n").replace("#include <envmap_fragment>","\n\t\t\t\t\t#include <envmap_fragment>\n\t\t\t\t\t\n#ifdef USE_MATCAP\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\tvec4 matcapColor = texture2D( matcap, uv );\n\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#ifdef MATCAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight *= matcapColor.rgb;\n\n\t#elif defined( MATCAP_BLENDING_ADD )\n\n\t\toutgoingLight += matcapColor.rgb;\n\n\t#endif\n\n#endif\n\n\t\t\t\t")};class m extends u.o{constructor(e){super(e)}parse(e){const t=0,n=1,r=2,o=3,a=9,i=10,s=11,l=48,c=4,d=0,m=1,p=2,h=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");let f=0;const g=new Uint8Array(e),A={id_length:g[f++],colormap_type:g[f++],image_type:g[f++],colormap_index:g[f++]|g[f++]<<8,colormap_length:g[f++]|g[f++]<<8,colormap_size:g[f++],origin:[g[f++]|g[f++]<<8,g[f++]|g[f++]<<8],width:g[f++]|g[f++]<<8,height:g[f++]|g[f++]<<8,pixel_size:g[f++],flags:g[f++]};!function(e){switch(e.image_type){case n:case a:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case r:case o:case i:case s:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(A),A.id_length+f>e.length&&console.error("THREE.TGALoader: No data."),f+=A.id_length;let b=!1,y=!1,w=!1;switch(A.image_type){case a:b=!0,y=!0;break;case n:y=!0;break;case i:b=!0;break;case r:break;case s:b=!0,w=!0;break;case o:w=!0}const v=new Uint8Array(A.width*A.height*4),x=function(e,t,n,r,o){let a,i;const s=n.pixel_size>>3,l=n.width*n.height*s;if(t&&(i=o.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),e){let e,t,n;a=new Uint8Array(l);let i=0;const c=new Uint8Array(s);for(;i<l;)if(e=o[r++],t=1+(127&e),128&e){for(n=0;n<s;++n)c[n]=o[r++];for(n=0;n<t;++n)a.set(c,i+n*s);i+=s*t}else{for(t*=s,n=0;n<t;++n)a[i+n]=o[r++];i+=t}}else a=o.subarray(r,r+=t?n.width*n.height:l);return{pixel_data:a,palettes:i}}(b,y,A,f,g);return function(e,t,n,r,o){let a,i,s,u,f,g;switch((A.flags&l)>>c){default:case p:a=0,s=1,f=t,i=0,u=1,g=n;break;case d:a=0,s=1,f=t,i=n-1,u=-1,g=-1;break;case h:a=t-1,s=-1,f=-1,i=0,u=1,g=n;break;case m:a=t-1,s=-1,f=-1,i=n-1,u=-1,g=-1}if(w)switch(A.pixel_size){case 8:!function(e,t,n,r,o,a,i,s){let l,c,u,d=0;const m=A.width;for(u=t;u!==r;u+=n)for(c=o;c!==i;c+=a,d++)l=s[d],e[4*(c+m*u)+0]=l,e[4*(c+m*u)+1]=l,e[4*(c+m*u)+2]=l,e[4*(c+m*u)+3]=255}(e,i,u,g,a,s,f,r);break;case 16:!function(e,t,n,r,o,a,i,s){let l,c,u=0;const d=A.width;for(c=t;c!==r;c+=n)for(l=o;l!==i;l+=a,u+=2)e[4*(l+d*c)+0]=s[u+0],e[4*(l+d*c)+1]=s[u+0],e[4*(l+d*c)+2]=s[u+0],e[4*(l+d*c)+3]=s[u+1]}(e,i,u,g,a,s,f,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(A.pixel_size){case 8:!function(e,t,n,r,o,a,i,s,l){const c=l;let u,d,m,p=0;const h=A.width;for(m=t;m!==r;m+=n)for(d=o;d!==i;d+=a,p++)u=s[p],e[4*(d+h*m)+3]=255,e[4*(d+h*m)+2]=c[3*u+0],e[4*(d+h*m)+1]=c[3*u+1],e[4*(d+h*m)+0]=c[3*u+2]}(e,i,u,g,a,s,f,r,o);break;case 16:!function(e,t,n,r,o,a,i,s){let l,c,u,d=0;const m=A.width;for(u=t;u!==r;u+=n)for(c=o;c!==i;c+=a,d+=2)l=s[d+0]+(s[d+1]<<8),e[4*(c+m*u)+0]=(31744&l)>>7,e[4*(c+m*u)+1]=(992&l)>>2,e[4*(c+m*u)+2]=(31&l)<<3,e[4*(c+m*u)+3]=32768&l?0:255}(e,i,u,g,a,s,f,r);break;case 24:!function(e,t,n,r,o,a,i,s){let l,c,u=0;const d=A.width;for(c=t;c!==r;c+=n)for(l=o;l!==i;l+=a,u+=3)e[4*(l+d*c)+3]=255,e[4*(l+d*c)+2]=s[u+0],e[4*(l+d*c)+1]=s[u+1],e[4*(l+d*c)+0]=s[u+2]}(e,i,u,g,a,s,f,r);break;case 32:!function(e,t,n,r,o,a,i,s){let l,c,u=0;const d=A.width;for(c=t;c!==r;c+=n)for(l=o;l!==i;l+=a,u+=4)e[4*(l+d*c)+2]=s[u+0],e[4*(l+d*c)+1]=s[u+1],e[4*(l+d*c)+0]=s[u+2],e[4*(l+d*c)+3]=s[u+3]}(e,i,u,g,a,s,f,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(v,A.width,A.height,x.pixel_data,x.palettes),{data:v,width:A.width,height:A.height,flipY:!0,generateMipmaps:!0,minFilter:u.B}}}var p=n(86);class h extends u.C{constructor(e){super(e),this.loader=new u.v(this.manager),this.parser=null,this.meshBuilder=new A(this.manager),this.animationBuilder=new w}setAnimationPath(e){return this.animationPath=e,this}load(e,t,n,r){const o=this.meshBuilder.setCrossOrigin(this.crossOrigin);let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:u.D.extractUrlBase(e);const i=this._extractExtension(e).toLowerCase();"pmd"===i||"pmx"===i?this["pmd"===i?"loadPMD":"loadPMX"](e,(function(e){t(o.build(e,a,n,r))}),n,r):r&&r(new Error("THREE.MMDLoader: Unknown model file extension ."+i+"."))}loadAnimation(e,t,n,r,o){const a=this.animationBuilder;this.loadVMD(e,(function(e){n(t.isCamera?a.buildCameraAnimation(e):a.build(e,t))}),r,o)}loadWithAnimation(e,t,n,r,o){const a=this;this.load(e,(function(e){a.loadAnimation(t,e,(function(t){n({mesh:e,animation:t})}),r,o)}),r,o)}loadPMD(e,t,n,r){const o=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(e,(function(e){t(o.parsePmd(e,!0))}),n,r)}loadPMX(e,t,n,r){const o=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(e,(function(e){t(o.parsePmx(e,!0))}),n,r)}loadVMD(e,t,n,r){const o=Array.isArray(e)?e:[e],a=[],i=o.length,s=this._getParser();this.loader.setMimeType(void 0).setPath(this.animationPath).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials);for(let e=0,l=o.length;e<l;e++)this.loader.load(o[e],(function(e){a.push(s.parseVmd(e,!0)),a.length===i&&t(s.mergeVmds(a))}),n,r)}loadVPD(e,t,n,r,o){const a=this._getParser();this.loader.setMimeType(t?void 0:"text/plain; charset=shift_jis").setPath(this.animationPath).setResponseType("text").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(e,(function(e){n(a.parseVpd(e,!0))}),r,o)}_extractExtension(e){const t=e.lastIndexOf(".");return t<0?"":e.slice(t+1)}_getParser(){if(null===this.parser){if(void 0===p.a)throw new Error("THREE.MMDLoader: Import MMDParser https://github.com/takahirox/mmd-parser");this.parser=new p.a.Parser}return this.parser}}const f=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/bWiiMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh8aBHZBl14e8wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOUlEQVRYR+3WMREAMAwDsYY/yoDI7MLwIiP40+RJklfcCCBAgAABAgTqArfb/QMCCBAgQIAAgbbAB3z/e0F3js2cAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/B5ilMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh81dWyx0gFwKAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOklEQVRYR+3WoREAMAwDsWb/UQtCy9wxTOQJ/oQ8SXKKGwEECBAgQIBAXeDt7f4BAQQIECBAgEBb4AOz8Hzx7WLY4wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+1XwW7CMAy1+f9fZOMysSEOEweEOPRNdm3HbdOyIhAcklPrOs/PLy9RygBALxzcCDQFmgJNgaZAU6Ap0BR4PwX8gsRMVLssMRH5HcpzJEaWL7EVg9F1IHRlyqQohgVr4FGUlUcMJSjcUlDw0zvjeun70cLWmneoyf7NgBTQSniBTQQSuJAZsOnnaczjIMb5hCiuHKxokCrJfVnrctyZL0PkJAJe1HMil4nxeyi3Ypfn1kX51jpPvo/JeCNC4PhVdHdJw2XjBR8brF8PEIhNVn12AgP7uHsTBguBn53MUZCqv7Lp07Pn5k1Ro+uWmUNn7D+M57rtk7aG0Vo73xyF/fbFf0bPJjDXngnGocDTdFhygZjwUQrMNrDcmZlQT50VJ/g/UwNyHpu778+yW+/ksOz/BFo54P4AsUXMfRq7XWsAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACMElEQVRYR+2Xv4pTQRTGf2dubhLdICiii2KnYKHVolhauKWPoGAnNr6BD6CvIVaihYuI2i1ia0BY0MZGRHQXjZj/mSPnnskfNWiWZUlzJ5k7M2cm833nO5Mziej2DWWJRUoCpQKlAntSQCqgw39/iUWAGmh37jrRnVsKlgpiqmkoGVABA7E57fvY+pJDdgKqF6HzFCSADkDq+F6AHABtQ+UMVE5D7zXod7fFNhTEckTbj5XQgHzNN+5tQvc5NG7C6BNkp6D3EmpXHDR+dQAjFLchW3VS9rlw3JBh+B7ys5Cf9z0GW1C/7P32AyBAOAz1q4jGliIH3YPuBnSfQX4OGreTIgEYQb/pBDtPnEQ4CivXYPAWBk13oHrB54yA9QuSn2H4AcKRpEILDt0BUzj+RLR1V5EqjD66NPRBVpLcQwjHoHYJOhsQv6U4mnzmrIXJCFr4LDwm/xBUoboG9XX4cc9VKdYoSA2yk5NQLJaKDUjTBoveG3Z2TElTxwjNK4M3LEZgUdDdruvcXzKBpStgp2NPiWi3ks9ZXxIoFVi+AvHLdc9TqtjL3/aYjpPlrzOcEnK62Szhimdd7xX232zFDTgtxezOu3WNMRLjiKgjtOhHVMd1loynVHvOgjuIIJMaELEqhJAV/RCSLbWTcfPFakFgFlALTRRvx+ok6Hlp/Q+v3fmx90bMyUzaEAhmM3KvHlXTL5DxnbGf/1M8RNNACLL5MNtPxP/mypJAqcDSFfgFhpYqWUzhTEAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII="],g=[u.Z,u.Y,u.X,u.V,u.W];class A{constructor(e){this.crossOrigin="anonymous",this.geometryBuilder=new b,this.materialBuilder=new y(e)}setCrossOrigin(e){return this.crossOrigin=e,this}build(e,t,n,r){const o=this.geometryBuilder.build(e),a=this.materialBuilder.setCrossOrigin(this.crossOrigin).setResourcePath(t).build(e,o,n,r),i=new u.fb(o,a),s=new u.eb(function(e){const t=e.geometry,n=[];if(t&&void 0!==t.bones){for(let e=0,r=t.bones.length;e<r;e++){const r=t.bones[e],o=new u.e;n.push(o),o.name=r.name,o.position.fromArray(r.pos),o.quaternion.fromArray(r.rotq),void 0!==r.scl&&o.scale.fromArray(r.scl)}for(let r=0,o=t.bones.length;r<o;r++){const o=t.bones[r];-1!==o.parent&&null!==o.parent&&void 0!==n[o.parent]?n[o.parent].add(n[r]):e.add(n[r])}}return e.updateMatrixWorld(!0),n}(i));return i.bind(s),i}}class b{build(e){const t=[],n=[],r=[],o=[],a=[],i=[],s=[],l=[],c=[],d=[],m=[],p=[],h=[],f=[];let g=0;const A={};for(let o=0;o<e.metadata.vertexCount;o++){const a=e.vertices[o];for(let e=0,n=a.position.length;e<n;e++)t.push(a.position[e]);for(let e=0,t=a.normal.length;e<t;e++)r.push(a.normal[e]);for(let e=0,t=a.uv.length;e<t;e++)n.push(a.uv[e]);for(let e=0;e<4;e++)s.push(a.skinIndices.length-1>=e?a.skinIndices[e]:0);for(let e=0;e<4;e++)l.push(a.skinWeights.length-1>=e?a.skinWeights[e]:0)}for(let t=0;t<e.metadata.faceCount;t++){const n=e.faces[t];for(let e=0,t=n.indices.length;e<t;e++)o.push(n.indices[e])}for(let t=0;t<e.metadata.materialCount;t++){const n=e.materials[t];a.push({offset:3*g,count:3*n.faceCount}),g+=n.faceCount}for(let t=0;t<e.metadata.rigidBodyCount;t++){const n=e.rigidBodies[t];let r=A[n.boneIndex];r=void 0===r?n.type:Math.max(n.type,r),A[n.boneIndex]=r}for(let t=0;t<e.metadata.boneCount;t++){const n=e.bones[t],r={index:t,transformationClass:n.transformationClass,parent:n.parentIndex,name:n.name,pos:n.position.slice(0,3),rotq:[0,0,0,1],scl:[1,1,1],rigidBodyType:void 0!==A[t]?A[t]:-1};-1!==r.parent&&(r.pos[0]-=e.bones[r.parent].position[0],r.pos[1]-=e.bones[r.parent].position[1],r.pos[2]-=e.bones[r.parent].position[2]),i.push(r)}if("pmd"===e.metadata.format)for(let t=0;t<e.metadata.ikCount;t++){const n=e.iks[t],r={target:n.target,effector:n.effector,iteration:n.iteration,maxAngle:4*n.maxAngle,links:[]};for(let t=0,o=n.links.length;t<o;t++){const o={};o.index=n.links[t].index,o.enabled=!0,e.bones[o.index].name.indexOf("ひざ")>=0&&(o.limitation=new u.pb(1,0,0)),r.links.push(o)}m.push(r)}else for(let t=0;t<e.metadata.boneCount;t++){const n=e.bones[t].ik;if(void 0===n)continue;const r={target:t,effector:n.effector,iteration:n.iteration,maxAngle:n.maxAngle,links:[]};for(let e=0,t=n.links.length;e<t;e++){const t={};if(t.index=n.links[e].index,t.enabled=!0,1===n.links[e].angleLimitation){const r=n.links[e].lowerLimitationAngle,o=n.links[e].upperLimitationAngle,a=-o[0],i=-o[1];o[0]=-r[0],o[1]=-r[1],r[0]=a,r[1]=i,t.rotationMin=(new u.pb).fromArray(r),t.rotationMax=(new u.pb).fromArray(o)}r.links.push(t)}m.push(r),i[t].ik=r}if("pmx"===e.metadata.format){const t={};for(let n=0;n<e.metadata.boneCount;n++){const r=e.bones[n],o=r.grant;if(void 0===o)continue;const a={index:n,parentIndex:o.parentIndex,ratio:o.ratio,isLocal:o.isLocal,affectRotation:o.affectRotation,affectPosition:o.affectPosition,transformationClass:r.transformationClass};t[n]={parent:null,children:[],param:a,visited:!1}}const n={parent:null,children:[],param:null,visited:!1};for(const e in t){const r=t[e],o=t[r.parentIndex]||n;r.parent=o,o.children.push(r)}!function e(t){t.param&&(p.push(t.param),i[t.param.index].grant=t.param),t.visited=!0;for(let n=0,r=t.children.length;n<r;n++){const r=t.children[n];r.visited||e(r)}}(n)}function b(t,n,r){for(let o=0;o<n.elementCount;o++){const a=n.elements[o];let i;i="pmd"===e.metadata.format?e.morphs[0].elements[a.index].index:a.index,t.array[3*i+0]+=a.position[0]*r,t.array[3*i+1]+=a.position[1]*r,t.array[3*i+2]+=a.position[2]*r}}for(let n=0;n<e.metadata.morphCount;n++){const r=e.morphs[n],o={name:r.name},a=new u.w(3*e.metadata.vertexCount,3);a.name=r.name;for(let n=0;n<3*e.metadata.vertexCount;n++)a.array[n]=t[n];if("pmd"===e.metadata.format)0!==n&&b(a,r,1);else if(0===r.type)for(let t=0;t<r.elementCount;t++){const n=e.morphs[r.elements[t].index],o=r.elements[t].ratio;1===n.type&&b(a,n,o)}else 1===r.type?b(a,r,1):2===r.type||3===r.type||4===r.type||5===r.type||6===r.type||7===r.type||r.type;c.push(o),d.push(a)}for(let t=0;t<e.metadata.rigidBodyCount;t++){const n=e.rigidBodies[t],r={};for(const e in n)r[e]=n[e];if("pmx"===e.metadata.format&&-1!==r.boneIndex){const t=e.bones[r.boneIndex];r.position[0]-=t.position[0],r.position[1]-=t.position[1],r.position[2]-=t.position[2]}h.push(r)}for(let t=0;t<e.metadata.constraintCount;t++){const n=e.constraints[t],r={};for(const e in n)r[e]=n[e];const o=h[r.rigidBodyIndex1],a=h[r.rigidBodyIndex2];0!==o.type&&2===a.type&&-1!==o.boneIndex&&-1!==a.boneIndex&&e.bones[a.boneIndex].parentIndex===o.boneIndex&&(a.type=1),f.push(r)}const y=new u.h;y.setAttribute("position",new u.w(t,3)),y.setAttribute("normal",new u.w(r,3)),y.setAttribute("uv",new u.w(n,2)),y.setAttribute("skinIndex",new u.mb(s,4)),y.setAttribute("skinWeight",new u.w(l,4)),y.setIndex(o);for(let e=0,t=a.length;e<t;e++)y.addGroup(a[e].offset,a[e].count,e);return y.bones=i,y.morphTargets=c,y.morphAttributes.position=d,y.morphTargetsRelative=!1,y.userData.MMD={bones:i,iks:m,grants:p,rigidBodies:h,constraints:f,format:e.metadata.format},y.computeBoundingSphere(),y}}class y{constructor(e){this.manager=e,this.textureLoader=new u.lb(this.manager),this.tgaLoader=null,this.crossOrigin="anonymous",this.resourcePath=void 0}setCrossOrigin(e){return this.crossOrigin=e,this}setResourcePath(e){return this.resourcePath=e,this}build(e,t){const n=[],r={};this.textureLoader.setCrossOrigin(this.crossOrigin);for(let o=0;o<e.metadata.materialCount;o++){const a=e.materials[o],i={userData:{MMD:{}}};if(void 0!==a.name&&(i.name=a.name),i.diffuse=(new u.k).fromArray(a.diffuse),i.opacity=a.diffuse[3],i.specular=(new u.k).fromArray(a.specular),i.shininess=a.shininess,i.emissive=(new u.k).fromArray(a.ambient),i.transparent=1!==i.opacity,i.fog=!0,i.blending=u.m,i.blendSrc=u.ib,i.blendDst=u.N,i.blendSrcAlpha=u.ib,i.blendDstAlpha=u.s,"pmx"===e.metadata.format&&1==(1&a.flag)?i.side=u.r:i.side=1===i.opacity?u.x:u.r,"pmd"===e.metadata.format){if(a.fileName){const e=a.fileName.split("*");if(i.map=this._loadTexture(e[0],r),e.length>1){const t=e[1].slice(-4).toLowerCase();i.envMap=this._loadTexture(e[1],r),i.combine=".sph"===t?u.J:u.a}}const t=-1===a.toonIndex?"toon00.bmp":e.toonTextures[a.toonIndex].fileName;i.gradientMap=this._loadTexture(t,r,{isToonTexture:!0,isDefaultToonTexture:this._isDefaultToonTexture(t)}),i.userData.outlineParameters={thickness:1===a.edgeFlag?.003:0,color:[0,0,0],alpha:1,visible:1===a.edgeFlag}}else{let t,n;-1!==a.textureIndex&&(i.map=this._loadTexture(e.textures[a.textureIndex],r),i.userData.MMD.mapFileName=e.textures[a.textureIndex]),-1===a.envTextureIndex||1!==a.envFlag&&2!=a.envFlag||(i.matcap=this._loadTexture(e.textures[a.envTextureIndex],r),i.userData.MMD.matcapFileName=e.textures[a.envTextureIndex],i.matcapCombine=1===a.envFlag?u.J:u.a),-1===a.toonIndex||0!==a.toonFlag?(t="toon"+("0"+(a.toonIndex+1)).slice(-2)+".bmp",n=!0):(t=e.textures[a.toonIndex],n=!1),i.gradientMap=this._loadTexture(t,r,{isToonTexture:!0,isDefaultToonTexture:n}),i.userData.outlineParameters={thickness:a.edgeSize/300,color:a.edgeColor.slice(0,3),alpha:a.edgeColor[3],visible:0!=(16&a.flag)&&a.edgeSize>0}}void 0!==i.map&&(i.transparent||this._checkImageTransparency(i.map,t,o),i.emissive.multiplyScalar(.2)),n.push(new x(i))}if("pmx"===e.metadata.format){function o(e,t){for(let n=0,r=e.length;n<r;n++){const r=e[n];if(-1===r.index)continue;const o=t[r.index];o.opacity!==r.diffuse[3]&&(o.transparent=!0)}}for(let t=0,r=e.morphs.length;t<r;t++){const r=e.morphs[t],a=r.elements;if(0===r.type)for(let t=0,r=a.length;t<r;t++){const r=e.morphs[a[t].index];8===r.type&&o(r.elements,n)}else 8===r.type&&o(a,n)}}return n}_getTGALoader(){if(null===this.tgaLoader){if(void 0===m)throw new Error("THREE.MMDLoader: Import TGALoader");this.tgaLoader=new m(this.manager)}return this.tgaLoader}_isDefaultToonTexture(e){return 10===e.length&&/toon(10|0[0-9])\.bmp/.test(e)}_loadTexture(e,t,n,r,o){const a=this;let i;if(!0===(n=n||{}).isDefaultToonTexture){let t;try{t=parseInt(e.match(/toon([0-9]{2})\.bmp$/)[1])}catch(n){console.warn("THREE.MMDLoader: "+e+" seems like a not right default texture path. Using toon00.bmp instead."),t=0}i=f[t]}else i=this.resourcePath+e;if(void 0!==t[i])return t[i];let s=this.manager.getHandler(i);null===s&&(s=".tga"===e.slice(-4).toLowerCase()?this._getTGALoader():this.textureLoader);const l=s.load(i,(function(e){!0===n.isToonTexture&&(e.image=a._getRotatedImage(e.image),e.magFilter=u.K,e.minFilter=u.K),e.flipY=!1,e.wrapS=u.ab,e.wrapT=u.ab;for(let e=0;e<l.readyCallbacks.length;e++)l.readyCallbacks[e](l);delete l.readyCallbacks}),r,o);return l.readyCallbacks=[],t[i]=l,l}_getRotatedImage(e){const t=document.createElement("canvas"),n=t.getContext("2d"),r=e.width,o=e.height;return t.width=r,t.height=o,n.clearRect(0,0,r,o),n.translate(r/2,o/2),n.rotate(.5*Math.PI),n.translate(-r/2,-o/2),n.drawImage(e,0,0),n.getImageData(0,0,r,o)}_checkImageTransparency(e,t,n){e.readyCallbacks.push((function(r){function o(e,t){const n=e.width,r=e.height;let o=Math.round(t.x*n)%n,a=Math.round(t.y*r)%r;o<0&&(o+=n),a<0&&(a+=r);const i=a*n+o;return e.data[4*i+3]}if(!0===r.isCompressedTexture)return void(g.includes(r.format)?e.transparent=!1:e.transparent=!0);const a=void 0!==r.image.data?r.image:function(e){const t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");return n.drawImage(e,0,0),n.getImageData(0,0,t.width,t.height)}(r.image),i=t.groups[n];(function(e,t,n){const r=e.width,a=e.height;if(e.data.length/(r*a)!=4)return!1;for(let r=0;r<n.length;r+=3){const a={x:0,y:0};for(let i=0;i<3;i++){const s=n[3*r+i],l={x:t[2*s+0],y:t[2*s+1]};if(o(e,l)<253)return!0;a.x+=l.x,a.y+=l.y}if(a.x/=3,a.y/=3,o(e,a)<253)return!0}return!1})(a,t.attributes.uv.array,t.index.array.slice(i.start,i.start+i.count))&&(e.transparent=!0)}))}}class w{build(e,t){const n=this.buildSkeletalAnimation(e,t).tracks,r=this.buildMorphAnimation(e,t).tracks;for(let e=0,t=r.length;e<t;e++)n.push(r[e]);return new u.b("",-1,n)}buildSkeletalAnimation(e,t){function n(e,t,n){e.push(t[n+0]/127),e.push(t[n+8]/127),e.push(t[n+4]/127),e.push(t[n+12]/127)}const r=[],o={},a=t.skeleton.bones,i={};for(let e=0,t=a.length;e<t;e++)i[a[e].name]=!0;for(let t=0;t<e.metadata.motionCount;t++){const n=e.motions[t],r=n.boneName;void 0!==i[r]&&(o[r]=o[r]||[],o[r].push(n))}for(const e in o){const a=o[e];a.sort((function(e,t){return e.frameNum-t.frameNum}));const i=[],s=[],l=[],c=[],d=[],m=t.skeleton.getBoneByName(e).position.toArray();for(let e=0,t=a.length;e<t;e++){const t=a[e].frameNum/30,r=a[e].position,o=a[e].rotation,u=a[e].interpolation;i.push(t);for(let e=0;e<3;e++)s.push(m[e]+r[e]);for(let e=0;e<4;e++)l.push(o[e]);for(let e=0;e<3;e++)n(c,u,e);n(d,u,3)}const p=".bones["+e+"]";r.push(this._createTrack(p+".position",u.qb,i,s,c)),r.push(this._createTrack(p+".quaternion",u.R,i,l,d))}return new u.b("",-1,r)}buildMorphAnimation(e,t){const n=[],r={},o=t.morphTargetDictionary;for(let t=0;t<e.metadata.morphCount;t++){const n=e.morphs[t],a=n.morphName;void 0!==o[a]&&(r[a]=r[a]||[],r[a].push(n))}for(const e in r){const t=r[e];t.sort((function(e,t){return e.frameNum-t.frameNum}));const a=[],i=[];for(let e=0,n=t.length;e<n;e++)a.push(t[e].frameNum/30),i.push(t[e].weight);n.push(new u.L(".morphTargetInfluences["+o[e]+"]",a,i))}return new u.b("",-1,n)}buildCameraAnimation(e){function t(e,t){e.push(t.x),e.push(t.y),e.push(t.z)}function n(e,t,n){e.push(t[4*n+0]/127),e.push(t[4*n+1]/127),e.push(t[4*n+2]/127),e.push(t[4*n+3]/127)}const r=void 0===e.cameras?[]:e.cameras.slice();r.sort((function(e,t){return e.frameNum-t.frameNum}));const o=[],a=[],i=[],s=[],l=[],c=[],d=[],m=[],p=[],h=new u.Q,f=new u.t,g=new u.pb,A=new u.pb;for(let e=0,u=r.length;e<u;e++){const u=r[e],w=u.frameNum/30,v=u.position,x=u.rotation,C=u.distance,k=u.fov,E=u.interpolation;o.push(w),g.set(0,0,-C),A.set(v[0],v[1],v[2]),f.set(-x[0],-x[1],-x[2]),h.setFromEuler(f),g.add(A),g.applyQuaternion(h),t(a,A),(b=i).push((y=h).x),b.push(y.y),b.push(y.z),b.push(y.w),t(s,g),l.push(k);for(let e=0;e<3;e++)n(c,E,e);n(d,E,3);for(let e=0;e<3;e++)n(m,E,4);n(p,E,5)}var b,y;const w=[];return w.push(this._createTrack("target.position",u.qb,o,a,c)),w.push(this._createTrack(".quaternion",u.R,o,i,d)),w.push(this._createTrack(".position",u.qb,o,s,m)),w.push(this._createTrack(".fov",u.L,o,l,p)),new u.b("",-1,w)}_createTrack(e,t,n,r,o){if(n.length>2){n=n.slice(),r=r.slice(),o=o.slice();const e=r.length/n.length,t=o.length/n.length;let a=1;for(let i=2,s=n.length;i<s;i++){for(let t=0;t<e;t++)if(r[a*e+t]!==r[(a-1)*e+t]||r[a*e+t]!==r[i*e+t]){a++;break}if(i>a){n[a]=n[i];for(let t=0;t<e;t++)r[a*e+t]=r[i*e+t];for(let e=0;e<t;e++)o[a*t+e]=o[i*t+e]}}n.length=a+1,r.length=(a+1)*e,o.length=(a+1)*t}const a=new t(e,n,r);return a.createInterpolant=function(e){return new v(this.times,this.values,this.getValueSize(),e,new Float32Array(o))},a}}class v extends u.y{constructor(e,t,n,r,o){super(e,t,n,r),this.interpolationParams=o}interpolate_(e,t,n,r){const o=this.resultBuffer,a=this.sampleValues,i=this.valueSize,s=this.interpolationParams,l=e*i,c=l-i,d=r-t<.05?0:(n-t)/(r-t);if(4===i){const t=s[4*e+0],n=s[4*e+1],r=s[4*e+2],i=s[4*e+3],m=this._calculate(t,n,r,i,d);u.Q.slerpFlat(o,0,a,c,a,l,m)}else if(3===i)for(let t=0;t!==i;++t){const n=s[12*e+4*t+0],r=s[12*e+4*t+1],i=s[12*e+4*t+2],u=s[12*e+4*t+3],m=this._calculate(n,r,i,u,d);o[t]=a[c+t]*(1-m)+a[l+t]*m}else{const t=s[4*e+0],n=s[4*e+1],r=s[4*e+2],i=s[4*e+3],u=this._calculate(t,n,r,i,d);o[0]=a[c]*(1-u)+a[l]*u}return o}_calculate(e,t,n,r,o){let a=.5,i=a,s=1-i;const l=Math;let c,u,d;for(let n=0;n<15;n++){c=3*s*s*i,u=3*s*i*i,d=i*i*i;const n=c*e+u*t+d-o;if(l.abs(n)<1e-5)break;a/=2,i+=n<0?a:-a,s=1-i}return c*n+u*r+d}}class x extends u.db{constructor(e){super(),this._matcapCombine=u.a,this.emissiveIntensity=1,this.normalMapType=u.kb,this.combine=u.J,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.lights=!0,this.vertexShader=d.vertexShader,this.fragmentShader=d.fragmentShader,this.defines=Object.assign({},d.defines),Object.defineProperty(this,"matcapCombine",{get:function(){return this._matcapCombine},set:function(e){switch(this._matcapCombine=e,e){case u.J:this.defines.MATCAP_BLENDING_MULTIPLY=!0,delete this.defines.MATCAP_BLENDING_ADD;break;default:case u.a:this.defines.MATCAP_BLENDING_ADD=!0,delete this.defines.MATCAP_BLENDING_MULTIPLY}}}),this.uniforms=u.nb.clone(d.uniforms);const t=["specular","shininess","opacity","diffuse","map","matcap","gradientMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveMap","bumpMap","bumpScale","normalMap","normalScale","displacemantBias","displacemantMap","displacemantScale","specularMap","alphaMap","envMap","reflectivity","refractionRatio"];for(const e of t)Object.defineProperty(this,e,{get:function(){return this.uniforms[e].value},set:function(t){this.uniforms[e].value=t}});Object.defineProperty(this,"color",Object.getOwnPropertyDescriptor(this,"diffuse")),this.setValues(e)}copy(e){return super.copy(e),this.matcapCombine=e.matcapCombine,this.emissiveIntensity=e.emissiveIntensity,this.normalMapType=e.normalMapType,this.combine=e.combine,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}x.prototype.isMMDToonMaterial=!0;class C extends u.l{constructor(e){super(e)}parse(e,t){const n={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function r(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function o(e,t,n,r){const o=n*r*4,a=new Uint8Array(e,t,o),i=new Uint8Array(o);let s=0,l=0;for(let e=0;e<r;e++)for(let e=0;e<n;e++){const e=a[l];l++;const t=a[l];l++;const n=a[l];l++;const r=a[l];l++,i[s]=n,s++,i[s]=t,s++,i[s]=e,s++,i[s]=r,s++}return i}const a=r("DXT1"),i=r("DXT3"),s=r("DXT5"),l=r("ETC1"),c=new Int32Array(e,0,31);if(542327876!==c[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),n;if(4&!c[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),n;let d;const m=c[21];let p=!1;switch(m){case a:d=8,n.format=u.Z;break;case i:d=16,n.format=u.T;break;case s:d=16,n.format=u.U;break;case l:d=8,n.format=u.V;break;default:if(!(32===c[22]&&16711680&c[23]&&65280&c[24]&&255&c[25]&&4278190080&c[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(h=m,String.fromCharCode(255&h,h>>8&255,h>>16&255,h>>24&255))),n;p=!0,d=64,n.format=u.S}var h;n.mipmapCount=1,131072&c[2]&&!1!==t&&(n.mipmapCount=Math.max(1,c[7]));const f=c[28];if(n.isCubemap=!!(512&f),n.isCubemap&&(!(1024&f)||!(2048&f)||!(4096&f)||!(8192&f)||!(16384&f)||!(32768&f)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),n;n.width=c[4],n.height=c[3];let g=c[1]+4;const A=n.isCubemap?6:1;for(let t=0;t<A;t++){let t=n.width,r=n.height;for(let a=0;a<n.mipmapCount;a++){let a,i;p?(a=o(e,g,t,r),i=a.length):(i=Math.max(4,t)/4*Math.max(4,r)/4*d,a=new Uint8Array(e,g,i));const s={data:a,width:t,height:r};n.mipmaps.push(s),g+=i,t=Math.max(t>>1,1),r=Math.max(r>>1,1)}}return n}}var k=n(145);n(198),n(199),n(201),n(207),n(209),n(210),n(211),n(214),n(215),n(216),n(217),n(218),n(219),n(220),n(221),n(223),n(224),n(225),n(226),n(227),n(228),n(229),n(230),n(235),n(236),n(237);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var M=function(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":E(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(e){}return!1}(),I=(n(97),["id","async","type","onError","onLoad"]);function T(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var O=function(){return null},B=function(e){var t=e.id,n=(e.async,e.type),r=void 0===n?"text/javascript":n,o=e.onError,a=void 0===o?O:o,i=e.onLoad,s=void 0===i?O:i,l=T(e,I);return new Promise((function(e,n){var o=document.getElementById(t),i=!!o;if(o||(o=document.createElement("script"),Object.keys(l).forEach((function(e){return o[e]=l[e]})),o.id=t,o.async=!0,o.type=r),o.isLoaded){if(o.isErrored){var c=new Error("<script>.isErrored is true.");return a({error:c}),n({error:c})}return s({event:event,element:o}),e({event:event,element:o})}if(o.addEventListener("error",(function(e){return o.isLoaded=!0,o.isErrored=!0,a({error:e}),n({error:e})})),l.src&&o.addEventListener("load",(function(t){return o.isLoaded=!0,s({event:t,element:o}),e({event:t,element:o})})),i||document.getElementsByTagName("head")[0].appendChild(o),!l.src)return o.isLoaded=!0,s({element:o}),e({element:o})}))},j=n.p+"src/client/model/Horkeukamui/Horkeukamui-160.a7373f24.pmx",D=(n.p,n.p+"src/client/model/Horkeukamui/tex/body_N.png"),L=(n.p,n.p+"src/client/model/Horkeukamui/tex/body2_N.png"),R=(n.p,n.p+"src/client/model/Horkeukamui/tex/cloth_N.png"),N=(n.p,n.p,n.p,n.p,n.p+"src/client/model/Horkeukamui/tex/cloth23_N.png"),P=(n.p,n.p,n.p,n.p,{pubicHair:"丁毛",fundoshiBack:"屁股兜",fundoshiFront:"肚兜",bigFundoshiFront:"大丁丁肚兜",penis:"小丁丁",bigPenis:"大丁丁"}),_=n.p+"src/client/motion/wavefile_v2.745b642f.vmd";function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t,n,r,o,a,i){try{var s=e[a](i),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,o)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}function V(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=new u.E;W.addHandler(/\.dds$/i,new C);var G=new u.lb(W),J=new h(W),q=["fundoshiBack","fundoshiFront","penis","bigFundoshiFront","bigPenis"],K={intensity:{min:0,max:5,step:.001},shadowIntensity:{min:0,max:1,step:.001},shadowBoundry:{min:0,max:10,step:.01},needShadowHelper:{},positionX:{min:-5,max:5,step:.01},positionY:{min:-5,max:5,step:.01},positionZ:{min:-5,max:5,step:.01}},X={"tex\\body.dds":D,"tex\\body2.dds":L,"tex\\cloth.dds":R,"tex\\cloth2.dds":N,"tex\\cloth3.dds":N},Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(m,e);var t,n,r,a,i,d=Q(m);function m(){var e;F(this,m);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=d.call.apply(d,[this].concat(n))).canvas=o.a.createRef(),e.gui=null,e.camera=null,e.cameraControls=null,e.scene=null,e.light=null,e.lightWithShadow=null,e.renderer=null,e.rendererControlFolder=null,e.clock=null,e.loadingTimeout=null,e.animationFrame=null,e.animationControls={shouldAnimate:!1,fps:60},e.animationToogleUI=null,e.horkeukamui=null,e.mmdPhysics=null,e.mmdAnimationHelper=new k.a({afterglow:2}),e.controlObject={light:{intensity:3.5,shadowIntensity:.5,shadowBoundry:4,needShadowHelper:!1,positionX:-3,positionY:4,positionZ:2},horkeukamui:{fundoshiBack:!0,fundoshiFront:!0,penis:!0,bigFundoshiFront:!1,bigPenis:!1,erection:0}},e.controlUIObject={Light:null,light:{},Horkeukamui:null,HorkeukamuiMorphs:null,horkeukamui:{morphs:{}}},e.updateLights=function(){var t=e.controlObject.light,n=t.intensity,r=t.shadowIntensity,o=t.shadowBoundry,a=t.needShadowHelper,i=t.positionX,s=t.positionY,l=t.positionZ;e.light.intensity=n*(1-r),e.light.position.set(i,s,l),e.lightHelper.update(),e.lightWithShadow.intensity=n*r,e.lightWithShadow.position.set(i,s,l),e.lightWithShadow.castShadow=!!r,e.shadowHelper.visible=a&&!!r;var c=e.lightWithShadow.shadow.camera;c.left=-o,c.right=o,c.top=o,c.bottom=-o,c.updateProjectionMatrix(),e.shadowHelper.update(),window.requestAnimationFrame(e.renderNextFrame)},e.initScene=function(){e.scene=new u.bb,e.scene.add(new u.d(1));var t=new u.p("#ffffff",2);t.castShadow=!1,e.light=t;var n=e.controlObject.light,r=n.positionX,o=n.positionY,a=n.positionZ;e.light.position.set(r,o,a),e.lightHelper=new u.q(t,1);var i=t.clone();i.shadow.camera.far=7,i.shadow.mapSize.set(1024,1024),i.shadow.normalBias=.05,e.lightWithShadow=i,e.shadowHelper=new u.i(i.shadow.camera),e.scene.add(t),e.scene.add(e.lightHelper),e.scene.add(i),e.scene.add(e.shadowHelper),e.controlUIObject.Light=e.gui.addFolder("Light");var s=e.controlObject.light,l=e.controlUIObject.Light;Object.keys(K).forEach((function(t){var n=K[t];e.controlUIObject.light[t]=l.add(s,t),n.step&&(e.controlUIObject.light[t]=e.controlUIObject.light[t].min(n.min).max(n.max).step(n.step)),e.controlUIObject.light[t]=e.controlUIObject.light[t].onChange(e.updateLights)}))},e.initRenderer=function(){var t=new u.rb({canvas:e.canvas.current,antialias:!0});e.renderer=t,t.physicallyCorrectLights=!0,t.toneMappingExposure=1,t.shadowMap.enabled=!0,t.shadowMap.type=u.O,t.setClearColor(2240318),e.rendererControlFolder=e.gui.addFolder("Renderer"),e.rendererControlFolder.add(e.renderer,"physicallyCorrectLights"),e.rendererControlFolder.add(e.renderer,"toneMappingExposure").min(0).max(5).step(.01),e.rendererControlFolder.add(e.renderer.shadowMap,"enabled").name("shadowMapEnabled"),e.initCamera(),e.handleWindowResize()},e.renderNextFrame=function(){e.renderer.render(e.scene,e.camera)},e.updateMorphControlValues=s()((function(){var t=e.controlUIObject.horkeukamui.morphs;Object.keys(t).forEach((function(e){t[e].updateDisplay()}))}),100),e.tick=function(){e.cameraControls.update(),e.mmdAnimationHelper.update(e.clock.getDelta()),e.renderNextFrame(),e.updateMorphControlValues(),e.animationControls.shouldAnimate&&(e.animationFrame=window.requestAnimationFrame(e.tick))},e.initCamera=function(){var t=e.canvas.current,n=t.clientWidth,r=t.clientHeight;e.camera=new u.P(75,n/r,.1,100),e.camera.position.set(1,2,3),e.cameraControls=new c.a(e.camera,t),e.cameraControls.target.set(0,2,0),e.cameraControls.update(),e.cameraControls.addEventListener("change",(function(){e.animationControls.shouldAnimate||e.renderNextFrame()}))},e.handleWindowResize=s()((function(){if(e.canvas.current){var t=e.canvas.current,n=e.renderer,r=t.clientWidth,o=t.clientHeight;n.setSize(r,o),n.setPixelRatio(Math.min(window.devicePixelRatio,2)),e.camera.aspect=r/o,e.camera.updateProjectionMatrix(),e.animationControls.shouldAnimate||e.renderNextFrame()}}),100),e.getMaterial=function(t){var n=t.name;return e.horkeukamui.material.find((function(e){return n===e.name}))},e.addKamuiControlllers=function(){e.controlUIObject.Horkeukamui=e.gui.addFolder("Horkeukamui");var t=e.controlUIObject.Horkeukamui;e.controlUIObject.horkeukamui.fundoshiBack=t.add(e.controlObject.horkeukamui,"fundoshiBack").onChange((function(){var t=e.getMaterial({name:P.fundoshiBack}),n=e.controlObject.horkeukamui.fundoshiBack;t.visible=n,t.opacity=+n,window.requestAnimationFrame(e.renderNextFrame)})),e.controlUIObject.horkeukamui.fundoshiFront=t.add(e.controlObject.horkeukamui,"fundoshiFront").onChange((function(){var t=e.getMaterial({name:P.fundoshiFront}),n=e.controlObject.horkeukamui.fundoshiFront;t.visible=n,t.opacity=+n,e.horkeukamui.morphTargetInfluences[77]=.2*+n,n&&e.controlObject.horkeukamui.bigFundoshiFront&&e.controlUIObject.horkeukamui.bigFundoshiFront.setValue(!1),window.requestAnimationFrame(e.renderNextFrame)})),e.controlUIObject.horkeukamui.bigFundoshiFront=t.add(e.controlObject.horkeukamui,"bigFundoshiFront").onChange((function(){var t=e.getMaterial({name:P.bigFundoshiFront}),n=e.controlObject.horkeukamui.bigFundoshiFront;t.visible=n,t.opacity=+n,n&&e.controlObject.horkeukamui.fundoshiFront&&e.controlUIObject.horkeukamui.fundoshiFront.setValue(!1),window.requestAnimationFrame(e.renderNextFrame)})),e.controlUIObject.horkeukamui.bigPenis=t.add(e.controlObject.horkeukamui,"bigPenis").onChange((function(){var t=e.getMaterial({name:P.penis}),n=e.getMaterial({name:P.bigPenis}),r=e.controlObject.horkeukamui.bigPenis;t.visible=!r,t.opacity=+!r,n.visible=r,n.opacity=+r,window.requestAnimationFrame(e.renderNextFrame)})),e.controlUIObject.HorkeukamuiMorphs=e.controlUIObject.Horkeukamui.addFolder("Morphs"),Object.keys(e.horkeukamui.morphTargetDictionary).forEach((function(t){e.controlUIObject.horkeukamui.morphs[t]=e.controlUIObject.HorkeukamuiMorphs.add(e.horkeukamui.morphTargetInfluences,e.horkeukamui.morphTargetDictionary[t]).min(0).max(1).step(.01).name(t).onChange((function(){return window.requestAnimationFrame(e.renderNextFrame)}))}))},e.loadModels=function(){J.loadWithAnimation(j,[_],(function(t){var n=t.mesh,r=t.animation;n.scale.set(.2,.2,.2),n.position.set(0,0,0),n.receiveShadow=!0,n.castShadow=!0,e.scene.add(n),window.Horkeukamui=n,e.horkeukamui=n;var o=Math.min(4,e.renderer.capabilities.getMaxAnisotropy());n.material.forEach((function(e){var t;e.map.anisotropy=o;var n=X[null===(t=e.userData.MMD)||void 0===t?void 0:t.mapFileName];n&&(e.normalMap=G.load(n),e.normalMap.flipY=!1,e.normalMap.wrapS=u.ab,e.normalMap.wrapT=u.ab,e.normalMap.anisotropy=o)})),n.morphTargetInfluences[77]=.2;var a=e.getMaterial({name:P.pubicHair});a.visible=!0,a.opacity=1,q.forEach((function(t){var n=e.controlObject.horkeukamui[t],r=e.getMaterial({name:P[t]});r.visible=n,r.opacity=+n})),e.mmdAnimationHelper.add(n,{animation:r,physics:!0}),e.mmdAnimationHelper.enable("animation",!1),e.addKamuiControlllers(),e.loadingTimeout=window.setTimeout(e.renderNextFrame,500)}))},e}return t=m,(n=[{key:"componentDidMount",value:(a=regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=B({id:"ammo-js",src:M?"library/ammo/ammo.99d0ec0.wasm.js":"library/ammo/ammo.99d0ec0.js"}),this.gui=new l.a({hideable:!0,closed:!1,closeOnTop:!0}),this.clock=new u.j,this.initScene(),this.initRenderer(),this.updateLights(),this.animationToogleUI=this.gui.add(this.animationControls,"shouldAnimate").onChange((function(){r.animationControls.shouldAnimate?(r.mmdAnimationHelper.enable("animation",!0),r.clock.start(),r.tick()):(r.clock.stop(),r.mmdAnimationHelper.enable("animation",!1))})),window.addEventListener("resize",this.handleWindowResize),e.next=10,t;case 10:return e.next=12,window.Ammo();case 12:n=e.sent,window.Ammo=n,this.loadModels();case 15:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){U(o,n,r,i,s,"next",e)}function s(e){U(o,n,r,i,s,"throw",e)}i(void 0)}))},function(){return i.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.gui&&this.gui.destory(),window.cancelAnimationFrame(this.animationFrame),window.removeEventListener("resize",this.handleWindowResize),window.clearTimeout(this.loadingTimeout)}},{key:"render",value:function(){return o.a.createElement($,null,o.a.createElement(ee,{ref:this.canvas}))}}])&&H(t.prototype,n),r&&H(t,r),m}(o.a.PureComponent),$=a.default.div.withConfig({displayName:"Main__StyledMain",componentId:"sc-1te9q8o-0"})(["flex:auto;"]),ee=a.default.canvas.withConfig({displayName:"Main__Canvas",componentId:"sc-1te9q8o-1"})(["width:100%;height:100%;background-color:#222f3e;"]);t.a=Z},144:function(e,t,n){"use strict";n(107),n(108),n(110),n(38),n(78),n(52),n(79),n(42),n(80),n(81);var r=n(1),o=n.n(r),a=n(2),i=n.n(a),s=n(17),l=n.p+"img/github-icon.e1201fcc.svg";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g="https://github.com/bill42362/portfolio",A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,n,r,a=p(i);function i(){return u(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.email,n=e.branchName,r=n?"".concat(g,"/tree/").concat(n):g;return o.a.createElement(b,null,o.a.createElement(y,{href:r,target:"_blank"},o.a.createElement("img",{src:l,alt:"github"})),o.a.createElement(y,{href:"mailto:".concat(t),target:"_blank"},o.a.createElement("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MTIgNTEyIj48cGF0aCBkPSJNNDY3LDYxSDQ1QzIwLjIxOCw2MSwwLDgxLjE5NiwwLDEwNnYzMDBjMCwyNC43MiwyMC4xMjgsNDUsNDUsNDVoNDIyYzI0LjcyLDAsNDUtMjAuMTI4LDQ1LTQ1VjEwNiBDNTEyLDgxLjI4LDQ5MS44NzIsNjEsNDY3LDYxeiBNNDYwLjc4Niw5MUwyNTYuOTU0LDI5NC44MzNMNTEuMzU5LDkxSDQ2MC43ODZ6IE0zMCwzOTkuNzg4VjExMi4wNjlsMTQ0LjQ3OSwxNDMuMjRMMzAsMzk5Ljc4OHogTTUxLjIxMyw0MjFsMTQ0LjU3LTE0NC41N2w1MC42NTcsNTAuMjIyYzUuODY0LDUuODE0LDE1LjMyNyw1Ljc5NSwyMS4xNjctMC4wNDZMMzE3LDI3Ny4yMTNMNDYwLjc4Nyw0MjFINTEuMjEzeiBNNDgyLDM5OS43ODcgTDMzOC4yMTMsMjU2TDQ4MiwxMTIuMjEyVjM5OS43ODd6Ii8+PC9zdmc+",alt:"email"})))}}])&&d(t.prototype,n),r&&d(t,r),i}(o.a.PureComponent);A.propTypes={email:i.a.string,branchName:i.a.string},A.defaultProps={email:"bill42362@gmail.com",branchName:""};var b=s.default.div.withConfig({displayName:"Footer__StyledFooter",componentId:"sc-1ygzj31-0"})(["flex:none;display:flex;justify-content:center;align-items:flex-end;padding:20px;"]),y=s.default.a.withConfig({displayName:"Footer__Link",componentId:"sc-1ygzj31-1"})(["display:flex;justify-content:center;align-items:center;border-radius:50%;width:36px;height:36px;background-color:#576574;& + &{margin-left:8px;}img{width:60%;height:auto;}"]);t.a=A},146:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),a=n(131),i=n.n(a),s=n(132);i.a.render(o.a.createElement(s.a,null),document.getElementById("app-root"))},56:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}}]);
//# sourceMappingURL=bundle~bundle~31ecd969.b0d62755.js.map