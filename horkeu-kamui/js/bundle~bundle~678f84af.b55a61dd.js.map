{"version":3,"sources":["webpack:///./node_modules/styled-normalize/dist/index.js","webpack:///./node_modules/shallowequal/index.js","webpack:///./node_modules/three/examples/jsm/animation/CCDIKSolver.js","webpack:///./node_modules/three/examples/jsm/animation/MMDPhysics.js","webpack:///./node_modules/three/examples/jsm/animation/MMDAnimationHelper.js","webpack:///./node_modules/scheduler/index.js","webpack:///./node_modules/scheduler/cjs/scheduler.production.min.js","webpack:///./node_modules/regenerator-runtime/runtime.js","webpack:///./node_modules/styled-components/dist/styled-components.browser.esm.js"],"names":["Object","defineProperty","exports","value","default","Normalize","normalize","_styledComponents","css","createGlobalStyle","_default","module","objA","objB","compare","compareContext","ret","call","keysA","keys","keysB","length","bHasOwnProperty","prototype","hasOwnProperty","bind","idx","key","valueA","valueB","_q","_targetPos","_targetVec","_effectorPos","_effectorVec","_linkPos","_invLinkQ","_linkScale","_axis","_vector","_matrix","CCDIKSolver","mesh","iks","this","_valid","i","il","updateOne","ik","bones","skeleton","math","Math","effector","target","setFromMatrixPosition","matrixWorld","links","iteration","undefined","rotated","j","jl","link","index","enabled","limitation","rotationMin","rotationMax","decompose","invert","subVectors","applyQuaternion","angle","dot","acos","minAngle","maxAngle","crossVectors","setFromAxisAngle","quaternion","multiply","c","w","c2","sqrt","set","x","y","z","rotation","setFromVector3","toVector3","max","min","updateMatrixWorld","geometry","userData","MMD","link0","link1","parent","console","warn","name","getPosition","bone","matrixWorldInv","applyMatrix4","setPositionOfBoneToAttributeArray","array","v","super","root","matrix","copy","matrixAutoUpdate","sphereGeometry","targetSphereMaterial","color","depthTest","depthWrite","transparent","effectorSphereMaterial","linkSphereMaterial","lineMaterial","_init","force","visible","offset","targetBone","effectorBone","targetMesh","children","effectorMesh","position","linkBone","line","attributes","needsUpdate","scope","createLine","vertices","Float32Array","setAttribute","createLineGeometry","add","rigidBodyParams","constraintParams","params","Ammo","Error","manager","unitStep","maxStepNum","gravity","world","bodies","constraints","delta","isNonDefaultScale","allocThreeVector3","allocThreeQuaternion","scale","_updateRigidBodies","_stepSimulation","_updateBones","freeThreeVector3","freeThreeQuaternion","reset","cycles","update","setGravity","btVector3","currentPosition","currentQuaternion","currentScale","_createWorld","_initRigidBodies","_initConstraints","config","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","cache","btDbvtBroadphase","solver","btSequentialImpulseConstraintSolver","btDiscreteDynamicsWorld","rigidBodies","push","bodyA","rigidBodyIndex1","bodyB","rigidBodyIndex2","Constraint","stepTime","stepSimulation","updateFromBone","updateBone","threeVector3s","threeMatrix4s","threeQuaternions","threeEulers","transforms","quaternions","vector3s","pop","m","q","e","btTransform","t","btQuaternion","setIdentity","allocQuaternion","getBasis","getRotation","quaternionToMatrix3","freeQuaternion","getOrigin","setValue","t1","t2","o","setOrigin","setRotation","matrix3ToQuaternion","setBasis","a","thQ","thE","allocThreeEuler","setBasisFromThreeQuaternion","setFromEuler","freeThreeEuler","setX","setY","setZ","setW","allocTransform","m1","getBasisAsMatrix3","m2","o1","o2","v1","multiplyMatrix3ByVector3","v2","addVector3","m3","multiplyMatrices3","setBasisFromMatrix3","freeVector3","transposeMatrix3","negativeVector3","v10","rowOfMatrix3","v11","v12","v20","columnOfMatrix3","v21","v22","dotVectors3","allocVector3","v4","v0","xx","yy","zz","xy","yz","zx","xw","yw","zw","s","body","boneOffsetForm","boneOffsetFormInverse","_setTransformFromBone","boneIndex","type","_updateBoneRotation","_updateBonePosition","_setPositionFromBone","shape","p","shapeType","btSphereShape","width","btBoxShape","height","depth","btCapsuleShape","generateShape","weight","localInertia","calculateLocalInertia","setOriginFromArray3","setBasisFromArray3","vector","boneForm","setOriginFromThreeVector3","getWorldPosition","form","multiplyTransforms","state","btDefaultMotionState","info","btRigidBodyConstructionInfo","set_m_friction","friction","set_m_restitution","restitution","btRigidBody","setCollisionFlags","getCollisionFlags","setActivationState","setDamping","positionDamping","rotationDamping","setSleepingThresholds","addRigidBody","groupIndex","groupTarget","inverseTransform","freeTransform","tr","getCenterOfMassTransform","_getBoneTransform","setCenterOfMassTransform","getMotionState","setWorldTransform","getWorldTransform","copyOrigin","_getWorldTransformForBone","thQ2","thQ3","setFromRotationMatrix","conjugate","thV","worldToLocal","constraint","formA","formB","formInverseA","formInverseB","formA2","formB2","btGeneric6DofSpringConstraint","lll","lul","all","aul","translationLimitation1","translationLimitation2","rotationLimitation1","rotationLimitation2","setLinearLowerLimit","setLinearUpperLimit","setAngularLowerLimit","setAngularUpperLimit","springPosition","enableSpring","setStiffness","springRotation","setParam","addConstraint","_position","_quaternion","_scale","_matrixWorldInv","physics","materials","wireframe","opacity","compose","child","origin","createGeometry","param","createCapsuleGeometry","radius","cylinderHeight","segmentsRadius","segmentsHeight","upperSphere","PI","lowerSphere","updateMatrix","merge","meshes","camera","cameraTarget","audio","audioManager","objects","WeakMap","configuration","sync","afterglow","resetPhysicsOnLoop","pmxAnimation","animation","grant","cameraAnimation","onBeforePhysics","sharedPhysics","masterPhysics","object","isSkinnedMesh","_addMesh","isCamera","_setupCamera","_setupAudio","_syncDuration","_removeMesh","_clearCamera","_clearAudio","control","_animateMesh","_updateSharedPhysics","_animateCamera","vpd","resetPose","pose","boneParams","boneNameDictionary","boneParam","fromArray","translation","format","sortedBonesData","_sortBoneDataArray","slice","ikSolver","_createCCDIKSolver","grantSolver","createGrantSolver","_animatePMXMesh","_optimizeIK","GrantSolver","grants","indexOf","looped","_setupMeshAnimation","_setupMeshPhysics","clearCamera","_setupCameraAnimation","clearAudio","AudioManager","duration","found","writeIndex","delete","remove","get","animations","Array","isArray","mixer","clipAction","play","addEventListener","event","tracks","action","_clip","_getMasterPhysics","_createMMDPhysics","animationWarmup","warmup","_restoreBones","_saveBones","boneDataArray","sort","b","transformationClass","_quaternionIndex","_grantResultMap","clear","updateProjectionMatrix","up","lookAt","physicsEnabled","rigidBodyType","_actions","clip","has","propertyMixers","_bindings","accuIndex","_accuIndex","propertyMixer","buffer","valueSize","binding","getValue","backupBones","toArray","updateRigidBodies","updateBones","_quaternions","Map","boneData","isLocal","affectRotation","parentIndex","ratio","addGrantRotation","linkIndex","elapsedTime","currentTime","delayTime","audioDuration","elapsed","_shouldStopAudio","stop","_shouldStartAudio","isPlaying","parentBone","affectPosition","slerp","f","g","h","k","l","window","MessageChannel","unstable_now","setTimeout","u","Date","now","clearTimeout","unstable_forceFrameRate","performance","A","cancelAnimationFrame","requestAnimationFrame","error","B","C","D","E","F","G","floor","H","I","port2","port1","onmessage","postMessage","J","d","K","L","M","n","r","sortIndex","id","N","O","P","Q","R","S","T","U","V","callback","startTime","expirationTime","W","X","priorityLevel","Y","Z","unstable_IdlePriority","unstable_ImmediatePriority","unstable_LowPriority","unstable_NormalPriority","unstable_Profiling","unstable_UserBlockingPriority","unstable_cancelCallback","unstable_continueExecution","unstable_getCurrentPriorityLevel","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","unstable_requestPaint","unstable_runWithPriority","unstable_scheduleCallback","delay","timeout","unstable_shouldYield","unstable_wrapCallback","apply","arguments","runtime","Op","hasOwn","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","GenStateSuspendedStart","method","arg","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","done","GenStateSuspendedYield","makeInvokeMethod","fn","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","invoke","resolve","reject","result","__await","then","unwrapped","previousPromise","callInvokeWithMethodAndArg","TypeError","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iterable","iteratorMethod","isNaN","constructor","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","reverse","skipTempReset","prev","charAt","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","assign","freeze","_","styledComponentId","process","env","REACT_APP_SC_ATTR","SC_ATTR","Boolean","SC_DISABLE_SPEEDY","REACT_APP_SC_DISABLE_SPEEDY","join","groupSizes","Uint32Array","tag","indexOfGroup","insertRules","insertRule","clearGroup","deleteRule","getGroup","getRule","RegExp","split","registerName","innerHTML","trim","match","parseInt","getTag","__webpack_nonce__","document","head","createElement","childNodes","nodeType","hasAttribute","nextSibling","insertBefore","$","element","appendChild","createTextNode","sheet","styleSheets","ownerNode","cssRules","cssText","nodes","removeChild","textContent","rules","splice","isServer","useCSSOMInjection","options","gs","names","querySelectorAll","getAttribute","parentNode","registerId","reconstructWithOptions","allocateGSInstance","hasNameForId","Set","clearNames","clearRules","clearTag","String","fromCharCode","ee","abs","replace","te","charCodeAt","ne","re","oe","ie","staticRulesId","isStatic","componentId","baseHash","baseStyle","generateAndInjectStyles","hash","Ne","se","ae","ce","plugins","use","concat","lastIndexOf","reduce","ue","createContext","le","Consumer","de","he","pe","fe","me","ye","stylisPlugins","disableCSSOMInjection","prefix","disableVendorPrefixes","Provider","ve","inject","getName","ge","Se","we","Ee","toLowerCase","be","test","_e","isReactComponent","Ae","Oe","theme","Re","De","je","Te","ke","xe","Ve","Be","Me","ze","Le","Ge","Fe","Ye","attrs","parentComponentId","filter","shouldForwardProp","componentStyle","defaultProps","foldedComponentIds","$as","as","style","className","ref","forwardRef","withComponent","_foldedDefaultProps","qe","withConfig","He","createStyles","removeStyles","renderStyles","$e","JSON","stringify","current","memo","We","Ue","_emitSheetCSS","instance","getStyleTags","sealed","getStyleElement","dangerouslySetInnerHTML","__html","nonce","seal","collectStyles","interleaveWithNodeStream","Je","Xe","Ze","StyleSheet","masterSheet"],"mappings":"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","file":"js/bundle~bundle~678f84af.b55a61dd.js","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Normalize = exports.normalize = void 0;\n\nvar _styledComponents = require(\"styled-components\");\n\nvar normalize = (0, _styledComponents.css)([\"html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type=\\\"button\\\"],[type=\\\"reset\\\"],[type=\\\"submit\\\"]{-webkit-appearance:button;}button::-moz-focus-inner,[type=\\\"button\\\"]::-moz-focus-inner,[type=\\\"reset\\\"]::-moz-focus-inner,[type=\\\"submit\\\"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type=\\\"button\\\"]:-moz-focusring,[type=\\\"reset\\\"]:-moz-focusring,[type=\\\"submit\\\"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type=\\\"checkbox\\\"],[type=\\\"radio\\\"]{box-sizing:border-box;padding:0;}[type=\\\"number\\\"]::-webkit-inner-spin-button,[type=\\\"number\\\"]::-webkit-outer-spin-button{height:auto;}[type=\\\"search\\\"]{-webkit-appearance:textfield;outline-offset:-2px;}[type=\\\"search\\\"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none;}\"]);\nexports.normalize = normalize;\nvar Normalize = (0, _styledComponents.createGlobalStyle)(normalize);\nexports.Normalize = Normalize;\nvar _default = normalize;\nexports.default = _default;","//\n\nmodule.exports = function shallowEqual(objA, objB, compare, compareContext) {\n  var ret = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (ret !== void 0) {\n    return !!ret;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== \"object\" || !objA || typeof objB !== \"object\" || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n  // Test for A's keys different from B.\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n\n    ret = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (ret === false || (ret === void 0 && valueA !== valueB)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tColor,\n\tLine,\n\tLineBasicMaterial,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tQuaternion,\n\tSphereGeometry,\n\tVector3\n} from 'three';\n\nconst _q = new Quaternion();\nconst _targetPos = new Vector3();\nconst _targetVec = new Vector3();\nconst _effectorPos = new Vector3();\nconst _effectorVec = new Vector3();\nconst _linkPos = new Vector3();\nconst _invLinkQ = new Quaternion();\nconst _linkScale = new Vector3();\nconst _axis = new Vector3();\nconst _vector = new Vector3();\nconst _matrix = new Matrix4();\n\n\n/**\n * CCD Algorithm\n *  - https://sites.google.com/site/auraliusproject/ccd-algorithm\n *\n * // ik parameter example\n * //\n * // target, effector, index in links are bone index in skeleton.bones.\n * // the bones relation should be\n * // <-- parent                                  child -->\n * // links[ n ], links[ n - 1 ], ..., links[ 0 ], effector\n * iks = [ {\n *\ttarget: 1,\n *\teffector: 2,\n *\tlinks: [ { index: 5, limitation: new Vector3( 1, 0, 0 ) }, { index: 4, enabled: false }, { index : 3 } ],\n *\titeration: 10,\n *\tminAngle: 0.0,\n *\tmaxAngle: 1.0,\n * } ];\n */\n\nclass CCDIKSolver {\n\n\t/**\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Array<Object>} iks\n\t */\n\tconstructor( mesh, iks = [] ) {\n\n\t\tthis.mesh = mesh;\n\t\tthis.iks = iks;\n\n\t\tthis._valid();\n\n\t}\n\n\t/**\n\t * Update all IK bones.\n\t *\n\t * @return {CCDIKSolver}\n\t */\n\tupdate() {\n\n\t\tconst iks = this.iks;\n\n\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\tthis.updateOne( iks[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Update one IK bone\n\t *\n\t * @param {Object} ik parameter\n\t * @return {CCDIKSolver}\n\t */\n\tupdateOne( ik ) {\n\n\t\tconst bones = this.mesh.skeleton.bones;\n\n\t\t// for reference overhead reduction in loop\n\t\tconst math = Math;\n\n\t\tconst effector = bones[ ik.effector ];\n\t\tconst target = bones[ ik.target ];\n\n\t\t// don't use getWorldPosition() here for the performance\n\t\t// because it calls updateMatrixWorld( true ) inside.\n\t\t_targetPos.setFromMatrixPosition( target.matrixWorld );\n\n\t\tconst links = ik.links;\n\t\tconst iteration = ik.iteration !== undefined ? ik.iteration : 1;\n\n\t\tfor ( let i = 0; i < iteration; i ++ ) {\n\n\t\t\tlet rotated = false;\n\n\t\t\tfor ( let j = 0, jl = links.length; j < jl; j ++ ) {\n\n\t\t\t\tconst link = bones[ links[ j ].index ];\n\n\t\t\t\t// skip this link and following links.\n\t\t\t\t// this skip is used for MMD performance optimization.\n\t\t\t\tif ( links[ j ].enabled === false ) break;\n\n\t\t\t\tconst limitation = links[ j ].limitation;\n\t\t\t\tconst rotationMin = links[ j ].rotationMin;\n\t\t\t\tconst rotationMax = links[ j ].rotationMax;\n\n\t\t\t\t// don't use getWorldPosition/Quaternion() here for the performance\n\t\t\t\t// because they call updateMatrixWorld( true ) inside.\n\t\t\t\tlink.matrixWorld.decompose( _linkPos, _invLinkQ, _linkScale );\n\t\t\t\t_invLinkQ.invert();\n\t\t\t\t_effectorPos.setFromMatrixPosition( effector.matrixWorld );\n\n\t\t\t\t// work in link world\n\t\t\t\t_effectorVec.subVectors( _effectorPos, _linkPos );\n\t\t\t\t_effectorVec.applyQuaternion( _invLinkQ );\n\t\t\t\t_effectorVec.normalize();\n\n\t\t\t\t_targetVec.subVectors( _targetPos, _linkPos );\n\t\t\t\t_targetVec.applyQuaternion( _invLinkQ );\n\t\t\t\t_targetVec.normalize();\n\n\t\t\t\tlet angle = _targetVec.dot( _effectorVec );\n\n\t\t\t\tif ( angle > 1.0 ) {\n\n\t\t\t\t\tangle = 1.0;\n\n\t\t\t\t} else if ( angle < - 1.0 ) {\n\n\t\t\t\t\tangle = - 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tangle = math.acos( angle );\n\n\t\t\t\t// skip if changing angle is too small to prevent vibration of bone\n\t\t\t\t// Refer to http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mmd.three.js\n\t\t\t\tif ( angle < 1e-5 ) continue;\n\n\t\t\t\tif ( ik.minAngle !== undefined && angle < ik.minAngle ) {\n\n\t\t\t\t\tangle = ik.minAngle;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ik.maxAngle !== undefined && angle > ik.maxAngle ) {\n\n\t\t\t\t\tangle = ik.maxAngle;\n\n\t\t\t\t}\n\n\t\t\t\t_axis.crossVectors( _effectorVec, _targetVec );\n\t\t\t\t_axis.normalize();\n\n\t\t\t\t_q.setFromAxisAngle( _axis, angle );\n\t\t\t\tlink.quaternion.multiply( _q );\n\n\t\t\t\t// TODO: re-consider the limitation specification\n\t\t\t\tif ( limitation !== undefined ) {\n\n\t\t\t\t\tlet c = link.quaternion.w;\n\n\t\t\t\t\tif ( c > 1.0 ) c = 1.0;\n\n\t\t\t\t\tconst c2 = math.sqrt( 1 - c * c );\n\t\t\t\t\tlink.quaternion.set( limitation.x * c2,\n\t\t\t\t\t                     limitation.y * c2,\n\t\t\t\t\t                     limitation.z * c2,\n\t\t\t\t\t                     c );\n\n\t\t\t\t}\n\n\t\t\t\tif ( rotationMin !== undefined ) {\n\n\t\t\t\t\tlink.rotation.setFromVector3(\n\t\t\t\t\t\tlink.rotation\n\t\t\t\t\t\t\t.toVector3( _vector )\n\t\t\t\t\t\t\t.max( rotationMin ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( rotationMax !== undefined ) {\n\n\t\t\t\t\tlink.rotation.setFromVector3(\n\t\t\t\t\t\tlink.rotation\n\t\t\t\t\t\t\t.toVector3( _vector )\n\t\t\t\t\t\t\t.min( rotationMax ) );\n\n\t\t\t\t}\n\n\t\t\t\tlink.updateMatrixWorld( true );\n\n\t\t\t\trotated = true;\n\n\t\t\t}\n\n\t\t\tif ( ! rotated ) break;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Creates Helper\n\t *\n\t * @return {CCDIKHelper}\n\t */\n\tcreateHelper() {\n\n\t\treturn new CCDIKHelper( this.mesh, this.mesh.geometry.userData.MMD.iks );\n\n\t}\n\n\t// private methods\n\n\t_valid() {\n\n\t\tconst iks = this.iks;\n\t\tconst bones = this.mesh.skeleton.bones;\n\n\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\tconst ik = iks[ i ];\n\t\t\tconst effector = bones[ ik.effector ];\n\t\t\tconst links = ik.links;\n\t\t\tlet link0, link1;\n\n\t\t\tlink0 = effector;\n\n\t\t\tfor ( let j = 0, jl = links.length; j < jl; j ++ ) {\n\n\t\t\t\tlink1 = bones[ links[ j ].index ];\n\n\t\t\t\tif ( link0.parent !== link1 ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.CCDIKSolver: bone ' + link0.name + ' is not the child of bone ' + link1.name );\n\n\t\t\t\t}\n\n\t\t\t\tlink0 = link1;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction getPosition( bone, matrixWorldInv ) {\n\n\treturn _vector\n\t\t.setFromMatrixPosition( bone.matrixWorld )\n\t\t.applyMatrix4( matrixWorldInv );\n\n}\n\nfunction setPositionOfBoneToAttributeArray( array, index, bone, matrixWorldInv ) {\n\n\tconst v = getPosition( bone, matrixWorldInv );\n\n\tarray[ index * 3 + 0 ] = v.x;\n\tarray[ index * 3 + 1 ] = v.y;\n\tarray[ index * 3 + 2 ] = v.z;\n\n}\n\n/**\n * Visualize IK bones\n *\n * @param {SkinnedMesh} mesh\n * @param {Array<Object>} iks\n */\nclass CCDIKHelper extends Object3D {\n\n\tconstructor( mesh, iks = [] ) {\n\n\t\tsuper();\n\n\t\tthis.root = mesh;\n\t\tthis.iks = iks;\n\n\t\tthis.matrix.copy( mesh.matrixWorld );\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.sphereGeometry = new SphereGeometry( 0.25, 16, 8 );\n\n\t\tthis.targetSphereMaterial = new MeshBasicMaterial( {\n\t\t\tcolor: new Color( 0xff8888 ),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis.effectorSphereMaterial = new MeshBasicMaterial( {\n\t\t\tcolor: new Color( 0x88ff88 ),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis.linkSphereMaterial = new MeshBasicMaterial( {\n\t\t\tcolor: new Color( 0x8888ff ),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis.lineMaterial = new LineBasicMaterial( {\n\t\t\tcolor: new Color( 0xff0000 ),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis._init();\n\n\t}\n\n\t/**\n\t * Updates IK bones visualization.\n\t */\n\tupdateMatrixWorld( force ) {\n\n\t\tconst mesh = this.root;\n\n\t\tif ( this.visible ) {\n\n\t\t\tlet offset = 0;\n\n\t\t\tconst iks = this.iks;\n\t\t\tconst bones = mesh.skeleton.bones;\n\n\t\t\t_matrix.copy( mesh.matrixWorld ).invert();\n\n\t\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\t\tconst ik = iks[ i ];\n\n\t\t\t\tconst targetBone = bones[ ik.target ];\n\t\t\t\tconst effectorBone = bones[ ik.effector ];\n\n\t\t\t\tconst targetMesh = this.children[ offset ++ ];\n\t\t\t\tconst effectorMesh = this.children[ offset ++ ];\n\n\t\t\t\ttargetMesh.position.copy( getPosition( targetBone, _matrix ) );\n\t\t\t\teffectorMesh.position.copy( getPosition( effectorBone, _matrix ) );\n\n\t\t\t\tfor ( let j = 0, jl = ik.links.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst link = ik.links[ j ];\n\t\t\t\t\tconst linkBone = bones[ link.index ];\n\n\t\t\t\t\tconst linkMesh = this.children[ offset ++ ];\n\n\t\t\t\t\tlinkMesh.position.copy( getPosition( linkBone, _matrix ) );\n\n\t\t\t\t}\n\n\t\t\t\tconst line = this.children[ offset ++ ];\n\t\t\t\tconst array = line.geometry.attributes.position.array;\n\n\t\t\t\tsetPositionOfBoneToAttributeArray( array, 0, targetBone, _matrix );\n\t\t\t\tsetPositionOfBoneToAttributeArray( array, 1, effectorBone, _matrix );\n\n\t\t\t\tfor ( let j = 0, jl = ik.links.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst link = ik.links[ j ];\n\t\t\t\t\tconst linkBone = bones[ link.index ];\n\t\t\t\t\tsetPositionOfBoneToAttributeArray( array, j + 2, linkBone, _matrix );\n\n\t\t\t\t}\n\n\t\t\t\tline.geometry.attributes.position.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.matrix.copy( mesh.matrixWorld );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\t// private method\n\n\t_init() {\n\n\t\tconst scope = this;\n\t\tconst iks = this.iks;\n\n\t\tfunction createLineGeometry( ik ) {\n\n\t\t\tconst geometry = new BufferGeometry();\n\t\t\tconst vertices = new Float32Array( ( 2 + ik.links.length ) * 3 );\n\t\t\tgeometry.setAttribute( 'position', new BufferAttribute( vertices, 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\tfunction createTargetMesh() {\n\n\t\t\treturn new Mesh( scope.sphereGeometry, scope.targetSphereMaterial );\n\n\t\t}\n\n\t\tfunction createEffectorMesh() {\n\n\t\t\treturn new Mesh( scope.sphereGeometry, scope.effectorSphereMaterial );\n\n\t\t}\n\n\t\tfunction createLinkMesh() {\n\n\t\t\treturn new Mesh( scope.sphereGeometry, scope.linkSphereMaterial );\n\n\t\t}\n\n\t\tfunction createLine( ik ) {\n\n\t\t\treturn new Line( createLineGeometry( ik ), scope.lineMaterial );\n\n\t\t}\n\n\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\tconst ik = iks[ i ];\n\n\t\t\tthis.add( createTargetMesh() );\n\t\t\tthis.add( createEffectorMesh() );\n\n\t\t\tfor ( let j = 0, jl = ik.links.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.add( createLinkMesh() );\n\n\t\t\t}\n\n\t\t\tthis.add( createLine( ik ) );\n\n\t\t}\n\n\t}\n\n}\n\nexport { CCDIKSolver };\n","import {\n\tBone,\n\tBoxGeometry,\n\tColor,\n\tCylinderGeometry,\n\tEuler,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tQuaternion,\n\tSphereGeometry,\n\tVector3\n} from 'three';\n\n/**\n * Dependencies\n *  - Ammo.js https://github.com/kripken/ammo.js\n *\n * MMDPhysics calculates physics with Ammo(Bullet based JavaScript Physics engine)\n * for MMD model loaded by MMDLoader.\n *\n * TODO\n *  - Physics in Worker\n */\n\n/* global Ammo */\n\nclass MMDPhysics {\n\n\t/**\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Array<Object>} rigidBodyParams\n\t * @param {Array<Object>} (optional) constraintParams\n\t * @param {Object} params - (optional)\n\t * @param {Number} params.unitStep - Default is 1 / 65.\n\t * @param {Integer} params.maxStepNum - Default is 3.\n\t * @param {Vector3} params.gravity - Default is ( 0, - 9.8 * 10, 0 )\n\t */\n\tconstructor( mesh, rigidBodyParams, constraintParams = [], params = {} ) {\n\n\t\tif ( typeof Ammo === 'undefined' ) {\n\n\t\t\tthrow new Error( 'THREE.MMDPhysics: Import ammo.js https://github.com/kripken/ammo.js' );\n\n\t\t}\n\n\t\tthis.manager = new ResourceManager();\n\n\t\tthis.mesh = mesh;\n\n\t\t/*\n\t\t * I don't know why but 1/60 unitStep easily breaks models\n\t\t * so I set it 1/65 so far.\n\t\t * Don't set too small unitStep because\n\t\t * the smaller unitStep can make the performance worse.\n\t\t */\n\t\tthis.unitStep = ( params.unitStep !== undefined ) ? params.unitStep : 1 / 65;\n\t\tthis.maxStepNum = ( params.maxStepNum !== undefined ) ? params.maxStepNum : 3;\n\t\tthis.gravity = new Vector3( 0, - 9.8 * 10, 0 );\n\n\t\tif ( params.gravity !== undefined ) this.gravity.copy( params.gravity );\n\n\t\tthis.world = params.world !== undefined ? params.world : null; // experimental\n\n\t\tthis.bodies = [];\n\t\tthis.constraints = [];\n\n\t\tthis._init( mesh, rigidBodyParams, constraintParams );\n\n\t}\n\n\t/**\n\t * Advances Physics calculation and updates bones.\n\t *\n\t * @param {Number} delta - time in second\n\t * @return {MMDPhysics}\n\t */\n\tupdate( delta ) {\n\n\t\tconst manager = this.manager;\n\t\tconst mesh = this.mesh;\n\n\t\t// rigid bodies and constrains are for\n\t\t// mesh's world scale (1, 1, 1).\n\t\t// Convert to (1, 1, 1) if it isn't.\n\n\t\tlet isNonDefaultScale = false;\n\n\t\tconst position = manager.allocThreeVector3();\n\t\tconst quaternion = manager.allocThreeQuaternion();\n\t\tconst scale = manager.allocThreeVector3();\n\n\t\tmesh.matrixWorld.decompose( position, quaternion, scale );\n\n\t\tif ( scale.x !== 1 || scale.y !== 1 || scale.z !== 1 ) {\n\n\t\t\tisNonDefaultScale = true;\n\n\t\t}\n\n\t\tlet parent;\n\n\t\tif ( isNonDefaultScale ) {\n\n\t\t\tparent = mesh.parent;\n\n\t\t\tif ( parent !== null ) mesh.parent = null;\n\n\t\t\tscale.copy( this.mesh.scale );\n\n\t\t\tmesh.scale.set( 1, 1, 1 );\n\t\t\tmesh.updateMatrixWorld( true );\n\n\t\t}\n\n\t\t// calculate physics and update bones\n\n\t\tthis._updateRigidBodies();\n\t\tthis._stepSimulation( delta );\n\t\tthis._updateBones();\n\n\t\t// restore mesh if converted above\n\n\t\tif ( isNonDefaultScale ) {\n\n\t\t\tif ( parent !== null ) mesh.parent = parent;\n\n\t\t\tmesh.scale.copy( scale );\n\n\t\t}\n\n\t\tmanager.freeThreeVector3( scale );\n\t\tmanager.freeThreeQuaternion( quaternion );\n\t\tmanager.freeThreeVector3( position );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Resets rigid bodies transorm to current bone's.\n\t *\n\t * @return {MMDPhysics}\n\t */\n\treset() {\n\n\t\tfor ( let i = 0, il = this.bodies.length; i < il; i ++ ) {\n\n\t\t\tthis.bodies[ i ].reset();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Warm ups Rigid bodies. Calculates cycles steps.\n\t *\n\t * @param {Integer} cycles\n\t * @return {MMDPhysics}\n\t */\n\twarmup( cycles ) {\n\n\t\tfor ( let i = 0; i < cycles; i ++ ) {\n\n\t\t\tthis.update( 1 / 60 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets gravity.\n\t *\n\t * @param {Vector3} gravity\n\t * @return {MMDPhysicsHelper}\n\t */\n\tsetGravity( gravity ) {\n\n\t\tthis.world.setGravity( new Ammo.btVector3( gravity.x, gravity.y, gravity.z ) );\n\t\tthis.gravity.copy( gravity );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Creates MMDPhysicsHelper\n\t *\n\t * @return {MMDPhysicsHelper}\n\t */\n\tcreateHelper() {\n\n\t\treturn new MMDPhysicsHelper( this.mesh, this );\n\n\t}\n\n\t// private methods\n\n\t_init( mesh, rigidBodyParams, constraintParams ) {\n\n\t\tconst manager = this.manager;\n\n\t\t// rigid body/constraint parameters are for\n\t\t// mesh's default world transform as position(0, 0, 0),\n\t\t// quaternion(0, 0, 0, 1) and scale(0, 0, 0)\n\n\t\tlet parent = mesh.parent;\n\n\t\tif ( parent !== null ) parent = null;\n\n\t\tconst currentPosition = manager.allocThreeVector3();\n\t\tconst currentQuaternion = manager.allocThreeQuaternion();\n\t\tconst currentScale = manager.allocThreeVector3();\n\n\t\tcurrentPosition.copy( mesh.position );\n\t\tcurrentQuaternion.copy( mesh.quaternion );\n\t\tcurrentScale.copy( mesh.scale );\n\n\t\tmesh.position.set( 0, 0, 0 );\n\t\tmesh.quaternion.set( 0, 0, 0, 1 );\n\t\tmesh.scale.set( 1, 1, 1 );\n\n\t\tmesh.updateMatrixWorld( true );\n\n\t\tif ( this.world === null ) {\n\n\t\t\tthis.world = this._createWorld();\n\t\t\tthis.setGravity( this.gravity );\n\n\t\t}\n\n\t\tthis._initRigidBodies( rigidBodyParams );\n\t\tthis._initConstraints( constraintParams );\n\n\t\tif ( parent !== null ) mesh.parent = parent;\n\n\t\tmesh.position.copy( currentPosition );\n\t\tmesh.quaternion.copy( currentQuaternion );\n\t\tmesh.scale.copy( currentScale );\n\n\t\tmesh.updateMatrixWorld( true );\n\n\t\tthis.reset();\n\n\t\tmanager.freeThreeVector3( currentPosition );\n\t\tmanager.freeThreeQuaternion( currentQuaternion );\n\t\tmanager.freeThreeVector3( currentScale );\n\n\t}\n\n\t_createWorld() {\n\n\t\tconst config = new Ammo.btDefaultCollisionConfiguration();\n\t\tconst dispatcher = new Ammo.btCollisionDispatcher( config );\n\t\tconst cache = new Ammo.btDbvtBroadphase();\n\t\tconst solver = new Ammo.btSequentialImpulseConstraintSolver();\n\t\tconst world = new Ammo.btDiscreteDynamicsWorld( dispatcher, cache, solver, config );\n\t\treturn world;\n\n\t}\n\n\t_initRigidBodies( rigidBodies ) {\n\n\t\tfor ( let i = 0, il = rigidBodies.length; i < il; i ++ ) {\n\n\t\t\tthis.bodies.push( new RigidBody(\n\t\t\t\tthis.mesh, this.world, rigidBodies[ i ], this.manager ) );\n\n\t\t}\n\n\t}\n\n\t_initConstraints( constraints ) {\n\n\t\tfor ( let i = 0, il = constraints.length; i < il; i ++ ) {\n\n\t\t\tconst params = constraints[ i ];\n\t\t\tconst bodyA = this.bodies[ params.rigidBodyIndex1 ];\n\t\t\tconst bodyB = this.bodies[ params.rigidBodyIndex2 ];\n\t\t\tthis.constraints.push( new Constraint( this.mesh, this.world, bodyA, bodyB, params, this.manager ) );\n\n\t\t}\n\n\t}\n\n\t_stepSimulation( delta ) {\n\n\t\tconst unitStep = this.unitStep;\n\t\tlet stepTime = delta;\n\t\tlet maxStepNum = ( ( delta / unitStep ) | 0 ) + 1;\n\n\t\tif ( stepTime < unitStep ) {\n\n\t\t\tstepTime = unitStep;\n\t\t\tmaxStepNum = 1;\n\n\t\t}\n\n\t\tif ( maxStepNum > this.maxStepNum ) {\n\n\t\t\tmaxStepNum = this.maxStepNum;\n\n\t\t}\n\n\t\tthis.world.stepSimulation( stepTime, maxStepNum, unitStep );\n\n\t}\n\n\t_updateRigidBodies() {\n\n\t\tfor ( let i = 0, il = this.bodies.length; i < il; i ++ ) {\n\n\t\t\tthis.bodies[ i ].updateFromBone();\n\n\t\t}\n\n\t}\n\n\t_updateBones() {\n\n\t\tfor ( let i = 0, il = this.bodies.length; i < il; i ++ ) {\n\n\t\t\tthis.bodies[ i ].updateBone();\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * This manager's responsibilies are\n *\n * 1. manage Ammo.js and Three.js object resources and\n *    improve the performance and the memory consumption by\n *    reusing objects.\n *\n * 2. provide simple Ammo object operations.\n */\nclass ResourceManager {\n\n\tconstructor() {\n\n\t\t// for Three.js\n\t\tthis.threeVector3s = [];\n\t\tthis.threeMatrix4s = [];\n\t\tthis.threeQuaternions = [];\n\t\tthis.threeEulers = [];\n\n\t\t// for Ammo.js\n\t\tthis.transforms = [];\n\t\tthis.quaternions = [];\n\t\tthis.vector3s = [];\n\n\t}\n\n\tallocThreeVector3() {\n\n\t\treturn ( this.threeVector3s.length > 0 )\n\t\t\t? this.threeVector3s.pop()\n\t\t\t: new Vector3();\n\n\t}\n\n\tfreeThreeVector3( v ) {\n\n\t\tthis.threeVector3s.push( v );\n\n\t}\n\n\tallocThreeMatrix4() {\n\n\t\treturn ( this.threeMatrix4s.length > 0 )\n\t\t\t? this.threeMatrix4s.pop()\n\t\t\t: new Matrix4();\n\n\t}\n\n\tfreeThreeMatrix4( m ) {\n\n\t\tthis.threeMatrix4s.push( m );\n\n\t}\n\n\tallocThreeQuaternion() {\n\n\t\treturn ( this.threeQuaternions.length > 0 )\n\t\t\t? this.threeQuaternions.pop()\n\t\t\t: new Quaternion();\n\n\t}\n\n\tfreeThreeQuaternion( q ) {\n\n\t\tthis.threeQuaternions.push( q );\n\n\t}\n\n\tallocThreeEuler() {\n\n\t\treturn ( this.threeEulers.length > 0 )\n\t\t\t? this.threeEulers.pop()\n\t\t\t: new Euler();\n\n\t}\n\n\tfreeThreeEuler( e ) {\n\n\t\tthis.threeEulers.push( e );\n\n\t}\n\n\tallocTransform() {\n\n\t\treturn ( this.transforms.length > 0 )\n\t\t\t? this.transforms.pop()\n\t\t\t: new Ammo.btTransform();\n\n\t}\n\n\tfreeTransform( t ) {\n\n\t\tthis.transforms.push( t );\n\n\t}\n\n\tallocQuaternion() {\n\n\t\treturn ( this.quaternions.length > 0 )\n\t\t\t? this.quaternions.pop()\n\t\t\t: new Ammo.btQuaternion();\n\n\t}\n\n\tfreeQuaternion( q ) {\n\n\t\tthis.quaternions.push( q );\n\n\t}\n\n\tallocVector3() {\n\n\t\treturn ( this.vector3s.length > 0 )\n\t\t\t? this.vector3s.pop()\n\t\t\t: new Ammo.btVector3();\n\n\t}\n\n\tfreeVector3( v ) {\n\n\t\tthis.vector3s.push( v );\n\n\t}\n\n\tsetIdentity( t ) {\n\n\t\tt.setIdentity();\n\n\t}\n\n\tgetBasis( t ) {\n\n\t\tvar q = this.allocQuaternion();\n\t\tt.getBasis().getRotation( q );\n\t\treturn q;\n\n\t}\n\n\tgetBasisAsMatrix3( t ) {\n\n\t\tvar q = this.getBasis( t );\n\t\tvar m = this.quaternionToMatrix3( q );\n\t\tthis.freeQuaternion( q );\n\t\treturn m;\n\n\t}\n\n\tgetOrigin( t ) {\n\n\t\treturn t.getOrigin();\n\n\t}\n\n\tsetOrigin( t, v ) {\n\n\t\tt.getOrigin().setValue( v.x(), v.y(), v.z() );\n\n\t}\n\n\tcopyOrigin( t1, t2 ) {\n\n\t\tvar o = t2.getOrigin();\n\t\tthis.setOrigin( t1, o );\n\n\t}\n\n\tsetBasis( t, q ) {\n\n\t\tt.setRotation( q );\n\n\t}\n\n\tsetBasisFromMatrix3( t, m ) {\n\n\t\tvar q = this.matrix3ToQuaternion( m );\n\t\tthis.setBasis( t, q );\n\t\tthis.freeQuaternion( q );\n\n\t}\n\n\tsetOriginFromArray3( t, a ) {\n\n\t\tt.getOrigin().setValue( a[ 0 ], a[ 1 ], a[ 2 ] );\n\n\t}\n\n\tsetOriginFromThreeVector3( t, v ) {\n\n\t\tt.getOrigin().setValue( v.x, v.y, v.z );\n\n\t}\n\n\tsetBasisFromArray3( t, a ) {\n\n\t\tvar thQ = this.allocThreeQuaternion();\n\t\tvar thE = this.allocThreeEuler();\n\t\tthE.set( a[ 0 ], a[ 1 ], a[ 2 ] );\n\t\tthis.setBasisFromThreeQuaternion( t, thQ.setFromEuler( thE ) );\n\n\t\tthis.freeThreeEuler( thE );\n\t\tthis.freeThreeQuaternion( thQ );\n\n\t}\n\n\tsetBasisFromThreeQuaternion( t, a ) {\n\n\t\tvar q = this.allocQuaternion();\n\n\t\tq.setX( a.x );\n\t\tq.setY( a.y );\n\t\tq.setZ( a.z );\n\t\tq.setW( a.w );\n\t\tthis.setBasis( t, q );\n\n\t\tthis.freeQuaternion( q );\n\n\t}\n\n\tmultiplyTransforms( t1, t2 ) {\n\n\t\tvar t = this.allocTransform();\n\t\tthis.setIdentity( t );\n\n\t\tvar m1 = this.getBasisAsMatrix3( t1 );\n\t\tvar m2 = this.getBasisAsMatrix3( t2 );\n\n\t\tvar o1 = this.getOrigin( t1 );\n\t\tvar o2 = this.getOrigin( t2 );\n\n\t\tvar v1 = this.multiplyMatrix3ByVector3( m1, o2 );\n\t\tvar v2 = this.addVector3( v1, o1 );\n\t\tthis.setOrigin( t, v2 );\n\n\t\tvar m3 = this.multiplyMatrices3( m1, m2 );\n\t\tthis.setBasisFromMatrix3( t, m3 );\n\n\t\tthis.freeVector3( v1 );\n\t\tthis.freeVector3( v2 );\n\n\t\treturn t;\n\n\t}\n\n\tinverseTransform( t ) {\n\n\t\tvar t2 = this.allocTransform();\n\n\t\tvar m1 = this.getBasisAsMatrix3( t );\n\t\tvar o = this.getOrigin( t );\n\n\t\tvar m2 = this.transposeMatrix3( m1 );\n\t\tvar v1 = this.negativeVector3( o );\n\t\tvar v2 = this.multiplyMatrix3ByVector3( m2, v1 );\n\n\t\tthis.setOrigin( t2, v2 );\n\t\tthis.setBasisFromMatrix3( t2, m2 );\n\n\t\tthis.freeVector3( v1 );\n\t\tthis.freeVector3( v2 );\n\n\t\treturn t2;\n\n\t}\n\n\tmultiplyMatrices3( m1, m2 ) {\n\n\t\tvar m3 = [];\n\n\t\tvar v10 = this.rowOfMatrix3( m1, 0 );\n\t\tvar v11 = this.rowOfMatrix3( m1, 1 );\n\t\tvar v12 = this.rowOfMatrix3( m1, 2 );\n\n\t\tvar v20 = this.columnOfMatrix3( m2, 0 );\n\t\tvar v21 = this.columnOfMatrix3( m2, 1 );\n\t\tvar v22 = this.columnOfMatrix3( m2, 2 );\n\n\t\tm3[ 0 ] = this.dotVectors3( v10, v20 );\n\t\tm3[ 1 ] = this.dotVectors3( v10, v21 );\n\t\tm3[ 2 ] = this.dotVectors3( v10, v22 );\n\t\tm3[ 3 ] = this.dotVectors3( v11, v20 );\n\t\tm3[ 4 ] = this.dotVectors3( v11, v21 );\n\t\tm3[ 5 ] = this.dotVectors3( v11, v22 );\n\t\tm3[ 6 ] = this.dotVectors3( v12, v20 );\n\t\tm3[ 7 ] = this.dotVectors3( v12, v21 );\n\t\tm3[ 8 ] = this.dotVectors3( v12, v22 );\n\n\t\tthis.freeVector3( v10 );\n\t\tthis.freeVector3( v11 );\n\t\tthis.freeVector3( v12 );\n\t\tthis.freeVector3( v20 );\n\t\tthis.freeVector3( v21 );\n\t\tthis.freeVector3( v22 );\n\n\t\treturn m3;\n\n\t}\n\n\taddVector3( v1, v2 ) {\n\n\t\tvar v = this.allocVector3();\n\t\tv.setValue( v1.x() + v2.x(), v1.y() + v2.y(), v1.z() + v2.z() );\n\t\treturn v;\n\n\t}\n\n\tdotVectors3( v1, v2 ) {\n\n\t\treturn v1.x() * v2.x() + v1.y() * v2.y() + v1.z() * v2.z();\n\n\t}\n\n\trowOfMatrix3( m, i ) {\n\n\t\tvar v = this.allocVector3();\n\t\tv.setValue( m[ i * 3 + 0 ], m[ i * 3 + 1 ], m[ i * 3 + 2 ] );\n\t\treturn v;\n\n\t}\n\n\tcolumnOfMatrix3( m, i ) {\n\n\t\tvar v = this.allocVector3();\n\t\tv.setValue( m[ i + 0 ], m[ i + 3 ], m[ i + 6 ] );\n\t\treturn v;\n\n\t}\n\n\tnegativeVector3( v ) {\n\n\t\tvar v2 = this.allocVector3();\n\t\tv2.setValue( - v.x(), - v.y(), - v.z() );\n\t\treturn v2;\n\n\t}\n\n\tmultiplyMatrix3ByVector3( m, v ) {\n\n\t\tvar v4 = this.allocVector3();\n\n\t\tvar v0 = this.rowOfMatrix3( m, 0 );\n\t\tvar v1 = this.rowOfMatrix3( m, 1 );\n\t\tvar v2 = this.rowOfMatrix3( m, 2 );\n\t\tvar x = this.dotVectors3( v0, v );\n\t\tvar y = this.dotVectors3( v1, v );\n\t\tvar z = this.dotVectors3( v2, v );\n\n\t\tv4.setValue( x, y, z );\n\n\t\tthis.freeVector3( v0 );\n\t\tthis.freeVector3( v1 );\n\t\tthis.freeVector3( v2 );\n\n\t\treturn v4;\n\n\t}\n\n\ttransposeMatrix3( m ) {\n\n\t\tvar m2 = [];\n\t\tm2[ 0 ] = m[ 0 ];\n\t\tm2[ 1 ] = m[ 3 ];\n\t\tm2[ 2 ] = m[ 6 ];\n\t\tm2[ 3 ] = m[ 1 ];\n\t\tm2[ 4 ] = m[ 4 ];\n\t\tm2[ 5 ] = m[ 7 ];\n\t\tm2[ 6 ] = m[ 2 ];\n\t\tm2[ 7 ] = m[ 5 ];\n\t\tm2[ 8 ] = m[ 8 ];\n\t\treturn m2;\n\n\t}\n\n\tquaternionToMatrix3( q ) {\n\n\t\tvar m = [];\n\n\t\tvar x = q.x();\n\t\tvar y = q.y();\n\t\tvar z = q.z();\n\t\tvar w = q.w();\n\n\t\tvar xx = x * x;\n\t\tvar yy = y * y;\n\t\tvar zz = z * z;\n\n\t\tvar xy = x * y;\n\t\tvar yz = y * z;\n\t\tvar zx = z * x;\n\n\t\tvar xw = x * w;\n\t\tvar yw = y * w;\n\t\tvar zw = z * w;\n\n\t\tm[ 0 ] = 1 - 2 * ( yy + zz );\n\t\tm[ 1 ] = 2 * ( xy - zw );\n\t\tm[ 2 ] = 2 * ( zx + yw );\n\t\tm[ 3 ] = 2 * ( xy + zw );\n\t\tm[ 4 ] = 1 - 2 * ( zz + xx );\n\t\tm[ 5 ] = 2 * ( yz - xw );\n\t\tm[ 6 ] = 2 * ( zx - yw );\n\t\tm[ 7 ] = 2 * ( yz + xw );\n\t\tm[ 8 ] = 1 - 2 * ( xx + yy );\n\n\t\treturn m;\n\n\t}\n\n\tmatrix3ToQuaternion( m ) {\n\n\t\tvar t = m[ 0 ] + m[ 4 ] + m[ 8 ];\n\t\tvar s, x, y, z, w;\n\n\t\tif ( t > 0 ) {\n\n\t\t\ts = Math.sqrt( t + 1.0 ) * 2;\n\t\t\tw = 0.25 * s;\n\t\t\tx = ( m[ 7 ] - m[ 5 ] ) / s;\n\t\t\ty = ( m[ 2 ] - m[ 6 ] ) / s;\n\t\t\tz = ( m[ 3 ] - m[ 1 ] ) / s;\n\n\t\t} else if ( ( m[ 0 ] > m[ 4 ] ) && ( m[ 0 ] > m[ 8 ] ) ) {\n\n\t\t\ts = Math.sqrt( 1.0 + m[ 0 ] - m[ 4 ] - m[ 8 ] ) * 2;\n\t\t\tw = ( m[ 7 ] - m[ 5 ] ) / s;\n\t\t\tx = 0.25 * s;\n\t\t\ty = ( m[ 1 ] + m[ 3 ] ) / s;\n\t\t\tz = ( m[ 2 ] + m[ 6 ] ) / s;\n\n\t\t} else if ( m[ 4 ] > m[ 8 ] ) {\n\n\t\t\ts = Math.sqrt( 1.0 + m[ 4 ] - m[ 0 ] - m[ 8 ] ) * 2;\n\t\t\tw = ( m[ 2 ] - m[ 6 ] ) / s;\n\t\t\tx = ( m[ 1 ] + m[ 3 ] ) / s;\n\t\t\ty = 0.25 * s;\n\t\t\tz = ( m[ 5 ] + m[ 7 ] ) / s;\n\n\t\t} else {\n\n\t\t\ts = Math.sqrt( 1.0 + m[ 8 ] - m[ 0 ] - m[ 4 ] ) * 2;\n\t\t\tw = ( m[ 3 ] - m[ 1 ] ) / s;\n\t\t\tx = ( m[ 2 ] + m[ 6 ] ) / s;\n\t\t\ty = ( m[ 5 ] + m[ 7 ] ) / s;\n\t\t\tz = 0.25 * s;\n\n\t\t}\n\n\t\tvar q = this.allocQuaternion();\n\t\tq.setX( x );\n\t\tq.setY( y );\n\t\tq.setZ( z );\n\t\tq.setW( w );\n\t\treturn q;\n\n\t}\n\n}\n\n/**\n * @param {THREE.SkinnedMesh} mesh\n * @param {Ammo.btDiscreteDynamicsWorld} world\n * @param {Object} params\n * @param {ResourceManager} manager\n */\nclass RigidBody {\n\n\tconstructor( mesh, world, params, manager ) {\n\n\t\tthis.mesh = mesh;\n\t\tthis.world = world;\n\t\tthis.params = params;\n\t\tthis.manager = manager;\n\n\t\tthis.body = null;\n\t\tthis.bone = null;\n\t\tthis.boneOffsetForm = null;\n\t\tthis.boneOffsetFormInverse = null;\n\n\t\tthis._init();\n\n\t}\n\n\t/**\n\t * Resets rigid body transform to the current bone's.\n\t *\n\t * @return {RigidBody}\n\t */\n\treset() {\n\n\t\tthis._setTransformFromBone();\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Updates rigid body's transform from the current bone.\n\t *\n\t * @return {RidigBody}\n\t */\n\tupdateFromBone() {\n\n\t\tif ( this.params.boneIndex !== - 1 && this.params.type === 0 ) {\n\n\t\t\tthis._setTransformFromBone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Updates bone from the current ridid body's transform.\n\t *\n\t * @return {RidigBody}\n\t */\n\tupdateBone() {\n\n\t\tif ( this.params.type === 0 || this.params.boneIndex === - 1 ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis._updateBoneRotation();\n\n\t\tif ( this.params.type === 1 ) {\n\n\t\t\tthis._updateBonePosition();\n\n\t\t}\n\n\t\tthis.bone.updateMatrixWorld( true );\n\n\t\tif ( this.params.type === 2 ) {\n\n\t\t\tthis._setPositionFromBone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// private methods\n\n\t_init() {\n\n\t\tfunction generateShape( p ) {\n\n\t\t\tswitch ( p.shapeType ) {\n\n\t\t\t\tcase 0:\n\t\t\t\t\treturn new Ammo.btSphereShape( p.width );\n\n\t\t\t\tcase 1:\n\t\t\t\t\treturn new Ammo.btBoxShape( new Ammo.btVector3( p.width, p.height, p.depth ) );\n\n\t\t\t\tcase 2:\n\t\t\t\t\treturn new Ammo.btCapsuleShape( p.width, p.height );\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow 'unknown shape type ' + p.shapeType;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst manager = this.manager;\n\t\tconst params = this.params;\n\t\tconst bones = this.mesh.skeleton.bones;\n\t\tconst bone = ( params.boneIndex === - 1 )\n\t\t\t? new Bone()\n\t\t\t: bones[ params.boneIndex ];\n\n\t\tconst shape = generateShape( params );\n\t\tconst weight = ( params.type === 0 ) ? 0 : params.weight;\n\t\tconst localInertia = manager.allocVector3();\n\t\tlocalInertia.setValue( 0, 0, 0 );\n\n\t\tif ( weight !== 0 ) {\n\n\t\t\tshape.calculateLocalInertia( weight, localInertia );\n\n\t\t}\n\n\t\tconst boneOffsetForm = manager.allocTransform();\n\t\tmanager.setIdentity( boneOffsetForm );\n\t\tmanager.setOriginFromArray3( boneOffsetForm, params.position );\n\t\tmanager.setBasisFromArray3( boneOffsetForm, params.rotation );\n\n\t\tconst vector = manager.allocThreeVector3();\n\t\tconst boneForm = manager.allocTransform();\n\t\tmanager.setIdentity( boneForm );\n\t\tmanager.setOriginFromThreeVector3( boneForm, bone.getWorldPosition( vector ) );\n\n\t\tconst form = manager.multiplyTransforms( boneForm, boneOffsetForm );\n\t\tconst state = new Ammo.btDefaultMotionState( form );\n\n\t\tconst info = new Ammo.btRigidBodyConstructionInfo( weight, state, shape, localInertia );\n\t\tinfo.set_m_friction( params.friction );\n\t\tinfo.set_m_restitution( params.restitution );\n\n\t\tconst body = new Ammo.btRigidBody( info );\n\n\t\tif ( params.type === 0 ) {\n\n\t\t\tbody.setCollisionFlags( body.getCollisionFlags() | 2 );\n\n\t\t\t/*\n\t\t\t * It'd be better to comment out this line though in general I should call this method\n\t\t\t * because I'm not sure why but physics will be more like MMD's\n\t\t\t * if I comment out.\n\t\t\t */\n\t\t\tbody.setActivationState( 4 );\n\n\t\t}\n\n\t\tbody.setDamping( params.positionDamping, params.rotationDamping );\n\t\tbody.setSleepingThresholds( 0, 0 );\n\n\t\tthis.world.addRigidBody( body, 1 << params.groupIndex, params.groupTarget );\n\n\t\tthis.body = body;\n\t\tthis.bone = bone;\n\t\tthis.boneOffsetForm = boneOffsetForm;\n\t\tthis.boneOffsetFormInverse = manager.inverseTransform( boneOffsetForm );\n\n\t\tmanager.freeVector3( localInertia );\n\t\tmanager.freeTransform( form );\n\t\tmanager.freeTransform( boneForm );\n\t\tmanager.freeThreeVector3( vector );\n\n\t}\n\n\t_getBoneTransform() {\n\n\t\tconst manager = this.manager;\n\t\tconst p = manager.allocThreeVector3();\n\t\tconst q = manager.allocThreeQuaternion();\n\t\tconst s = manager.allocThreeVector3();\n\n\t\tthis.bone.matrixWorld.decompose( p, q, s );\n\n\t\tconst tr = manager.allocTransform();\n\t\tmanager.setOriginFromThreeVector3( tr, p );\n\t\tmanager.setBasisFromThreeQuaternion( tr, q );\n\n\t\tconst form = manager.multiplyTransforms( tr, this.boneOffsetForm );\n\n\t\tmanager.freeTransform( tr );\n\t\tmanager.freeThreeVector3( s );\n\t\tmanager.freeThreeQuaternion( q );\n\t\tmanager.freeThreeVector3( p );\n\n\t\treturn form;\n\n\t}\n\n\t_getWorldTransformForBone() {\n\n\t\tconst manager = this.manager;\n\t\tconst tr = this.body.getCenterOfMassTransform();\n\t\treturn manager.multiplyTransforms( tr, this.boneOffsetFormInverse );\n\n\t}\n\n\t_setTransformFromBone() {\n\n\t\tconst manager = this.manager;\n\t\tconst form = this._getBoneTransform();\n\n\t\t// TODO: check the most appropriate way to set\n\t\t//this.body.setWorldTransform( form );\n\t\tthis.body.setCenterOfMassTransform( form );\n\t\tthis.body.getMotionState().setWorldTransform( form );\n\n\t\tmanager.freeTransform( form );\n\n\t}\n\n\t_setPositionFromBone() {\n\n\t\tconst manager = this.manager;\n\t\tconst form = this._getBoneTransform();\n\n\t\tconst tr = manager.allocTransform();\n\t\tthis.body.getMotionState().getWorldTransform( tr );\n\t\tmanager.copyOrigin( tr, form );\n\n\t\t// TODO: check the most appropriate way to set\n\t\t//this.body.setWorldTransform( tr );\n\t\tthis.body.setCenterOfMassTransform( tr );\n\t\tthis.body.getMotionState().setWorldTransform( tr );\n\n\t\tmanager.freeTransform( tr );\n\t\tmanager.freeTransform( form );\n\n\t}\n\n\t_updateBoneRotation() {\n\n\t\tconst manager = this.manager;\n\n\t\tconst tr = this._getWorldTransformForBone();\n\t\tconst q = manager.getBasis( tr );\n\n\t\tconst thQ = manager.allocThreeQuaternion();\n\t\tconst thQ2 = manager.allocThreeQuaternion();\n\t\tconst thQ3 = manager.allocThreeQuaternion();\n\n\t\tthQ.set( q.x(), q.y(), q.z(), q.w() );\n\t\tthQ2.setFromRotationMatrix( this.bone.matrixWorld );\n\t\tthQ2.conjugate();\n\t\tthQ2.multiply( thQ );\n\n\t\t//this.bone.quaternion.multiply( thQ2 );\n\n\t\tthQ3.setFromRotationMatrix( this.bone.matrix );\n\n\t\t// Renormalizing quaternion here because repeatedly transforming\n\t\t// quaternion continuously accumulates floating point error and\n\t\t// can end up being overflow. See #15335\n\t\tthis.bone.quaternion.copy( thQ2.multiply( thQ3 ).normalize() );\n\n\t\tmanager.freeThreeQuaternion( thQ );\n\t\tmanager.freeThreeQuaternion( thQ2 );\n\t\tmanager.freeThreeQuaternion( thQ3 );\n\n\t\tmanager.freeQuaternion( q );\n\t\tmanager.freeTransform( tr );\n\n\t}\n\n\t_updateBonePosition() {\n\n\t\tconst manager = this.manager;\n\n\t\tconst tr = this._getWorldTransformForBone();\n\n\t\tconst thV = manager.allocThreeVector3();\n\n\t\tconst o = manager.getOrigin( tr );\n\t\tthV.set( o.x(), o.y(), o.z() );\n\n\t\tif ( this.bone.parent ) {\n\n\t\t\tthis.bone.parent.worldToLocal( thV );\n\n\t\t}\n\n\t\tthis.bone.position.copy( thV );\n\n\t\tmanager.freeThreeVector3( thV );\n\n\t\tmanager.freeTransform( tr );\n\n\t}\n\n}\n\n//\n\nclass Constraint {\n\n\t/**\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Ammo.btDiscreteDynamicsWorld} world\n\t * @param {RigidBody} bodyA\n\t * @param {RigidBody} bodyB\n\t * @param {Object} params\n\t * @param {ResourceManager} manager\n\t */\n\tconstructor( mesh, world, bodyA, bodyB, params, manager ) {\n\n\t\tthis.mesh = mesh;\n\t\tthis.world = world;\n\t\tthis.bodyA = bodyA;\n\t\tthis.bodyB = bodyB;\n\t\tthis.params = params;\n\t\tthis.manager = manager;\n\n\t\tthis.constraint = null;\n\n\t\tthis._init();\n\n\t}\n\n\t// private method\n\n\t_init() {\n\n\t\tconst manager = this.manager;\n\t\tconst params = this.params;\n\t\tconst bodyA = this.bodyA;\n\t\tconst bodyB = this.bodyB;\n\n\t\tconst form = manager.allocTransform();\n\t\tmanager.setIdentity( form );\n\t\tmanager.setOriginFromArray3( form, params.position );\n\t\tmanager.setBasisFromArray3( form, params.rotation );\n\n\t\tconst formA = manager.allocTransform();\n\t\tconst formB = manager.allocTransform();\n\n\t\tbodyA.body.getMotionState().getWorldTransform( formA );\n\t\tbodyB.body.getMotionState().getWorldTransform( formB );\n\n\t\tconst formInverseA = manager.inverseTransform( formA );\n\t\tconst formInverseB = manager.inverseTransform( formB );\n\n\t\tconst formA2 = manager.multiplyTransforms( formInverseA, form );\n\t\tconst formB2 = manager.multiplyTransforms( formInverseB, form );\n\n\t\tconst constraint = new Ammo.btGeneric6DofSpringConstraint( bodyA.body, bodyB.body, formA2, formB2, true );\n\n\t\tconst lll = manager.allocVector3();\n\t\tconst lul = manager.allocVector3();\n\t\tconst all = manager.allocVector3();\n\t\tconst aul = manager.allocVector3();\n\n\t\tlll.setValue( params.translationLimitation1[ 0 ],\n\t\t              params.translationLimitation1[ 1 ],\n\t\t              params.translationLimitation1[ 2 ] );\n\t\tlul.setValue( params.translationLimitation2[ 0 ],\n\t\t              params.translationLimitation2[ 1 ],\n\t\t              params.translationLimitation2[ 2 ] );\n\t\tall.setValue( params.rotationLimitation1[ 0 ],\n\t\t              params.rotationLimitation1[ 1 ],\n\t\t              params.rotationLimitation1[ 2 ] );\n\t\taul.setValue( params.rotationLimitation2[ 0 ],\n\t\t              params.rotationLimitation2[ 1 ],\n\t\t              params.rotationLimitation2[ 2 ] );\n\n\t\tconstraint.setLinearLowerLimit( lll );\n\t\tconstraint.setLinearUpperLimit( lul );\n\t\tconstraint.setAngularLowerLimit( all );\n\t\tconstraint.setAngularUpperLimit( aul );\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tif ( params.springPosition[ i ] !== 0 ) {\n\n\t\t\t\tconstraint.enableSpring( i, true );\n\t\t\t\tconstraint.setStiffness( i, params.springPosition[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tif ( params.springRotation[ i ] !== 0 ) {\n\n\t\t\t\tconstraint.enableSpring( i + 3, true );\n\t\t\t\tconstraint.setStiffness( i + 3, params.springRotation[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t/*\n\t\t * Currently(10/31/2016) official ammo.js doesn't support\n\t\t * btGeneric6DofSpringConstraint.setParam method.\n\t\t * You need custom ammo.js (add the method into idl) if you wanna use.\n\t\t * By setting this parameter, physics will be more like MMD's\n\t\t */\n\t\tif ( constraint.setParam !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t// this parameter is from http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mmd.three.js\n\t\t\t\tconstraint.setParam( 2, 0.475, i );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.world.addConstraint( constraint, true );\n\t\tthis.constraint = constraint;\n\n\t\tmanager.freeTransform( form );\n\t\tmanager.freeTransform( formA );\n\t\tmanager.freeTransform( formB );\n\t\tmanager.freeTransform( formInverseA );\n\t\tmanager.freeTransform( formInverseB );\n\t\tmanager.freeTransform( formA2 );\n\t\tmanager.freeTransform( formB2 );\n\t\tmanager.freeVector3( lll );\n\t\tmanager.freeVector3( lul );\n\t\tmanager.freeVector3( all );\n\t\tmanager.freeVector3( aul );\n\n\t}\n\n}\n\n//\n\nconst _position = new Vector3();\nconst _quaternion = new Quaternion();\nconst _scale = new Vector3();\nconst _matrixWorldInv = new Matrix4();\n\nclass MMDPhysicsHelper extends Object3D {\n\n\t/**\n\t * Visualize Rigid bodies\n\t *\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Physics} physics\n\t */\n\tconstructor( mesh, physics ) {\n\n\t\tsuper();\n\n\t\tthis.root = mesh;\n\t\tthis.physics = physics;\n\n\t\tthis.matrix.copy( mesh.matrixWorld );\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.materials = [];\n\n\t\tthis.materials.push(\n\t\t\tnew MeshBasicMaterial( {\n\t\t\t\tcolor: new Color( 0xff8888 ),\n\t\t\t\twireframe: true,\n\t\t\t\tdepthTest: false,\n\t\t\t\tdepthWrite: false,\n\t\t\t\topacity: 0.25,\n\t\t\t\ttransparent: true\n\t\t\t} )\n\t\t);\n\n\t\tthis.materials.push(\n\t\t\tnew MeshBasicMaterial( {\n\t\t\t\tcolor: new Color( 0x88ff88 ),\n\t\t\t\twireframe: true,\n\t\t\t\tdepthTest: false,\n\t\t\t\tdepthWrite: false,\n\t\t\t\topacity: 0.25,\n\t\t\t\ttransparent: true\n\t\t\t} )\n\t\t);\n\n\t\tthis.materials.push(\n\t\t\tnew MeshBasicMaterial( {\n\t\t\t\tcolor: new Color( 0x8888ff ),\n\t\t\t\twireframe: true,\n\t\t\t\tdepthTest: false,\n\t\t\t\tdepthWrite: false,\n\t\t\t\topacity: 0.25,\n\t\t\t\ttransparent: true\n\t\t\t} )\n\t\t);\n\n\t\tthis._init();\n\n\t}\n\n\t/**\n\t * Updates Rigid Bodies visualization.\n\t */\n\tupdateMatrixWorld( force ) {\n\n\t\tvar mesh = this.root;\n\n\t\tif ( this.visible ) {\n\n\t\t\tvar bodies = this.physics.bodies;\n\n\t\t\t_matrixWorldInv\n\t\t\t\t.copy( mesh.matrixWorld )\n\t\t\t\t.decompose( _position, _quaternion, _scale )\n\t\t\t\t.compose( _position, _quaternion, _scale.set( 1, 1, 1 ) )\n\t\t\t\t.invert();\n\n\t\t\tfor ( var i = 0, il = bodies.length; i < il; i ++ ) {\n\n\t\t\t\tvar body = bodies[ i ].body;\n\t\t\t\tvar child = this.children[ i ];\n\n\t\t\t\tvar tr = body.getCenterOfMassTransform();\n\t\t\t\tvar origin = tr.getOrigin();\n\t\t\t\tvar rotation = tr.getRotation();\n\n\t\t\t\tchild.position\n\t\t\t\t\t.set( origin.x(), origin.y(), origin.z() )\n\t\t\t\t\t.applyMatrix4( _matrixWorldInv );\n\n\t\t\t\tchild.quaternion\n\t\t\t\t\t.setFromRotationMatrix( _matrixWorldInv )\n\t\t\t\t\t.multiply(\n\t\t\t\t\t\t_quaternion.set( rotation.x(), rotation.y(), rotation.z(), rotation.w() )\n\t\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.matrix\n\t\t\t.copy( mesh.matrixWorld )\n\t\t\t.decompose( _position, _quaternion, _scale )\n\t\t\t.compose( _position, _quaternion, _scale.set( 1, 1, 1 ) );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\t// private method\n\n\t_init() {\n\n\t\tvar bodies = this.physics.bodies;\n\n\t\tfunction createGeometry( param ) {\n\n\t\t\tswitch ( param.shapeType ) {\n\n\t\t\t\tcase 0:\n\t\t\t\t\treturn new SphereGeometry( param.width, 16, 8 );\n\n\t\t\t\tcase 1:\n\t\t\t\t\treturn new BoxGeometry( param.width * 2, param.height * 2, param.depth * 2, 8, 8, 8 );\n\n\t\t\t\tcase 2:\n\t\t\t\t\treturn new createCapsuleGeometry( param.width, param.height, 16, 8 );\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// copy from http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mytest37.js?ver=20160815\n\t\tfunction createCapsuleGeometry( radius, cylinderHeight, segmentsRadius, segmentsHeight ) {\n\n\t\t\tvar geometry = new CylinderGeometry( radius, radius, cylinderHeight, segmentsRadius, segmentsHeight, true );\n\t\t\tvar upperSphere = new Mesh( new SphereGeometry( radius, segmentsRadius, segmentsHeight, 0, Math.PI * 2, 0, Math.PI / 2 ) );\n\t\t\tvar lowerSphere = new Mesh( new SphereGeometry( radius, segmentsRadius, segmentsHeight, 0, Math.PI * 2, Math.PI / 2, Math.PI / 2 ) );\n\n\t\t\tupperSphere.position.set( 0, cylinderHeight / 2, 0 );\n\t\t\tlowerSphere.position.set( 0, - cylinderHeight / 2, 0 );\n\n\t\t\tupperSphere.updateMatrix();\n\t\t\tlowerSphere.updateMatrix();\n\n\t\t\tgeometry.merge( upperSphere.geometry, upperSphere.matrix );\n\t\t\tgeometry.merge( lowerSphere.geometry, lowerSphere.matrix );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\tfor ( var i = 0, il = bodies.length; i < il; i ++ ) {\n\n\t\t\tvar param = bodies[ i ].params;\n\t\t\tthis.add( new Mesh( createGeometry( param ), this.materials[ param.type ] ) );\n\n\t\t}\n\n\t}\n\n}\n\nexport { MMDPhysics };\n","import {\n\tAnimationMixer,\n\tObject3D,\n\tQuaternion,\n\tVector3\n} from 'three';\nimport { CCDIKSolver } from '../animation/CCDIKSolver.js';\nimport { MMDPhysics } from '../animation/MMDPhysics.js';\n\n/**\n * MMDAnimationHelper handles animation of MMD assets loaded by MMDLoader\n * with MMD special features as IK, Grant, and Physics.\n *\n * Dependencies\n *  - ammo.js https://github.com/kripken/ammo.js\n *  - MMDPhysics\n *  - CCDIKSolver\n *\n * TODO\n *  - more precise grant skinning support.\n */\nclass MMDAnimationHelper {\n\n\t/**\n\t * @param {Object} params - (optional)\n\t * @param {boolean} params.sync - Whether animation durations of added objects are synched. Default is true.\n\t * @param {Number} params.afterglow - Default is 0.0.\n\t * @param {boolean} params.resetPhysicsOnLoop - Default is true.\n\t */\n\tconstructor( params = {} ) {\n\n\t\tthis.meshes = [];\n\n\t\tthis.camera = null;\n\t\tthis.cameraTarget = new Object3D();\n\t\tthis.cameraTarget.name = 'target';\n\n\t\tthis.audio = null;\n\t\tthis.audioManager = null;\n\n\t\tthis.objects = new WeakMap();\n\n\t\tthis.configuration = {\n\t\t\tsync: params.sync !== undefined ? params.sync : true,\n\t\t\tafterglow: params.afterglow !== undefined ? params.afterglow : 0.0,\n\t\t\tresetPhysicsOnLoop: params.resetPhysicsOnLoop !== undefined ? params.resetPhysicsOnLoop : true,\n\t\t\tpmxAnimation: params.pmxAnimation !== undefined ? params.pmxAnimation : false\n\t\t};\n\n\t\tthis.enabled = {\n\t\t\tanimation: true,\n\t\t\tik: true,\n\t\t\tgrant: true,\n\t\t\tphysics: true,\n\t\t\tcameraAnimation: true\n\t\t};\n\n\t\tthis.onBeforePhysics = function ( /* mesh */ ) {};\n\n\t\t// experimental\n\t\tthis.sharedPhysics = false;\n\t\tthis.masterPhysics = null;\n\n\t}\n\n\t/**\n\t * Adds an Three.js Object to helper and setups animation.\n\t * The anmation durations of added objects are synched\n\t * if this.configuration.sync is true.\n\t *\n\t * @param {THREE.SkinnedMesh|THREE.Camera|THREE.Audio} object\n\t * @param {Object} params - (optional)\n\t * @param {THREE.AnimationClip|Array<THREE.AnimationClip>} params.animation - Only for THREE.SkinnedMesh and THREE.Camera. Default is undefined.\n\t * @param {boolean} params.physics - Only for THREE.SkinnedMesh. Default is true.\n\t * @param {Integer} params.warmup - Only for THREE.SkinnedMesh and physics is true. Default is 60.\n\t * @param {Number} params.unitStep - Only for THREE.SkinnedMesh and physics is true. Default is 1 / 65.\n\t * @param {Integer} params.maxStepNum - Only for THREE.SkinnedMesh and physics is true. Default is 3.\n\t * @param {Vector3} params.gravity - Only for THREE.SkinnedMesh and physics is true. Default ( 0, - 9.8 * 10, 0 ).\n\t * @param {Number} params.delayTime - Only for THREE.Audio. Default is 0.0.\n\t * @return {MMDAnimationHelper}\n\t */\n\tadd( object, params = {} ) {\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tthis._addMesh( object, params );\n\n\t\t} else if ( object.isCamera ) {\n\n\t\t\tthis._setupCamera( object, params );\n\n\t\t} else if ( object.type === 'Audio' ) {\n\n\t\t\tthis._setupAudio( object, params );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper.add: '\n\t\t\t\t+ 'accepts only '\n\t\t\t\t+ 'THREE.SkinnedMesh or '\n\t\t\t\t+ 'THREE.Camera or '\n\t\t\t\t+ 'THREE.Audio instance.' );\n\n\t\t}\n\n\t\tif ( this.configuration.sync ) this._syncDuration();\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Removes an Three.js Object from helper.\n\t *\n\t * @param {THREE.SkinnedMesh|THREE.Camera|THREE.Audio} object\n\t * @return {MMDAnimationHelper}\n\t */\n\tremove( object ) {\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tthis._removeMesh( object );\n\n\t\t} else if ( object.isCamera ) {\n\n\t\t\tthis._clearCamera( object );\n\n\t\t} else if ( object.type === 'Audio' ) {\n\n\t\t\tthis._clearAudio( object );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper.remove: '\n\t\t\t\t+ 'accepts only '\n\t\t\t\t+ 'THREE.SkinnedMesh or '\n\t\t\t\t+ 'THREE.Camera or '\n\t\t\t\t+ 'THREE.Audio instance.' );\n\n\t\t}\n\n\t\tif ( this.configuration.sync ) this._syncDuration();\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Updates the animation.\n\t *\n\t * @param {Number} delta\n\t * @return {MMDAnimationHelper}\n\t */\n\tupdate( delta ) {\n\n\t\tif ( this.audioManager !== null ) this.audioManager.control( delta );\n\n\t\tfor ( let i = 0; i < this.meshes.length; i ++ ) {\n\n\t\t\tthis._animateMesh( this.meshes[ i ], delta );\n\n\t\t}\n\n\t\tif ( this.sharedPhysics ) this._updateSharedPhysics( delta );\n\n\t\tif ( this.camera !== null ) this._animateCamera( this.camera, delta );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Changes the pose of SkinnedMesh as VPD specifies.\n\t *\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Object} vpd - VPD content parsed MMDParser\n\t * @param {Object} params - (optional)\n\t * @param {boolean} params.resetPose - Default is true.\n\t * @param {boolean} params.ik - Default is true.\n\t * @param {boolean} params.grant - Default is true.\n\t * @return {MMDAnimationHelper}\n\t */\n\tpose( mesh, vpd, params = {} ) {\n\n\t\tif ( params.resetPose !== false ) mesh.pose();\n\n\t\tconst bones = mesh.skeleton.bones;\n\t\tconst boneParams = vpd.bones;\n\n\t\tconst boneNameDictionary = {};\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\tboneNameDictionary[ bones[ i ].name ] = i;\n\n\t\t}\n\n\t\tconst vector = new Vector3();\n\t\tconst quaternion = new Quaternion();\n\n\t\tfor ( let i = 0, il = boneParams.length; i < il; i ++ ) {\n\n\t\t\tconst boneParam = boneParams[ i ];\n\t\t\tconst boneIndex = boneNameDictionary[ boneParam.name ];\n\n\t\t\tif ( boneIndex === undefined ) continue;\n\n\t\t\tconst bone = bones[ boneIndex ];\n\t\t\tbone.position.add( vector.fromArray( boneParam.translation ) );\n\t\t\tbone.quaternion.multiply( quaternion.fromArray( boneParam.quaternion ) );\n\n\t\t}\n\n\t\tmesh.updateMatrixWorld( true );\n\n\t\t// PMX animation system special path\n\t\tif ( this.configuration.pmxAnimation &&\n\t\t\tmesh.geometry.userData.MMD && mesh.geometry.userData.MMD.format === 'pmx' ) {\n\n\t\t\tconst sortedBonesData = this._sortBoneDataArray( mesh.geometry.userData.MMD.bones.slice() );\n\t\t\tconst ikSolver = params.ik !== false ? this._createCCDIKSolver( mesh ) : null;\n\t\t\tconst grantSolver = params.grant !== false ? this.createGrantSolver( mesh ) : null;\n\t\t\tthis._animatePMXMesh( mesh, sortedBonesData, ikSolver, grantSolver );\n\n\t\t} else {\n\n\t\t\tif ( params.ik !== false ) {\n\n\t\t\t\tthis._createCCDIKSolver( mesh ).update();\n\n\t\t\t}\n\n\t\t\tif ( params.grant !== false ) {\n\n\t\t\t\tthis.createGrantSolver( mesh ).update();\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Enabes/Disables an animation feature.\n\t *\n\t * @param {string} key\n\t * @param {boolean} enabled\n\t * @return {MMDAnimationHelper}\n\t */\n\tenable( key, enabled ) {\n\n\t\tif ( this.enabled[ key ] === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper.enable: '\n\t\t\t\t+ 'unknown key ' + key );\n\n\t\t}\n\n\t\tthis.enabled[ key ] = enabled;\n\n\t\tif ( key === 'physics' ) {\n\n\t\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\t\tthis._optimizeIK( this.meshes[ i ], enabled );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Creates an GrantSolver instance.\n\t *\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @return {GrantSolver}\n\t */\n\tcreateGrantSolver( mesh ) {\n\n\t\treturn new GrantSolver( mesh, mesh.geometry.userData.MMD.grants );\n\n\t}\n\n\t// private methods\n\n\t_addMesh( mesh, params ) {\n\n\t\tif ( this.meshes.indexOf( mesh ) >= 0 ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._addMesh: '\n\t\t\t\t+ 'SkinnedMesh \\'' + mesh.name + '\\' has already been added.' );\n\n\t\t}\n\n\t\tthis.meshes.push( mesh );\n\t\tthis.objects.set( mesh, { looped: false } );\n\n\t\tthis._setupMeshAnimation( mesh, params.animation );\n\n\t\tif ( params.physics !== false ) {\n\n\t\t\tthis._setupMeshPhysics( mesh, params );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t_setupCamera( camera, params ) {\n\n\t\tif ( this.camera === camera ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._setupCamera: '\n\t\t\t\t+ 'Camera \\'' + camera.name + '\\' has already been set.' );\n\n\t\t}\n\n\t\tif ( this.camera ) this.clearCamera( this.camera );\n\n\t\tthis.camera = camera;\n\n\t\tcamera.add( this.cameraTarget );\n\n\t\tthis.objects.set( camera, {} );\n\n\t\tif ( params.animation !== undefined ) {\n\n\t\t\tthis._setupCameraAnimation( camera, params.animation );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t_setupAudio( audio, params ) {\n\n\t\tif ( this.audio === audio ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._setupAudio: '\n\t\t\t\t+ 'Audio \\'' + audio.name + '\\' has already been set.' );\n\n\t\t}\n\n\t\tif ( this.audio ) this.clearAudio( this.audio );\n\n\t\tthis.audio = audio;\n\t\tthis.audioManager = new AudioManager( audio, params );\n\n\t\tthis.objects.set( this.audioManager, {\n\t\t\tduration: this.audioManager.duration\n\t\t} );\n\n\t\treturn this;\n\n\t}\n\n\t_removeMesh( mesh ) {\n\n\t\tlet found = false;\n\t\tlet writeIndex = 0;\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tif ( this.meshes[ i ] === mesh ) {\n\n\t\t\t\tthis.objects.delete( mesh );\n\t\t\t\tfound = true;\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tthis.meshes[ writeIndex ++ ] = this.meshes[ i ];\n\n\t\t}\n\n\t\tif ( ! found ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._removeMesh: '\n\t\t\t\t+ 'SkinnedMesh \\'' + mesh.name + '\\' has not been added yet.' );\n\n\t\t}\n\n\t\tthis.meshes.length = writeIndex;\n\n\t\treturn this;\n\n\t}\n\n\t_clearCamera( camera ) {\n\n\t\tif ( camera !== this.camera ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._clearCamera: '\n\t\t\t\t+ 'Camera \\'' + camera.name + '\\' has not been set yet.' );\n\n\t\t}\n\n\t\tthis.camera.remove( this.cameraTarget );\n\n\t\tthis.objects.delete( this.camera );\n\t\tthis.camera = null;\n\n\t\treturn this;\n\n\t}\n\n\t_clearAudio( audio ) {\n\n\t\tif ( audio !== this.audio ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._clearAudio: '\n\t\t\t\t+ 'Audio \\'' + audio.name + '\\' has not been set yet.' );\n\n\t\t}\n\n\t\tthis.objects.delete( this.audioManager );\n\n\t\tthis.audio = null;\n\t\tthis.audioManager = null;\n\n\t\treturn this;\n\n\t}\n\n\t_setupMeshAnimation( mesh, animation ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\tif ( animation !== undefined ) {\n\n\t\t\tconst animations = Array.isArray( animation )\n\t\t\t\t? animation : [ animation ];\n\n\t\t\tobjects.mixer = new AnimationMixer( mesh );\n\n\t\t\tfor ( let i = 0, il = animations.length; i < il; i ++ ) {\n\n\t\t\t\tobjects.mixer.clipAction( animations[ i ] ).play();\n\n\t\t\t}\n\n\t\t\t// TODO: find a workaround not to access ._clip looking like a private property\n\t\t\tobjects.mixer.addEventListener( 'loop', function ( event ) {\n\n\t\t\t\tconst tracks = event.action._clip.tracks;\n\n\t\t\t\tif ( tracks.length > 0 && tracks[ 0 ].name.slice( 0, 6 ) !== '.bones' ) return;\n\n\t\t\t\tobjects.looped = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t\tobjects.ikSolver = this._createCCDIKSolver( mesh );\n\t\tobjects.grantSolver = this.createGrantSolver( mesh );\n\n\t\treturn this;\n\n\t}\n\n\t_setupCameraAnimation( camera, animation ) {\n\n\t\tconst animations = Array.isArray( animation )\n\t\t\t? animation : [ animation ];\n\n\t\tconst objects = this.objects.get( camera );\n\n\t\tobjects.mixer = new AnimationMixer( camera );\n\n\t\tfor ( let i = 0, il = animations.length; i < il; i ++ ) {\n\n\t\t\tobjects.mixer.clipAction( animations[ i ] ).play();\n\n\t\t}\n\n\t}\n\n\t_setupMeshPhysics( mesh, params ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\t// shared physics is experimental\n\n\t\tif ( params.world === undefined && this.sharedPhysics ) {\n\n\t\t\tconst masterPhysics = this._getMasterPhysics();\n\n\t\t\tif ( masterPhysics !== null ) world = masterPhysics.world; // eslint-disable-line no-undef\n\n\t\t}\n\n\t\tobjects.physics = this._createMMDPhysics( mesh, params );\n\n\t\tif ( objects.mixer && params.animationWarmup !== false ) {\n\n\t\t\tthis._animateMesh( mesh, 0 );\n\t\t\tobjects.physics.reset();\n\n\t\t}\n\n\t\tobjects.physics.warmup( params.warmup !== undefined ? params.warmup : 60 );\n\n\t\tthis._optimizeIK( mesh, true );\n\n\t}\n\n\t_animateMesh( mesh, delta ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\tconst mixer = objects.mixer;\n\t\tconst ikSolver = objects.ikSolver;\n\t\tconst grantSolver = objects.grantSolver;\n\t\tconst physics = objects.physics;\n\t\tconst looped = objects.looped;\n\n\t\tif ( mixer && this.enabled.animation ) {\n\n\t\t\t// alternate solution to save/restore bones but less performant?\n\t\t\t//mesh.pose();\n\t\t\t//this._updatePropertyMixersBuffer( mesh );\n\n\t\t\tthis._restoreBones( mesh );\n\n\t\t\tmixer.update( delta );\n\n\t\t\tthis._saveBones( mesh );\n\n\t\t\t// PMX animation system special path\n\t\t\tif ( this.configuration.pmxAnimation &&\n\t\t\t\tmesh.geometry.userData.MMD && mesh.geometry.userData.MMD.format === 'pmx' ) {\n\n\t\t\t\tif ( ! objects.sortedBonesData ) objects.sortedBonesData = this._sortBoneDataArray( mesh.geometry.userData.MMD.bones.slice() );\n\n\t\t\t\tthis._animatePMXMesh(\n\t\t\t\t\tmesh,\n\t\t\t\t\tobjects.sortedBonesData,\n\t\t\t\t\tikSolver && this.enabled.ik ? ikSolver : null,\n\t\t\t\t\tgrantSolver && this.enabled.grant ? grantSolver : null\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\tif ( ikSolver && this.enabled.ik ) {\n\n\t\t\t\t\tmesh.updateMatrixWorld( true );\n\t\t\t\t\tikSolver.update();\n\n\t\t\t\t}\n\n\t\t\t\tif ( grantSolver && this.enabled.grant ) {\n\n\t\t\t\t\tgrantSolver.update();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( looped === true && this.enabled.physics ) {\n\n\t\t\tif ( physics && this.configuration.resetPhysicsOnLoop ) physics.reset();\n\n\t\t\tobjects.looped = false;\n\n\t\t}\n\n\t\tif ( physics && this.enabled.physics && ! this.sharedPhysics ) {\n\n\t\t\tthis.onBeforePhysics( mesh );\n\t\t\tphysics.update( delta );\n\n\t\t}\n\n\t}\n\n\t// Sort bones in order by 1. transformationClass and 2. bone index.\n\t// In PMX animation system, bone transformations should be processed\n\t// in this order.\n\t_sortBoneDataArray( boneDataArray ) {\n\n\t\treturn boneDataArray.sort( function ( a, b ) {\n\n\t\t\tif ( a.transformationClass !== b.transformationClass ) {\n\n\t\t\t\treturn a.transformationClass - b.transformationClass;\n\n\t\t\t} else {\n\n\t\t\t\treturn a.index - b.index;\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t// PMX Animation system is a bit too complex and doesn't great match to\n\t// Three.js Animation system. This method attempts to simulate it as much as\n\t// possible but doesn't perfectly simulate.\n\t// This method is more costly than the regular one so\n\t// you are recommended to set constructor parameter \"pmxAnimation: true\"\n\t// only if your PMX model animation doesn't work well.\n\t// If you need better method you would be required to write your own.\n\t_animatePMXMesh( mesh, sortedBonesData, ikSolver, grantSolver ) {\n\n\t\t_quaternionIndex = 0;\n\t\t_grantResultMap.clear();\n\n\t\tfor ( let i = 0, il = sortedBonesData.length; i < il; i ++ ) {\n\n\t\t\tupdateOne( mesh, sortedBonesData[ i ].index, ikSolver, grantSolver );\n\n\t\t}\n\n\t\tmesh.updateMatrixWorld( true );\n\t\treturn this;\n\n\t}\n\n\t_animateCamera( camera, delta ) {\n\n\t\tconst mixer = this.objects.get( camera ).mixer;\n\n\t\tif ( mixer && this.enabled.cameraAnimation ) {\n\n\t\t\tmixer.update( delta );\n\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t\tcamera.up.set( 0, 1, 0 );\n\t\t\tcamera.up.applyQuaternion( camera.quaternion );\n\t\t\tcamera.lookAt( this.cameraTarget.position );\n\n\t\t}\n\n\t}\n\n\t_optimizeIK( mesh, physicsEnabled ) {\n\n\t\tconst iks = mesh.geometry.userData.MMD.iks;\n\t\tconst bones = mesh.geometry.userData.MMD.bones;\n\n\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\tconst ik = iks[ i ];\n\t\t\tconst links = ik.links;\n\n\t\t\tfor ( let j = 0, jl = links.length; j < jl; j ++ ) {\n\n\t\t\t\tconst link = links[ j ];\n\n\t\t\t\tif ( physicsEnabled === true ) {\n\n\t\t\t\t\t// disable IK of the bone the corresponding rigidBody type of which is 1 or 2\n\t\t\t\t\t// because its rotation will be overriden by physics\n\t\t\t\t\tlink.enabled = bones[ link.index ].rigidBodyType > 0 ? false : true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlink.enabled = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_createCCDIKSolver( mesh ) {\n\n\t\tif ( CCDIKSolver === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper: Import CCDIKSolver.' );\n\n\t\t}\n\n\t\treturn new CCDIKSolver( mesh, mesh.geometry.userData.MMD.iks );\n\n\t}\n\n\t_createMMDPhysics( mesh, params ) {\n\n\t\tif ( MMDPhysics === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.MMDPhysics: Import MMDPhysics.' );\n\n\t\t}\n\n\t\treturn new MMDPhysics(\n\t\t\tmesh,\n\t\t\tmesh.geometry.userData.MMD.rigidBodies,\n\t\t\tmesh.geometry.userData.MMD.constraints,\n\t\t\tparams );\n\n\t}\n\n\t/*\n\t * Detects the longest duration and then sets it to them to sync.\n\t * TODO: Not to access private properties ( ._actions and ._clip )\n\t */\n\t_syncDuration() {\n\n\t\tlet max = 0.0;\n\n\t\tconst objects = this.objects;\n\t\tconst meshes = this.meshes;\n\t\tconst camera = this.camera;\n\t\tconst audioManager = this.audioManager;\n\n\t\t// get the longest duration\n\n\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\tconst mixer = this.objects.get( meshes[ i ] ).mixer;\n\n\t\t\tif ( mixer === undefined ) continue;\n\n\t\t\tfor ( let j = 0; j < mixer._actions.length; j ++ ) {\n\n\t\t\t\tconst clip = mixer._actions[ j ]._clip;\n\n\t\t\t\tif ( ! objects.has( clip ) ) {\n\n\t\t\t\t\tobjects.set( clip, {\n\t\t\t\t\t\tduration: clip.duration\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tmax = Math.max( max, objects.get( clip ).duration );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( camera !== null ) {\n\n\t\t\tconst mixer = this.objects.get( camera ).mixer;\n\n\t\t\tif ( mixer !== undefined ) {\n\n\t\t\t\tfor ( let i = 0, il = mixer._actions.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst clip = mixer._actions[ i ]._clip;\n\n\t\t\t\t\tif ( ! objects.has( clip ) ) {\n\n\t\t\t\t\t\tobjects.set( clip, {\n\t\t\t\t\t\t\tduration: clip.duration\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmax = Math.max( max, objects.get( clip ).duration );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( audioManager !== null ) {\n\n\t\t\tmax = Math.max( max, objects.get( audioManager ).duration );\n\n\t\t}\n\n\t\tmax += this.configuration.afterglow;\n\n\t\t// update the duration\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tconst mixer = this.objects.get( this.meshes[ i ] ).mixer;\n\n\t\t\tif ( mixer === undefined ) continue;\n\n\t\t\tfor ( let j = 0, jl = mixer._actions.length; j < jl; j ++ ) {\n\n\t\t\t\tmixer._actions[ j ]._clip.duration = max;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( camera !== null ) {\n\n\t\t\tconst mixer = this.objects.get( camera ).mixer;\n\n\t\t\tif ( mixer !== undefined ) {\n\n\t\t\t\tfor ( let i = 0, il = mixer._actions.length; i < il; i ++ ) {\n\n\t\t\t\t\tmixer._actions[ i ]._clip.duration = max;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( audioManager !== null ) {\n\n\t\t\taudioManager.duration = max;\n\n\t\t}\n\n\t}\n\n\t// workaround\n\n\t_updatePropertyMixersBuffer( mesh ) {\n\n\t\tconst mixer = this.objects.get( mesh ).mixer;\n\n\t\tconst propertyMixers = mixer._bindings;\n\t\tconst accuIndex = mixer._accuIndex;\n\n\t\tfor ( let i = 0, il = propertyMixers.length; i < il; i ++ ) {\n\n\t\t\tconst propertyMixer = propertyMixers[ i ];\n\t\t\tconst buffer = propertyMixer.buffer;\n\t\t\tconst stride = propertyMixer.valueSize;\n\t\t\tconst offset = ( accuIndex + 1 ) * stride;\n\n\t\t\tpropertyMixer.binding.getValue( buffer, offset );\n\n\t\t}\n\n\t}\n\n\t/*\n\t * Avoiding these two issues by restore/save bones before/after mixer animation.\n\t *\n\t * 1. PropertyMixer used by AnimationMixer holds cache value in .buffer.\n\t *    Calculating IK, Grant, and Physics after mixer animation can break\n\t *    the cache coherency.\n\t *\n\t * 2. Applying Grant two or more times without reset the posing breaks model.\n\t */\n\t_saveBones( mesh ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\tconst bones = mesh.skeleton.bones;\n\n\t\tlet backupBones = objects.backupBones;\n\n\t\tif ( backupBones === undefined ) {\n\n\t\t\tbackupBones = new Float32Array( bones.length * 7 );\n\t\t\tobjects.backupBones = backupBones;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tbone.position.toArray( backupBones, i * 7 );\n\t\t\tbone.quaternion.toArray( backupBones, i * 7 + 3 );\n\n\t\t}\n\n\t}\n\n\t_restoreBones( mesh ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\tconst backupBones = objects.backupBones;\n\n\t\tif ( backupBones === undefined ) return;\n\n\t\tconst bones = mesh.skeleton.bones;\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tbone.position.fromArray( backupBones, i * 7 );\n\t\t\tbone.quaternion.fromArray( backupBones, i * 7 + 3 );\n\n\t\t}\n\n\t}\n\n\t// experimental\n\n\t_getMasterPhysics() {\n\n\t\tif ( this.masterPhysics !== null ) return this.masterPhysics;\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tconst physics = this.meshes[ i ].physics;\n\n\t\t\tif ( physics !== undefined && physics !== null ) {\n\n\t\t\t\tthis.masterPhysics = physics;\n\t\t\t\treturn this.masterPhysics;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_updateSharedPhysics( delta ) {\n\n\t\tif ( this.meshes.length === 0 || ! this.enabled.physics || ! this.sharedPhysics ) return;\n\n\t\tconst physics = this._getMasterPhysics();\n\n\t\tif ( physics === null ) return;\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tconst p = this.meshes[ i ].physics;\n\n\t\t\tif ( p !== null && p !== undefined ) {\n\n\t\t\t\tp.updateRigidBodies();\n\n\t\t\t}\n\n\t\t}\n\n\t\tphysics.stepSimulation( delta );\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tconst p = this.meshes[ i ].physics;\n\n\t\t\tif ( p !== null && p !== undefined ) {\n\n\t\t\t\tp.updateBones();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n// Keep working quaternions for less GC\nconst _quaternions = [];\nlet _quaternionIndex = 0;\n\nfunction getQuaternion() {\n\n\tif ( _quaternionIndex >= _quaternions.length ) {\n\n\t\t_quaternions.push( new Quaternion() );\n\n\t}\n\n\treturn _quaternions[ _quaternionIndex ++ ];\n\n}\n\n// Save rotation whose grant and IK are already applied\n// used by grant children\nconst _grantResultMap = new Map();\n\nfunction updateOne( mesh, boneIndex, ikSolver, grantSolver ) {\n\n\tconst bones = mesh.skeleton.bones;\n\tconst bonesData = mesh.geometry.userData.MMD.bones;\n\tconst boneData = bonesData[ boneIndex ];\n\tconst bone = bones[ boneIndex ];\n\n\t// Return if already updated by being referred as a grant parent.\n\tif ( _grantResultMap.has( boneIndex ) ) return;\n\n\tconst quaternion = getQuaternion();\n\n\t// Initialize grant result here to prevent infinite loop.\n\t// If it's referred before updating with actual result later\n\t// result without applyting IK or grant is gotten\n\t// but better than composing of infinite loop.\n\t_grantResultMap.set( boneIndex, quaternion.copy( bone.quaternion ) );\n\n\t// @TODO: Support global grant and grant position\n\tif ( grantSolver && boneData.grant &&\n\t\t! boneData.grant.isLocal && boneData.grant.affectRotation ) {\n\n\t\tconst parentIndex = boneData.grant.parentIndex;\n\t\tconst ratio = boneData.grant.ratio;\n\n\t\tif ( ! _grantResultMap.has( parentIndex ) ) {\n\n\t\t\tupdateOne( mesh, parentIndex, ikSolver, grantSolver );\n\n\t\t}\n\n\t\tgrantSolver.addGrantRotation( bone, _grantResultMap.get( parentIndex ), ratio );\n\n\t}\n\n\tif ( ikSolver && boneData.ik ) {\n\n\t\t// @TODO: Updating world matrices every time solving an IK bone is\n\t\t// costly. Optimize if possible.\n\t\tmesh.updateMatrixWorld( true );\n\t\tikSolver.updateOne( boneData.ik );\n\n\t\t// No confident, but it seems the grant results with ik links should be updated?\n\t\tconst links = boneData.ik.links;\n\n\t\tfor ( let i = 0, il = links.length; i < il; i ++ ) {\n\n\t\t\tconst link = links[ i ];\n\n\t\t\tif ( link.enabled === false ) continue;\n\n\t\t\tconst linkIndex = link.index;\n\n\t\t\tif ( _grantResultMap.has( linkIndex ) ) {\n\n\t\t\t\t_grantResultMap.set( linkIndex, _grantResultMap.get( linkIndex ).copy( bones[ linkIndex ].quaternion ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Update with the actual result here\n\tquaternion.copy( bone.quaternion );\n\n}\n\n//\n\nclass AudioManager {\n\n\t/**\n\t * @param {THREE.Audio} audio\n\t * @param {Object} params - (optional)\n\t * @param {Nuumber} params.delayTime\n\t */\n\tconstructor( audio, params = {} ) {\n\n\t\tthis.audio = audio;\n\n\t\tthis.elapsedTime = 0.0;\n\t\tthis.currentTime = 0.0;\n\t\tthis.delayTime = params.delayTime !== undefined\n\t\t\t? params.delayTime : 0.0;\n\n\t\tthis.audioDuration = this.audio.buffer.duration;\n\t\tthis.duration = this.audioDuration + this.delayTime;\n\n\t}\n\n\t/**\n\t * @param {Number} delta\n\t * @return {AudioManager}\n\t */\n\tcontrol( delta ) {\n\n\t\tthis.elapsed += delta;\n\t\tthis.currentTime += delta;\n\n\t\tif ( this._shouldStopAudio() ) this.audio.stop();\n\t\tif ( this._shouldStartAudio() ) this.audio.play();\n\n\t\treturn this;\n\n\t}\n\n\t// private methods\n\n\t_shouldStartAudio() {\n\n\t\tif ( this.audio.isPlaying ) return false;\n\n\t\twhile ( this.currentTime >= this.duration ) {\n\n\t\t\tthis.currentTime -= this.duration;\n\n\t\t}\n\n\t\tif ( this.currentTime < this.delayTime ) return false;\n\n\t\t// 'duration' can be bigger than 'audioDuration + delayTime' because of sync configuration\n\t\tif ( ( this.currentTime - this.delayTime ) > this.audioDuration ) return false;\n\n\t\treturn true;\n\n\t}\n\n\t_shouldStopAudio() {\n\n\t\treturn this.audio.isPlaying &&\n\t\t\tthis.currentTime >= this.duration;\n\n\t}\n\n}\n\nconst _q = new Quaternion();\n\n/**\n * Solver for Grant (Fuyo in Japanese. I just google translated because\n * Fuyo may be MMD specific term and may not be common word in 3D CG terms.)\n * Grant propagates a bone's transform to other bones transforms even if\n * they are not children.\n * @param {THREE.SkinnedMesh} mesh\n * @param {Array<Object>} grants\n */\nclass GrantSolver {\n\n\tconstructor( mesh, grants = [] ) {\n\n\t\tthis.mesh = mesh;\n\t\tthis.grants = grants;\n\n\t}\n\n\t/**\n\t * Solve all the grant bones\n\t * @return {GrantSolver}\n\t */\n\tupdate() {\n\n\t\tconst grants = this.grants;\n\n\t\tfor ( let i = 0, il = grants.length; i < il; i ++ ) {\n\n\t\t\tthis.updateOne( grants[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Solve a grant bone\n\t * @param {Object} grant - grant parameter\n\t * @return {GrantSolver}\n\t */\n\tupdateOne( grant ) {\n\n\t\tconst bones = this.mesh.skeleton.bones;\n\t\tconst bone = bones[ grant.index ];\n\t\tconst parentBone = bones[ grant.parentIndex ];\n\n\t\tif ( grant.isLocal ) {\n\n\t\t\t// TODO: implement\n\t\t\tif ( grant.affectPosition ) {\n\n\t\t\t}\n\n\t\t\t// TODO: implement\n\t\t\tif ( grant.affectRotation ) {\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// TODO: implement\n\t\t\tif ( grant.affectPosition ) {\n\n\t\t\t}\n\n\t\t\tif ( grant.affectRotation ) {\n\n\t\t\t\tthis.addGrantRotation( bone, parentBone.quaternion, grant.ratio );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddGrantRotation( bone, q, ratio ) {\n\n\t\t_q.set( 0, 0, 0, 1 );\n\t\t_q.slerp( q, ratio );\n\t\tbone.quaternion.multiply( _q );\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { MMDAnimationHelper };\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v0.19.1\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var f,g,h,k,l;\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var p=null,q=null,t=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a);p=null}catch(b){throw setTimeout(t,0),b;}},u=Date.now();exports.unstable_now=function(){return Date.now()-u};f=function(a){null!==p?setTimeout(f,0,a):(p=a,setTimeout(t,0))};g=function(a,b){q=setTimeout(a,b)};h=function(){clearTimeout(q)};k=function(){return!1};l=exports.unstable_forceFrameRate=function(){}}else{var w=window.performance,x=window.Date,\ny=window.setTimeout,z=window.clearTimeout;if(\"undefined\"!==typeof console){var A=window.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\");\"function\"!==typeof A&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\")}if(\"object\"===\ntypeof w&&\"function\"===typeof w.now)exports.unstable_now=function(){return w.now()};else{var B=x.now();exports.unstable_now=function(){return x.now()-B}}var C=!1,D=null,E=-1,F=5,G=0;k=function(){return exports.unstable_now()>=G};l=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported\"):F=0<a?Math.floor(1E3/a):5};var H=new MessageChannel,I=H.port2;H.port1.onmessage=\nfunction(){if(null!==D){var a=exports.unstable_now();G=a+F;try{D(!0,a)?I.postMessage(null):(C=!1,D=null)}catch(b){throw I.postMessage(null),b;}}else C=!1};f=function(a){D=a;C||(C=!0,I.postMessage(null))};g=function(a,b){E=y(function(){a(exports.unstable_now())},b)};h=function(){z(E);E=-1}}function J(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<K(e,b))a[d]=b,a[c]=e,c=d;else break a}}function L(a){a=a[0];return void 0===a?null:a}\nfunction M(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>K(n,c))void 0!==r&&0>K(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>K(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function K(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var N=[],O=[],P=1,Q=null,R=3,S=!1,T=!1,U=!1;\nfunction V(a){for(var b=L(O);null!==b;){if(null===b.callback)M(O);else if(b.startTime<=a)M(O),b.sortIndex=b.expirationTime,J(N,b);else break;b=L(O)}}function W(a){U=!1;V(a);if(!T)if(null!==L(N))T=!0,f(X);else{var b=L(O);null!==b&&g(W,b.startTime-a)}}\nfunction X(a,b){T=!1;U&&(U=!1,h());S=!0;var c=R;try{V(b);for(Q=L(N);null!==Q&&(!(Q.expirationTime>b)||a&&!k());){var d=Q.callback;if(null!==d){Q.callback=null;R=Q.priorityLevel;var e=d(Q.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?Q.callback=e:Q===L(N)&&M(N);V(b)}else M(N);Q=L(N)}if(null!==Q)var m=!0;else{var n=L(O);null!==n&&g(W,n.startTime-b);m=!1}return m}finally{Q=null,R=c,S=!1}}\nfunction Y(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var Z=l;exports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){T||S||(T=!0,f(X))};\nexports.unstable_getCurrentPriorityLevel=function(){return R};exports.unstable_getFirstCallbackNode=function(){return L(N)};exports.unstable_next=function(a){switch(R){case 1:case 2:case 3:var b=3;break;default:b=R}var c=R;R=b;try{return a()}finally{R=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=Z;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=R;R=a;try{return b()}finally{R=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();if(\"object\"===typeof c&&null!==c){var e=c.delay;e=\"number\"===typeof e&&0<e?d+e:d;c=\"number\"===typeof c.timeout?c.timeout:Y(a)}else c=Y(a),e=d;c=e+c;a={id:P++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,J(O,a),null===L(N)&&a===L(O)&&(U?h():U=!0,g(W,e-d))):(a.sortIndex=c,J(N,a),T||S||(T=!0,f(X)));return a};\nexports.unstable_shouldYield=function(){var a=exports.unstable_now();V(a);var b=L(N);return b!==Q&&null!==Q&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<Q.expirationTime||k()};exports.unstable_wrapCallback=function(a){var b=R;return function(){var c=R;R=b;try{return a.apply(this,arguments)}finally{R=c}}};\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","import{typeOf as e,isElement as t,isValidElementType as n}from\"react-is\";import r,{useState as o,useContext as i,useMemo as s,useEffect as a,useRef as c,createElement as u,useDebugValue as l,useLayoutEffect as d}from\"react\";import h from\"shallowequal\";import p from\"@emotion/stylis\";import f from\"@emotion/unitless\";import m from\"@emotion/is-prop-valid\";import y from\"hoist-non-react-statics\";function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=function(e,t){for(var n=[e[0]],r=0,o=t.length;r<o;r+=1)n.push(t[r],e[r+1]);return n},S=function(t){return null!==t&&\"object\"==typeof t&&\"[object Object]\"===(t.toString?t.toString():Object.prototype.toString.call(t))&&!e(t)},w=Object.freeze([]),E=Object.freeze({});function b(e){return\"function\"==typeof e}function _(e){return\"production\"!==process.env.NODE_ENV&&\"string\"==typeof e&&e||e.displayName||e.name||\"Component\"}function N(e){return e&&\"string\"==typeof e.styledComponentId}var A=\"undefined\"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||\"data-styled\",C=\"5.3.0\",I=\"undefined\"!=typeof window&&\"HTMLElement\"in window,P=Boolean(\"boolean\"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:\"undefined\"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&\"\"!==process.env.REACT_APP_SC_DISABLE_SPEEDY?\"false\"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:\"undefined\"!=typeof process&&void 0!==process.env.SC_DISABLE_SPEEDY&&\"\"!==process.env.SC_DISABLE_SPEEDY?\"false\"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY:\"production\"!==process.env.NODE_ENV),O={},R=\"production\"!==process.env.NODE_ENV?{1:\"Cannot create styled-component for component: %s.\\n\\n\",2:\"Can't collect styles once you've consumed a `ServerStyleSheet`'s styles! `ServerStyleSheet` is a one off instance for each server-side render cycle.\\n\\n- Are you trying to reuse it across renders?\\n- Are you accidentally calling collectStyles twice?\\n\\n\",3:\"Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.\\n\\n\",4:\"The `StyleSheetManager` expects a valid target or sheet prop!\\n\\n- Does this error occur on the client and is your target falsy?\\n- Does this error occur on the server and is the sheet falsy?\\n\\n\",5:\"The clone method cannot be used on the client!\\n\\n- Are you running in a client-like environment on the server?\\n- Are you trying to run SSR on the client?\\n\\n\",6:\"Trying to insert a new style tag, but the given Node is unmounted!\\n\\n- Are you using a custom target that isn't mounted?\\n- Does your document not have a valid head element?\\n- Have you accidentally removed a style tag manually?\\n\\n\",7:'ThemeProvider: Please return an object from your \"theme\" prop function, e.g.\\n\\n```js\\ntheme={() => ({})}\\n```\\n\\n',8:'ThemeProvider: Please make your \"theme\" prop an object.\\n\\n',9:\"Missing document `<head>`\\n\\n\",10:\"Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021\\n\\n\",11:\"_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.\\n\\n\",12:\"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\\\`\\\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\\n\\n\",13:\"%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.\\n\\n\",14:'ThemeProvider: \"theme\" prop is required.\\n\\n',15:\"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\\n\\n```js\\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\\n```\\n\\n\",16:\"Reached the limit of how many styled components may be created at group %s.\\nYou may only create up to 1,073,741,824 components. If you're creating components dynamically,\\nas for instance in your render method then you may be running into this limitation.\\n\\n\",17:\"CSSStyleSheet could not be found on HTMLStyleElement.\\nHas styled-components' style tag been unmounted or altered by another script?\\n\"}:{};function D(){for(var e=arguments.length<=0?void 0:arguments[0],t=[],n=1,r=arguments.length;n<r;n+=1)t.push(n<0||arguments.length<=n?void 0:arguments[n]);return t.forEach((function(t){e=e.replace(/%[a-z]/,t)})),e}function j(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw\"production\"===process.env.NODE_ENV?new Error(\"An error occurred. See https://git.io/JUIaE#\"+e+\" for more information.\"+(n.length>0?\" Args: \"+n.join(\", \"):\"\")):new Error(D.apply(void 0,[R[e]].concat(n)).trim())}var T=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,o=r;e>=o;)(o<<=1)<0&&j(16,\"\"+e);this.groupSizes=new Uint32Array(o),this.groupSizes.set(n),this.length=o;for(var i=r;i<o;i++)this.groupSizes[i]=0}for(var s=this.indexOfGroup(e+1),a=0,c=t.length;a<c;a++)this.tag.insertRule(s,t[a])&&(this.groupSizes[e]++,s++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var o=n;o<r;o++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t=\"\";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),o=r+n,i=r;i<o;i++)t+=this.tag.getRule(i)+\"/*!sc*/\\n\";return t},e}(),k=new Map,x=new Map,V=1,B=function(e){if(k.has(e))return k.get(e);for(;x.has(V);)V++;var t=V++;return\"production\"!==process.env.NODE_ENV&&((0|t)<0||t>1<<30)&&j(16,\"\"+t),k.set(e,t),x.set(t,e),t},M=function(e){return x.get(e)},z=function(e,t){k.set(e,t),x.set(t,e)},L=\"style[\"+A+'][data-styled-version=\"5.3.0\"]',G=new RegExp(\"^\"+A+'\\\\.g(\\\\d+)\\\\[id=\"([\\\\w\\\\d-]+)\"\\\\].*?\"([^\"]*)'),F=function(e,t,n){for(var r,o=n.split(\",\"),i=0,s=o.length;i<s;i++)(r=o[i])&&e.registerName(t,r)},Y=function(e,t){for(var n=t.innerHTML.split(\"/*!sc*/\\n\"),r=[],o=0,i=n.length;o<i;o++){var s=n[o].trim();if(s){var a=s.match(G);if(a){var c=0|parseInt(a[1],10),u=a[2];0!==c&&(z(u,c),F(e,u,a[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(s)}}},q=function(){return\"undefined\"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},H=function(e){var t=document.head,n=e||t,r=document.createElement(\"style\"),o=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(A))return r}}(n),i=void 0!==o?o.nextSibling:null;r.setAttribute(A,\"active\"),r.setAttribute(\"data-styled-version\",\"5.3.0\");var s=q();return s&&r.setAttribute(\"nonce\",s),n.insertBefore(r,i),r},$=function(){function e(e){var t=this.element=H(e);t.appendChild(document.createTextNode(\"\")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var o=t[n];if(o.ownerNode===e)return o}j(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&\"string\"==typeof t.cssText?t.cssText:\"\"},e}(),W=function(){function e(e){var t=this.element=H(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:\"\"},e}(),U=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:\"\"},e}(),J=I,X={isServer:!I,useCSSOMInjection:!P},Z=function(){function e(e,t,n){void 0===e&&(e=E),void 0===t&&(t={}),this.options=v({},X,{},e),this.gs=t,this.names=new Map(n),!this.options.isServer&&I&&J&&(J=!1,function(e){for(var t=document.querySelectorAll(L),n=0,r=t.length;n<r;n++){var o=t[n];o&&\"active\"!==o.getAttribute(A)&&(Y(e,o),o.parentNode&&o.parentNode.removeChild(o))}}(this))}e.registerId=function(e){return B(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(v({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,o=t.target,e=n?new U(o):r?new $(o):new W(o),new T(e)));var e,t,n,r,o},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(B(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(B(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(B(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r=\"\",o=0;o<n;o++){var i=M(o);if(void 0!==i){var s=e.names.get(i),a=t.getGroup(o);if(void 0!==s&&0!==a.length){var c=A+\".g\"+o+'[id=\"'+i+'\"]',u=\"\";void 0!==s&&s.forEach((function(e){e.length>0&&(u+=e+\",\")})),r+=\"\"+a+c+'{content:\"'+u+'\"}/*!sc*/\\n'}}}return r}(this)},e}(),K=/(a)(d)/gi,Q=function(e){return String.fromCharCode(e+(e>25?39:97))};function ee(e){var t,n=\"\";for(t=Math.abs(e);t>52;t=t/52|0)n=Q(t%52)+n;return(Q(t%52)+n).replace(K,\"$1-$2\")}var te=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ne=function(e){return te(5381,e)};function re(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(b(n)&&!N(n))return!1}return!0}var oe=ne(\"5.3.0\"),ie=function(){function e(e,t,n){this.rules=e,this.staticRulesId=\"\",this.isStatic=\"production\"===process.env.NODE_ENV&&(void 0===n||n.isStatic)&&re(e),this.componentId=t,this.baseHash=te(oe,t),this.baseStyle=n,Z.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))o.push(this.staticRulesId);else{var i=Ne(this.rules,e,t,n).join(\"\"),s=ee(te(this.baseHash,i.length)>>>0);if(!t.hasNameForId(r,s)){var a=n(i,\".\"+s,void 0,r);t.insertRules(r,s,a)}o.push(s),this.staticRulesId=s}else{for(var c=this.rules.length,u=te(this.baseHash,n.hash),l=\"\",d=0;d<c;d++){var h=this.rules[d];if(\"string\"==typeof h)l+=h,\"production\"!==process.env.NODE_ENV&&(u=te(u,h+d));else if(h){var p=Ne(h,e,t,n),f=Array.isArray(p)?p.join(\"\"):p;u=te(u,f+d),l+=f}}if(l){var m=ee(u>>>0);if(!t.hasNameForId(r,m)){var y=n(l,\".\"+m,void 0,r);t.insertRules(r,m,y)}o.push(m)}}return o.join(\" \")},e}(),se=/^\\s*\\/\\/.*$/gm,ae=[\":\",\"[\",\".\",\"#\"];function ce(e){var t,n,r,o,i=void 0===e?E:e,s=i.options,a=void 0===s?E:s,c=i.plugins,u=void 0===c?w:c,l=new p(a),d=[],h=function(e){function t(t){if(t)try{e(t+\"}\")}catch(e){}}return function(n,r,o,i,s,a,c,u,l,d){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+\";\"),\"\";break;case 2:if(0===u)return r+\"/*|*/\";break;case 3:switch(u){case 102:case 112:return e(o[0]+r),\"\";default:return r+(0===d?\"/*|*/\":\"\")}case-2:r.split(\"/*|*/}\").forEach(t)}}}((function(e){d.push(e)})),f=function(e,r,i){return 0===r&&-1!==ae.indexOf(i[n.length])||i.match(o)?e:\".\"+t};function m(e,i,s,a){void 0===a&&(a=\"&\");var c=e.replace(se,\"\"),u=i&&s?s+\" \"+i+\" { \"+c+\" }\":c;return t=a,n=i,r=new RegExp(\"\\\\\"+n+\"\\\\b\",\"g\"),o=new RegExp(\"(\\\\\"+n+\"\\\\b){2,}\"),l(s||!i?\"\":i,u)}return l.use([].concat(u,[function(e,t,o){2===e&&o.length&&o[0].lastIndexOf(n)>0&&(o[0]=o[0].replace(r,f))},h,function(e){if(-2===e){var t=d;return d=[],t}}])),m.hash=u.length?u.reduce((function(e,t){return t.name||j(15),te(e,t.name)}),5381).toString():\"\",m}var ue=r.createContext(),le=ue.Consumer,de=r.createContext(),he=(de.Consumer,new Z),pe=ce();function fe(){return i(ue)||he}function me(){return i(de)||pe}function ye(e){var t=o(e.stylisPlugins),n=t[0],i=t[1],c=fe(),u=s((function(){var t=c;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=s((function(){return ce({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return a((function(){h(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),r.createElement(ue.Provider,{value:u},r.createElement(de.Provider,{value:l},\"production\"!==process.env.NODE_ENV?r.Children.only(e.children):e.children))}var ve=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=pe);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,\"@keyframes\"))},this.toString=function(){return j(12,String(n.name))},this.name=e,this.id=\"sc-keyframes-\"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=pe),this.name+e.hash},e}(),ge=/([A-Z])/,Se=/([A-Z])/g,we=/^ms-/,Ee=function(e){return\"-\"+e.toLowerCase()};function be(e){return ge.test(e)?e.replace(Se,Ee).replace(we,\"-ms-\"):e}var _e=function(e){return null==e||!1===e||\"\"===e};function Ne(e,n,r,o){if(Array.isArray(e)){for(var i,s=[],a=0,c=e.length;a<c;a+=1)\"\"!==(i=Ne(e[a],n,r,o))&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}if(_e(e))return\"\";if(N(e))return\".\"+e.styledComponentId;if(b(e)){if(\"function\"!=typeof(l=e)||l.prototype&&l.prototype.isReactComponent||!n)return e;var u=e(n);return\"production\"!==process.env.NODE_ENV&&t(u)&&console.warn(_(e)+\" is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.\"),Ne(u,n,r,o)}var l;return e instanceof ve?r?(e.inject(r,o),e.getName(o)):e:S(e)?function e(t,n){var r,o,i=[];for(var s in t)t.hasOwnProperty(s)&&!_e(t[s])&&(S(t[s])?i.push.apply(i,e(t[s],s)):b(t[s])?i.push(be(s)+\":\",t[s],\";\"):i.push(be(s)+\": \"+(r=s,null==(o=t[s])||\"boolean\"==typeof o||\"\"===o?\"\":\"number\"!=typeof o||0===o||r in f?String(o).trim():o+\"px\")+\";\"));return n?[n+\" {\"].concat(i,[\"}\"]):i}(e):e.toString()}function Ae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return b(e)||S(e)?Ne(g(w,[e].concat(n))):0===n.length&&1===e.length&&\"string\"==typeof e[0]?e:Ne(g(e,n))}var Ce=/invalid hook call/i,Ie=new Set,Pe=function(e,t){if(\"production\"!==process.env.NODE_ENV){var n=\"The component \"+e+(t?' with the id of \"'+t+'\"':\"\")+\" has been created dynamically.\\nYou may see this warning because you've called styled inside another component.\\nTo resolve this only create new StyledComponents outside of any render method and function component.\";try{c(),Ie.has(n)||(console.warn(n),Ie.add(n))}catch(e){Ce.test(e.message)&&Ie.delete(n)}}},Oe=function(e,t,n){return void 0===n&&(n=E),e.theme!==n.theme&&e.theme||t||n.theme},Re=/[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~-]+/g,De=/(^-|-$)/g;function je(e){return e.replace(Re,\"-\").replace(De,\"\")}var Te=function(e){return ee(ne(e)>>>0)};function ke(e){return\"string\"==typeof e&&(\"production\"===process.env.NODE_ENV||e.charAt(0)===e.charAt(0).toLowerCase())}var xe=function(e){return\"function\"==typeof e||\"object\"==typeof e&&null!==e&&!Array.isArray(e)},Ve=function(e){return\"__proto__\"!==e&&\"constructor\"!==e&&\"prototype\"!==e};function Be(e,t,n){var r=e[n];xe(t)&&xe(r)?Me(r,t):e[n]=t}function Me(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=0,i=n;o<i.length;o++){var s=i[o];if(xe(s))for(var a in s)Ve(a)&&Be(e,s[a],a)}return e}var ze=r.createContext(),Le=ze.Consumer;function Ge(e){var t=i(ze),n=s((function(){return function(e,t){if(!e)return j(14);if(b(e)){var n=e(t);return\"production\"===process.env.NODE_ENV||null!==n&&!Array.isArray(n)&&\"object\"==typeof n?n:j(7)}return Array.isArray(e)||\"object\"!=typeof e?j(8):t?v({},t,{},e):e}(e.theme,t)}),[e.theme,t]);return e.children?r.createElement(ze.Provider,{value:n},e.children):null}var Fe={};function Ye(e,t,n){var o=N(e),s=!ke(e),a=t.attrs,c=void 0===a?w:a,d=t.componentId,h=void 0===d?function(e,t){var n=\"string\"!=typeof e?\"sc\":je(e);Fe[n]=(Fe[n]||0)+1;var r=n+\"-\"+Te(\"5.3.0\"+n+Fe[n]);return t?t+\"-\"+r:r}(t.displayName,t.parentComponentId):d,p=t.displayName,f=void 0===p?function(e){return ke(e)?\"styled.\"+e:\"Styled(\"+_(e)+\")\"}(e):p,g=t.displayName&&t.componentId?je(t.displayName)+\"-\"+t.componentId:t.componentId||h,S=o&&e.attrs?Array.prototype.concat(e.attrs,c).filter(Boolean):c,A=t.shouldForwardProp;o&&e.shouldForwardProp&&(A=t.shouldForwardProp?function(n,r,o){return e.shouldForwardProp(n,r,o)&&t.shouldForwardProp(n,r,o)}:e.shouldForwardProp);var C,I=new ie(n,g,o?e.componentStyle:void 0),P=I.isStatic&&0===c.length,O=function(e,t){return function(e,t,n,r){var o=e.attrs,s=e.componentStyle,a=e.defaultProps,c=e.foldedComponentIds,d=e.shouldForwardProp,h=e.styledComponentId,p=e.target;\"production\"!==process.env.NODE_ENV&&l(h);var f=function(e,t,n){void 0===e&&(e=E);var r=v({},t,{theme:e}),o={};return n.forEach((function(e){var t,n,i,s=e;for(t in b(s)&&(s=s(r)),s)r[t]=o[t]=\"className\"===t?(n=o[t],i=s[t],n&&i?n+\" \"+i:n||i):s[t]})),[r,o]}(Oe(t,i(ze),a)||E,t,o),y=f[0],g=f[1],S=function(e,t,n,r){var o=fe(),i=me(),s=t?e.generateAndInjectStyles(E,o,i):e.generateAndInjectStyles(n,o,i);return\"production\"!==process.env.NODE_ENV&&l(s),\"production\"!==process.env.NODE_ENV&&!t&&r&&r(s),s}(s,r,y,\"production\"!==process.env.NODE_ENV?e.warnTooManyClasses:void 0),w=n,_=g.$as||t.$as||g.as||t.as||p,N=ke(_),A=g!==t?v({},t,{},g):t,C={};for(var I in A)\"$\"!==I[0]&&\"as\"!==I&&(\"forwardedAs\"===I?C.as=A[I]:(d?d(I,m,_):!N||m(I))&&(C[I]=A[I]));return t.style&&g.style!==t.style&&(C.style=v({},t.style,{},g.style)),C.className=Array.prototype.concat(c,h,S!==h?S:null,t.className,g.className).filter(Boolean).join(\" \"),C.ref=w,u(_,C)}(C,e,t,P)};return O.displayName=f,(C=r.forwardRef(O)).attrs=S,C.componentStyle=I,C.displayName=f,C.shouldForwardProp=A,C.foldedComponentIds=o?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):w,C.styledComponentId=g,C.target=o?e.target:e,C.withComponent=function(e){var r=t.componentId,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,[\"componentId\"]),i=r&&r+\"-\"+(ke(e)?e:je(_(e)));return Ye(e,v({},o,{attrs:S,componentId:i}),n)},Object.defineProperty(C,\"defaultProps\",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=o?Me({},e.defaultProps,t):t}}),\"production\"!==process.env.NODE_ENV&&(Pe(f,g),C.warnTooManyClasses=function(e,t){var n={},r=!1;return function(o){if(!r&&(n[o]=!0,Object.keys(n).length>=200)){var i=t?' with the id of \"'+t+'\"':\"\";console.warn(\"Over 200 classes were generated for component \"+e+i+\".\\nConsider using the attrs method, together with a style object for frequently changed styles.\\nExample:\\n  const Component = styled.div.attrs(props => ({\\n    style: {\\n      background: props.background,\\n    },\\n  }))`width: 100%;`\\n\\n  <Component />\"),r=!0,n={}}}}(f,g)),C.toString=function(){return\".\"+C.styledComponentId},s&&y(C,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),C}var qe=function(e){return function e(t,r,o){if(void 0===o&&(o=E),!n(r))return j(1,String(r));var i=function(){return t(r,o,Ae.apply(void 0,arguments))};return i.withConfig=function(n){return e(t,r,v({},o,{},n))},i.attrs=function(n){return e(t,r,v({},o,{attrs:Array.prototype.concat(o.attrs,n).filter(Boolean)}))},i}(Ye,e)};[\"a\",\"abbr\",\"address\",\"area\",\"article\",\"aside\",\"audio\",\"b\",\"base\",\"bdi\",\"bdo\",\"big\",\"blockquote\",\"body\",\"br\",\"button\",\"canvas\",\"caption\",\"cite\",\"code\",\"col\",\"colgroup\",\"data\",\"datalist\",\"dd\",\"del\",\"details\",\"dfn\",\"dialog\",\"div\",\"dl\",\"dt\",\"em\",\"embed\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"header\",\"hgroup\",\"hr\",\"html\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"keygen\",\"label\",\"legend\",\"li\",\"link\",\"main\",\"map\",\"mark\",\"marquee\",\"menu\",\"menuitem\",\"meta\",\"meter\",\"nav\",\"noscript\",\"object\",\"ol\",\"optgroup\",\"option\",\"output\",\"p\",\"param\",\"picture\",\"pre\",\"progress\",\"q\",\"rp\",\"rt\",\"ruby\",\"s\",\"samp\",\"script\",\"section\",\"select\",\"small\",\"source\",\"span\",\"strong\",\"style\",\"sub\",\"summary\",\"sup\",\"table\",\"tbody\",\"td\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"time\",\"title\",\"tr\",\"track\",\"u\",\"ul\",\"var\",\"video\",\"wbr\",\"circle\",\"clipPath\",\"defs\",\"ellipse\",\"foreignObject\",\"g\",\"image\",\"line\",\"linearGradient\",\"marker\",\"mask\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialGradient\",\"rect\",\"stop\",\"svg\",\"text\",\"textPath\",\"tspan\"].forEach((function(e){qe[e]=qe(e)}));var He=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=re(e),Z.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var o=r(Ne(this.rules,t,n,r).join(\"\"),\"\"),i=this.componentId+e;n.insertRules(i,i,o)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&Z.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function $e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var s=Ae.apply(void 0,[e].concat(n)),a=\"sc-global-\"+Te(JSON.stringify(s)),u=new He(s,a);function l(e){var t=fe(),n=me(),o=i(ze),l=c(t.allocateGSInstance(a)).current;return\"production\"!==process.env.NODE_ENV&&r.Children.count(e.children)&&console.warn(\"The global style component \"+a+\" was given child JSX. createGlobalStyle does not render children.\"),\"production\"!==process.env.NODE_ENV&&s.some((function(e){return\"string\"==typeof e&&-1!==e.indexOf(\"@import\")}))&&console.warn(\"Please do not use @import CSS syntax in createGlobalStyle at this time, as the CSSOM APIs we use in production do not handle it well. Instead, we recommend using a library such as react-helmet to inject a typical <link> meta tag to the stylesheet, or simply embedding it manually in your index.html <head> section for a simpler app.\"),d((function(){return h(l,e,t,o,n),function(){return u.removeStyles(l,t)}}),[l,e,t,o,n]),null}function h(e,t,n,r,o){if(u.isStatic)u.renderStyles(e,O,n,o);else{var i=v({},t,{theme:Oe(t,r,l.defaultProps)});u.renderStyles(e,i,n,o)}}return\"production\"!==process.env.NODE_ENV&&Pe(a),r.memo(l)}function We(e){\"production\"!==process.env.NODE_ENV&&\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product&&console.warn(\"`keyframes` cannot be used on ReactNative, only on the web. To do animation in ReactNative please use Animated.\");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=Ae.apply(void 0,[e].concat(n)).join(\"\"),i=Te(o);return new ve(i,o)}var Ue=function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=q();return\"<style \"+[n&&'nonce=\"'+n+'\"',A+'=\"true\"','data-styled-version=\"5.3.0\"'].filter(Boolean).join(\" \")+\">\"+t+\"</style>\"},this.getStyleTags=function(){return e.sealed?j(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return j(2);var n=((t={})[A]=\"\",t[\"data-styled-version\"]=\"5.3.0\",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),o=q();return o&&(n.nonce=o),[r.createElement(\"style\",v({},n,{key:\"sc-0-0\"}))]},this.seal=function(){e.sealed=!0},this.instance=new Z({isServer:!0}),this.sealed=!1}var t=e.prototype;return t.collectStyles=function(e){return this.sealed?j(2):r.createElement(ye,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return j(3)},e}(),Je=function(e){var t=r.forwardRef((function(t,n){var o=i(ze),s=e.defaultProps,a=Oe(t,o,s);return\"production\"!==process.env.NODE_ENV&&void 0===a&&console.warn('[withTheme] You are not using a ThemeProvider nor passing a theme prop or a theme in defaultProps in component class \"'+_(e)+'\"'),r.createElement(e,v({},t,{theme:a,ref:n}))}));return y(t,e),t.displayName=\"WithTheme(\"+_(e)+\")\",t},Xe=function(){return i(ze)},Ze={StyleSheet:Z,masterSheet:he};\"production\"!==process.env.NODE_ENV&&\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product&&console.warn(\"It looks like you've imported 'styled-components' on React Native.\\nPerhaps you're looking to import 'styled-components/native'?\\nRead more about this at https://www.styled-components.com/docs/basics#react-native\"),\"production\"!==process.env.NODE_ENV&&\"test\"!==process.env.NODE_ENV&&(window[\"__styled-components-init__\"]=window[\"__styled-components-init__\"]||0,1===window[\"__styled-components-init__\"]&&console.warn(\"It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.\\n\\nSee https://s-c.sh/2BAXzed for more info.\"),window[\"__styled-components-init__\"]+=1);export default qe;export{Ue as ServerStyleSheet,le as StyleSheetConsumer,ue as StyleSheetContext,ye as StyleSheetManager,Le as ThemeConsumer,ze as ThemeContext,Ge as ThemeProvider,Ze as __PRIVATE__,$e as createGlobalStyle,Ae as css,N as isStyledComponent,We as keyframes,Xe as useTheme,C as version,Je as withTheme};\n//# sourceMappingURL=styled-components.browser.esm.js.map\n"],"sourceRoot":""}