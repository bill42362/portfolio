{"version":3,"sources":["webpack:///./node_modules/three/examples/jsm/animation/CCDIKSolver.js","webpack:///./node_modules/three/examples/jsm/animation/MMDPhysics.js","webpack:///./node_modules/three/examples/jsm/animation/MMDAnimationHelper.js","webpack:///./node_modules/styled-components/dist/styled-components.browser.esm.js","webpack:///./node_modules/scheduler/index.js","webpack:///./node_modules/scheduler/cjs/scheduler.production.min.js","webpack:///./node_modules/styled-normalize/dist/index.js","webpack:///./node_modules/shallowequal/index.js"],"names":["_q","_targetPos","_targetVec","_effectorPos","_effectorVec","_linkPos","_invLinkQ","_linkScale","_axis","_vector","_matrix","CCDIKSolver","mesh","iks","this","_valid","i","il","length","updateOne","ik","bones","skeleton","math","Math","effector","target","setFromMatrixPosition","matrixWorld","links","iteration","undefined","rotated","j","jl","link","index","enabled","limitation","rotationMin","rotationMax","decompose","invert","subVectors","applyQuaternion","normalize","angle","dot","acos","minAngle","maxAngle","crossVectors","setFromAxisAngle","quaternion","multiply","c","w","c2","sqrt","set","x","y","z","rotation","setFromVector3","toVector3","max","min","updateMatrixWorld","geometry","userData","MMD","link0","link1","parent","console","warn","name","getPosition","bone","matrixWorldInv","applyMatrix4","setPositionOfBoneToAttributeArray","array","v","super","root","matrix","copy","matrixAutoUpdate","sphereGeometry","targetSphereMaterial","color","depthTest","depthWrite","transparent","effectorSphereMaterial","linkSphereMaterial","lineMaterial","_init","force","visible","offset","targetBone","effectorBone","targetMesh","children","effectorMesh","position","linkBone","line","attributes","needsUpdate","scope","createLine","vertices","Float32Array","setAttribute","createLineGeometry","add","rigidBodyParams","constraintParams","params","Ammo","Error","manager","unitStep","maxStepNum","gravity","world","bodies","constraints","delta","isNonDefaultScale","allocThreeVector3","allocThreeQuaternion","scale","_updateRigidBodies","_stepSimulation","_updateBones","freeThreeVector3","freeThreeQuaternion","reset","cycles","update","setGravity","btVector3","currentPosition","currentQuaternion","currentScale","_createWorld","_initRigidBodies","_initConstraints","config","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","cache","btDbvtBroadphase","solver","btSequentialImpulseConstraintSolver","btDiscreteDynamicsWorld","rigidBodies","push","bodyA","rigidBodyIndex1","bodyB","rigidBodyIndex2","Constraint","stepTime","stepSimulation","updateFromBone","updateBone","threeVector3s","threeMatrix4s","threeQuaternions","threeEulers","transforms","quaternions","vector3s","pop","m","q","e","btTransform","t","btQuaternion","setIdentity","allocQuaternion","getBasis","getRotation","quaternionToMatrix3","freeQuaternion","getOrigin","setValue","t1","t2","o","setOrigin","setRotation","matrix3ToQuaternion","setBasis","a","thQ","thE","allocThreeEuler","setBasisFromThreeQuaternion","setFromEuler","freeThreeEuler","setX","setY","setZ","setW","allocTransform","m1","getBasisAsMatrix3","m2","o1","o2","v1","multiplyMatrix3ByVector3","v2","addVector3","m3","multiplyMatrices3","setBasisFromMatrix3","freeVector3","transposeMatrix3","negativeVector3","v10","rowOfMatrix3","v11","v12","v20","columnOfMatrix3","v21","v22","dotVectors3","allocVector3","v4","v0","xx","yy","zz","xy","yz","zx","xw","yw","zw","s","body","boneOffsetForm","boneOffsetFormInverse","_setTransformFromBone","boneIndex","type","_updateBoneRotation","_updateBonePosition","_setPositionFromBone","shape","p","shapeType","btSphereShape","width","btBoxShape","height","depth","btCapsuleShape","generateShape","weight","localInertia","calculateLocalInertia","setOriginFromArray3","setBasisFromArray3","vector","boneForm","setOriginFromThreeVector3","getWorldPosition","form","multiplyTransforms","state","btDefaultMotionState","info","btRigidBodyConstructionInfo","set_m_friction","friction","set_m_restitution","restitution","btRigidBody","setCollisionFlags","getCollisionFlags","setActivationState","setDamping","positionDamping","rotationDamping","setSleepingThresholds","addRigidBody","groupIndex","groupTarget","inverseTransform","freeTransform","tr","getCenterOfMassTransform","_getBoneTransform","setCenterOfMassTransform","getMotionState","setWorldTransform","getWorldTransform","copyOrigin","_getWorldTransformForBone","thQ2","thQ3","setFromRotationMatrix","conjugate","thV","worldToLocal","constraint","formA","formB","formInverseA","formInverseB","formA2","formB2","btGeneric6DofSpringConstraint","lll","lul","all","aul","translationLimitation1","translationLimitation2","rotationLimitation1","rotationLimitation2","setLinearLowerLimit","setLinearUpperLimit","setAngularLowerLimit","setAngularUpperLimit","springPosition","enableSpring","setStiffness","springRotation","setParam","addConstraint","_position","_quaternion","_scale","_matrixWorldInv","physics","materials","wireframe","opacity","compose","child","origin","createGeometry","param","createCapsuleGeometry","radius","cylinderHeight","segmentsRadius","segmentsHeight","upperSphere","PI","lowerSphere","updateMatrix","merge","meshes","camera","cameraTarget","audio","audioManager","objects","WeakMap","configuration","sync","afterglow","resetPhysicsOnLoop","pmxAnimation","animation","grant","cameraAnimation","onBeforePhysics","sharedPhysics","masterPhysics","object","isSkinnedMesh","_addMesh","isCamera","_setupCamera","_setupAudio","_syncDuration","_removeMesh","_clearCamera","_clearAudio","control","_animateMesh","_updateSharedPhysics","_animateCamera","vpd","resetPose","pose","boneParams","boneNameDictionary","boneParam","fromArray","translation","format","sortedBonesData","_sortBoneDataArray","slice","ikSolver","_createCCDIKSolver","grantSolver","createGrantSolver","_animatePMXMesh","key","_optimizeIK","GrantSolver","grants","indexOf","looped","_setupMeshAnimation","_setupMeshPhysics","clearCamera","_setupCameraAnimation","clearAudio","AudioManager","duration","found","writeIndex","delete","remove","get","animations","Array","isArray","mixer","clipAction","play","addEventListener","event","tracks","action","_clip","_getMasterPhysics","_createMMDPhysics","animationWarmup","warmup","_restoreBones","_saveBones","boneDataArray","sort","b","transformationClass","_quaternionIndex","_grantResultMap","clear","updateProjectionMatrix","up","lookAt","physicsEnabled","rigidBodyType","_actions","clip","has","propertyMixers","_bindings","accuIndex","_accuIndex","propertyMixer","buffer","valueSize","binding","getValue","backupBones","toArray","updateRigidBodies","updateBones","_quaternions","Map","boneData","isLocal","affectRotation","parentIndex","ratio","addGrantRotation","linkIndex","elapsedTime","currentTime","delayTime","audioDuration","elapsed","_shouldStopAudio","stop","_shouldStartAudio","isPlaying","parentBone","affectPosition","slerp","Object","assign","arguments","n","r","prototype","hasOwnProperty","call","apply","g","S","toString","freeze","E","_","displayName","N","styledComponentId","A","process","env","REACT_APP_SC_ATTR","SC_ATTR","C","I","window","P","Boolean","SC_DISABLE_SPEEDY","REACT_APP_SC_DISABLE_SPEEDY","O","join","T","groupSizes","Uint32Array","tag","indexOfGroup","insertRules","insertRule","clearGroup","deleteRule","getGroup","getRule","k","V","B","M","L","G","RegExp","F","split","registerName","Y","innerHTML","trim","match","parseInt","u","getTag","__webpack_nonce__","H","document","head","createElement","childNodes","nodeType","hasAttribute","nextSibling","insertBefore","$","element","appendChild","createTextNode","sheet","styleSheets","ownerNode","cssRules","cssText","W","nodes","removeChild","textContent","U","rules","splice","J","X","isServer","useCSSOMInjection","Z","options","gs","names","querySelectorAll","getAttribute","parentNode","registerId","reconstructWithOptions","allocateGSInstance","hasNameForId","Set","clearNames","clearRules","clearTag","forEach","K","Q","String","fromCharCode","ee","abs","replace","te","charCodeAt","ne","re","oe","ie","staticRulesId","isStatic","componentId","baseHash","baseStyle","generateAndInjectStyles","hash","Ne","l","d","h","f","se","ae","ce","plugins","use","concat","lastIndexOf","reduce","ue","createContext","le","Consumer","de","he","pe","fe","me","ye","stylisPlugins","disableCSSOMInjection","prefix","disableVendorPrefixes","Provider","value","ve","inject","id","getName","ge","Se","we","Ee","toLowerCase","be","test","_e","isReactComponent","Ae","Oe","theme","Re","De","je","Te","ke","xe","Ve","Be","Me","ze","Le","Ge","Fe","Ye","attrs","parentComponentId","filter","shouldForwardProp","componentStyle","defaultProps","foldedComponentIds","$as","as","style","className","ref","forwardRef","withComponent","keys","defineProperty","_foldedDefaultProps","qe","withConfig","He","createStyles","removeStyles","renderStyles","$e","JSON","stringify","current","memo","We","Ue","_emitSheetCSS","instance","getStyleTags","sealed","getStyleElement","dangerouslySetInnerHTML","__html","nonce","seal","collectStyles","interleaveWithNodeStream","Je","Xe","Ze","StyleSheet","masterSheet","module","exports","MessageChannel","unstable_now","setTimeout","Date","now","clearTimeout","unstable_forceFrameRate","performance","cancelAnimationFrame","requestAnimationFrame","error","D","floor","port2","port1","onmessage","postMessage","sortIndex","R","callback","startTime","expirationTime","priorityLevel","unstable_IdlePriority","unstable_ImmediatePriority","unstable_LowPriority","unstable_NormalPriority","unstable_Profiling","unstable_UserBlockingPriority","unstable_cancelCallback","unstable_continueExecution","unstable_getCurrentPriorityLevel","unstable_getFirstCallbackNode","unstable_next","unstable_pauseExecution","unstable_requestPaint","unstable_runWithPriority","unstable_scheduleCallback","delay","timeout","unstable_shouldYield","unstable_wrapCallback","default","Normalize","_styledComponents","css","createGlobalStyle","_default","objA","objB","compare","compareContext","ret","keysA","keysB","bHasOwnProperty","bind","idx","valueA","valueB"],"mappings":"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","file":"js/bundle~bundle~ec8c427e.c506544d.js","sourcesContent":["import {\n\tBufferAttribute,\n\tBufferGeometry,\n\tColor,\n\tLine,\n\tLineBasicMaterial,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tQuaternion,\n\tSphereGeometry,\n\tVector3\n} from 'three';\n\nconst _q = new Quaternion();\nconst _targetPos = new Vector3();\nconst _targetVec = new Vector3();\nconst _effectorPos = new Vector3();\nconst _effectorVec = new Vector3();\nconst _linkPos = new Vector3();\nconst _invLinkQ = new Quaternion();\nconst _linkScale = new Vector3();\nconst _axis = new Vector3();\nconst _vector = new Vector3();\nconst _matrix = new Matrix4();\n\n\n/**\n * CCD Algorithm\n *  - https://sites.google.com/site/auraliusproject/ccd-algorithm\n *\n * // ik parameter example\n * //\n * // target, effector, index in links are bone index in skeleton.bones.\n * // the bones relation should be\n * // <-- parent                                  child -->\n * // links[ n ], links[ n - 1 ], ..., links[ 0 ], effector\n * iks = [ {\n *\ttarget: 1,\n *\teffector: 2,\n *\tlinks: [ { index: 5, limitation: new Vector3( 1, 0, 0 ) }, { index: 4, enabled: false }, { index : 3 } ],\n *\titeration: 10,\n *\tminAngle: 0.0,\n *\tmaxAngle: 1.0,\n * } ];\n */\n\nclass CCDIKSolver {\n\n\t/**\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Array<Object>} iks\n\t */\n\tconstructor( mesh, iks = [] ) {\n\n\t\tthis.mesh = mesh;\n\t\tthis.iks = iks;\n\n\t\tthis._valid();\n\n\t}\n\n\t/**\n\t * Update all IK bones.\n\t *\n\t * @return {CCDIKSolver}\n\t */\n\tupdate() {\n\n\t\tconst iks = this.iks;\n\n\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\tthis.updateOne( iks[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Update one IK bone\n\t *\n\t * @param {Object} ik parameter\n\t * @return {CCDIKSolver}\n\t */\n\tupdateOne( ik ) {\n\n\t\tconst bones = this.mesh.skeleton.bones;\n\n\t\t// for reference overhead reduction in loop\n\t\tconst math = Math;\n\n\t\tconst effector = bones[ ik.effector ];\n\t\tconst target = bones[ ik.target ];\n\n\t\t// don't use getWorldPosition() here for the performance\n\t\t// because it calls updateMatrixWorld( true ) inside.\n\t\t_targetPos.setFromMatrixPosition( target.matrixWorld );\n\n\t\tconst links = ik.links;\n\t\tconst iteration = ik.iteration !== undefined ? ik.iteration : 1;\n\n\t\tfor ( let i = 0; i < iteration; i ++ ) {\n\n\t\t\tlet rotated = false;\n\n\t\t\tfor ( let j = 0, jl = links.length; j < jl; j ++ ) {\n\n\t\t\t\tconst link = bones[ links[ j ].index ];\n\n\t\t\t\t// skip this link and following links.\n\t\t\t\t// this skip is used for MMD performance optimization.\n\t\t\t\tif ( links[ j ].enabled === false ) break;\n\n\t\t\t\tconst limitation = links[ j ].limitation;\n\t\t\t\tconst rotationMin = links[ j ].rotationMin;\n\t\t\t\tconst rotationMax = links[ j ].rotationMax;\n\n\t\t\t\t// don't use getWorldPosition/Quaternion() here for the performance\n\t\t\t\t// because they call updateMatrixWorld( true ) inside.\n\t\t\t\tlink.matrixWorld.decompose( _linkPos, _invLinkQ, _linkScale );\n\t\t\t\t_invLinkQ.invert();\n\t\t\t\t_effectorPos.setFromMatrixPosition( effector.matrixWorld );\n\n\t\t\t\t// work in link world\n\t\t\t\t_effectorVec.subVectors( _effectorPos, _linkPos );\n\t\t\t\t_effectorVec.applyQuaternion( _invLinkQ );\n\t\t\t\t_effectorVec.normalize();\n\n\t\t\t\t_targetVec.subVectors( _targetPos, _linkPos );\n\t\t\t\t_targetVec.applyQuaternion( _invLinkQ );\n\t\t\t\t_targetVec.normalize();\n\n\t\t\t\tlet angle = _targetVec.dot( _effectorVec );\n\n\t\t\t\tif ( angle > 1.0 ) {\n\n\t\t\t\t\tangle = 1.0;\n\n\t\t\t\t} else if ( angle < - 1.0 ) {\n\n\t\t\t\t\tangle = - 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tangle = math.acos( angle );\n\n\t\t\t\t// skip if changing angle is too small to prevent vibration of bone\n\t\t\t\t// Refer to http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mmd.three.js\n\t\t\t\tif ( angle < 1e-5 ) continue;\n\n\t\t\t\tif ( ik.minAngle !== undefined && angle < ik.minAngle ) {\n\n\t\t\t\t\tangle = ik.minAngle;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ik.maxAngle !== undefined && angle > ik.maxAngle ) {\n\n\t\t\t\t\tangle = ik.maxAngle;\n\n\t\t\t\t}\n\n\t\t\t\t_axis.crossVectors( _effectorVec, _targetVec );\n\t\t\t\t_axis.normalize();\n\n\t\t\t\t_q.setFromAxisAngle( _axis, angle );\n\t\t\t\tlink.quaternion.multiply( _q );\n\n\t\t\t\t// TODO: re-consider the limitation specification\n\t\t\t\tif ( limitation !== undefined ) {\n\n\t\t\t\t\tlet c = link.quaternion.w;\n\n\t\t\t\t\tif ( c > 1.0 ) c = 1.0;\n\n\t\t\t\t\tconst c2 = math.sqrt( 1 - c * c );\n\t\t\t\t\tlink.quaternion.set( limitation.x * c2,\n\t\t\t\t\t                     limitation.y * c2,\n\t\t\t\t\t                     limitation.z * c2,\n\t\t\t\t\t                     c );\n\n\t\t\t\t}\n\n\t\t\t\tif ( rotationMin !== undefined ) {\n\n\t\t\t\t\tlink.rotation.setFromVector3(\n\t\t\t\t\t\tlink.rotation\n\t\t\t\t\t\t\t.toVector3( _vector )\n\t\t\t\t\t\t\t.max( rotationMin ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( rotationMax !== undefined ) {\n\n\t\t\t\t\tlink.rotation.setFromVector3(\n\t\t\t\t\t\tlink.rotation\n\t\t\t\t\t\t\t.toVector3( _vector )\n\t\t\t\t\t\t\t.min( rotationMax ) );\n\n\t\t\t\t}\n\n\t\t\t\tlink.updateMatrixWorld( true );\n\n\t\t\t\trotated = true;\n\n\t\t\t}\n\n\t\t\tif ( ! rotated ) break;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Creates Helper\n\t *\n\t * @return {CCDIKHelper}\n\t */\n\tcreateHelper() {\n\n\t\treturn new CCDIKHelper( this.mesh, this.mesh.geometry.userData.MMD.iks );\n\n\t}\n\n\t// private methods\n\n\t_valid() {\n\n\t\tconst iks = this.iks;\n\t\tconst bones = this.mesh.skeleton.bones;\n\n\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\tconst ik = iks[ i ];\n\t\t\tconst effector = bones[ ik.effector ];\n\t\t\tconst links = ik.links;\n\t\t\tlet link0, link1;\n\n\t\t\tlink0 = effector;\n\n\t\t\tfor ( let j = 0, jl = links.length; j < jl; j ++ ) {\n\n\t\t\t\tlink1 = bones[ links[ j ].index ];\n\n\t\t\t\tif ( link0.parent !== link1 ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.CCDIKSolver: bone ' + link0.name + ' is not the child of bone ' + link1.name );\n\n\t\t\t\t}\n\n\t\t\t\tlink0 = link1;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction getPosition( bone, matrixWorldInv ) {\n\n\treturn _vector\n\t\t.setFromMatrixPosition( bone.matrixWorld )\n\t\t.applyMatrix4( matrixWorldInv );\n\n}\n\nfunction setPositionOfBoneToAttributeArray( array, index, bone, matrixWorldInv ) {\n\n\tconst v = getPosition( bone, matrixWorldInv );\n\n\tarray[ index * 3 + 0 ] = v.x;\n\tarray[ index * 3 + 1 ] = v.y;\n\tarray[ index * 3 + 2 ] = v.z;\n\n}\n\n/**\n * Visualize IK bones\n *\n * @param {SkinnedMesh} mesh\n * @param {Array<Object>} iks\n */\nclass CCDIKHelper extends Object3D {\n\n\tconstructor( mesh, iks = [] ) {\n\n\t\tsuper();\n\n\t\tthis.root = mesh;\n\t\tthis.iks = iks;\n\n\t\tthis.matrix.copy( mesh.matrixWorld );\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.sphereGeometry = new SphereGeometry( 0.25, 16, 8 );\n\n\t\tthis.targetSphereMaterial = new MeshBasicMaterial( {\n\t\t\tcolor: new Color( 0xff8888 ),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis.effectorSphereMaterial = new MeshBasicMaterial( {\n\t\t\tcolor: new Color( 0x88ff88 ),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis.linkSphereMaterial = new MeshBasicMaterial( {\n\t\t\tcolor: new Color( 0x8888ff ),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis.lineMaterial = new LineBasicMaterial( {\n\t\t\tcolor: new Color( 0xff0000 ),\n\t\t\tdepthTest: false,\n\t\t\tdepthWrite: false,\n\t\t\ttransparent: true\n\t\t} );\n\n\t\tthis._init();\n\n\t}\n\n\t/**\n\t * Updates IK bones visualization.\n\t */\n\tupdateMatrixWorld( force ) {\n\n\t\tconst mesh = this.root;\n\n\t\tif ( this.visible ) {\n\n\t\t\tlet offset = 0;\n\n\t\t\tconst iks = this.iks;\n\t\t\tconst bones = mesh.skeleton.bones;\n\n\t\t\t_matrix.copy( mesh.matrixWorld ).invert();\n\n\t\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\t\tconst ik = iks[ i ];\n\n\t\t\t\tconst targetBone = bones[ ik.target ];\n\t\t\t\tconst effectorBone = bones[ ik.effector ];\n\n\t\t\t\tconst targetMesh = this.children[ offset ++ ];\n\t\t\t\tconst effectorMesh = this.children[ offset ++ ];\n\n\t\t\t\ttargetMesh.position.copy( getPosition( targetBone, _matrix ) );\n\t\t\t\teffectorMesh.position.copy( getPosition( effectorBone, _matrix ) );\n\n\t\t\t\tfor ( let j = 0, jl = ik.links.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst link = ik.links[ j ];\n\t\t\t\t\tconst linkBone = bones[ link.index ];\n\n\t\t\t\t\tconst linkMesh = this.children[ offset ++ ];\n\n\t\t\t\t\tlinkMesh.position.copy( getPosition( linkBone, _matrix ) );\n\n\t\t\t\t}\n\n\t\t\t\tconst line = this.children[ offset ++ ];\n\t\t\t\tconst array = line.geometry.attributes.position.array;\n\n\t\t\t\tsetPositionOfBoneToAttributeArray( array, 0, targetBone, _matrix );\n\t\t\t\tsetPositionOfBoneToAttributeArray( array, 1, effectorBone, _matrix );\n\n\t\t\t\tfor ( let j = 0, jl = ik.links.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst link = ik.links[ j ];\n\t\t\t\t\tconst linkBone = bones[ link.index ];\n\t\t\t\t\tsetPositionOfBoneToAttributeArray( array, j + 2, linkBone, _matrix );\n\n\t\t\t\t}\n\n\t\t\t\tline.geometry.attributes.position.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.matrix.copy( mesh.matrixWorld );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\t// private method\n\n\t_init() {\n\n\t\tconst scope = this;\n\t\tconst iks = this.iks;\n\n\t\tfunction createLineGeometry( ik ) {\n\n\t\t\tconst geometry = new BufferGeometry();\n\t\t\tconst vertices = new Float32Array( ( 2 + ik.links.length ) * 3 );\n\t\t\tgeometry.setAttribute( 'position', new BufferAttribute( vertices, 3 ) );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\tfunction createTargetMesh() {\n\n\t\t\treturn new Mesh( scope.sphereGeometry, scope.targetSphereMaterial );\n\n\t\t}\n\n\t\tfunction createEffectorMesh() {\n\n\t\t\treturn new Mesh( scope.sphereGeometry, scope.effectorSphereMaterial );\n\n\t\t}\n\n\t\tfunction createLinkMesh() {\n\n\t\t\treturn new Mesh( scope.sphereGeometry, scope.linkSphereMaterial );\n\n\t\t}\n\n\t\tfunction createLine( ik ) {\n\n\t\t\treturn new Line( createLineGeometry( ik ), scope.lineMaterial );\n\n\t\t}\n\n\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\tconst ik = iks[ i ];\n\n\t\t\tthis.add( createTargetMesh() );\n\t\t\tthis.add( createEffectorMesh() );\n\n\t\t\tfor ( let j = 0, jl = ik.links.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.add( createLinkMesh() );\n\n\t\t\t}\n\n\t\t\tthis.add( createLine( ik ) );\n\n\t\t}\n\n\t}\n\n}\n\nexport { CCDIKSolver };\n","import {\n\tBone,\n\tBoxGeometry,\n\tColor,\n\tCylinderGeometry,\n\tEuler,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tQuaternion,\n\tSphereGeometry,\n\tVector3\n} from 'three';\n\n/**\n * Dependencies\n *  - Ammo.js https://github.com/kripken/ammo.js\n *\n * MMDPhysics calculates physics with Ammo(Bullet based JavaScript Physics engine)\n * for MMD model loaded by MMDLoader.\n *\n * TODO\n *  - Physics in Worker\n */\n\n/* global Ammo */\n\nclass MMDPhysics {\n\n\t/**\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Array<Object>} rigidBodyParams\n\t * @param {Array<Object>} (optional) constraintParams\n\t * @param {Object} params - (optional)\n\t * @param {Number} params.unitStep - Default is 1 / 65.\n\t * @param {Integer} params.maxStepNum - Default is 3.\n\t * @param {Vector3} params.gravity - Default is ( 0, - 9.8 * 10, 0 )\n\t */\n\tconstructor( mesh, rigidBodyParams, constraintParams = [], params = {} ) {\n\n\t\tif ( typeof Ammo === 'undefined' ) {\n\n\t\t\tthrow new Error( 'THREE.MMDPhysics: Import ammo.js https://github.com/kripken/ammo.js' );\n\n\t\t}\n\n\t\tthis.manager = new ResourceManager();\n\n\t\tthis.mesh = mesh;\n\n\t\t/*\n\t\t * I don't know why but 1/60 unitStep easily breaks models\n\t\t * so I set it 1/65 so far.\n\t\t * Don't set too small unitStep because\n\t\t * the smaller unitStep can make the performance worse.\n\t\t */\n\t\tthis.unitStep = ( params.unitStep !== undefined ) ? params.unitStep : 1 / 65;\n\t\tthis.maxStepNum = ( params.maxStepNum !== undefined ) ? params.maxStepNum : 3;\n\t\tthis.gravity = new Vector3( 0, - 9.8 * 10, 0 );\n\n\t\tif ( params.gravity !== undefined ) this.gravity.copy( params.gravity );\n\n\t\tthis.world = params.world !== undefined ? params.world : null; // experimental\n\n\t\tthis.bodies = [];\n\t\tthis.constraints = [];\n\n\t\tthis._init( mesh, rigidBodyParams, constraintParams );\n\n\t}\n\n\t/**\n\t * Advances Physics calculation and updates bones.\n\t *\n\t * @param {Number} delta - time in second\n\t * @return {MMDPhysics}\n\t */\n\tupdate( delta ) {\n\n\t\tconst manager = this.manager;\n\t\tconst mesh = this.mesh;\n\n\t\t// rigid bodies and constrains are for\n\t\t// mesh's world scale (1, 1, 1).\n\t\t// Convert to (1, 1, 1) if it isn't.\n\n\t\tlet isNonDefaultScale = false;\n\n\t\tconst position = manager.allocThreeVector3();\n\t\tconst quaternion = manager.allocThreeQuaternion();\n\t\tconst scale = manager.allocThreeVector3();\n\n\t\tmesh.matrixWorld.decompose( position, quaternion, scale );\n\n\t\tif ( scale.x !== 1 || scale.y !== 1 || scale.z !== 1 ) {\n\n\t\t\tisNonDefaultScale = true;\n\n\t\t}\n\n\t\tlet parent;\n\n\t\tif ( isNonDefaultScale ) {\n\n\t\t\tparent = mesh.parent;\n\n\t\t\tif ( parent !== null ) mesh.parent = null;\n\n\t\t\tscale.copy( this.mesh.scale );\n\n\t\t\tmesh.scale.set( 1, 1, 1 );\n\t\t\tmesh.updateMatrixWorld( true );\n\n\t\t}\n\n\t\t// calculate physics and update bones\n\n\t\tthis._updateRigidBodies();\n\t\tthis._stepSimulation( delta );\n\t\tthis._updateBones();\n\n\t\t// restore mesh if converted above\n\n\t\tif ( isNonDefaultScale ) {\n\n\t\t\tif ( parent !== null ) mesh.parent = parent;\n\n\t\t\tmesh.scale.copy( scale );\n\n\t\t}\n\n\t\tmanager.freeThreeVector3( scale );\n\t\tmanager.freeThreeQuaternion( quaternion );\n\t\tmanager.freeThreeVector3( position );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Resets rigid bodies transorm to current bone's.\n\t *\n\t * @return {MMDPhysics}\n\t */\n\treset() {\n\n\t\tfor ( let i = 0, il = this.bodies.length; i < il; i ++ ) {\n\n\t\t\tthis.bodies[ i ].reset();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Warm ups Rigid bodies. Calculates cycles steps.\n\t *\n\t * @param {Integer} cycles\n\t * @return {MMDPhysics}\n\t */\n\twarmup( cycles ) {\n\n\t\tfor ( let i = 0; i < cycles; i ++ ) {\n\n\t\t\tthis.update( 1 / 60 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets gravity.\n\t *\n\t * @param {Vector3} gravity\n\t * @return {MMDPhysicsHelper}\n\t */\n\tsetGravity( gravity ) {\n\n\t\tthis.world.setGravity( new Ammo.btVector3( gravity.x, gravity.y, gravity.z ) );\n\t\tthis.gravity.copy( gravity );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Creates MMDPhysicsHelper\n\t *\n\t * @return {MMDPhysicsHelper}\n\t */\n\tcreateHelper() {\n\n\t\treturn new MMDPhysicsHelper( this.mesh, this );\n\n\t}\n\n\t// private methods\n\n\t_init( mesh, rigidBodyParams, constraintParams ) {\n\n\t\tconst manager = this.manager;\n\n\t\t// rigid body/constraint parameters are for\n\t\t// mesh's default world transform as position(0, 0, 0),\n\t\t// quaternion(0, 0, 0, 1) and scale(0, 0, 0)\n\n\t\tlet parent = mesh.parent;\n\n\t\tif ( parent !== null ) parent = null;\n\n\t\tconst currentPosition = manager.allocThreeVector3();\n\t\tconst currentQuaternion = manager.allocThreeQuaternion();\n\t\tconst currentScale = manager.allocThreeVector3();\n\n\t\tcurrentPosition.copy( mesh.position );\n\t\tcurrentQuaternion.copy( mesh.quaternion );\n\t\tcurrentScale.copy( mesh.scale );\n\n\t\tmesh.position.set( 0, 0, 0 );\n\t\tmesh.quaternion.set( 0, 0, 0, 1 );\n\t\tmesh.scale.set( 1, 1, 1 );\n\n\t\tmesh.updateMatrixWorld( true );\n\n\t\tif ( this.world === null ) {\n\n\t\t\tthis.world = this._createWorld();\n\t\t\tthis.setGravity( this.gravity );\n\n\t\t}\n\n\t\tthis._initRigidBodies( rigidBodyParams );\n\t\tthis._initConstraints( constraintParams );\n\n\t\tif ( parent !== null ) mesh.parent = parent;\n\n\t\tmesh.position.copy( currentPosition );\n\t\tmesh.quaternion.copy( currentQuaternion );\n\t\tmesh.scale.copy( currentScale );\n\n\t\tmesh.updateMatrixWorld( true );\n\n\t\tthis.reset();\n\n\t\tmanager.freeThreeVector3( currentPosition );\n\t\tmanager.freeThreeQuaternion( currentQuaternion );\n\t\tmanager.freeThreeVector3( currentScale );\n\n\t}\n\n\t_createWorld() {\n\n\t\tconst config = new Ammo.btDefaultCollisionConfiguration();\n\t\tconst dispatcher = new Ammo.btCollisionDispatcher( config );\n\t\tconst cache = new Ammo.btDbvtBroadphase();\n\t\tconst solver = new Ammo.btSequentialImpulseConstraintSolver();\n\t\tconst world = new Ammo.btDiscreteDynamicsWorld( dispatcher, cache, solver, config );\n\t\treturn world;\n\n\t}\n\n\t_initRigidBodies( rigidBodies ) {\n\n\t\tfor ( let i = 0, il = rigidBodies.length; i < il; i ++ ) {\n\n\t\t\tthis.bodies.push( new RigidBody(\n\t\t\t\tthis.mesh, this.world, rigidBodies[ i ], this.manager ) );\n\n\t\t}\n\n\t}\n\n\t_initConstraints( constraints ) {\n\n\t\tfor ( let i = 0, il = constraints.length; i < il; i ++ ) {\n\n\t\t\tconst params = constraints[ i ];\n\t\t\tconst bodyA = this.bodies[ params.rigidBodyIndex1 ];\n\t\t\tconst bodyB = this.bodies[ params.rigidBodyIndex2 ];\n\t\t\tthis.constraints.push( new Constraint( this.mesh, this.world, bodyA, bodyB, params, this.manager ) );\n\n\t\t}\n\n\t}\n\n\t_stepSimulation( delta ) {\n\n\t\tconst unitStep = this.unitStep;\n\t\tlet stepTime = delta;\n\t\tlet maxStepNum = ( ( delta / unitStep ) | 0 ) + 1;\n\n\t\tif ( stepTime < unitStep ) {\n\n\t\t\tstepTime = unitStep;\n\t\t\tmaxStepNum = 1;\n\n\t\t}\n\n\t\tif ( maxStepNum > this.maxStepNum ) {\n\n\t\t\tmaxStepNum = this.maxStepNum;\n\n\t\t}\n\n\t\tthis.world.stepSimulation( stepTime, maxStepNum, unitStep );\n\n\t}\n\n\t_updateRigidBodies() {\n\n\t\tfor ( let i = 0, il = this.bodies.length; i < il; i ++ ) {\n\n\t\t\tthis.bodies[ i ].updateFromBone();\n\n\t\t}\n\n\t}\n\n\t_updateBones() {\n\n\t\tfor ( let i = 0, il = this.bodies.length; i < il; i ++ ) {\n\n\t\t\tthis.bodies[ i ].updateBone();\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * This manager's responsibilies are\n *\n * 1. manage Ammo.js and Three.js object resources and\n *    improve the performance and the memory consumption by\n *    reusing objects.\n *\n * 2. provide simple Ammo object operations.\n */\nclass ResourceManager {\n\n\tconstructor() {\n\n\t\t// for Three.js\n\t\tthis.threeVector3s = [];\n\t\tthis.threeMatrix4s = [];\n\t\tthis.threeQuaternions = [];\n\t\tthis.threeEulers = [];\n\n\t\t// for Ammo.js\n\t\tthis.transforms = [];\n\t\tthis.quaternions = [];\n\t\tthis.vector3s = [];\n\n\t}\n\n\tallocThreeVector3() {\n\n\t\treturn ( this.threeVector3s.length > 0 )\n\t\t\t? this.threeVector3s.pop()\n\t\t\t: new Vector3();\n\n\t}\n\n\tfreeThreeVector3( v ) {\n\n\t\tthis.threeVector3s.push( v );\n\n\t}\n\n\tallocThreeMatrix4() {\n\n\t\treturn ( this.threeMatrix4s.length > 0 )\n\t\t\t? this.threeMatrix4s.pop()\n\t\t\t: new Matrix4();\n\n\t}\n\n\tfreeThreeMatrix4( m ) {\n\n\t\tthis.threeMatrix4s.push( m );\n\n\t}\n\n\tallocThreeQuaternion() {\n\n\t\treturn ( this.threeQuaternions.length > 0 )\n\t\t\t? this.threeQuaternions.pop()\n\t\t\t: new Quaternion();\n\n\t}\n\n\tfreeThreeQuaternion( q ) {\n\n\t\tthis.threeQuaternions.push( q );\n\n\t}\n\n\tallocThreeEuler() {\n\n\t\treturn ( this.threeEulers.length > 0 )\n\t\t\t? this.threeEulers.pop()\n\t\t\t: new Euler();\n\n\t}\n\n\tfreeThreeEuler( e ) {\n\n\t\tthis.threeEulers.push( e );\n\n\t}\n\n\tallocTransform() {\n\n\t\treturn ( this.transforms.length > 0 )\n\t\t\t? this.transforms.pop()\n\t\t\t: new Ammo.btTransform();\n\n\t}\n\n\tfreeTransform( t ) {\n\n\t\tthis.transforms.push( t );\n\n\t}\n\n\tallocQuaternion() {\n\n\t\treturn ( this.quaternions.length > 0 )\n\t\t\t? this.quaternions.pop()\n\t\t\t: new Ammo.btQuaternion();\n\n\t}\n\n\tfreeQuaternion( q ) {\n\n\t\tthis.quaternions.push( q );\n\n\t}\n\n\tallocVector3() {\n\n\t\treturn ( this.vector3s.length > 0 )\n\t\t\t? this.vector3s.pop()\n\t\t\t: new Ammo.btVector3();\n\n\t}\n\n\tfreeVector3( v ) {\n\n\t\tthis.vector3s.push( v );\n\n\t}\n\n\tsetIdentity( t ) {\n\n\t\tt.setIdentity();\n\n\t}\n\n\tgetBasis( t ) {\n\n\t\tvar q = this.allocQuaternion();\n\t\tt.getBasis().getRotation( q );\n\t\treturn q;\n\n\t}\n\n\tgetBasisAsMatrix3( t ) {\n\n\t\tvar q = this.getBasis( t );\n\t\tvar m = this.quaternionToMatrix3( q );\n\t\tthis.freeQuaternion( q );\n\t\treturn m;\n\n\t}\n\n\tgetOrigin( t ) {\n\n\t\treturn t.getOrigin();\n\n\t}\n\n\tsetOrigin( t, v ) {\n\n\t\tt.getOrigin().setValue( v.x(), v.y(), v.z() );\n\n\t}\n\n\tcopyOrigin( t1, t2 ) {\n\n\t\tvar o = t2.getOrigin();\n\t\tthis.setOrigin( t1, o );\n\n\t}\n\n\tsetBasis( t, q ) {\n\n\t\tt.setRotation( q );\n\n\t}\n\n\tsetBasisFromMatrix3( t, m ) {\n\n\t\tvar q = this.matrix3ToQuaternion( m );\n\t\tthis.setBasis( t, q );\n\t\tthis.freeQuaternion( q );\n\n\t}\n\n\tsetOriginFromArray3( t, a ) {\n\n\t\tt.getOrigin().setValue( a[ 0 ], a[ 1 ], a[ 2 ] );\n\n\t}\n\n\tsetOriginFromThreeVector3( t, v ) {\n\n\t\tt.getOrigin().setValue( v.x, v.y, v.z );\n\n\t}\n\n\tsetBasisFromArray3( t, a ) {\n\n\t\tvar thQ = this.allocThreeQuaternion();\n\t\tvar thE = this.allocThreeEuler();\n\t\tthE.set( a[ 0 ], a[ 1 ], a[ 2 ] );\n\t\tthis.setBasisFromThreeQuaternion( t, thQ.setFromEuler( thE ) );\n\n\t\tthis.freeThreeEuler( thE );\n\t\tthis.freeThreeQuaternion( thQ );\n\n\t}\n\n\tsetBasisFromThreeQuaternion( t, a ) {\n\n\t\tvar q = this.allocQuaternion();\n\n\t\tq.setX( a.x );\n\t\tq.setY( a.y );\n\t\tq.setZ( a.z );\n\t\tq.setW( a.w );\n\t\tthis.setBasis( t, q );\n\n\t\tthis.freeQuaternion( q );\n\n\t}\n\n\tmultiplyTransforms( t1, t2 ) {\n\n\t\tvar t = this.allocTransform();\n\t\tthis.setIdentity( t );\n\n\t\tvar m1 = this.getBasisAsMatrix3( t1 );\n\t\tvar m2 = this.getBasisAsMatrix3( t2 );\n\n\t\tvar o1 = this.getOrigin( t1 );\n\t\tvar o2 = this.getOrigin( t2 );\n\n\t\tvar v1 = this.multiplyMatrix3ByVector3( m1, o2 );\n\t\tvar v2 = this.addVector3( v1, o1 );\n\t\tthis.setOrigin( t, v2 );\n\n\t\tvar m3 = this.multiplyMatrices3( m1, m2 );\n\t\tthis.setBasisFromMatrix3( t, m3 );\n\n\t\tthis.freeVector3( v1 );\n\t\tthis.freeVector3( v2 );\n\n\t\treturn t;\n\n\t}\n\n\tinverseTransform( t ) {\n\n\t\tvar t2 = this.allocTransform();\n\n\t\tvar m1 = this.getBasisAsMatrix3( t );\n\t\tvar o = this.getOrigin( t );\n\n\t\tvar m2 = this.transposeMatrix3( m1 );\n\t\tvar v1 = this.negativeVector3( o );\n\t\tvar v2 = this.multiplyMatrix3ByVector3( m2, v1 );\n\n\t\tthis.setOrigin( t2, v2 );\n\t\tthis.setBasisFromMatrix3( t2, m2 );\n\n\t\tthis.freeVector3( v1 );\n\t\tthis.freeVector3( v2 );\n\n\t\treturn t2;\n\n\t}\n\n\tmultiplyMatrices3( m1, m2 ) {\n\n\t\tvar m3 = [];\n\n\t\tvar v10 = this.rowOfMatrix3( m1, 0 );\n\t\tvar v11 = this.rowOfMatrix3( m1, 1 );\n\t\tvar v12 = this.rowOfMatrix3( m1, 2 );\n\n\t\tvar v20 = this.columnOfMatrix3( m2, 0 );\n\t\tvar v21 = this.columnOfMatrix3( m2, 1 );\n\t\tvar v22 = this.columnOfMatrix3( m2, 2 );\n\n\t\tm3[ 0 ] = this.dotVectors3( v10, v20 );\n\t\tm3[ 1 ] = this.dotVectors3( v10, v21 );\n\t\tm3[ 2 ] = this.dotVectors3( v10, v22 );\n\t\tm3[ 3 ] = this.dotVectors3( v11, v20 );\n\t\tm3[ 4 ] = this.dotVectors3( v11, v21 );\n\t\tm3[ 5 ] = this.dotVectors3( v11, v22 );\n\t\tm3[ 6 ] = this.dotVectors3( v12, v20 );\n\t\tm3[ 7 ] = this.dotVectors3( v12, v21 );\n\t\tm3[ 8 ] = this.dotVectors3( v12, v22 );\n\n\t\tthis.freeVector3( v10 );\n\t\tthis.freeVector3( v11 );\n\t\tthis.freeVector3( v12 );\n\t\tthis.freeVector3( v20 );\n\t\tthis.freeVector3( v21 );\n\t\tthis.freeVector3( v22 );\n\n\t\treturn m3;\n\n\t}\n\n\taddVector3( v1, v2 ) {\n\n\t\tvar v = this.allocVector3();\n\t\tv.setValue( v1.x() + v2.x(), v1.y() + v2.y(), v1.z() + v2.z() );\n\t\treturn v;\n\n\t}\n\n\tdotVectors3( v1, v2 ) {\n\n\t\treturn v1.x() * v2.x() + v1.y() * v2.y() + v1.z() * v2.z();\n\n\t}\n\n\trowOfMatrix3( m, i ) {\n\n\t\tvar v = this.allocVector3();\n\t\tv.setValue( m[ i * 3 + 0 ], m[ i * 3 + 1 ], m[ i * 3 + 2 ] );\n\t\treturn v;\n\n\t}\n\n\tcolumnOfMatrix3( m, i ) {\n\n\t\tvar v = this.allocVector3();\n\t\tv.setValue( m[ i + 0 ], m[ i + 3 ], m[ i + 6 ] );\n\t\treturn v;\n\n\t}\n\n\tnegativeVector3( v ) {\n\n\t\tvar v2 = this.allocVector3();\n\t\tv2.setValue( - v.x(), - v.y(), - v.z() );\n\t\treturn v2;\n\n\t}\n\n\tmultiplyMatrix3ByVector3( m, v ) {\n\n\t\tvar v4 = this.allocVector3();\n\n\t\tvar v0 = this.rowOfMatrix3( m, 0 );\n\t\tvar v1 = this.rowOfMatrix3( m, 1 );\n\t\tvar v2 = this.rowOfMatrix3( m, 2 );\n\t\tvar x = this.dotVectors3( v0, v );\n\t\tvar y = this.dotVectors3( v1, v );\n\t\tvar z = this.dotVectors3( v2, v );\n\n\t\tv4.setValue( x, y, z );\n\n\t\tthis.freeVector3( v0 );\n\t\tthis.freeVector3( v1 );\n\t\tthis.freeVector3( v2 );\n\n\t\treturn v4;\n\n\t}\n\n\ttransposeMatrix3( m ) {\n\n\t\tvar m2 = [];\n\t\tm2[ 0 ] = m[ 0 ];\n\t\tm2[ 1 ] = m[ 3 ];\n\t\tm2[ 2 ] = m[ 6 ];\n\t\tm2[ 3 ] = m[ 1 ];\n\t\tm2[ 4 ] = m[ 4 ];\n\t\tm2[ 5 ] = m[ 7 ];\n\t\tm2[ 6 ] = m[ 2 ];\n\t\tm2[ 7 ] = m[ 5 ];\n\t\tm2[ 8 ] = m[ 8 ];\n\t\treturn m2;\n\n\t}\n\n\tquaternionToMatrix3( q ) {\n\n\t\tvar m = [];\n\n\t\tvar x = q.x();\n\t\tvar y = q.y();\n\t\tvar z = q.z();\n\t\tvar w = q.w();\n\n\t\tvar xx = x * x;\n\t\tvar yy = y * y;\n\t\tvar zz = z * z;\n\n\t\tvar xy = x * y;\n\t\tvar yz = y * z;\n\t\tvar zx = z * x;\n\n\t\tvar xw = x * w;\n\t\tvar yw = y * w;\n\t\tvar zw = z * w;\n\n\t\tm[ 0 ] = 1 - 2 * ( yy + zz );\n\t\tm[ 1 ] = 2 * ( xy - zw );\n\t\tm[ 2 ] = 2 * ( zx + yw );\n\t\tm[ 3 ] = 2 * ( xy + zw );\n\t\tm[ 4 ] = 1 - 2 * ( zz + xx );\n\t\tm[ 5 ] = 2 * ( yz - xw );\n\t\tm[ 6 ] = 2 * ( zx - yw );\n\t\tm[ 7 ] = 2 * ( yz + xw );\n\t\tm[ 8 ] = 1 - 2 * ( xx + yy );\n\n\t\treturn m;\n\n\t}\n\n\tmatrix3ToQuaternion( m ) {\n\n\t\tvar t = m[ 0 ] + m[ 4 ] + m[ 8 ];\n\t\tvar s, x, y, z, w;\n\n\t\tif ( t > 0 ) {\n\n\t\t\ts = Math.sqrt( t + 1.0 ) * 2;\n\t\t\tw = 0.25 * s;\n\t\t\tx = ( m[ 7 ] - m[ 5 ] ) / s;\n\t\t\ty = ( m[ 2 ] - m[ 6 ] ) / s;\n\t\t\tz = ( m[ 3 ] - m[ 1 ] ) / s;\n\n\t\t} else if ( ( m[ 0 ] > m[ 4 ] ) && ( m[ 0 ] > m[ 8 ] ) ) {\n\n\t\t\ts = Math.sqrt( 1.0 + m[ 0 ] - m[ 4 ] - m[ 8 ] ) * 2;\n\t\t\tw = ( m[ 7 ] - m[ 5 ] ) / s;\n\t\t\tx = 0.25 * s;\n\t\t\ty = ( m[ 1 ] + m[ 3 ] ) / s;\n\t\t\tz = ( m[ 2 ] + m[ 6 ] ) / s;\n\n\t\t} else if ( m[ 4 ] > m[ 8 ] ) {\n\n\t\t\ts = Math.sqrt( 1.0 + m[ 4 ] - m[ 0 ] - m[ 8 ] ) * 2;\n\t\t\tw = ( m[ 2 ] - m[ 6 ] ) / s;\n\t\t\tx = ( m[ 1 ] + m[ 3 ] ) / s;\n\t\t\ty = 0.25 * s;\n\t\t\tz = ( m[ 5 ] + m[ 7 ] ) / s;\n\n\t\t} else {\n\n\t\t\ts = Math.sqrt( 1.0 + m[ 8 ] - m[ 0 ] - m[ 4 ] ) * 2;\n\t\t\tw = ( m[ 3 ] - m[ 1 ] ) / s;\n\t\t\tx = ( m[ 2 ] + m[ 6 ] ) / s;\n\t\t\ty = ( m[ 5 ] + m[ 7 ] ) / s;\n\t\t\tz = 0.25 * s;\n\n\t\t}\n\n\t\tvar q = this.allocQuaternion();\n\t\tq.setX( x );\n\t\tq.setY( y );\n\t\tq.setZ( z );\n\t\tq.setW( w );\n\t\treturn q;\n\n\t}\n\n}\n\n/**\n * @param {THREE.SkinnedMesh} mesh\n * @param {Ammo.btDiscreteDynamicsWorld} world\n * @param {Object} params\n * @param {ResourceManager} manager\n */\nclass RigidBody {\n\n\tconstructor( mesh, world, params, manager ) {\n\n\t\tthis.mesh = mesh;\n\t\tthis.world = world;\n\t\tthis.params = params;\n\t\tthis.manager = manager;\n\n\t\tthis.body = null;\n\t\tthis.bone = null;\n\t\tthis.boneOffsetForm = null;\n\t\tthis.boneOffsetFormInverse = null;\n\n\t\tthis._init();\n\n\t}\n\n\t/**\n\t * Resets rigid body transform to the current bone's.\n\t *\n\t * @return {RigidBody}\n\t */\n\treset() {\n\n\t\tthis._setTransformFromBone();\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Updates rigid body's transform from the current bone.\n\t *\n\t * @return {RidigBody}\n\t */\n\tupdateFromBone() {\n\n\t\tif ( this.params.boneIndex !== - 1 && this.params.type === 0 ) {\n\n\t\t\tthis._setTransformFromBone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Updates bone from the current ridid body's transform.\n\t *\n\t * @return {RidigBody}\n\t */\n\tupdateBone() {\n\n\t\tif ( this.params.type === 0 || this.params.boneIndex === - 1 ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis._updateBoneRotation();\n\n\t\tif ( this.params.type === 1 ) {\n\n\t\t\tthis._updateBonePosition();\n\n\t\t}\n\n\t\tthis.bone.updateMatrixWorld( true );\n\n\t\tif ( this.params.type === 2 ) {\n\n\t\t\tthis._setPositionFromBone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// private methods\n\n\t_init() {\n\n\t\tfunction generateShape( p ) {\n\n\t\t\tswitch ( p.shapeType ) {\n\n\t\t\t\tcase 0:\n\t\t\t\t\treturn new Ammo.btSphereShape( p.width );\n\n\t\t\t\tcase 1:\n\t\t\t\t\treturn new Ammo.btBoxShape( new Ammo.btVector3( p.width, p.height, p.depth ) );\n\n\t\t\t\tcase 2:\n\t\t\t\t\treturn new Ammo.btCapsuleShape( p.width, p.height );\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow 'unknown shape type ' + p.shapeType;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst manager = this.manager;\n\t\tconst params = this.params;\n\t\tconst bones = this.mesh.skeleton.bones;\n\t\tconst bone = ( params.boneIndex === - 1 )\n\t\t\t? new Bone()\n\t\t\t: bones[ params.boneIndex ];\n\n\t\tconst shape = generateShape( params );\n\t\tconst weight = ( params.type === 0 ) ? 0 : params.weight;\n\t\tconst localInertia = manager.allocVector3();\n\t\tlocalInertia.setValue( 0, 0, 0 );\n\n\t\tif ( weight !== 0 ) {\n\n\t\t\tshape.calculateLocalInertia( weight, localInertia );\n\n\t\t}\n\n\t\tconst boneOffsetForm = manager.allocTransform();\n\t\tmanager.setIdentity( boneOffsetForm );\n\t\tmanager.setOriginFromArray3( boneOffsetForm, params.position );\n\t\tmanager.setBasisFromArray3( boneOffsetForm, params.rotation );\n\n\t\tconst vector = manager.allocThreeVector3();\n\t\tconst boneForm = manager.allocTransform();\n\t\tmanager.setIdentity( boneForm );\n\t\tmanager.setOriginFromThreeVector3( boneForm, bone.getWorldPosition( vector ) );\n\n\t\tconst form = manager.multiplyTransforms( boneForm, boneOffsetForm );\n\t\tconst state = new Ammo.btDefaultMotionState( form );\n\n\t\tconst info = new Ammo.btRigidBodyConstructionInfo( weight, state, shape, localInertia );\n\t\tinfo.set_m_friction( params.friction );\n\t\tinfo.set_m_restitution( params.restitution );\n\n\t\tconst body = new Ammo.btRigidBody( info );\n\n\t\tif ( params.type === 0 ) {\n\n\t\t\tbody.setCollisionFlags( body.getCollisionFlags() | 2 );\n\n\t\t\t/*\n\t\t\t * It'd be better to comment out this line though in general I should call this method\n\t\t\t * because I'm not sure why but physics will be more like MMD's\n\t\t\t * if I comment out.\n\t\t\t */\n\t\t\tbody.setActivationState( 4 );\n\n\t\t}\n\n\t\tbody.setDamping( params.positionDamping, params.rotationDamping );\n\t\tbody.setSleepingThresholds( 0, 0 );\n\n\t\tthis.world.addRigidBody( body, 1 << params.groupIndex, params.groupTarget );\n\n\t\tthis.body = body;\n\t\tthis.bone = bone;\n\t\tthis.boneOffsetForm = boneOffsetForm;\n\t\tthis.boneOffsetFormInverse = manager.inverseTransform( boneOffsetForm );\n\n\t\tmanager.freeVector3( localInertia );\n\t\tmanager.freeTransform( form );\n\t\tmanager.freeTransform( boneForm );\n\t\tmanager.freeThreeVector3( vector );\n\n\t}\n\n\t_getBoneTransform() {\n\n\t\tconst manager = this.manager;\n\t\tconst p = manager.allocThreeVector3();\n\t\tconst q = manager.allocThreeQuaternion();\n\t\tconst s = manager.allocThreeVector3();\n\n\t\tthis.bone.matrixWorld.decompose( p, q, s );\n\n\t\tconst tr = manager.allocTransform();\n\t\tmanager.setOriginFromThreeVector3( tr, p );\n\t\tmanager.setBasisFromThreeQuaternion( tr, q );\n\n\t\tconst form = manager.multiplyTransforms( tr, this.boneOffsetForm );\n\n\t\tmanager.freeTransform( tr );\n\t\tmanager.freeThreeVector3( s );\n\t\tmanager.freeThreeQuaternion( q );\n\t\tmanager.freeThreeVector3( p );\n\n\t\treturn form;\n\n\t}\n\n\t_getWorldTransformForBone() {\n\n\t\tconst manager = this.manager;\n\t\tconst tr = this.body.getCenterOfMassTransform();\n\t\treturn manager.multiplyTransforms( tr, this.boneOffsetFormInverse );\n\n\t}\n\n\t_setTransformFromBone() {\n\n\t\tconst manager = this.manager;\n\t\tconst form = this._getBoneTransform();\n\n\t\t// TODO: check the most appropriate way to set\n\t\t//this.body.setWorldTransform( form );\n\t\tthis.body.setCenterOfMassTransform( form );\n\t\tthis.body.getMotionState().setWorldTransform( form );\n\n\t\tmanager.freeTransform( form );\n\n\t}\n\n\t_setPositionFromBone() {\n\n\t\tconst manager = this.manager;\n\t\tconst form = this._getBoneTransform();\n\n\t\tconst tr = manager.allocTransform();\n\t\tthis.body.getMotionState().getWorldTransform( tr );\n\t\tmanager.copyOrigin( tr, form );\n\n\t\t// TODO: check the most appropriate way to set\n\t\t//this.body.setWorldTransform( tr );\n\t\tthis.body.setCenterOfMassTransform( tr );\n\t\tthis.body.getMotionState().setWorldTransform( tr );\n\n\t\tmanager.freeTransform( tr );\n\t\tmanager.freeTransform( form );\n\n\t}\n\n\t_updateBoneRotation() {\n\n\t\tconst manager = this.manager;\n\n\t\tconst tr = this._getWorldTransformForBone();\n\t\tconst q = manager.getBasis( tr );\n\n\t\tconst thQ = manager.allocThreeQuaternion();\n\t\tconst thQ2 = manager.allocThreeQuaternion();\n\t\tconst thQ3 = manager.allocThreeQuaternion();\n\n\t\tthQ.set( q.x(), q.y(), q.z(), q.w() );\n\t\tthQ2.setFromRotationMatrix( this.bone.matrixWorld );\n\t\tthQ2.conjugate();\n\t\tthQ2.multiply( thQ );\n\n\t\t//this.bone.quaternion.multiply( thQ2 );\n\n\t\tthQ3.setFromRotationMatrix( this.bone.matrix );\n\n\t\t// Renormalizing quaternion here because repeatedly transforming\n\t\t// quaternion continuously accumulates floating point error and\n\t\t// can end up being overflow. See #15335\n\t\tthis.bone.quaternion.copy( thQ2.multiply( thQ3 ).normalize() );\n\n\t\tmanager.freeThreeQuaternion( thQ );\n\t\tmanager.freeThreeQuaternion( thQ2 );\n\t\tmanager.freeThreeQuaternion( thQ3 );\n\n\t\tmanager.freeQuaternion( q );\n\t\tmanager.freeTransform( tr );\n\n\t}\n\n\t_updateBonePosition() {\n\n\t\tconst manager = this.manager;\n\n\t\tconst tr = this._getWorldTransformForBone();\n\n\t\tconst thV = manager.allocThreeVector3();\n\n\t\tconst o = manager.getOrigin( tr );\n\t\tthV.set( o.x(), o.y(), o.z() );\n\n\t\tif ( this.bone.parent ) {\n\n\t\t\tthis.bone.parent.worldToLocal( thV );\n\n\t\t}\n\n\t\tthis.bone.position.copy( thV );\n\n\t\tmanager.freeThreeVector3( thV );\n\n\t\tmanager.freeTransform( tr );\n\n\t}\n\n}\n\n//\n\nclass Constraint {\n\n\t/**\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Ammo.btDiscreteDynamicsWorld} world\n\t * @param {RigidBody} bodyA\n\t * @param {RigidBody} bodyB\n\t * @param {Object} params\n\t * @param {ResourceManager} manager\n\t */\n\tconstructor( mesh, world, bodyA, bodyB, params, manager ) {\n\n\t\tthis.mesh = mesh;\n\t\tthis.world = world;\n\t\tthis.bodyA = bodyA;\n\t\tthis.bodyB = bodyB;\n\t\tthis.params = params;\n\t\tthis.manager = manager;\n\n\t\tthis.constraint = null;\n\n\t\tthis._init();\n\n\t}\n\n\t// private method\n\n\t_init() {\n\n\t\tconst manager = this.manager;\n\t\tconst params = this.params;\n\t\tconst bodyA = this.bodyA;\n\t\tconst bodyB = this.bodyB;\n\n\t\tconst form = manager.allocTransform();\n\t\tmanager.setIdentity( form );\n\t\tmanager.setOriginFromArray3( form, params.position );\n\t\tmanager.setBasisFromArray3( form, params.rotation );\n\n\t\tconst formA = manager.allocTransform();\n\t\tconst formB = manager.allocTransform();\n\n\t\tbodyA.body.getMotionState().getWorldTransform( formA );\n\t\tbodyB.body.getMotionState().getWorldTransform( formB );\n\n\t\tconst formInverseA = manager.inverseTransform( formA );\n\t\tconst formInverseB = manager.inverseTransform( formB );\n\n\t\tconst formA2 = manager.multiplyTransforms( formInverseA, form );\n\t\tconst formB2 = manager.multiplyTransforms( formInverseB, form );\n\n\t\tconst constraint = new Ammo.btGeneric6DofSpringConstraint( bodyA.body, bodyB.body, formA2, formB2, true );\n\n\t\tconst lll = manager.allocVector3();\n\t\tconst lul = manager.allocVector3();\n\t\tconst all = manager.allocVector3();\n\t\tconst aul = manager.allocVector3();\n\n\t\tlll.setValue( params.translationLimitation1[ 0 ],\n\t\t              params.translationLimitation1[ 1 ],\n\t\t              params.translationLimitation1[ 2 ] );\n\t\tlul.setValue( params.translationLimitation2[ 0 ],\n\t\t              params.translationLimitation2[ 1 ],\n\t\t              params.translationLimitation2[ 2 ] );\n\t\tall.setValue( params.rotationLimitation1[ 0 ],\n\t\t              params.rotationLimitation1[ 1 ],\n\t\t              params.rotationLimitation1[ 2 ] );\n\t\taul.setValue( params.rotationLimitation2[ 0 ],\n\t\t              params.rotationLimitation2[ 1 ],\n\t\t              params.rotationLimitation2[ 2 ] );\n\n\t\tconstraint.setLinearLowerLimit( lll );\n\t\tconstraint.setLinearUpperLimit( lul );\n\t\tconstraint.setAngularLowerLimit( all );\n\t\tconstraint.setAngularUpperLimit( aul );\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tif ( params.springPosition[ i ] !== 0 ) {\n\n\t\t\t\tconstraint.enableSpring( i, true );\n\t\t\t\tconstraint.setStiffness( i, params.springPosition[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tif ( params.springRotation[ i ] !== 0 ) {\n\n\t\t\t\tconstraint.enableSpring( i + 3, true );\n\t\t\t\tconstraint.setStiffness( i + 3, params.springRotation[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t/*\n\t\t * Currently(10/31/2016) official ammo.js doesn't support\n\t\t * btGeneric6DofSpringConstraint.setParam method.\n\t\t * You need custom ammo.js (add the method into idl) if you wanna use.\n\t\t * By setting this parameter, physics will be more like MMD's\n\t\t */\n\t\tif ( constraint.setParam !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t// this parameter is from http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mmd.three.js\n\t\t\t\tconstraint.setParam( 2, 0.475, i );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.world.addConstraint( constraint, true );\n\t\tthis.constraint = constraint;\n\n\t\tmanager.freeTransform( form );\n\t\tmanager.freeTransform( formA );\n\t\tmanager.freeTransform( formB );\n\t\tmanager.freeTransform( formInverseA );\n\t\tmanager.freeTransform( formInverseB );\n\t\tmanager.freeTransform( formA2 );\n\t\tmanager.freeTransform( formB2 );\n\t\tmanager.freeVector3( lll );\n\t\tmanager.freeVector3( lul );\n\t\tmanager.freeVector3( all );\n\t\tmanager.freeVector3( aul );\n\n\t}\n\n}\n\n//\n\nconst _position = new Vector3();\nconst _quaternion = new Quaternion();\nconst _scale = new Vector3();\nconst _matrixWorldInv = new Matrix4();\n\nclass MMDPhysicsHelper extends Object3D {\n\n\t/**\n\t * Visualize Rigid bodies\n\t *\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Physics} physics\n\t */\n\tconstructor( mesh, physics ) {\n\n\t\tsuper();\n\n\t\tthis.root = mesh;\n\t\tthis.physics = physics;\n\n\t\tthis.matrix.copy( mesh.matrixWorld );\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.materials = [];\n\n\t\tthis.materials.push(\n\t\t\tnew MeshBasicMaterial( {\n\t\t\t\tcolor: new Color( 0xff8888 ),\n\t\t\t\twireframe: true,\n\t\t\t\tdepthTest: false,\n\t\t\t\tdepthWrite: false,\n\t\t\t\topacity: 0.25,\n\t\t\t\ttransparent: true\n\t\t\t} )\n\t\t);\n\n\t\tthis.materials.push(\n\t\t\tnew MeshBasicMaterial( {\n\t\t\t\tcolor: new Color( 0x88ff88 ),\n\t\t\t\twireframe: true,\n\t\t\t\tdepthTest: false,\n\t\t\t\tdepthWrite: false,\n\t\t\t\topacity: 0.25,\n\t\t\t\ttransparent: true\n\t\t\t} )\n\t\t);\n\n\t\tthis.materials.push(\n\t\t\tnew MeshBasicMaterial( {\n\t\t\t\tcolor: new Color( 0x8888ff ),\n\t\t\t\twireframe: true,\n\t\t\t\tdepthTest: false,\n\t\t\t\tdepthWrite: false,\n\t\t\t\topacity: 0.25,\n\t\t\t\ttransparent: true\n\t\t\t} )\n\t\t);\n\n\t\tthis._init();\n\n\t}\n\n\t/**\n\t * Updates Rigid Bodies visualization.\n\t */\n\tupdateMatrixWorld( force ) {\n\n\t\tvar mesh = this.root;\n\n\t\tif ( this.visible ) {\n\n\t\t\tvar bodies = this.physics.bodies;\n\n\t\t\t_matrixWorldInv\n\t\t\t\t.copy( mesh.matrixWorld )\n\t\t\t\t.decompose( _position, _quaternion, _scale )\n\t\t\t\t.compose( _position, _quaternion, _scale.set( 1, 1, 1 ) )\n\t\t\t\t.invert();\n\n\t\t\tfor ( var i = 0, il = bodies.length; i < il; i ++ ) {\n\n\t\t\t\tvar body = bodies[ i ].body;\n\t\t\t\tvar child = this.children[ i ];\n\n\t\t\t\tvar tr = body.getCenterOfMassTransform();\n\t\t\t\tvar origin = tr.getOrigin();\n\t\t\t\tvar rotation = tr.getRotation();\n\n\t\t\t\tchild.position\n\t\t\t\t\t.set( origin.x(), origin.y(), origin.z() )\n\t\t\t\t\t.applyMatrix4( _matrixWorldInv );\n\n\t\t\t\tchild.quaternion\n\t\t\t\t\t.setFromRotationMatrix( _matrixWorldInv )\n\t\t\t\t\t.multiply(\n\t\t\t\t\t\t_quaternion.set( rotation.x(), rotation.y(), rotation.z(), rotation.w() )\n\t\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.matrix\n\t\t\t.copy( mesh.matrixWorld )\n\t\t\t.decompose( _position, _quaternion, _scale )\n\t\t\t.compose( _position, _quaternion, _scale.set( 1, 1, 1 ) );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\t// private method\n\n\t_init() {\n\n\t\tvar bodies = this.physics.bodies;\n\n\t\tfunction createGeometry( param ) {\n\n\t\t\tswitch ( param.shapeType ) {\n\n\t\t\t\tcase 0:\n\t\t\t\t\treturn new SphereGeometry( param.width, 16, 8 );\n\n\t\t\t\tcase 1:\n\t\t\t\t\treturn new BoxGeometry( param.width * 2, param.height * 2, param.depth * 2, 8, 8, 8 );\n\n\t\t\t\tcase 2:\n\t\t\t\t\treturn new createCapsuleGeometry( param.width, param.height, 16, 8 );\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// copy from http://www20.atpages.jp/katwat/three.js_r58/examples/mytest37/mytest37.js?ver=20160815\n\t\tfunction createCapsuleGeometry( radius, cylinderHeight, segmentsRadius, segmentsHeight ) {\n\n\t\t\tvar geometry = new CylinderGeometry( radius, radius, cylinderHeight, segmentsRadius, segmentsHeight, true );\n\t\t\tvar upperSphere = new Mesh( new SphereGeometry( radius, segmentsRadius, segmentsHeight, 0, Math.PI * 2, 0, Math.PI / 2 ) );\n\t\t\tvar lowerSphere = new Mesh( new SphereGeometry( radius, segmentsRadius, segmentsHeight, 0, Math.PI * 2, Math.PI / 2, Math.PI / 2 ) );\n\n\t\t\tupperSphere.position.set( 0, cylinderHeight / 2, 0 );\n\t\t\tlowerSphere.position.set( 0, - cylinderHeight / 2, 0 );\n\n\t\t\tupperSphere.updateMatrix();\n\t\t\tlowerSphere.updateMatrix();\n\n\t\t\tgeometry.merge( upperSphere.geometry, upperSphere.matrix );\n\t\t\tgeometry.merge( lowerSphere.geometry, lowerSphere.matrix );\n\n\t\t\treturn geometry;\n\n\t\t}\n\n\t\tfor ( var i = 0, il = bodies.length; i < il; i ++ ) {\n\n\t\t\tvar param = bodies[ i ].params;\n\t\t\tthis.add( new Mesh( createGeometry( param ), this.materials[ param.type ] ) );\n\n\t\t}\n\n\t}\n\n}\n\nexport { MMDPhysics };\n","import {\n\tAnimationMixer,\n\tObject3D,\n\tQuaternion,\n\tVector3\n} from 'three';\nimport { CCDIKSolver } from '../animation/CCDIKSolver.js';\nimport { MMDPhysics } from '../animation/MMDPhysics.js';\n\n/**\n * MMDAnimationHelper handles animation of MMD assets loaded by MMDLoader\n * with MMD special features as IK, Grant, and Physics.\n *\n * Dependencies\n *  - ammo.js https://github.com/kripken/ammo.js\n *  - MMDPhysics\n *  - CCDIKSolver\n *\n * TODO\n *  - more precise grant skinning support.\n */\nclass MMDAnimationHelper {\n\n\t/**\n\t * @param {Object} params - (optional)\n\t * @param {boolean} params.sync - Whether animation durations of added objects are synched. Default is true.\n\t * @param {Number} params.afterglow - Default is 0.0.\n\t * @param {boolean} params.resetPhysicsOnLoop - Default is true.\n\t */\n\tconstructor( params = {} ) {\n\n\t\tthis.meshes = [];\n\n\t\tthis.camera = null;\n\t\tthis.cameraTarget = new Object3D();\n\t\tthis.cameraTarget.name = 'target';\n\n\t\tthis.audio = null;\n\t\tthis.audioManager = null;\n\n\t\tthis.objects = new WeakMap();\n\n\t\tthis.configuration = {\n\t\t\tsync: params.sync !== undefined ? params.sync : true,\n\t\t\tafterglow: params.afterglow !== undefined ? params.afterglow : 0.0,\n\t\t\tresetPhysicsOnLoop: params.resetPhysicsOnLoop !== undefined ? params.resetPhysicsOnLoop : true,\n\t\t\tpmxAnimation: params.pmxAnimation !== undefined ? params.pmxAnimation : false\n\t\t};\n\n\t\tthis.enabled = {\n\t\t\tanimation: true,\n\t\t\tik: true,\n\t\t\tgrant: true,\n\t\t\tphysics: true,\n\t\t\tcameraAnimation: true\n\t\t};\n\n\t\tthis.onBeforePhysics = function ( /* mesh */ ) {};\n\n\t\t// experimental\n\t\tthis.sharedPhysics = false;\n\t\tthis.masterPhysics = null;\n\n\t}\n\n\t/**\n\t * Adds an Three.js Object to helper and setups animation.\n\t * The anmation durations of added objects are synched\n\t * if this.configuration.sync is true.\n\t *\n\t * @param {THREE.SkinnedMesh|THREE.Camera|THREE.Audio} object\n\t * @param {Object} params - (optional)\n\t * @param {THREE.AnimationClip|Array<THREE.AnimationClip>} params.animation - Only for THREE.SkinnedMesh and THREE.Camera. Default is undefined.\n\t * @param {boolean} params.physics - Only for THREE.SkinnedMesh. Default is true.\n\t * @param {Integer} params.warmup - Only for THREE.SkinnedMesh and physics is true. Default is 60.\n\t * @param {Number} params.unitStep - Only for THREE.SkinnedMesh and physics is true. Default is 1 / 65.\n\t * @param {Integer} params.maxStepNum - Only for THREE.SkinnedMesh and physics is true. Default is 3.\n\t * @param {Vector3} params.gravity - Only for THREE.SkinnedMesh and physics is true. Default ( 0, - 9.8 * 10, 0 ).\n\t * @param {Number} params.delayTime - Only for THREE.Audio. Default is 0.0.\n\t * @return {MMDAnimationHelper}\n\t */\n\tadd( object, params = {} ) {\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tthis._addMesh( object, params );\n\n\t\t} else if ( object.isCamera ) {\n\n\t\t\tthis._setupCamera( object, params );\n\n\t\t} else if ( object.type === 'Audio' ) {\n\n\t\t\tthis._setupAudio( object, params );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper.add: '\n\t\t\t\t+ 'accepts only '\n\t\t\t\t+ 'THREE.SkinnedMesh or '\n\t\t\t\t+ 'THREE.Camera or '\n\t\t\t\t+ 'THREE.Audio instance.' );\n\n\t\t}\n\n\t\tif ( this.configuration.sync ) this._syncDuration();\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Removes an Three.js Object from helper.\n\t *\n\t * @param {THREE.SkinnedMesh|THREE.Camera|THREE.Audio} object\n\t * @return {MMDAnimationHelper}\n\t */\n\tremove( object ) {\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tthis._removeMesh( object );\n\n\t\t} else if ( object.isCamera ) {\n\n\t\t\tthis._clearCamera( object );\n\n\t\t} else if ( object.type === 'Audio' ) {\n\n\t\t\tthis._clearAudio( object );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper.remove: '\n\t\t\t\t+ 'accepts only '\n\t\t\t\t+ 'THREE.SkinnedMesh or '\n\t\t\t\t+ 'THREE.Camera or '\n\t\t\t\t+ 'THREE.Audio instance.' );\n\n\t\t}\n\n\t\tif ( this.configuration.sync ) this._syncDuration();\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Updates the animation.\n\t *\n\t * @param {Number} delta\n\t * @return {MMDAnimationHelper}\n\t */\n\tupdate( delta ) {\n\n\t\tif ( this.audioManager !== null ) this.audioManager.control( delta );\n\n\t\tfor ( let i = 0; i < this.meshes.length; i ++ ) {\n\n\t\t\tthis._animateMesh( this.meshes[ i ], delta );\n\n\t\t}\n\n\t\tif ( this.sharedPhysics ) this._updateSharedPhysics( delta );\n\n\t\tif ( this.camera !== null ) this._animateCamera( this.camera, delta );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Changes the pose of SkinnedMesh as VPD specifies.\n\t *\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @param {Object} vpd - VPD content parsed MMDParser\n\t * @param {Object} params - (optional)\n\t * @param {boolean} params.resetPose - Default is true.\n\t * @param {boolean} params.ik - Default is true.\n\t * @param {boolean} params.grant - Default is true.\n\t * @return {MMDAnimationHelper}\n\t */\n\tpose( mesh, vpd, params = {} ) {\n\n\t\tif ( params.resetPose !== false ) mesh.pose();\n\n\t\tconst bones = mesh.skeleton.bones;\n\t\tconst boneParams = vpd.bones;\n\n\t\tconst boneNameDictionary = {};\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\tboneNameDictionary[ bones[ i ].name ] = i;\n\n\t\t}\n\n\t\tconst vector = new Vector3();\n\t\tconst quaternion = new Quaternion();\n\n\t\tfor ( let i = 0, il = boneParams.length; i < il; i ++ ) {\n\n\t\t\tconst boneParam = boneParams[ i ];\n\t\t\tconst boneIndex = boneNameDictionary[ boneParam.name ];\n\n\t\t\tif ( boneIndex === undefined ) continue;\n\n\t\t\tconst bone = bones[ boneIndex ];\n\t\t\tbone.position.add( vector.fromArray( boneParam.translation ) );\n\t\t\tbone.quaternion.multiply( quaternion.fromArray( boneParam.quaternion ) );\n\n\t\t}\n\n\t\tmesh.updateMatrixWorld( true );\n\n\t\t// PMX animation system special path\n\t\tif ( this.configuration.pmxAnimation &&\n\t\t\tmesh.geometry.userData.MMD && mesh.geometry.userData.MMD.format === 'pmx' ) {\n\n\t\t\tconst sortedBonesData = this._sortBoneDataArray( mesh.geometry.userData.MMD.bones.slice() );\n\t\t\tconst ikSolver = params.ik !== false ? this._createCCDIKSolver( mesh ) : null;\n\t\t\tconst grantSolver = params.grant !== false ? this.createGrantSolver( mesh ) : null;\n\t\t\tthis._animatePMXMesh( mesh, sortedBonesData, ikSolver, grantSolver );\n\n\t\t} else {\n\n\t\t\tif ( params.ik !== false ) {\n\n\t\t\t\tthis._createCCDIKSolver( mesh ).update();\n\n\t\t\t}\n\n\t\t\tif ( params.grant !== false ) {\n\n\t\t\t\tthis.createGrantSolver( mesh ).update();\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Enabes/Disables an animation feature.\n\t *\n\t * @param {string} key\n\t * @param {boolean} enabled\n\t * @return {MMDAnimationHelper}\n\t */\n\tenable( key, enabled ) {\n\n\t\tif ( this.enabled[ key ] === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper.enable: '\n\t\t\t\t+ 'unknown key ' + key );\n\n\t\t}\n\n\t\tthis.enabled[ key ] = enabled;\n\n\t\tif ( key === 'physics' ) {\n\n\t\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\t\tthis._optimizeIK( this.meshes[ i ], enabled );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Creates an GrantSolver instance.\n\t *\n\t * @param {THREE.SkinnedMesh} mesh\n\t * @return {GrantSolver}\n\t */\n\tcreateGrantSolver( mesh ) {\n\n\t\treturn new GrantSolver( mesh, mesh.geometry.userData.MMD.grants );\n\n\t}\n\n\t// private methods\n\n\t_addMesh( mesh, params ) {\n\n\t\tif ( this.meshes.indexOf( mesh ) >= 0 ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._addMesh: '\n\t\t\t\t+ 'SkinnedMesh \\'' + mesh.name + '\\' has already been added.' );\n\n\t\t}\n\n\t\tthis.meshes.push( mesh );\n\t\tthis.objects.set( mesh, { looped: false } );\n\n\t\tthis._setupMeshAnimation( mesh, params.animation );\n\n\t\tif ( params.physics !== false ) {\n\n\t\t\tthis._setupMeshPhysics( mesh, params );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t_setupCamera( camera, params ) {\n\n\t\tif ( this.camera === camera ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._setupCamera: '\n\t\t\t\t+ 'Camera \\'' + camera.name + '\\' has already been set.' );\n\n\t\t}\n\n\t\tif ( this.camera ) this.clearCamera( this.camera );\n\n\t\tthis.camera = camera;\n\n\t\tcamera.add( this.cameraTarget );\n\n\t\tthis.objects.set( camera, {} );\n\n\t\tif ( params.animation !== undefined ) {\n\n\t\t\tthis._setupCameraAnimation( camera, params.animation );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t_setupAudio( audio, params ) {\n\n\t\tif ( this.audio === audio ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._setupAudio: '\n\t\t\t\t+ 'Audio \\'' + audio.name + '\\' has already been set.' );\n\n\t\t}\n\n\t\tif ( this.audio ) this.clearAudio( this.audio );\n\n\t\tthis.audio = audio;\n\t\tthis.audioManager = new AudioManager( audio, params );\n\n\t\tthis.objects.set( this.audioManager, {\n\t\t\tduration: this.audioManager.duration\n\t\t} );\n\n\t\treturn this;\n\n\t}\n\n\t_removeMesh( mesh ) {\n\n\t\tlet found = false;\n\t\tlet writeIndex = 0;\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tif ( this.meshes[ i ] === mesh ) {\n\n\t\t\t\tthis.objects.delete( mesh );\n\t\t\t\tfound = true;\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tthis.meshes[ writeIndex ++ ] = this.meshes[ i ];\n\n\t\t}\n\n\t\tif ( ! found ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._removeMesh: '\n\t\t\t\t+ 'SkinnedMesh \\'' + mesh.name + '\\' has not been added yet.' );\n\n\t\t}\n\n\t\tthis.meshes.length = writeIndex;\n\n\t\treturn this;\n\n\t}\n\n\t_clearCamera( camera ) {\n\n\t\tif ( camera !== this.camera ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._clearCamera: '\n\t\t\t\t+ 'Camera \\'' + camera.name + '\\' has not been set yet.' );\n\n\t\t}\n\n\t\tthis.camera.remove( this.cameraTarget );\n\n\t\tthis.objects.delete( this.camera );\n\t\tthis.camera = null;\n\n\t\treturn this;\n\n\t}\n\n\t_clearAudio( audio ) {\n\n\t\tif ( audio !== this.audio ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper._clearAudio: '\n\t\t\t\t+ 'Audio \\'' + audio.name + '\\' has not been set yet.' );\n\n\t\t}\n\n\t\tthis.objects.delete( this.audioManager );\n\n\t\tthis.audio = null;\n\t\tthis.audioManager = null;\n\n\t\treturn this;\n\n\t}\n\n\t_setupMeshAnimation( mesh, animation ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\tif ( animation !== undefined ) {\n\n\t\t\tconst animations = Array.isArray( animation )\n\t\t\t\t? animation : [ animation ];\n\n\t\t\tobjects.mixer = new AnimationMixer( mesh );\n\n\t\t\tfor ( let i = 0, il = animations.length; i < il; i ++ ) {\n\n\t\t\t\tobjects.mixer.clipAction( animations[ i ] ).play();\n\n\t\t\t}\n\n\t\t\t// TODO: find a workaround not to access ._clip looking like a private property\n\t\t\tobjects.mixer.addEventListener( 'loop', function ( event ) {\n\n\t\t\t\tconst tracks = event.action._clip.tracks;\n\n\t\t\t\tif ( tracks.length > 0 && tracks[ 0 ].name.slice( 0, 6 ) !== '.bones' ) return;\n\n\t\t\t\tobjects.looped = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t\tobjects.ikSolver = this._createCCDIKSolver( mesh );\n\t\tobjects.grantSolver = this.createGrantSolver( mesh );\n\n\t\treturn this;\n\n\t}\n\n\t_setupCameraAnimation( camera, animation ) {\n\n\t\tconst animations = Array.isArray( animation )\n\t\t\t? animation : [ animation ];\n\n\t\tconst objects = this.objects.get( camera );\n\n\t\tobjects.mixer = new AnimationMixer( camera );\n\n\t\tfor ( let i = 0, il = animations.length; i < il; i ++ ) {\n\n\t\t\tobjects.mixer.clipAction( animations[ i ] ).play();\n\n\t\t}\n\n\t}\n\n\t_setupMeshPhysics( mesh, params ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\t// shared physics is experimental\n\n\t\tif ( params.world === undefined && this.sharedPhysics ) {\n\n\t\t\tconst masterPhysics = this._getMasterPhysics();\n\n\t\t\tif ( masterPhysics !== null ) world = masterPhysics.world; // eslint-disable-line no-undef\n\n\t\t}\n\n\t\tobjects.physics = this._createMMDPhysics( mesh, params );\n\n\t\tif ( objects.mixer && params.animationWarmup !== false ) {\n\n\t\t\tthis._animateMesh( mesh, 0 );\n\t\t\tobjects.physics.reset();\n\n\t\t}\n\n\t\tobjects.physics.warmup( params.warmup !== undefined ? params.warmup : 60 );\n\n\t\tthis._optimizeIK( mesh, true );\n\n\t}\n\n\t_animateMesh( mesh, delta ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\tconst mixer = objects.mixer;\n\t\tconst ikSolver = objects.ikSolver;\n\t\tconst grantSolver = objects.grantSolver;\n\t\tconst physics = objects.physics;\n\t\tconst looped = objects.looped;\n\n\t\tif ( mixer && this.enabled.animation ) {\n\n\t\t\t// alternate solution to save/restore bones but less performant?\n\t\t\t//mesh.pose();\n\t\t\t//this._updatePropertyMixersBuffer( mesh );\n\n\t\t\tthis._restoreBones( mesh );\n\n\t\t\tmixer.update( delta );\n\n\t\t\tthis._saveBones( mesh );\n\n\t\t\t// PMX animation system special path\n\t\t\tif ( this.configuration.pmxAnimation &&\n\t\t\t\tmesh.geometry.userData.MMD && mesh.geometry.userData.MMD.format === 'pmx' ) {\n\n\t\t\t\tif ( ! objects.sortedBonesData ) objects.sortedBonesData = this._sortBoneDataArray( mesh.geometry.userData.MMD.bones.slice() );\n\n\t\t\t\tthis._animatePMXMesh(\n\t\t\t\t\tmesh,\n\t\t\t\t\tobjects.sortedBonesData,\n\t\t\t\t\tikSolver && this.enabled.ik ? ikSolver : null,\n\t\t\t\t\tgrantSolver && this.enabled.grant ? grantSolver : null\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\tif ( ikSolver && this.enabled.ik ) {\n\n\t\t\t\t\tmesh.updateMatrixWorld( true );\n\t\t\t\t\tikSolver.update();\n\n\t\t\t\t}\n\n\t\t\t\tif ( grantSolver && this.enabled.grant ) {\n\n\t\t\t\t\tgrantSolver.update();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( looped === true && this.enabled.physics ) {\n\n\t\t\tif ( physics && this.configuration.resetPhysicsOnLoop ) physics.reset();\n\n\t\t\tobjects.looped = false;\n\n\t\t}\n\n\t\tif ( physics && this.enabled.physics && ! this.sharedPhysics ) {\n\n\t\t\tthis.onBeforePhysics( mesh );\n\t\t\tphysics.update( delta );\n\n\t\t}\n\n\t}\n\n\t// Sort bones in order by 1. transformationClass and 2. bone index.\n\t// In PMX animation system, bone transformations should be processed\n\t// in this order.\n\t_sortBoneDataArray( boneDataArray ) {\n\n\t\treturn boneDataArray.sort( function ( a, b ) {\n\n\t\t\tif ( a.transformationClass !== b.transformationClass ) {\n\n\t\t\t\treturn a.transformationClass - b.transformationClass;\n\n\t\t\t} else {\n\n\t\t\t\treturn a.index - b.index;\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t// PMX Animation system is a bit too complex and doesn't great match to\n\t// Three.js Animation system. This method attempts to simulate it as much as\n\t// possible but doesn't perfectly simulate.\n\t// This method is more costly than the regular one so\n\t// you are recommended to set constructor parameter \"pmxAnimation: true\"\n\t// only if your PMX model animation doesn't work well.\n\t// If you need better method you would be required to write your own.\n\t_animatePMXMesh( mesh, sortedBonesData, ikSolver, grantSolver ) {\n\n\t\t_quaternionIndex = 0;\n\t\t_grantResultMap.clear();\n\n\t\tfor ( let i = 0, il = sortedBonesData.length; i < il; i ++ ) {\n\n\t\t\tupdateOne( mesh, sortedBonesData[ i ].index, ikSolver, grantSolver );\n\n\t\t}\n\n\t\tmesh.updateMatrixWorld( true );\n\t\treturn this;\n\n\t}\n\n\t_animateCamera( camera, delta ) {\n\n\t\tconst mixer = this.objects.get( camera ).mixer;\n\n\t\tif ( mixer && this.enabled.cameraAnimation ) {\n\n\t\t\tmixer.update( delta );\n\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t\tcamera.up.set( 0, 1, 0 );\n\t\t\tcamera.up.applyQuaternion( camera.quaternion );\n\t\t\tcamera.lookAt( this.cameraTarget.position );\n\n\t\t}\n\n\t}\n\n\t_optimizeIK( mesh, physicsEnabled ) {\n\n\t\tconst iks = mesh.geometry.userData.MMD.iks;\n\t\tconst bones = mesh.geometry.userData.MMD.bones;\n\n\t\tfor ( let i = 0, il = iks.length; i < il; i ++ ) {\n\n\t\t\tconst ik = iks[ i ];\n\t\t\tconst links = ik.links;\n\n\t\t\tfor ( let j = 0, jl = links.length; j < jl; j ++ ) {\n\n\t\t\t\tconst link = links[ j ];\n\n\t\t\t\tif ( physicsEnabled === true ) {\n\n\t\t\t\t\t// disable IK of the bone the corresponding rigidBody type of which is 1 or 2\n\t\t\t\t\t// because its rotation will be overriden by physics\n\t\t\t\t\tlink.enabled = bones[ link.index ].rigidBodyType > 0 ? false : true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlink.enabled = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_createCCDIKSolver( mesh ) {\n\n\t\tif ( CCDIKSolver === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.MMDAnimationHelper: Import CCDIKSolver.' );\n\n\t\t}\n\n\t\treturn new CCDIKSolver( mesh, mesh.geometry.userData.MMD.iks );\n\n\t}\n\n\t_createMMDPhysics( mesh, params ) {\n\n\t\tif ( MMDPhysics === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.MMDPhysics: Import MMDPhysics.' );\n\n\t\t}\n\n\t\treturn new MMDPhysics(\n\t\t\tmesh,\n\t\t\tmesh.geometry.userData.MMD.rigidBodies,\n\t\t\tmesh.geometry.userData.MMD.constraints,\n\t\t\tparams );\n\n\t}\n\n\t/*\n\t * Detects the longest duration and then sets it to them to sync.\n\t * TODO: Not to access private properties ( ._actions and ._clip )\n\t */\n\t_syncDuration() {\n\n\t\tlet max = 0.0;\n\n\t\tconst objects = this.objects;\n\t\tconst meshes = this.meshes;\n\t\tconst camera = this.camera;\n\t\tconst audioManager = this.audioManager;\n\n\t\t// get the longest duration\n\n\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\tconst mixer = this.objects.get( meshes[ i ] ).mixer;\n\n\t\t\tif ( mixer === undefined ) continue;\n\n\t\t\tfor ( let j = 0; j < mixer._actions.length; j ++ ) {\n\n\t\t\t\tconst clip = mixer._actions[ j ]._clip;\n\n\t\t\t\tif ( ! objects.has( clip ) ) {\n\n\t\t\t\t\tobjects.set( clip, {\n\t\t\t\t\t\tduration: clip.duration\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tmax = Math.max( max, objects.get( clip ).duration );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( camera !== null ) {\n\n\t\t\tconst mixer = this.objects.get( camera ).mixer;\n\n\t\t\tif ( mixer !== undefined ) {\n\n\t\t\t\tfor ( let i = 0, il = mixer._actions.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst clip = mixer._actions[ i ]._clip;\n\n\t\t\t\t\tif ( ! objects.has( clip ) ) {\n\n\t\t\t\t\t\tobjects.set( clip, {\n\t\t\t\t\t\t\tduration: clip.duration\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmax = Math.max( max, objects.get( clip ).duration );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( audioManager !== null ) {\n\n\t\t\tmax = Math.max( max, objects.get( audioManager ).duration );\n\n\t\t}\n\n\t\tmax += this.configuration.afterglow;\n\n\t\t// update the duration\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tconst mixer = this.objects.get( this.meshes[ i ] ).mixer;\n\n\t\t\tif ( mixer === undefined ) continue;\n\n\t\t\tfor ( let j = 0, jl = mixer._actions.length; j < jl; j ++ ) {\n\n\t\t\t\tmixer._actions[ j ]._clip.duration = max;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( camera !== null ) {\n\n\t\t\tconst mixer = this.objects.get( camera ).mixer;\n\n\t\t\tif ( mixer !== undefined ) {\n\n\t\t\t\tfor ( let i = 0, il = mixer._actions.length; i < il; i ++ ) {\n\n\t\t\t\t\tmixer._actions[ i ]._clip.duration = max;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( audioManager !== null ) {\n\n\t\t\taudioManager.duration = max;\n\n\t\t}\n\n\t}\n\n\t// workaround\n\n\t_updatePropertyMixersBuffer( mesh ) {\n\n\t\tconst mixer = this.objects.get( mesh ).mixer;\n\n\t\tconst propertyMixers = mixer._bindings;\n\t\tconst accuIndex = mixer._accuIndex;\n\n\t\tfor ( let i = 0, il = propertyMixers.length; i < il; i ++ ) {\n\n\t\t\tconst propertyMixer = propertyMixers[ i ];\n\t\t\tconst buffer = propertyMixer.buffer;\n\t\t\tconst stride = propertyMixer.valueSize;\n\t\t\tconst offset = ( accuIndex + 1 ) * stride;\n\n\t\t\tpropertyMixer.binding.getValue( buffer, offset );\n\n\t\t}\n\n\t}\n\n\t/*\n\t * Avoiding these two issues by restore/save bones before/after mixer animation.\n\t *\n\t * 1. PropertyMixer used by AnimationMixer holds cache value in .buffer.\n\t *    Calculating IK, Grant, and Physics after mixer animation can break\n\t *    the cache coherency.\n\t *\n\t * 2. Applying Grant two or more times without reset the posing breaks model.\n\t */\n\t_saveBones( mesh ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\tconst bones = mesh.skeleton.bones;\n\n\t\tlet backupBones = objects.backupBones;\n\n\t\tif ( backupBones === undefined ) {\n\n\t\t\tbackupBones = new Float32Array( bones.length * 7 );\n\t\t\tobjects.backupBones = backupBones;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tbone.position.toArray( backupBones, i * 7 );\n\t\t\tbone.quaternion.toArray( backupBones, i * 7 + 3 );\n\n\t\t}\n\n\t}\n\n\t_restoreBones( mesh ) {\n\n\t\tconst objects = this.objects.get( mesh );\n\n\t\tconst backupBones = objects.backupBones;\n\n\t\tif ( backupBones === undefined ) return;\n\n\t\tconst bones = mesh.skeleton.bones;\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tbone.position.fromArray( backupBones, i * 7 );\n\t\t\tbone.quaternion.fromArray( backupBones, i * 7 + 3 );\n\n\t\t}\n\n\t}\n\n\t// experimental\n\n\t_getMasterPhysics() {\n\n\t\tif ( this.masterPhysics !== null ) return this.masterPhysics;\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tconst physics = this.meshes[ i ].physics;\n\n\t\t\tif ( physics !== undefined && physics !== null ) {\n\n\t\t\t\tthis.masterPhysics = physics;\n\t\t\t\treturn this.masterPhysics;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_updateSharedPhysics( delta ) {\n\n\t\tif ( this.meshes.length === 0 || ! this.enabled.physics || ! this.sharedPhysics ) return;\n\n\t\tconst physics = this._getMasterPhysics();\n\n\t\tif ( physics === null ) return;\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tconst p = this.meshes[ i ].physics;\n\n\t\t\tif ( p !== null && p !== undefined ) {\n\n\t\t\t\tp.updateRigidBodies();\n\n\t\t\t}\n\n\t\t}\n\n\t\tphysics.stepSimulation( delta );\n\n\t\tfor ( let i = 0, il = this.meshes.length; i < il; i ++ ) {\n\n\t\t\tconst p = this.meshes[ i ].physics;\n\n\t\t\tif ( p !== null && p !== undefined ) {\n\n\t\t\t\tp.updateBones();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n// Keep working quaternions for less GC\nconst _quaternions = [];\nlet _quaternionIndex = 0;\n\nfunction getQuaternion() {\n\n\tif ( _quaternionIndex >= _quaternions.length ) {\n\n\t\t_quaternions.push( new Quaternion() );\n\n\t}\n\n\treturn _quaternions[ _quaternionIndex ++ ];\n\n}\n\n// Save rotation whose grant and IK are already applied\n// used by grant children\nconst _grantResultMap = new Map();\n\nfunction updateOne( mesh, boneIndex, ikSolver, grantSolver ) {\n\n\tconst bones = mesh.skeleton.bones;\n\tconst bonesData = mesh.geometry.userData.MMD.bones;\n\tconst boneData = bonesData[ boneIndex ];\n\tconst bone = bones[ boneIndex ];\n\n\t// Return if already updated by being referred as a grant parent.\n\tif ( _grantResultMap.has( boneIndex ) ) return;\n\n\tconst quaternion = getQuaternion();\n\n\t// Initialize grant result here to prevent infinite loop.\n\t// If it's referred before updating with actual result later\n\t// result without applyting IK or grant is gotten\n\t// but better than composing of infinite loop.\n\t_grantResultMap.set( boneIndex, quaternion.copy( bone.quaternion ) );\n\n\t// @TODO: Support global grant and grant position\n\tif ( grantSolver && boneData.grant &&\n\t\t! boneData.grant.isLocal && boneData.grant.affectRotation ) {\n\n\t\tconst parentIndex = boneData.grant.parentIndex;\n\t\tconst ratio = boneData.grant.ratio;\n\n\t\tif ( ! _grantResultMap.has( parentIndex ) ) {\n\n\t\t\tupdateOne( mesh, parentIndex, ikSolver, grantSolver );\n\n\t\t}\n\n\t\tgrantSolver.addGrantRotation( bone, _grantResultMap.get( parentIndex ), ratio );\n\n\t}\n\n\tif ( ikSolver && boneData.ik ) {\n\n\t\t// @TODO: Updating world matrices every time solving an IK bone is\n\t\t// costly. Optimize if possible.\n\t\tmesh.updateMatrixWorld( true );\n\t\tikSolver.updateOne( boneData.ik );\n\n\t\t// No confident, but it seems the grant results with ik links should be updated?\n\t\tconst links = boneData.ik.links;\n\n\t\tfor ( let i = 0, il = links.length; i < il; i ++ ) {\n\n\t\t\tconst link = links[ i ];\n\n\t\t\tif ( link.enabled === false ) continue;\n\n\t\t\tconst linkIndex = link.index;\n\n\t\t\tif ( _grantResultMap.has( linkIndex ) ) {\n\n\t\t\t\t_grantResultMap.set( linkIndex, _grantResultMap.get( linkIndex ).copy( bones[ linkIndex ].quaternion ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// Update with the actual result here\n\tquaternion.copy( bone.quaternion );\n\n}\n\n//\n\nclass AudioManager {\n\n\t/**\n\t * @param {THREE.Audio} audio\n\t * @param {Object} params - (optional)\n\t * @param {Nuumber} params.delayTime\n\t */\n\tconstructor( audio, params = {} ) {\n\n\t\tthis.audio = audio;\n\n\t\tthis.elapsedTime = 0.0;\n\t\tthis.currentTime = 0.0;\n\t\tthis.delayTime = params.delayTime !== undefined\n\t\t\t? params.delayTime : 0.0;\n\n\t\tthis.audioDuration = this.audio.buffer.duration;\n\t\tthis.duration = this.audioDuration + this.delayTime;\n\n\t}\n\n\t/**\n\t * @param {Number} delta\n\t * @return {AudioManager}\n\t */\n\tcontrol( delta ) {\n\n\t\tthis.elapsed += delta;\n\t\tthis.currentTime += delta;\n\n\t\tif ( this._shouldStopAudio() ) this.audio.stop();\n\t\tif ( this._shouldStartAudio() ) this.audio.play();\n\n\t\treturn this;\n\n\t}\n\n\t// private methods\n\n\t_shouldStartAudio() {\n\n\t\tif ( this.audio.isPlaying ) return false;\n\n\t\twhile ( this.currentTime >= this.duration ) {\n\n\t\t\tthis.currentTime -= this.duration;\n\n\t\t}\n\n\t\tif ( this.currentTime < this.delayTime ) return false;\n\n\t\t// 'duration' can be bigger than 'audioDuration + delayTime' because of sync configuration\n\t\tif ( ( this.currentTime - this.delayTime ) > this.audioDuration ) return false;\n\n\t\treturn true;\n\n\t}\n\n\t_shouldStopAudio() {\n\n\t\treturn this.audio.isPlaying &&\n\t\t\tthis.currentTime >= this.duration;\n\n\t}\n\n}\n\nconst _q = new Quaternion();\n\n/**\n * Solver for Grant (Fuyo in Japanese. I just google translated because\n * Fuyo may be MMD specific term and may not be common word in 3D CG terms.)\n * Grant propagates a bone's transform to other bones transforms even if\n * they are not children.\n * @param {THREE.SkinnedMesh} mesh\n * @param {Array<Object>} grants\n */\nclass GrantSolver {\n\n\tconstructor( mesh, grants = [] ) {\n\n\t\tthis.mesh = mesh;\n\t\tthis.grants = grants;\n\n\t}\n\n\t/**\n\t * Solve all the grant bones\n\t * @return {GrantSolver}\n\t */\n\tupdate() {\n\n\t\tconst grants = this.grants;\n\n\t\tfor ( let i = 0, il = grants.length; i < il; i ++ ) {\n\n\t\t\tthis.updateOne( grants[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Solve a grant bone\n\t * @param {Object} grant - grant parameter\n\t * @return {GrantSolver}\n\t */\n\tupdateOne( grant ) {\n\n\t\tconst bones = this.mesh.skeleton.bones;\n\t\tconst bone = bones[ grant.index ];\n\t\tconst parentBone = bones[ grant.parentIndex ];\n\n\t\tif ( grant.isLocal ) {\n\n\t\t\t// TODO: implement\n\t\t\tif ( grant.affectPosition ) {\n\n\t\t\t}\n\n\t\t\t// TODO: implement\n\t\t\tif ( grant.affectRotation ) {\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// TODO: implement\n\t\t\tif ( grant.affectPosition ) {\n\n\t\t\t}\n\n\t\t\tif ( grant.affectRotation ) {\n\n\t\t\t\tthis.addGrantRotation( bone, parentBone.quaternion, grant.ratio );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddGrantRotation( bone, q, ratio ) {\n\n\t\t_q.set( 0, 0, 0, 1 );\n\t\t_q.slerp( q, ratio );\n\t\tbone.quaternion.multiply( _q );\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { MMDAnimationHelper };\n","import{typeOf as e,isElement as t,isValidElementType as n}from\"react-is\";import r,{useState as o,useContext as i,useMemo as s,useEffect as a,useRef as c,createElement as u,useDebugValue as l,useLayoutEffect as d}from\"react\";import h from\"shallowequal\";import p from\"@emotion/stylis\";import f from\"@emotion/unitless\";import m from\"@emotion/is-prop-valid\";import y from\"hoist-non-react-statics\";function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=function(e,t){for(var n=[e[0]],r=0,o=t.length;r<o;r+=1)n.push(t[r],e[r+1]);return n},S=function(t){return null!==t&&\"object\"==typeof t&&\"[object Object]\"===(t.toString?t.toString():Object.prototype.toString.call(t))&&!e(t)},w=Object.freeze([]),E=Object.freeze({});function b(e){return\"function\"==typeof e}function _(e){return\"production\"!==process.env.NODE_ENV&&\"string\"==typeof e&&e||e.displayName||e.name||\"Component\"}function N(e){return e&&\"string\"==typeof e.styledComponentId}var A=\"undefined\"!=typeof process&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||\"data-styled\",C=\"5.3.0\",I=\"undefined\"!=typeof window&&\"HTMLElement\"in window,P=Boolean(\"boolean\"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:\"undefined\"!=typeof process&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&\"\"!==process.env.REACT_APP_SC_DISABLE_SPEEDY?\"false\"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:\"undefined\"!=typeof process&&void 0!==process.env.SC_DISABLE_SPEEDY&&\"\"!==process.env.SC_DISABLE_SPEEDY?\"false\"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY:\"production\"!==process.env.NODE_ENV),O={},R=\"production\"!==process.env.NODE_ENV?{1:\"Cannot create styled-component for component: %s.\\n\\n\",2:\"Can't collect styles once you've consumed a `ServerStyleSheet`'s styles! `ServerStyleSheet` is a one off instance for each server-side render cycle.\\n\\n- Are you trying to reuse it across renders?\\n- Are you accidentally calling collectStyles twice?\\n\\n\",3:\"Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.\\n\\n\",4:\"The `StyleSheetManager` expects a valid target or sheet prop!\\n\\n- Does this error occur on the client and is your target falsy?\\n- Does this error occur on the server and is the sheet falsy?\\n\\n\",5:\"The clone method cannot be used on the client!\\n\\n- Are you running in a client-like environment on the server?\\n- Are you trying to run SSR on the client?\\n\\n\",6:\"Trying to insert a new style tag, but the given Node is unmounted!\\n\\n- Are you using a custom target that isn't mounted?\\n- Does your document not have a valid head element?\\n- Have you accidentally removed a style tag manually?\\n\\n\",7:'ThemeProvider: Please return an object from your \"theme\" prop function, e.g.\\n\\n```js\\ntheme={() => ({})}\\n```\\n\\n',8:'ThemeProvider: Please make your \"theme\" prop an object.\\n\\n',9:\"Missing document `<head>`\\n\\n\",10:\"Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021\\n\\n\",11:\"_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.\\n\\n\",12:\"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\\\`\\\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\\n\\n\",13:\"%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.\\n\\n\",14:'ThemeProvider: \"theme\" prop is required.\\n\\n',15:\"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\\n\\n```js\\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\\n```\\n\\n\",16:\"Reached the limit of how many styled components may be created at group %s.\\nYou may only create up to 1,073,741,824 components. If you're creating components dynamically,\\nas for instance in your render method then you may be running into this limitation.\\n\\n\",17:\"CSSStyleSheet could not be found on HTMLStyleElement.\\nHas styled-components' style tag been unmounted or altered by another script?\\n\"}:{};function D(){for(var e=arguments.length<=0?void 0:arguments[0],t=[],n=1,r=arguments.length;n<r;n+=1)t.push(n<0||arguments.length<=n?void 0:arguments[n]);return t.forEach((function(t){e=e.replace(/%[a-z]/,t)})),e}function j(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw\"production\"===process.env.NODE_ENV?new Error(\"An error occurred. See https://git.io/JUIaE#\"+e+\" for more information.\"+(n.length>0?\" Args: \"+n.join(\", \"):\"\")):new Error(D.apply(void 0,[R[e]].concat(n)).trim())}var T=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,o=r;e>=o;)(o<<=1)<0&&j(16,\"\"+e);this.groupSizes=new Uint32Array(o),this.groupSizes.set(n),this.length=o;for(var i=r;i<o;i++)this.groupSizes[i]=0}for(var s=this.indexOfGroup(e+1),a=0,c=t.length;a<c;a++)this.tag.insertRule(s,t[a])&&(this.groupSizes[e]++,s++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var o=n;o<r;o++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t=\"\";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),o=r+n,i=r;i<o;i++)t+=this.tag.getRule(i)+\"/*!sc*/\\n\";return t},e}(),k=new Map,x=new Map,V=1,B=function(e){if(k.has(e))return k.get(e);for(;x.has(V);)V++;var t=V++;return\"production\"!==process.env.NODE_ENV&&((0|t)<0||t>1<<30)&&j(16,\"\"+t),k.set(e,t),x.set(t,e),t},M=function(e){return x.get(e)},z=function(e,t){k.set(e,t),x.set(t,e)},L=\"style[\"+A+'][data-styled-version=\"5.3.0\"]',G=new RegExp(\"^\"+A+'\\\\.g(\\\\d+)\\\\[id=\"([\\\\w\\\\d-]+)\"\\\\].*?\"([^\"]*)'),F=function(e,t,n){for(var r,o=n.split(\",\"),i=0,s=o.length;i<s;i++)(r=o[i])&&e.registerName(t,r)},Y=function(e,t){for(var n=t.innerHTML.split(\"/*!sc*/\\n\"),r=[],o=0,i=n.length;o<i;o++){var s=n[o].trim();if(s){var a=s.match(G);if(a){var c=0|parseInt(a[1],10),u=a[2];0!==c&&(z(u,c),F(e,u,a[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(s)}}},q=function(){return\"undefined\"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},H=function(e){var t=document.head,n=e||t,r=document.createElement(\"style\"),o=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(A))return r}}(n),i=void 0!==o?o.nextSibling:null;r.setAttribute(A,\"active\"),r.setAttribute(\"data-styled-version\",\"5.3.0\");var s=q();return s&&r.setAttribute(\"nonce\",s),n.insertBefore(r,i),r},$=function(){function e(e){var t=this.element=H(e);t.appendChild(document.createTextNode(\"\")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var o=t[n];if(o.ownerNode===e)return o}j(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&\"string\"==typeof t.cssText?t.cssText:\"\"},e}(),W=function(){function e(e){var t=this.element=H(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:\"\"},e}(),U=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:\"\"},e}(),J=I,X={isServer:!I,useCSSOMInjection:!P},Z=function(){function e(e,t,n){void 0===e&&(e=E),void 0===t&&(t={}),this.options=v({},X,{},e),this.gs=t,this.names=new Map(n),!this.options.isServer&&I&&J&&(J=!1,function(e){for(var t=document.querySelectorAll(L),n=0,r=t.length;n<r;n++){var o=t[n];o&&\"active\"!==o.getAttribute(A)&&(Y(e,o),o.parentNode&&o.parentNode.removeChild(o))}}(this))}e.registerId=function(e){return B(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(v({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,o=t.target,e=n?new U(o):r?new $(o):new W(o),new T(e)));var e,t,n,r,o},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(B(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(B(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(B(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r=\"\",o=0;o<n;o++){var i=M(o);if(void 0!==i){var s=e.names.get(i),a=t.getGroup(o);if(void 0!==s&&0!==a.length){var c=A+\".g\"+o+'[id=\"'+i+'\"]',u=\"\";void 0!==s&&s.forEach((function(e){e.length>0&&(u+=e+\",\")})),r+=\"\"+a+c+'{content:\"'+u+'\"}/*!sc*/\\n'}}}return r}(this)},e}(),K=/(a)(d)/gi,Q=function(e){return String.fromCharCode(e+(e>25?39:97))};function ee(e){var t,n=\"\";for(t=Math.abs(e);t>52;t=t/52|0)n=Q(t%52)+n;return(Q(t%52)+n).replace(K,\"$1-$2\")}var te=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ne=function(e){return te(5381,e)};function re(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(b(n)&&!N(n))return!1}return!0}var oe=ne(\"5.3.0\"),ie=function(){function e(e,t,n){this.rules=e,this.staticRulesId=\"\",this.isStatic=\"production\"===process.env.NODE_ENV&&(void 0===n||n.isStatic)&&re(e),this.componentId=t,this.baseHash=te(oe,t),this.baseStyle=n,Z.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))o.push(this.staticRulesId);else{var i=Ne(this.rules,e,t,n).join(\"\"),s=ee(te(this.baseHash,i.length)>>>0);if(!t.hasNameForId(r,s)){var a=n(i,\".\"+s,void 0,r);t.insertRules(r,s,a)}o.push(s),this.staticRulesId=s}else{for(var c=this.rules.length,u=te(this.baseHash,n.hash),l=\"\",d=0;d<c;d++){var h=this.rules[d];if(\"string\"==typeof h)l+=h,\"production\"!==process.env.NODE_ENV&&(u=te(u,h+d));else if(h){var p=Ne(h,e,t,n),f=Array.isArray(p)?p.join(\"\"):p;u=te(u,f+d),l+=f}}if(l){var m=ee(u>>>0);if(!t.hasNameForId(r,m)){var y=n(l,\".\"+m,void 0,r);t.insertRules(r,m,y)}o.push(m)}}return o.join(\" \")},e}(),se=/^\\s*\\/\\/.*$/gm,ae=[\":\",\"[\",\".\",\"#\"];function ce(e){var t,n,r,o,i=void 0===e?E:e,s=i.options,a=void 0===s?E:s,c=i.plugins,u=void 0===c?w:c,l=new p(a),d=[],h=function(e){function t(t){if(t)try{e(t+\"}\")}catch(e){}}return function(n,r,o,i,s,a,c,u,l,d){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+\";\"),\"\";break;case 2:if(0===u)return r+\"/*|*/\";break;case 3:switch(u){case 102:case 112:return e(o[0]+r),\"\";default:return r+(0===d?\"/*|*/\":\"\")}case-2:r.split(\"/*|*/}\").forEach(t)}}}((function(e){d.push(e)})),f=function(e,r,i){return 0===r&&-1!==ae.indexOf(i[n.length])||i.match(o)?e:\".\"+t};function m(e,i,s,a){void 0===a&&(a=\"&\");var c=e.replace(se,\"\"),u=i&&s?s+\" \"+i+\" { \"+c+\" }\":c;return t=a,n=i,r=new RegExp(\"\\\\\"+n+\"\\\\b\",\"g\"),o=new RegExp(\"(\\\\\"+n+\"\\\\b){2,}\"),l(s||!i?\"\":i,u)}return l.use([].concat(u,[function(e,t,o){2===e&&o.length&&o[0].lastIndexOf(n)>0&&(o[0]=o[0].replace(r,f))},h,function(e){if(-2===e){var t=d;return d=[],t}}])),m.hash=u.length?u.reduce((function(e,t){return t.name||j(15),te(e,t.name)}),5381).toString():\"\",m}var ue=r.createContext(),le=ue.Consumer,de=r.createContext(),he=(de.Consumer,new Z),pe=ce();function fe(){return i(ue)||he}function me(){return i(de)||pe}function ye(e){var t=o(e.stylisPlugins),n=t[0],i=t[1],c=fe(),u=s((function(){var t=c;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),l=s((function(){return ce({options:{prefix:!e.disableVendorPrefixes},plugins:n})}),[e.disableVendorPrefixes,n]);return a((function(){h(n,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),r.createElement(ue.Provider,{value:u},r.createElement(de.Provider,{value:l},\"production\"!==process.env.NODE_ENV?r.Children.only(e.children):e.children))}var ve=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=pe);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,\"@keyframes\"))},this.toString=function(){return j(12,String(n.name))},this.name=e,this.id=\"sc-keyframes-\"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=pe),this.name+e.hash},e}(),ge=/([A-Z])/,Se=/([A-Z])/g,we=/^ms-/,Ee=function(e){return\"-\"+e.toLowerCase()};function be(e){return ge.test(e)?e.replace(Se,Ee).replace(we,\"-ms-\"):e}var _e=function(e){return null==e||!1===e||\"\"===e};function Ne(e,n,r,o){if(Array.isArray(e)){for(var i,s=[],a=0,c=e.length;a<c;a+=1)\"\"!==(i=Ne(e[a],n,r,o))&&(Array.isArray(i)?s.push.apply(s,i):s.push(i));return s}if(_e(e))return\"\";if(N(e))return\".\"+e.styledComponentId;if(b(e)){if(\"function\"!=typeof(l=e)||l.prototype&&l.prototype.isReactComponent||!n)return e;var u=e(n);return\"production\"!==process.env.NODE_ENV&&t(u)&&console.warn(_(e)+\" is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.\"),Ne(u,n,r,o)}var l;return e instanceof ve?r?(e.inject(r,o),e.getName(o)):e:S(e)?function e(t,n){var r,o,i=[];for(var s in t)t.hasOwnProperty(s)&&!_e(t[s])&&(S(t[s])?i.push.apply(i,e(t[s],s)):b(t[s])?i.push(be(s)+\":\",t[s],\";\"):i.push(be(s)+\": \"+(r=s,null==(o=t[s])||\"boolean\"==typeof o||\"\"===o?\"\":\"number\"!=typeof o||0===o||r in f?String(o).trim():o+\"px\")+\";\"));return n?[n+\" {\"].concat(i,[\"}\"]):i}(e):e.toString()}function Ae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return b(e)||S(e)?Ne(g(w,[e].concat(n))):0===n.length&&1===e.length&&\"string\"==typeof e[0]?e:Ne(g(e,n))}var Ce=/invalid hook call/i,Ie=new Set,Pe=function(e,t){if(\"production\"!==process.env.NODE_ENV){var n=\"The component \"+e+(t?' with the id of \"'+t+'\"':\"\")+\" has been created dynamically.\\nYou may see this warning because you've called styled inside another component.\\nTo resolve this only create new StyledComponents outside of any render method and function component.\";try{c(),Ie.has(n)||(console.warn(n),Ie.add(n))}catch(e){Ce.test(e.message)&&Ie.delete(n)}}},Oe=function(e,t,n){return void 0===n&&(n=E),e.theme!==n.theme&&e.theme||t||n.theme},Re=/[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~-]+/g,De=/(^-|-$)/g;function je(e){return e.replace(Re,\"-\").replace(De,\"\")}var Te=function(e){return ee(ne(e)>>>0)};function ke(e){return\"string\"==typeof e&&(\"production\"===process.env.NODE_ENV||e.charAt(0)===e.charAt(0).toLowerCase())}var xe=function(e){return\"function\"==typeof e||\"object\"==typeof e&&null!==e&&!Array.isArray(e)},Ve=function(e){return\"__proto__\"!==e&&\"constructor\"!==e&&\"prototype\"!==e};function Be(e,t,n){var r=e[n];xe(t)&&xe(r)?Me(r,t):e[n]=t}function Me(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var o=0,i=n;o<i.length;o++){var s=i[o];if(xe(s))for(var a in s)Ve(a)&&Be(e,s[a],a)}return e}var ze=r.createContext(),Le=ze.Consumer;function Ge(e){var t=i(ze),n=s((function(){return function(e,t){if(!e)return j(14);if(b(e)){var n=e(t);return\"production\"===process.env.NODE_ENV||null!==n&&!Array.isArray(n)&&\"object\"==typeof n?n:j(7)}return Array.isArray(e)||\"object\"!=typeof e?j(8):t?v({},t,{},e):e}(e.theme,t)}),[e.theme,t]);return e.children?r.createElement(ze.Provider,{value:n},e.children):null}var Fe={};function Ye(e,t,n){var o=N(e),s=!ke(e),a=t.attrs,c=void 0===a?w:a,d=t.componentId,h=void 0===d?function(e,t){var n=\"string\"!=typeof e?\"sc\":je(e);Fe[n]=(Fe[n]||0)+1;var r=n+\"-\"+Te(\"5.3.0\"+n+Fe[n]);return t?t+\"-\"+r:r}(t.displayName,t.parentComponentId):d,p=t.displayName,f=void 0===p?function(e){return ke(e)?\"styled.\"+e:\"Styled(\"+_(e)+\")\"}(e):p,g=t.displayName&&t.componentId?je(t.displayName)+\"-\"+t.componentId:t.componentId||h,S=o&&e.attrs?Array.prototype.concat(e.attrs,c).filter(Boolean):c,A=t.shouldForwardProp;o&&e.shouldForwardProp&&(A=t.shouldForwardProp?function(n,r,o){return e.shouldForwardProp(n,r,o)&&t.shouldForwardProp(n,r,o)}:e.shouldForwardProp);var C,I=new ie(n,g,o?e.componentStyle:void 0),P=I.isStatic&&0===c.length,O=function(e,t){return function(e,t,n,r){var o=e.attrs,s=e.componentStyle,a=e.defaultProps,c=e.foldedComponentIds,d=e.shouldForwardProp,h=e.styledComponentId,p=e.target;\"production\"!==process.env.NODE_ENV&&l(h);var f=function(e,t,n){void 0===e&&(e=E);var r=v({},t,{theme:e}),o={};return n.forEach((function(e){var t,n,i,s=e;for(t in b(s)&&(s=s(r)),s)r[t]=o[t]=\"className\"===t?(n=o[t],i=s[t],n&&i?n+\" \"+i:n||i):s[t]})),[r,o]}(Oe(t,i(ze),a)||E,t,o),y=f[0],g=f[1],S=function(e,t,n,r){var o=fe(),i=me(),s=t?e.generateAndInjectStyles(E,o,i):e.generateAndInjectStyles(n,o,i);return\"production\"!==process.env.NODE_ENV&&l(s),\"production\"!==process.env.NODE_ENV&&!t&&r&&r(s),s}(s,r,y,\"production\"!==process.env.NODE_ENV?e.warnTooManyClasses:void 0),w=n,_=g.$as||t.$as||g.as||t.as||p,N=ke(_),A=g!==t?v({},t,{},g):t,C={};for(var I in A)\"$\"!==I[0]&&\"as\"!==I&&(\"forwardedAs\"===I?C.as=A[I]:(d?d(I,m,_):!N||m(I))&&(C[I]=A[I]));return t.style&&g.style!==t.style&&(C.style=v({},t.style,{},g.style)),C.className=Array.prototype.concat(c,h,S!==h?S:null,t.className,g.className).filter(Boolean).join(\" \"),C.ref=w,u(_,C)}(C,e,t,P)};return O.displayName=f,(C=r.forwardRef(O)).attrs=S,C.componentStyle=I,C.displayName=f,C.shouldForwardProp=A,C.foldedComponentIds=o?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):w,C.styledComponentId=g,C.target=o?e.target:e,C.withComponent=function(e){var r=t.componentId,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,[\"componentId\"]),i=r&&r+\"-\"+(ke(e)?e:je(_(e)));return Ye(e,v({},o,{attrs:S,componentId:i}),n)},Object.defineProperty(C,\"defaultProps\",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=o?Me({},e.defaultProps,t):t}}),\"production\"!==process.env.NODE_ENV&&(Pe(f,g),C.warnTooManyClasses=function(e,t){var n={},r=!1;return function(o){if(!r&&(n[o]=!0,Object.keys(n).length>=200)){var i=t?' with the id of \"'+t+'\"':\"\";console.warn(\"Over 200 classes were generated for component \"+e+i+\".\\nConsider using the attrs method, together with a style object for frequently changed styles.\\nExample:\\n  const Component = styled.div.attrs(props => ({\\n    style: {\\n      background: props.background,\\n    },\\n  }))`width: 100%;`\\n\\n  <Component />\"),r=!0,n={}}}}(f,g)),C.toString=function(){return\".\"+C.styledComponentId},s&&y(C,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),C}var qe=function(e){return function e(t,r,o){if(void 0===o&&(o=E),!n(r))return j(1,String(r));var i=function(){return t(r,o,Ae.apply(void 0,arguments))};return i.withConfig=function(n){return e(t,r,v({},o,{},n))},i.attrs=function(n){return e(t,r,v({},o,{attrs:Array.prototype.concat(o.attrs,n).filter(Boolean)}))},i}(Ye,e)};[\"a\",\"abbr\",\"address\",\"area\",\"article\",\"aside\",\"audio\",\"b\",\"base\",\"bdi\",\"bdo\",\"big\",\"blockquote\",\"body\",\"br\",\"button\",\"canvas\",\"caption\",\"cite\",\"code\",\"col\",\"colgroup\",\"data\",\"datalist\",\"dd\",\"del\",\"details\",\"dfn\",\"dialog\",\"div\",\"dl\",\"dt\",\"em\",\"embed\",\"fieldset\",\"figcaption\",\"figure\",\"footer\",\"form\",\"h1\",\"h2\",\"h3\",\"h4\",\"h5\",\"h6\",\"head\",\"header\",\"hgroup\",\"hr\",\"html\",\"i\",\"iframe\",\"img\",\"input\",\"ins\",\"kbd\",\"keygen\",\"label\",\"legend\",\"li\",\"link\",\"main\",\"map\",\"mark\",\"marquee\",\"menu\",\"menuitem\",\"meta\",\"meter\",\"nav\",\"noscript\",\"object\",\"ol\",\"optgroup\",\"option\",\"output\",\"p\",\"param\",\"picture\",\"pre\",\"progress\",\"q\",\"rp\",\"rt\",\"ruby\",\"s\",\"samp\",\"script\",\"section\",\"select\",\"small\",\"source\",\"span\",\"strong\",\"style\",\"sub\",\"summary\",\"sup\",\"table\",\"tbody\",\"td\",\"textarea\",\"tfoot\",\"th\",\"thead\",\"time\",\"title\",\"tr\",\"track\",\"u\",\"ul\",\"var\",\"video\",\"wbr\",\"circle\",\"clipPath\",\"defs\",\"ellipse\",\"foreignObject\",\"g\",\"image\",\"line\",\"linearGradient\",\"marker\",\"mask\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialGradient\",\"rect\",\"stop\",\"svg\",\"text\",\"textPath\",\"tspan\"].forEach((function(e){qe[e]=qe(e)}));var He=function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=re(e),Z.registerId(this.componentId+1)}var t=e.prototype;return t.createStyles=function(e,t,n,r){var o=r(Ne(this.rules,t,n,r).join(\"\"),\"\"),i=this.componentId+e;n.insertRules(i,i,o)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&Z.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)},e}();function $e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var s=Ae.apply(void 0,[e].concat(n)),a=\"sc-global-\"+Te(JSON.stringify(s)),u=new He(s,a);function l(e){var t=fe(),n=me(),o=i(ze),l=c(t.allocateGSInstance(a)).current;return\"production\"!==process.env.NODE_ENV&&r.Children.count(e.children)&&console.warn(\"The global style component \"+a+\" was given child JSX. createGlobalStyle does not render children.\"),\"production\"!==process.env.NODE_ENV&&s.some((function(e){return\"string\"==typeof e&&-1!==e.indexOf(\"@import\")}))&&console.warn(\"Please do not use @import CSS syntax in createGlobalStyle at this time, as the CSSOM APIs we use in production do not handle it well. Instead, we recommend using a library such as react-helmet to inject a typical <link> meta tag to the stylesheet, or simply embedding it manually in your index.html <head> section for a simpler app.\"),d((function(){return h(l,e,t,o,n),function(){return u.removeStyles(l,t)}}),[l,e,t,o,n]),null}function h(e,t,n,r,o){if(u.isStatic)u.renderStyles(e,O,n,o);else{var i=v({},t,{theme:Oe(t,r,l.defaultProps)});u.renderStyles(e,i,n,o)}}return\"production\"!==process.env.NODE_ENV&&Pe(a),r.memo(l)}function We(e){\"production\"!==process.env.NODE_ENV&&\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product&&console.warn(\"`keyframes` cannot be used on ReactNative, only on the web. To do animation in ReactNative please use Animated.\");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=Ae.apply(void 0,[e].concat(n)).join(\"\"),i=Te(o);return new ve(i,o)}var Ue=function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString(),n=q();return\"<style \"+[n&&'nonce=\"'+n+'\"',A+'=\"true\"','data-styled-version=\"5.3.0\"'].filter(Boolean).join(\" \")+\">\"+t+\"</style>\"},this.getStyleTags=function(){return e.sealed?j(2):e._emitSheetCSS()},this.getStyleElement=function(){var t;if(e.sealed)return j(2);var n=((t={})[A]=\"\",t[\"data-styled-version\"]=\"5.3.0\",t.dangerouslySetInnerHTML={__html:e.instance.toString()},t),o=q();return o&&(n.nonce=o),[r.createElement(\"style\",v({},n,{key:\"sc-0-0\"}))]},this.seal=function(){e.sealed=!0},this.instance=new Z({isServer:!0}),this.sealed=!1}var t=e.prototype;return t.collectStyles=function(e){return this.sealed?j(2):r.createElement(ye,{sheet:this.instance},e)},t.interleaveWithNodeStream=function(e){return j(3)},e}(),Je=function(e){var t=r.forwardRef((function(t,n){var o=i(ze),s=e.defaultProps,a=Oe(t,o,s);return\"production\"!==process.env.NODE_ENV&&void 0===a&&console.warn('[withTheme] You are not using a ThemeProvider nor passing a theme prop or a theme in defaultProps in component class \"'+_(e)+'\"'),r.createElement(e,v({},t,{theme:a,ref:n}))}));return y(t,e),t.displayName=\"WithTheme(\"+_(e)+\")\",t},Xe=function(){return i(ze)},Ze={StyleSheet:Z,masterSheet:he};\"production\"!==process.env.NODE_ENV&&\"undefined\"!=typeof navigator&&\"ReactNative\"===navigator.product&&console.warn(\"It looks like you've imported 'styled-components' on React Native.\\nPerhaps you're looking to import 'styled-components/native'?\\nRead more about this at https://www.styled-components.com/docs/basics#react-native\"),\"production\"!==process.env.NODE_ENV&&\"test\"!==process.env.NODE_ENV&&(window[\"__styled-components-init__\"]=window[\"__styled-components-init__\"]||0,1===window[\"__styled-components-init__\"]&&console.warn(\"It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.\\n\\nSee https://s-c.sh/2BAXzed for more info.\"),window[\"__styled-components-init__\"]+=1);export default qe;export{Ue as ServerStyleSheet,le as StyleSheetConsumer,ue as StyleSheetContext,ye as StyleSheetManager,Le as ThemeConsumer,ze as ThemeContext,Ge as ThemeProvider,Ze as __PRIVATE__,$e as createGlobalStyle,Ae as css,N as isStyledComponent,We as keyframes,Xe as useTheme,C as version,Je as withTheme};\n//# sourceMappingURL=styled-components.browser.esm.js.map\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.min.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/** @license React v0.19.1\n * scheduler.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var f,g,h,k,l;\nif(\"undefined\"===typeof window||\"function\"!==typeof MessageChannel){var p=null,q=null,t=function(){if(null!==p)try{var a=exports.unstable_now();p(!0,a);p=null}catch(b){throw setTimeout(t,0),b;}},u=Date.now();exports.unstable_now=function(){return Date.now()-u};f=function(a){null!==p?setTimeout(f,0,a):(p=a,setTimeout(t,0))};g=function(a,b){q=setTimeout(a,b)};h=function(){clearTimeout(q)};k=function(){return!1};l=exports.unstable_forceFrameRate=function(){}}else{var w=window.performance,x=window.Date,\ny=window.setTimeout,z=window.clearTimeout;if(\"undefined\"!==typeof console){var A=window.cancelAnimationFrame;\"function\"!==typeof window.requestAnimationFrame&&console.error(\"This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\");\"function\"!==typeof A&&console.error(\"This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills\")}if(\"object\"===\ntypeof w&&\"function\"===typeof w.now)exports.unstable_now=function(){return w.now()};else{var B=x.now();exports.unstable_now=function(){return x.now()-B}}var C=!1,D=null,E=-1,F=5,G=0;k=function(){return exports.unstable_now()>=G};l=function(){};exports.unstable_forceFrameRate=function(a){0>a||125<a?console.error(\"forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported\"):F=0<a?Math.floor(1E3/a):5};var H=new MessageChannel,I=H.port2;H.port1.onmessage=\nfunction(){if(null!==D){var a=exports.unstable_now();G=a+F;try{D(!0,a)?I.postMessage(null):(C=!1,D=null)}catch(b){throw I.postMessage(null),b;}}else C=!1};f=function(a){D=a;C||(C=!0,I.postMessage(null))};g=function(a,b){E=y(function(){a(exports.unstable_now())},b)};h=function(){z(E);E=-1}}function J(a,b){var c=a.length;a.push(b);a:for(;;){var d=c-1>>>1,e=a[d];if(void 0!==e&&0<K(e,b))a[d]=b,a[c]=e,c=d;else break a}}function L(a){a=a[0];return void 0===a?null:a}\nfunction M(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var d=0,e=a.length;d<e;){var m=2*(d+1)-1,n=a[m],v=m+1,r=a[v];if(void 0!==n&&0>K(n,c))void 0!==r&&0>K(r,n)?(a[d]=r,a[v]=c,d=v):(a[d]=n,a[m]=c,d=m);else if(void 0!==r&&0>K(r,c))a[d]=r,a[v]=c,d=v;else break a}}return b}return null}function K(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}var N=[],O=[],P=1,Q=null,R=3,S=!1,T=!1,U=!1;\nfunction V(a){for(var b=L(O);null!==b;){if(null===b.callback)M(O);else if(b.startTime<=a)M(O),b.sortIndex=b.expirationTime,J(N,b);else break;b=L(O)}}function W(a){U=!1;V(a);if(!T)if(null!==L(N))T=!0,f(X);else{var b=L(O);null!==b&&g(W,b.startTime-a)}}\nfunction X(a,b){T=!1;U&&(U=!1,h());S=!0;var c=R;try{V(b);for(Q=L(N);null!==Q&&(!(Q.expirationTime>b)||a&&!k());){var d=Q.callback;if(null!==d){Q.callback=null;R=Q.priorityLevel;var e=d(Q.expirationTime<=b);b=exports.unstable_now();\"function\"===typeof e?Q.callback=e:Q===L(N)&&M(N);V(b)}else M(N);Q=L(N)}if(null!==Q)var m=!0;else{var n=L(O);null!==n&&g(W,n.startTime-b);m=!1}return m}finally{Q=null,R=c,S=!1}}\nfunction Y(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var Z=l;exports.unstable_IdlePriority=5;exports.unstable_ImmediatePriority=1;exports.unstable_LowPriority=4;exports.unstable_NormalPriority=3;exports.unstable_Profiling=null;exports.unstable_UserBlockingPriority=2;exports.unstable_cancelCallback=function(a){a.callback=null};exports.unstable_continueExecution=function(){T||S||(T=!0,f(X))};\nexports.unstable_getCurrentPriorityLevel=function(){return R};exports.unstable_getFirstCallbackNode=function(){return L(N)};exports.unstable_next=function(a){switch(R){case 1:case 2:case 3:var b=3;break;default:b=R}var c=R;R=b;try{return a()}finally{R=c}};exports.unstable_pauseExecution=function(){};exports.unstable_requestPaint=Z;exports.unstable_runWithPriority=function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=R;R=a;try{return b()}finally{R=c}};\nexports.unstable_scheduleCallback=function(a,b,c){var d=exports.unstable_now();if(\"object\"===typeof c&&null!==c){var e=c.delay;e=\"number\"===typeof e&&0<e?d+e:d;c=\"number\"===typeof c.timeout?c.timeout:Y(a)}else c=Y(a),e=d;c=e+c;a={id:P++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,J(O,a),null===L(N)&&a===L(O)&&(U?h():U=!0,g(W,e-d))):(a.sortIndex=c,J(N,a),T||S||(T=!0,f(X)));return a};\nexports.unstable_shouldYield=function(){var a=exports.unstable_now();V(a);var b=L(N);return b!==Q&&null!==Q&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<Q.expirationTime||k()};exports.unstable_wrapCallback=function(a){var b=R;return function(){var c=R;R=b;try{return a.apply(this,arguments)}finally{R=c}}};\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.Normalize = exports.normalize = void 0;\n\nvar _styledComponents = require(\"styled-components\");\n\nvar normalize = (0, _styledComponents.css)([\"html{line-height:1.15;-webkit-text-size-adjust:100%;}body{margin:0;}main{display:block;}h1{font-size:2em;margin:0.67em 0;}hr{box-sizing:content-box;height:0;overflow:visible;}pre{font-family:monospace,monospace;font-size:1em;}a{background-color:transparent;}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted;}b,strong{font-weight:bolder;}code,kbd,samp{font-family:monospace,monospace;font-size:1em;}small{font-size:80%;}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;}sub{bottom:-0.25em;}sup{top:-0.5em;}img{border-style:none;}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0;}button,input{overflow:visible;}button,select{text-transform:none;}button,[type=\\\"button\\\"],[type=\\\"reset\\\"],[type=\\\"submit\\\"]{-webkit-appearance:button;}button::-moz-focus-inner,[type=\\\"button\\\"]::-moz-focus-inner,[type=\\\"reset\\\"]::-moz-focus-inner,[type=\\\"submit\\\"]::-moz-focus-inner{border-style:none;padding:0;}button:-moz-focusring,[type=\\\"button\\\"]:-moz-focusring,[type=\\\"reset\\\"]:-moz-focusring,[type=\\\"submit\\\"]:-moz-focusring{outline:1px dotted ButtonText;}fieldset{padding:0.35em 0.75em 0.625em;}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;}progress{vertical-align:baseline;}textarea{overflow:auto;}[type=\\\"checkbox\\\"],[type=\\\"radio\\\"]{box-sizing:border-box;padding:0;}[type=\\\"number\\\"]::-webkit-inner-spin-button,[type=\\\"number\\\"]::-webkit-outer-spin-button{height:auto;}[type=\\\"search\\\"]{-webkit-appearance:textfield;outline-offset:-2px;}[type=\\\"search\\\"]::-webkit-search-decoration{-webkit-appearance:none;}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;}details{display:block;}summary{display:list-item;}template{display:none;}[hidden]{display:none;}\"]);\nexports.normalize = normalize;\nvar Normalize = (0, _styledComponents.createGlobalStyle)(normalize);\nexports.Normalize = Normalize;\nvar _default = normalize;\nexports.default = _default;","//\n\nmodule.exports = function shallowEqual(objA, objB, compare, compareContext) {\n  var ret = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (ret !== void 0) {\n    return !!ret;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== \"object\" || !objA || typeof objB !== \"object\" || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n  // Test for A's keys different from B.\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n\n    ret = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (ret === false || (ret === void 0 && valueA !== valueB)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n"],"sourceRoot":""}